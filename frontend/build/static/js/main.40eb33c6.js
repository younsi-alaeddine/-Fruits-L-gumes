/*! For license information please see main.40eb33c6.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,s)=>{e.exports=s(202)},153:(e,t,s)=>{var r=s(43),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var r,n={},c=null,d=null;for(r in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!o.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:d,props:n,_owner:l.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},202:(e,t)=>{var s=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function g(e,t,s){this.props=e,this.context=t,this.refs=f,this.updater=s||p}function b(){}function y(e,t,s){this.props=e,this.context=t,this.refs=f,this.updater=s||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var v=y.prototype=new b;v.constructor=y,x(v,g.prototype),v.isPureReactComponent=!0;var j=Array.isArray,N=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var a,n={},i=null,l=null;if(null!=t)for(a in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,a)&&!k.hasOwnProperty(a)&&(n[a]=t[a]);var o=arguments.length-2;if(1===o)n.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(a in o=e.defaultProps)void 0===n[a]&&(n[a]=o[a]);return{$$typeof:s,type:e,key:i,ref:l,props:n,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var E=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,n,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case s:case r:o=!0}}if(o)return i=i(o=e),e=""===n?"."+_(o,0):n,j(i)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),T(i,t,a,"",function(e){return e})):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=""===n?".":n+":",j(e))for(var c=0;c<e.length;c++){var d=n+_(l=e[c],c);o+=T(l,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)o+=T(l=l.value,t,a,d=n+_(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function R(e,t,s){if(null==e)return e;var r=[],a=0;return T(e,r,"","",function(e){return t.call(s,e,a++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},P={transition:null},O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:P,ReactCurrentOwner:w};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,s){R(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=i,t.PureComponent=y,t.StrictMode=n,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=x({},e.props),n=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=w.current),void 0!==t.key&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)N.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:s,type:e.type,key:n,ref:i,props:a,_owner:l}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,s){return A.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,s){return A.current.useReducer(e,t,s)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return A.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var r=s-1>>>1,a=e[r];if(!(0<n(a,t)))break e;e[r]=t,e[s]=a,s=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var l=2*(r+1)-1,o=e[l],c=l+1,d=e[c];if(0>n(o,s))c<a&&0>n(d,o)?(e[r]=d,e[c]=s,r=c):(e[r]=o,e[l]=s,r=l);else{if(!(c<a&&0>n(d,s)))break e;e[r]=d,e[c]=s,r=c}}}return t}function n(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,p=!1,x=!1,f=!1,g="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,s(c,t)}t=r(d)}}function j(e){if(f=!1,v(e),!x)if(null!==r(c))x=!0,P(N);else{var t=r(d);null!==t&&O(j,t.startTime-e)}}function N(e,s){x=!1,f&&(f=!1,b(C),C=-1),p=!0;var n=m;try{for(v(s),h=r(c);null!==h&&(!(h.expirationTime>s)||e&&!T());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var l=i(h.expirationTime<=s);s=t.unstable_now(),"function"===typeof l?h.callback=l:h===r(c)&&a(c),v(s)}else a(c);h=r(c)}if(null!==h)var o=!0;else{var u=r(d);null!==u&&O(j,u.startTime-s),o=!1}return o}finally{h=null,m=n,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,S=null,C=-1,E=5,_=-1;function T(){return!(t.unstable_now()-_<E)}function R(){if(null!==S){var e=t.unstable_now();_=e;var s=!0;try{s=S(!0,e)}finally{s?w():(k=!1,S=null)}}else k=!1}if("function"===typeof y)w=function(){y(R)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,A=M.port2;M.port1.onmessage=R,w=function(){A.postMessage(null)}}else w=function(){g(R,0)};function P(e){S=e,k||(k=!0,w())}function O(e,s){C=g(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,P(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var s=m;m=t;try{return e()}finally{m=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=m;m=e;try{return t()}finally{m=s}},t.unstable_scheduleCallback=function(e,a,n){var i=t.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?i+n:i:n=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:n,expirationTime:l=n+l,sortIndex:-1},n>i?(e.sortIndex=n,s(d,e),null===r(c)&&e===r(d)&&(f?(b(C),C=-1):f=!0,O(j,n-i))):(e.sortIndex=l,s(c,e),x||p||(x=!0,P(N))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=m;return function(){var s=m;m=t;try{return e.apply(this,arguments)}finally{m=s}}}},391:(e,t,s)=>{var r=s(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,s)=>{e.exports=s(153)},730:(e,t,s)=>{var r=s(43),a=s(853);function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function x(e,t,s,r,a,n,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=i}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new x(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,s,r){var a=f.hasOwnProperty(t)?f[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,r){if(null===t||"undefined"===typeof t||function(e,t,s,r){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,r))return!0;if(r)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,a,r)&&(s=null),r||null===a?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=null===s?3!==a.type&&"":s:(t=a.attributeName,r=a.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(a=a.type)||4===a&&!0===s?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var I,L=Object.assign;function F(e){if(void 0===I)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var z=!1;function V(e,t){if(!e||z)return"";z=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),n=r.stack.split("\n"),i=a.length-1,l=n.length-1;1<=i&&0<=l&&a[i]!==n[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==n[l]){if(1!==i||1!==l)do{if(i--,0>--l||a[i]!==n[l]){var o="\n"+a[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{z=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case N:return"Portal";case S:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return H(e(t))}catch(s){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var a=s.get,n=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==s&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var s=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function K(e,t){var s=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;s=q(null!=t.value?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){X(e,t);var s=q(t.value),r=t.type;if(null!=s)"number"===r?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,s):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function ee(e,t,s){"number"===t&&Q(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var te=Array.isArray;function se(e,t,s,r){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&r&&(e[s].defaultSelected=!0)}else{for(s=""+q(s),t=null,a=0;a<e.length;a++){if(e[a].value===s)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(n(92));if(te(s)){if(1<s.length)throw Error(n(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:q(s)}}function ne(e,t){var s=q(t.value),r=q(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function xe(e,t,s){return null==t||"boolean"===typeof t||""===t?"":s||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function fe(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var r=0===s.indexOf("--"),a=xe(s,t[s],r);"float"===s&&(s="cssFloat"),r?e.setProperty(s,a):e[s]=a}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(n(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,we=null,ke=null;function Se(e){if(e=ba(e)){if("function"!==typeof Ne)throw Error(n(280));var t=e.stateNode;t&&(t=va(t),Ne(e.stateNode,e.type,t))}}function Ce(e){we?ke?ke.push(e):ke=[e]:we=e}function Ee(){if(we){var e=we,t=ke;if(ke=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function _e(e,t){return e(t)}function Te(){}var Re=!1;function Me(e,t,s){if(Re)return e(t,s);Re=!0;try{return _e(e,t,s)}finally{Re=!1,(null!==we||null!==ke)&&(Te(),Ee())}}function Ae(e,t){var s=e.stateNode;if(null===s)return null;var r=va(s);if(null===r)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(n(231,t,typeof s));return s}var Pe=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){Pe=!1}function De(e,t,s,r,a,n,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(d){this.onError(d)}}var Ie=!1,Le=null,Fe=!1,ze=null,Ve={onError:function(e){Ie=!0,Le=e}};function Ue(e,t,s,r,a,n,i,l,o){Ie=!1,Le=null,De.apply(Ve,arguments)}function He(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(He(e)!==e)throw Error(n(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(n(188));return t!==e?null:e}for(var s=e,r=t;;){var a=s.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){s=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return qe(a),e;if(i===r)return qe(a),t;i=i.sibling}throw Error(n(188))}if(s.return!==r.return)s=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===s){l=!0,s=a,r=i;break}if(o===r){l=!0,r=a,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,r=a;break}if(o===r){l=!0,r=i,s=a;break}o=o.sibling}if(!l)throw Error(n(189))}}if(s.alternate!==r)throw Error(n(190))}if(3!==s.tag)throw Error(n(188));return s.stateNode.current===s?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ye=a.unstable_scheduleCallback,Qe=a.unstable_cancelCallback,$e=a.unstable_shouldYield,Ke=a.unstable_requestPaint,Xe=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,st=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,nt=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ot|0)|0},lt=Math.log,ot=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var s=e.pendingLanes;if(0===s)return 0;var r=0,a=e.suspendedLanes,n=e.pingedLanes,i=268435455&s;if(0!==i){var l=i&~a;0!==l?r=ut(l):0!==(n&=i)&&(r=ut(n))}else 0!==(i=s&~a)?r=ut(i):0!==n&&(r=ut(n));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(n=t&-t)||16===a&&0!==(4194240&n)))return t;if(0!==(4&r)&&(r|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(s=31-it(t)),r|=e[s],t&=~a;return r}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function xt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function gt(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=s}function bt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-it(s),a=1<<r;a&t|e[r]&t&&(e[r]|=t),s&=~a}}var yt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,Nt,wt,kt,St,Ct=!1,Et=[],_t=null,Tt=null,Rt=null,Mt=new Map,At=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function It(e,t,s,r,a,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:n,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ga(e.target);if(null!==t){var s=He(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=Be(s)))return e.blockedOn=t,void St(e.priority,function(){wt(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=ba(s))&&Nt(t),e.blockedOn=s,!1;var r=new(s=e.nativeEvent).constructor(s.type,s);ve=r,s.target.dispatchEvent(r),ve=null,t.shift()}return!0}function zt(e,t,s){Ft(e)&&s.delete(t)}function Vt(){Ct=!1,null!==_t&&Ft(_t)&&(_t=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Mt.forEach(zt),At.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Vt)))}function Ht(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var s=1;s<Et.length;s++){var r=Et[s];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Ut(_t,e),null!==Tt&&Ut(Tt,e),null!==Rt&&Ut(Rt,e),Mt.forEach(t),At.forEach(t),s=0;s<Pt.length;s++)(r=Pt[s]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(s=Pt[0]).blockedOn;)Lt(s),null===s.blockedOn&&Pt.shift()}var Bt=v.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,s,r){var a=yt,n=Bt.transition;Bt.transition=null;try{yt=1,Yt(e,t,s,r)}finally{yt=a,Bt.transition=n}}function Gt(e,t,s,r){var a=yt,n=Bt.transition;Bt.transition=null;try{yt=4,Yt(e,t,s,r)}finally{yt=a,Bt.transition=n}}function Yt(e,t,s,r){if(qt){var a=$t(e,t,s,r);if(null===a)Br(e,t,r,Qt,s),Dt(e,r);else if(function(e,t,s,r,a){switch(t){case"focusin":return _t=It(_t,e,t,s,r,a),!0;case"dragenter":return Tt=It(Tt,e,t,s,r,a),!0;case"mouseover":return Rt=It(Rt,e,t,s,r,a),!0;case"pointerover":var n=a.pointerId;return Mt.set(n,It(Mt.get(n)||null,e,t,s,r,a)),!0;case"gotpointercapture":return n=a.pointerId,At.set(n,It(At.get(n)||null,e,t,s,r,a)),!0}return!1}(a,e,t,s,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var n=ba(a);if(null!==n&&jt(n),null===(n=$t(e,t,s,r))&&Br(e,t,r,Qt,s),n===a)break;a=n}null!==a&&r.stopPropagation()}else Br(e,t,r,null,s)}}var Qt=null;function $t(e,t,s,r){if(Qt=null,null!==(e=ga(e=je(r))))if(null===(t=He(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case st:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function es(){if(Zt)return Zt;var e,t,s=Jt,r=s.length,a="value"in Xt?Xt.value:Xt.textContent,n=a.length;for(e=0;e<r&&s[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&s[r-t]===a[n-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ss(){return!0}function rs(){return!1}function as(e){function t(t,s,r,a,n){for(var i in this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=a,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?ss:rs,this.isPropagationStopped=rs,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),t}var ns,is,ls,os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=as(os),ds=L({},os,{view:0,detail:0}),us=as(ds),hs=L({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ls&&(ls&&"mousemove"===e.type?(ns=e.screenX-ls.screenX,is=e.screenY-ls.screenY):is=ns=0,ls=e),ns)},movementY:function(e){return"movementY"in e?e.movementY:is}}),ms=as(hs),ps=as(L({},hs,{dataTransfer:0})),xs=as(L({},ds,{relatedTarget:0})),fs=as(L({},os,{animationName:0,elapsedTime:0,pseudoElement:0})),gs=L({},os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bs=as(gs),ys=as(L({},os,{data:0})),vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},js={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ns={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ws(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ns[e])&&!!t[e]}function ks(){return ws}var Ss=L({},ds,{key:function(e){if(e.key){var t=vs[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ts(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?js[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(e){return"keypress"===e.type?ts(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ts(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cs=as(Ss),Es=as(L({},hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_s=as(L({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks})),Ts=as(L({},os,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rs=L({},hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ms=as(Rs),As=[9,13,27,32],Ps=d&&"CompositionEvent"in window,Os=null;d&&"documentMode"in document&&(Os=document.documentMode);var Ds=d&&"TextEvent"in window&&!Os,Is=d&&(!Ps||Os&&8<Os&&11>=Os),Ls=String.fromCharCode(32),Fs=!1;function zs(e,t){switch(e){case"keyup":return-1!==As.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vs(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Us=!1;var Hs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hs[e.type]:"textarea"===t}function qs(e,t,s,r){Ce(r),0<(t=Wr(t,"onChange")).length&&(s=new cs("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var Ws=null,Gs=null;function Ys(e){Lr(e,0)}function Qs(e){if(Y(ya(e)))return e}function $s(e,t){if("change"===e)return t}var Ks=!1;if(d){var Xs;if(d){var Js="oninput"in document;if(!Js){var Zs=document.createElement("div");Zs.setAttribute("oninput","return;"),Js="function"===typeof Zs.oninput}Xs=Js}else Xs=!1;Ks=Xs&&(!document.documentMode||9<document.documentMode)}function er(){Ws&&(Ws.detachEvent("onpropertychange",tr),Gs=Ws=null)}function tr(e){if("value"===e.propertyName&&Qs(Gs)){var t=[];qs(t,Gs,e,je(e)),Me(Ys,t)}}function sr(e,t,s){"focusin"===e?(er(),Gs=s,(Ws=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qs(Gs)}function ar(e,t){if("click"===e)return Qs(t)}function nr(e,t){if("input"===e||"change"===e)return Qs(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var a=s[r];if(!u.call(t,a)||!ir(e[a],t[a]))return!1}return!0}function or(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var s,r=or(e);for(e=0;r;){if(3===r.nodeType){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=or(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ur(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(r){s=!1}if(!s)break;t=Q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=ur(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&dr(s.ownerDocument.documentElement,s)){if(null!==r&&hr(s))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=s.textContent.length,n=Math.min(r.start,a);r=void 0===r.end?n:Math.min(r.end,a),!e.extend&&n>r&&(a=r,r=n,n=a),a=cr(s,n);var i=cr(s,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),n>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=d&&"documentMode"in document&&11>=document.documentMode,xr=null,fr=null,gr=null,br=!1;function yr(e,t,s){var r=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;br||null==xr||xr!==Q(r)||("selectionStart"in(r=xr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&lr(gr,r)||(gr=r,0<(r=Wr(fr,"onSelect")).length&&(t=new cs("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=xr)))}function vr(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var jr={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionend:vr("Transition","TransitionEnd")},Nr={},wr={};function kr(e){if(Nr[e])return Nr[e];if(!jr[e])return e;var t,s=jr[e];for(t in s)if(s.hasOwnProperty(t)&&t in wr)return Nr[e]=s[t];return e}d&&(wr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var Sr=kr("animationend"),Cr=kr("animationiteration"),Er=kr("animationstart"),_r=kr("transitionend"),Tr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Tr.set(e,t),o(t,[e])}for(var Ar=0;Ar<Rr.length;Ar++){var Pr=Rr[Ar];Mr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Mr(Sr,"onAnimationEnd"),Mr(Cr,"onAnimationIteration"),Mr(Er,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(_r,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Ir(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,r,a,i,l,o,c){if(Ue.apply(this,arguments),Ie){if(!Ie)throw Error(n(198));var d=Le;Ie=!1,Le=null,Fe||(Fe=!0,ze=d)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var r=e[s],a=r.event;r=r.listeners;e:{var n=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==n&&a.isPropagationStopped())break e;Ir(a,l,c),n=o}else for(i=0;i<r.length;i++){if(o=(l=r[i]).instance,c=l.currentTarget,l=l.listener,o!==n&&a.isPropagationStopped())break e;Ir(a,l,c),n=o}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function Fr(e,t){var s=t[pa];void 0===s&&(s=t[pa]=new Set);var r=e+"__bubble";s.has(r)||(Hr(t,e,2,!1),s.add(r))}function zr(e,t,s){var r=0;t&&(r|=4),Hr(s,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Vr]){e[Vr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function Hr(e,t,s,r){switch(Kt(t)){case 1:var a=Wt;break;case 4:a=Gt;break;default:a=Yt}s=a.bind(null,t,s,e),a=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):void 0!==a?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Br(e,t,s,r,a){var n=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===a||8===o.nodeType&&o.parentNode===a))return;i=i.return}for(;null!==l;){if(null===(i=ga(l)))return;if(5===(o=i.tag)||6===o){r=n=i;continue e}l=l.parentNode}}r=r.return}Me(function(){var r=n,a=je(s),i=[];e:{var l=Tr.get(e);if(void 0!==l){var o=cs,c=e;switch(e){case"keypress":if(0===ts(s))break e;case"keydown":case"keyup":o=Cs;break;case"focusin":c="focus",o=xs;break;case"focusout":c="blur",o=xs;break;case"beforeblur":case"afterblur":o=xs;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=ps;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=_s;break;case Sr:case Cr:case Er:o=fs;break;case _r:o=Ts;break;case"scroll":o=us;break;case"wheel":o=Ms;break;case"copy":case"cut":case"paste":o=bs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Es}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==l?l+"Capture":null:l;d=[];for(var m,p=r;null!==p;){var x=(m=p).stateNode;if(5===m.tag&&null!==x&&(m=x,null!==h&&(null!=(x=Ae(p,h))&&d.push(qr(p,x,m)))),u)break;p=p.return}0<d.length&&(l=new o(l,c,null,s,a),i.push({event:l,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||s===ve||!(c=s.relatedTarget||s.fromElement)||!ga(c)&&!c[ma])&&(o||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=r,null!==(c=(c=s.relatedTarget||s.toElement)?ga(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=r),o!==c)){if(d=ms,x="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Es,x="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==o?l:ya(o),m=null==c?l:ya(c),(l=new d(x,p+"leave",o,s,a)).target=u,l.relatedTarget=m,x=null,ga(a)===r&&((d=new d(h,p+"enter",c,s,a)).target=m,d.relatedTarget=u,x=d),u=x,o&&c)e:{for(h=c,p=0,m=d=o;m;m=Gr(m))p++;for(m=0,x=h;x;x=Gr(x))m++;for(;0<p-m;)d=Gr(d),p--;for(;0<m-p;)h=Gr(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gr(d),h=Gr(h)}d=null}else d=null;null!==o&&Yr(i,l,o,d,!1),null!==c&&null!==u&&Yr(i,u,c,d,!0)}if("select"===(o=(l=r?ya(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var f=$s;else if(Bs(l))if(Ks)f=nr;else{f=rr;var g=sr}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(f=ar);switch(f&&(f=f(e,r))?qs(i,f,s,a):(g&&g(e,l,r),"focusout"===e&&(g=l._wrapperState)&&g.controlled&&"number"===l.type&&ee(l,"number",l.value)),g=r?ya(r):window,e){case"focusin":(Bs(g)||"true"===g.contentEditable)&&(xr=g,fr=r,gr=null);break;case"focusout":gr=fr=xr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,yr(i,s,a);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":yr(i,s,a)}var b;if(Ps)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Us?zs(e,s)&&(y="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(y="onCompositionStart");y&&(Is&&"ko"!==s.locale&&(Us||"onCompositionStart"!==y?"onCompositionEnd"===y&&Us&&(b=es()):(Jt="value"in(Xt=a)?Xt.value:Xt.textContent,Us=!0)),0<(g=Wr(r,y)).length&&(y=new ys(y,e,null,s,a),i.push({event:y,listeners:g}),b?y.data=b:null!==(b=Vs(s))&&(y.data=b))),(b=Ds?function(e,t){switch(e){case"compositionend":return Vs(t);case"keypress":return 32!==t.which?null:(Fs=!0,Ls);case"textInput":return(e=t.data)===Ls&&Fs?null:e;default:return null}}(e,s):function(e,t){if(Us)return"compositionend"===e||!Ps&&zs(e,t)?(e=es(),Zt=Jt=Xt=null,Us=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Is&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(r=Wr(r,"onBeforeInput")).length&&(a=new ys("onBeforeInput","beforeinput",null,s,a),i.push({event:a,listeners:r}),a.data=b))}Lr(i,t)})}function qr(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Wr(e,t){for(var s=t+"Capture",r=[];null!==e;){var a=e,n=a.stateNode;5===a.tag&&null!==n&&(a=n,null!=(n=Ae(e,s))&&r.unshift(qr(e,n,a)),null!=(n=Ae(e,t))&&r.push(qr(e,n,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,s,r,a){for(var n=t._reactName,i=[];null!==s&&s!==r;){var l=s,o=l.alternate,c=l.stateNode;if(null!==o&&o===r)break;5===l.tag&&null!==c&&(l=c,a?null!=(o=Ae(s,n))&&i.unshift(qr(s,o,l)):a||null!=(o=Ae(s,n))&&i.push(qr(s,o,l))),s=s.return}0!==i.length&&e.push({event:t,listeners:i})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Kr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Xr(e,t,s){if(t=Kr(t),Kr(e)!==t&&s)throw Error(n(425))}function Jr(){}var Zr=null,ea=null;function ta(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sa="function"===typeof setTimeout?setTimeout:void 0,ra="function"===typeof clearTimeout?clearTimeout:void 0,aa="function"===typeof Promise?Promise:void 0,na="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof aa?function(e){return aa.resolve(null).then(e).catch(ia)}:sa;function ia(e){setTimeout(function(){throw e})}function la(e,t){var s=t,r=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&8===a.nodeType)if("/$"===(s=a.data)){if(0===r)return e.removeChild(a),void Ht(t);r--}else"$"!==s&&"$?"!==s&&"$!"!==s||r++;s=a}while(s);Ht(t)}function oa(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ua="__reactFiber$"+da,ha="__reactProps$"+da,ma="__reactContainer$"+da,pa="__reactEvents$"+da,xa="__reactListeners$"+da,fa="__reactHandles$"+da;function ga(e){var t=e[ua];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ma]||s[ua]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=ca(e);null!==e;){if(s=e[ua])return s;e=ca(e)}return t}s=(e=s).parentNode}return null}function ba(e){return!(e=e[ua]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ya(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function va(e){return e[ha]||null}var ja=[],Na=-1;function wa(e){return{current:e}}function ka(e){0>Na||(e.current=ja[Na],ja[Na]=null,Na--)}function Sa(e,t){Na++,ja[Na]=e.current,e.current=t}var Ca={},Ea=wa(Ca),_a=wa(!1),Ta=Ca;function Ra(e,t){var s=e.type.contextTypes;if(!s)return Ca;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,n={};for(a in s)n[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Aa(){ka(_a),ka(Ea)}function Pa(e,t,s){if(Ea.current!==Ca)throw Error(n(168));Sa(Ea,t),Sa(_a,s)}function Oa(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return s;for(var a in r=r.getChildContext())if(!(a in t))throw Error(n(108,B(e)||"Unknown",a));return L({},s,r)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,Ta=Ea.current,Sa(Ea,e),Sa(_a,_a.current),!0}function Ia(e,t,s){var r=e.stateNode;if(!r)throw Error(n(169));s?(e=Oa(e,t,Ta),r.__reactInternalMemoizedMergedChildContext=e,ka(_a),ka(Ea),Sa(Ea,e)):ka(_a),Sa(_a,s)}var La=null,Fa=!1,za=!1;function Va(e){null===La?La=[e]:La.push(e)}function Ua(){if(!za&&null!==La){za=!0;var e=0,t=yt;try{var s=La;for(yt=1;e<s.length;e++){var r=s[e];do{r=r(!0)}while(null!==r)}La=null,Fa=!1}catch(a){throw null!==La&&(La=La.slice(e+1)),Ye(Ze,Ua),a}finally{yt=t,za=!1}}return null}var Ha=[],Ba=0,qa=null,Wa=0,Ga=[],Ya=0,Qa=null,$a=1,Ka="";function Xa(e,t){Ha[Ba++]=Wa,Ha[Ba++]=qa,qa=e,Wa=t}function Ja(e,t,s){Ga[Ya++]=$a,Ga[Ya++]=Ka,Ga[Ya++]=Qa,Qa=e;var r=$a;e=Ka;var a=32-it(r)-1;r&=~(1<<a),s+=1;var n=32-it(t)+a;if(30<n){var i=a-a%5;n=(r&(1<<i)-1).toString(32),r>>=i,a-=i,$a=1<<32-it(t)+a|s<<a|r,Ka=n+e}else $a=1<<n|s<<a|r,Ka=e}function Za(e){null!==e.return&&(Xa(e,1),Ja(e,1,0))}function en(e){for(;e===qa;)qa=Ha[--Ba],Ha[Ba]=null,Wa=Ha[--Ba],Ha[Ba]=null;for(;e===Qa;)Qa=Ga[--Ya],Ga[Ya]=null,Ka=Ga[--Ya],Ga[Ya]=null,$a=Ga[--Ya],Ga[Ya]=null}var tn=null,sn=null,rn=!1,an=null;function nn(e,t){var s=Mc(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function ln(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,tn=e,sn=oa(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,tn=e,sn=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==Qa?{id:$a,overflow:Ka}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=Mc(18,null,null,0)).stateNode=t,s.return=e,e.child=s,tn=e,sn=null,!0);default:return!1}}function on(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cn(e){if(rn){var t=sn;if(t){var s=t;if(!ln(e,t)){if(on(e))throw Error(n(418));t=oa(s.nextSibling);var r=tn;t&&ln(e,t)?nn(r,s):(e.flags=-4097&e.flags|2,rn=!1,tn=e)}}else{if(on(e))throw Error(n(418));e.flags=-4097&e.flags|2,rn=!1,tn=e}}}function dn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;tn=e}function un(e){if(e!==tn)return!1;if(!rn)return dn(e),rn=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ta(e.type,e.memoizedProps)),t&&(t=sn)){if(on(e))throw hn(),Error(n(418));for(;t;)nn(e,t),t=oa(t.nextSibling)}if(dn(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){sn=oa(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}sn=null}}else sn=tn?oa(e.stateNode.nextSibling):null;return!0}function hn(){for(var e=sn;e;)e=oa(e.nextSibling)}function mn(){sn=tn=null,rn=!1}function pn(e){null===an?an=[e]:an.push(e)}var xn=v.ReactCurrentBatchConfig;function fn(e,t,s){if(null!==(e=s.ref)&&"function"!==typeof e&&"object"!==typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(n(309));var r=s.stateNode}if(!r)throw Error(n(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(n(284));if(!s._owner)throw Error(n(290,e))}return e}function gn(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bn(e){return(0,e._init)(e._payload)}function yn(e){function t(t,s){if(e){var r=t.deletions;null===r?(t.deletions=[s],t.flags|=16):r.push(s)}}function s(s,r){if(!e)return null;for(;null!==r;)t(s,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function i(t,s,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<s?(t.flags|=2,s):r:(t.flags|=2,s):(t.flags|=1048576,s)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,s,r){return null===t||6!==t.tag?((t=Lc(s,e.mode,r)).return=e,t):((t=a(t,s)).return=e,t)}function c(e,t,s,r){var n=s.type;return n===w?u(e,t,s.props.children,r,s.key):null!==t&&(t.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===A&&bn(n)===t.type)?((r=a(t,s.props)).ref=fn(e,t,s),r.return=e,r):((r=Oc(s.type,s.key,s.props,null,e.mode,r)).ref=fn(e,t,s),r.return=e,r)}function d(e,t,s,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Fc(s,e.mode,r)).return=e,t):((t=a(t,s.children||[])).return=e,t)}function u(e,t,s,r,n){return null===t||7!==t.tag?((t=Dc(s,e.mode,r,n)).return=e,t):((t=a(t,s)).return=e,t)}function h(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(s=Oc(t.type,t.key,t.props,null,e.mode,s)).ref=fn(e,null,t),s.return=e,s;case N:return(t=Fc(t,e.mode,s)).return=e,t;case A:return h(e,(0,t._init)(t._payload),s)}if(te(t)||D(t))return(t=Dc(t,e.mode,s,null)).return=e,t;gn(e,t)}return null}function m(e,t,s,r){var a=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s)return null!==a?null:o(e,t,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return s.key===a?c(e,t,s,r):null;case N:return s.key===a?d(e,t,s,r):null;case A:return m(e,t,(a=s._init)(s._payload),r)}if(te(s)||D(s))return null!==a?null:u(e,t,s,r,null);gn(e,s)}return null}function p(e,t,s,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return o(t,e=e.get(s)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return c(t,e=e.get(null===r.key?s:r.key)||null,r,a);case N:return d(t,e=e.get(null===r.key?s:r.key)||null,r,a);case A:return p(e,t,s,(0,r._init)(r._payload),a)}if(te(r)||D(r))return u(t,e=e.get(s)||null,r,a,null);gn(t,r)}return null}function x(a,n,l,o){for(var c=null,d=null,u=n,x=n=0,f=null;null!==u&&x<l.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var g=m(a,u,l[x],o);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(a,u),n=i(g,n,x),null===d?c=g:d.sibling=g,d=g,u=f}if(x===l.length)return s(a,u),rn&&Xa(a,x),c;if(null===u){for(;x<l.length;x++)null!==(u=h(a,l[x],o))&&(n=i(u,n,x),null===d?c=u:d.sibling=u,d=u);return rn&&Xa(a,x),c}for(u=r(a,u);x<l.length;x++)null!==(f=p(u,a,x,l[x],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),n=i(f,n,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(a,e)}),rn&&Xa(a,x),c}function f(a,l,o,c){var d=D(o);if("function"!==typeof d)throw Error(n(150));if(null==(o=d.call(o)))throw Error(n(151));for(var u=d=null,x=l,f=l=0,g=null,b=o.next();null!==x&&!b.done;f++,b=o.next()){x.index>f?(g=x,x=null):g=x.sibling;var y=m(a,x,b.value,c);if(null===y){null===x&&(x=g);break}e&&x&&null===y.alternate&&t(a,x),l=i(y,l,f),null===u?d=y:u.sibling=y,u=y,x=g}if(b.done)return s(a,x),rn&&Xa(a,f),d;if(null===x){for(;!b.done;f++,b=o.next())null!==(b=h(a,b.value,c))&&(l=i(b,l,f),null===u?d=b:u.sibling=b,u=b);return rn&&Xa(a,f),d}for(x=r(a,x);!b.done;f++,b=o.next())null!==(b=p(x,a,f,b.value,c))&&(e&&null!==b.alternate&&x.delete(null===b.key?f:b.key),l=i(b,l,f),null===u?d=b:u.sibling=b,u=b);return e&&x.forEach(function(e){return t(a,e)}),rn&&Xa(a,f),d}return function e(r,n,i,o){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=n;null!==d;){if(d.key===c){if((c=i.type)===w){if(7===d.tag){s(r,d.sibling),(n=a(d,i.props.children)).return=r,r=n;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&bn(c)===d.type){s(r,d.sibling),(n=a(d,i.props)).ref=fn(r,d,i),n.return=r,r=n;break e}s(r,d);break}t(r,d),d=d.sibling}i.type===w?((n=Dc(i.props.children,r.mode,o,i.key)).return=r,r=n):((o=Oc(i.type,i.key,i.props,null,r.mode,o)).ref=fn(r,n,i),o.return=r,r=o)}return l(r);case N:e:{for(d=i.key;null!==n;){if(n.key===d){if(4===n.tag&&n.stateNode.containerInfo===i.containerInfo&&n.stateNode.implementation===i.implementation){s(r,n.sibling),(n=a(n,i.children||[])).return=r,r=n;break e}s(r,n);break}t(r,n),n=n.sibling}(n=Fc(i,r.mode,o)).return=r,r=n}return l(r);case A:return e(r,n,(d=i._init)(i._payload),o)}if(te(i))return x(r,n,i,o);if(D(i))return f(r,n,i,o);gn(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==n&&6===n.tag?(s(r,n.sibling),(n=a(n,i)).return=r,r=n):(s(r,n),(n=Lc(i,r.mode,o)).return=r,r=n),l(r)):s(r,n)}}var vn=yn(!0),jn=yn(!1),Nn=wa(null),wn=null,kn=null,Sn=null;function Cn(){Sn=kn=wn=null}function En(e){var t=Nn.current;ka(Nn),e._currentValue=t}function _n(e,t,s){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function Tn(e,t){wn=e,Sn=kn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bl=!0),e.firstContext=null)}function Rn(e){var t=e._currentValue;if(Sn!==e)if(e={context:e,memoizedValue:t,next:null},null===kn){if(null===wn)throw Error(n(308));kn=e,wn.dependencies={lanes:0,firstContext:e}}else kn=kn.next=e;return t}var Mn=null;function An(e){null===Mn?Mn=[e]:Mn.push(e)}function Pn(e,t,s,r){var a=t.interleaved;return null===a?(s.next=s,An(t)):(s.next=a.next,a.next=s),t.interleaved=s,On(e,r)}function On(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var Dn=!1;function In(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ln(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zn(e,t,s){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_o)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,On(e,s)}return null===(a=r.interleaved)?(t.next=t,An(r)):(t.next=a.next,a.next=t),r.interleaved=t,On(e,s)}function Vn(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&s))){var r=t.lanes;s|=r&=e.pendingLanes,t.lanes=s,bt(e,s)}}function Un(e,t){var s=e.updateQueue,r=e.alternate;if(null!==r&&s===(r=r.updateQueue)){var a=null,n=null;if(null!==(s=s.firstBaseUpdate)){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===n?a=n=i:n=n.next=i,s=s.next}while(null!==s);null===n?a=n=t:n=n.next=t}else a=n=t;return s={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:n,shared:r.shared,effects:r.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Hn(e,t,s,r){var a=e.updateQueue;Dn=!1;var n=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?n=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==n){var u=a.baseState;for(i=0,d=c=o=null,l=n;;){var h=l.lane,m=l.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,x=l;switch(h=t,m=s,x.tag){case 1:if("function"===typeof(p=x.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=x.payload)?p.call(m,u,h):p)||void 0===h)break e;u=L({},u,h);break e;case 2:Dn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=m,o=u):d=d.next=m,i|=h;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(h=l).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(o=u),a.baseState=o,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===n&&(a.shared.lanes=0);Io|=i,e.lanes=i,e.memoizedState=u}}function Bn(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=s,"function"!==typeof a)throw Error(n(191,a));a.call(r)}}}var qn={},Wn=wa(qn),Gn=wa(qn),Yn=wa(qn);function Qn(e){if(e===qn)throw Error(n(174));return e}function $n(e,t){switch(Sa(Yn,t),Sa(Gn,e),Sa(Wn,qn),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Wn),Sa(Wn,t)}function Kn(){ka(Wn),ka(Gn),ka(Yn)}function Xn(e){Qn(Yn.current);var t=Qn(Wn.current),s=oe(t,e.type);t!==s&&(Sa(Gn,e),Sa(Wn,s))}function Jn(e){Gn.current===e&&(ka(Wn),ka(Gn))}var Zn=wa(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function si(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=v.ReactCurrentDispatcher,ai=v.ReactCurrentBatchConfig,ni=0,ii=null,li=null,oi=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(n(321))}function pi(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ir(e[s],t[s]))return!1;return!0}function xi(e,t,s,r,a,i){if(ni=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Ji:Zi,e=s(r,a),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(n(301));i+=1,oi=li=null,t.updateQueue=null,ri.current=el,e=s(r,a)}while(di)}if(ri.current=Xi,t=null!==li&&null!==li.next,ni=0,oi=li=ii=null,ci=!1,t)throw Error(n(300));return e}function fi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oi?ii.memoizedState=oi=e:oi=oi.next=e,oi}function bi(){if(null===li){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===oi?ii.memoizedState:oi.next;if(null!==t)oi=t,li=e;else{if(null===e)throw Error(n(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===oi?ii.memoizedState=oi=e:oi=oi.next=e}return oi}function yi(e,t){return"function"===typeof t?t(e):t}function vi(e){var t=bi(),s=t.queue;if(null===s)throw Error(n(311));s.lastRenderedReducer=e;var r=li,a=r.baseQueue,i=s.pending;if(null!==i){if(null!==a){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,s.pending=null}if(null!==a){i=a.next,r=r.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ni&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=h,l=r):c=c.next=h,ii.lanes|=u,Io|=u}d=d.next}while(null!==d&&d!==i);null===c?l=r:c.next=o,ir(r,t.memoizedState)||(bl=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,s.lastRenderedState=r}if(null!==(e=s.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Io|=i,a=a.next}while(a!==e)}else null===a&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function ji(e){var t=bi(),s=t.queue;if(null===s)throw Error(n(311));s.lastRenderedReducer=e;var r=s.dispatch,a=s.pending,i=t.memoizedState;if(null!==a){s.pending=null;var l=a=a.next;do{i=e(i,l.action),l=l.next}while(l!==a);ir(i,t.memoizedState)||(bl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),s.lastRenderedState=i}return[i,r]}function Ni(){}function wi(e,t){var s=ii,r=bi(),a=t(),i=!ir(r.memoizedState,a);if(i&&(r.memoizedState=a,bl=!0),r=r.queue,Di(Ci.bind(null,s,r,e),[e]),r.getSnapshot!==t||i||null!==oi&&1&oi.memoizedState.tag){if(s.flags|=2048,Ri(9,Si.bind(null,s,r,a,t),void 0,null),null===To)throw Error(n(349));0!==(30&ni)||ki(s,t,a)}return a}function ki(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function Si(e,t,s,r){t.value=s,t.getSnapshot=r,Ei(t)&&_i(e)}function Ci(e,t,s){return s(function(){Ei(t)&&_i(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ir(e,s)}catch(r){return!0}}function _i(e){var t=On(e,1);null!==t&&sc(t,e,1,-1)}function Ti(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[t.memoizedState,e]}function Ri(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e),e}function Mi(){return bi().memoizedState}function Ai(e,t,s,r){var a=gi();ii.flags|=e,a.memoizedState=Ri(1|t,s,void 0,void 0===r?null:r)}function Pi(e,t,s,r){var a=bi();r=void 0===r?null:r;var n=void 0;if(null!==li){var i=li.memoizedState;if(n=i.destroy,null!==r&&pi(r,i.deps))return void(a.memoizedState=Ri(t,s,n,r))}ii.flags|=e,a.memoizedState=Ri(1|t,s,n,r)}function Oi(e,t){return Ai(8390656,8,e,t)}function Di(e,t){return Pi(2048,8,e,t)}function Ii(e,t){return Pi(4,2,e,t)}function Li(e,t){return Pi(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Pi(4,4,Fi.bind(null,t,e),s)}function Vi(){}function Ui(e,t){var s=bi();t=void 0===t?null:t;var r=s.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function Hi(e,t){var s=bi();t=void 0===t?null:t;var r=s.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function Bi(e,t,s){return 0===(21&ni)?(e.baseState&&(e.baseState=!1,bl=!0),e.memoizedState=s):(ir(s,t)||(s=xt(),ii.lanes|=s,Io|=s,e.baseState=!0),t)}function qi(e,t){var s=yt;yt=0!==s&&4>s?s:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{yt=s,ai.transition=r}}function Wi(){return bi().memoizedState}function Gi(e,t,s){var r=tc(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Qi(e))$i(t,s);else if(null!==(s=Pn(e,t,s,r))){sc(s,e,r,ec()),Ki(s,t,r)}}function Yi(e,t,s){var r=tc(e),a={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Qi(e))$i(t,a);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=n(i,s);if(a.hasEagerState=!0,a.eagerState=l,ir(l,i)){var o=t.interleaved;return null===o?(a.next=a,An(t)):(a.next=o.next,o.next=a),void(t.interleaved=a)}}catch(c){}null!==(s=Pn(e,t,a,r))&&(sc(s,e,r,a=ec()),Ki(s,t,r))}}function Qi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function $i(e,t){di=ci=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Ki(e,t,s){if(0!==(4194240&s)){var r=t.lanes;s|=r&=e.pendingLanes,t.lanes=s,bt(e,s)}}var Xi={readContext:Rn,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Ji={readContext:Rn,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Rn,useEffect:Oi,useImperativeHandle:function(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Ai(4194308,4,Fi.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ai(4,2,e,t)},useMemo:function(e,t){var s=gi();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=gi();return t=void 0!==s?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Ti,useDebugValue:Vi,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=qi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=ii,a=gi();if(rn){if(void 0===s)throw Error(n(407));s=s()}else{if(s=t(),null===To)throw Error(n(349));0!==(30&ni)||ki(r,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,Oi(Ci.bind(null,r,i,e),[e]),r.flags|=2048,Ri(9,Si.bind(null,r,i,s,t),void 0,null),s},useId:function(){var e=gi(),t=To.identifierPrefix;if(rn){var s=Ka;t=":"+t+"R"+(s=($a&~(1<<32-it($a)-1)).toString(32)+s),0<(s=ui++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Rn,useCallback:Ui,useContext:Rn,useEffect:Di,useImperativeHandle:zi,useInsertionEffect:Ii,useLayoutEffect:Li,useMemo:Hi,useReducer:vi,useRef:Mi,useState:function(){return vi(yi)},useDebugValue:Vi,useDeferredValue:function(e){return Bi(bi(),li.memoizedState,e)},useTransition:function(){return[vi(yi)[0],bi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Wi,unstable_isNewReconciler:!1},el={readContext:Rn,useCallback:Ui,useContext:Rn,useEffect:Di,useImperativeHandle:zi,useInsertionEffect:Ii,useLayoutEffect:Li,useMemo:Hi,useReducer:ji,useRef:Mi,useState:function(){return ji(yi)},useDebugValue:Vi,useDeferredValue:function(e){var t=bi();return null===li?t.memoizedState=e:Bi(t,li.memoizedState,e)},useTransition:function(){return[ji(yi)[0],bi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Wi,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){for(var s in t=L({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function sl(e,t,s,r){s=null===(s=s(r,t=e.memoizedState))||void 0===s?t:L({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var rl={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=ec(),a=tc(e),n=Fn(r,a);n.payload=t,void 0!==s&&null!==s&&(n.callback=s),null!==(t=zn(e,n,a))&&(sc(t,e,a,r),Vn(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=ec(),a=tc(e),n=Fn(r,a);n.tag=1,n.payload=t,void 0!==s&&null!==s&&(n.callback=s),null!==(t=zn(e,n,a))&&(sc(t,e,a,r),Vn(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ec(),r=tc(e),a=Fn(s,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=zn(e,a,r))&&(sc(t,e,r,s),Vn(t,e,r))}};function al(e,t,s,r,a,n,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,n,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(s,r)||!lr(a,n))}function nl(e,t,s){var r=!1,a=Ca,n=t.contextType;return"object"===typeof n&&null!==n?n=Rn(n):(a=Ma(t)?Ta:Ea.current,n=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ra(e,a):Ca),t=new t(s,n),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=rl,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=n),t}function il(e,t,s,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&rl.enqueueReplaceState(t,t.state,null)}function ll(e,t,s,r){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},In(e);var n=t.contextType;"object"===typeof n&&null!==n?a.context=Rn(n):(n=Ma(t)?Ta:Ea.current,a.context=Ra(e,n)),a.state=e.memoizedState,"function"===typeof(n=t.getDerivedStateFromProps)&&(sl(e,t,n,s),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&rl.enqueueReplaceState(a,a.state,null),Hn(e,s,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function ol(e,t){try{var s="",r=t;do{s+=U(r),r=r.return}while(r);var a=s}catch(n){a="\nError generating stack: "+n.message+"\n"+n.stack}return{value:e,source:t,stack:a,digest:null}}function cl(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ul="function"===typeof WeakMap?WeakMap:Map;function hl(e,t,s){(s=Fn(-1,s)).tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){qo||(qo=!0,Wo=r),dl(0,t)},s}function ml(e,t,s){(s=Fn(-1,s)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;s.payload=function(){return r(a)},s.callback=function(){dl(0,t)}}var n=e.stateNode;return null!==n&&"function"===typeof n.componentDidCatch&&(s.callback=function(){dl(0,t),"function"!==typeof r&&(null===Go?Go=new Set([this]):Go.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function pl(e,t,s){var r=e.pingCache;if(null===r){r=e.pingCache=new ul;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(s)||(a.add(s),e=Sc.bind(null,e,t,s),t.then(e,e))}function xl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fl(e,t,s,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=Fn(-1,1)).tag=2,zn(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var gl=v.ReactCurrentOwner,bl=!1;function yl(e,t,s,r){t.child=null===e?jn(t,null,s,r):vn(t,e.child,s,r)}function vl(e,t,s,r,a){s=s.render;var n=t.ref;return Tn(t,a),r=xi(e,t,s,r,n,a),s=fi(),null===e||bl?(rn&&s&&Za(t),t.flags|=1,yl(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bl(e,t,a))}function jl(e,t,s,r,a){if(null===e){var n=s.type;return"function"!==typeof n||Ac(n)||void 0!==n.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=Oc(s.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,Nl(e,t,n,r,a))}if(n=e.child,0===(e.lanes&a)){var i=n.memoizedProps;if((s=null!==(s=s.compare)?s:lr)(i,r)&&e.ref===t.ref)return Bl(e,t,a)}return t.flags|=1,(e=Pc(n,r)).ref=t.ref,e.return=t,t.child=e}function Nl(e,t,s,r,a){if(null!==e){var n=e.memoizedProps;if(lr(n,r)&&e.ref===t.ref){if(bl=!1,t.pendingProps=r=n,0===(e.lanes&a))return t.lanes=e.lanes,Bl(e,t,a);0!==(131072&e.flags)&&(bl=!0)}}return Sl(e,t,s,r,a)}function wl(e,t,s){var r=t.pendingProps,a=r.children,n=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Po,Ao),Ao|=s;else{if(0===(1073741824&s))return e=null!==n?n.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Po,Ao),Ao|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==n?n.baseLanes:s,Sa(Po,Ao),Ao|=r}else null!==n?(r=n.baseLanes|s,t.memoizedState=null):r=s,Sa(Po,Ao),Ao|=r;return yl(e,t,a,s),t.child}function kl(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Sl(e,t,s,r,a){var n=Ma(s)?Ta:Ea.current;return n=Ra(t,n),Tn(t,a),s=xi(e,t,s,r,n,a),r=fi(),null===e||bl?(rn&&r&&Za(t),t.flags|=1,yl(e,t,s,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bl(e,t,a))}function Cl(e,t,s,r,a){if(Ma(s)){var n=!0;Da(t)}else n=!1;if(Tn(t,a),null===t.stateNode)Hl(e,t),nl(t,s,r),ll(t,s,r,a),r=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=s.contextType;"object"===typeof c&&null!==c?c=Rn(c):c=Ra(t,c=Ma(s)?Ta:Ea.current);var d=s.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==r||o!==c)&&il(t,i,r,c),Dn=!1;var h=t.memoizedState;i.state=h,Hn(t,r,i,a),o=t.memoizedState,l!==r||h!==o||_a.current||Dn?("function"===typeof d&&(sl(t,s,d,r),o=t.memoizedState),(l=Dn||al(t,s,l,r,h,o,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),i.props=r,i.state=o,i.context=c,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ln(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:tl(t.type,l),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(o=s.contextType)&&null!==o?o=Rn(o):o=Ra(t,o=Ma(s)?Ta:Ea.current);var m=s.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||h!==o)&&il(t,i,r,o),Dn=!1,h=t.memoizedState,i.state=h,Hn(t,r,i,a);var p=t.memoizedState;l!==u||h!==p||_a.current||Dn?("function"===typeof m&&(sl(t,s,m,r),p=t.memoizedState),(c=Dn||al(t,s,c,r,h,p,o)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=o,r=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return El(e,t,s,r,n,a)}function El(e,t,s,r,a,n){kl(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Ia(t,s,!1),Bl(e,t,n);r=t.stateNode,gl.current=t;var l=i&&"function"!==typeof s.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=vn(t,e.child,null,n),t.child=vn(t,null,l,n)):yl(e,t,l,n),t.memoizedState=r.state,a&&Ia(t,s,!0),t.child}function _l(e){var t=e.stateNode;t.pendingContext?Pa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pa(0,t.context,!1),$n(e,t.containerInfo)}function Tl(e,t,s,r,a){return mn(),pn(a),t.flags|=256,yl(e,t,s,r),t.child}var Rl,Ml,Al,Pl,Ol={dehydrated:null,treeContext:null,retryLane:0};function Dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Il(e,t,s){var r,a=t.pendingProps,i=Zn.current,l=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sa(Zn,1&i),null===e)return cn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=a.children,e=a.fallback,l?(a=t.mode,l=t.child,o={mode:"hidden",children:o},0===(1&a)&&null!==l?(l.childLanes=0,l.pendingProps=o):l=Ic(o,a,0,null),e=Dc(e,a,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Dl(s),t.memoizedState=Ol,e):Ll(t,o));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,s,r,a,i,l){if(s)return 256&t.flags?(t.flags&=-257,Fl(e,t,l,r=cl(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Ic({mode:"visible",children:r.children},a,0,null),(i=Dc(i,a,l,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&vn(t,e.child,null,l),t.child.memoizedState=Dl(l),t.memoizedState=Ol,i);if(0===(1&t.mode))return Fl(e,t,l,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var o=r.dgst;return r=o,Fl(e,t,l,r=cl(i=Error(n(419)),r,void 0))}if(o=0!==(l&e.childLanes),bl||o){if(null!==(r=To)){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|l))?0:a)&&a!==i.retryLane&&(i.retryLane=a,On(e,a),sc(r,e,a,-1))}return xc(),Fl(e,t,l,r=cl(Error(n(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,sn=oa(a.nextSibling),tn=t,rn=!0,an=null,null!==e&&(Ga[Ya++]=$a,Ga[Ya++]=Ka,Ga[Ya++]=Qa,$a=e.id,Ka=e.overflow,Qa=t),t=Ll(t,r.children),t.flags|=4096,t)}(e,t,o,a,r,i,s);if(l){l=a.fallback,o=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&o)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Pc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?l=Pc(r,l):(l=Dc(l,o,s,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,o=null===(o=e.child.memoizedState)?Dl(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~s,t.memoizedState=Ol,a}return e=(l=e.child).sibling,a=Pc(l,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=s),a.return=t,a.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function Ll(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fl(e,t,s,r){return null!==r&&pn(r),vn(t,e.child,null,s),(e=Ll(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zl(e,t,s){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_n(e.return,t,s)}function Vl(e,t,s,r,a){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:a}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=r,n.tail=s,n.tailMode=a)}function Ul(e,t,s){var r=t.pendingProps,a=r.revealOrder,n=r.tail;if(yl(e,t,r.children,s),0!==(2&(r=Zn.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zl(e,s,t);else if(19===e.tag)zl(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sa(Zn,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;null!==s;)null!==(e=s.alternate)&&null===ei(e)&&(a=s),s=s.sibling;null===(s=a)?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Vl(t,!1,a,s,n);break;case"backwards":for(s=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Vl(t,!0,s,null,n);break;case"together":Vl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bl(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),Io|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(s=Pc(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Pc(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function ql(e,t){if(!rn)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;null!==s;)null!==s.alternate&&(r=s),s=s.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wl(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,r=0;if(t)for(var a=e.child;null!==a;)s|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)s|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function Gl(e,t,s){var r=t.pendingProps;switch(en(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(t),null;case 1:case 17:return Ma(t.type)&&Aa(),Wl(t),null;case 3:return r=t.stateNode,Kn(),ka(_a),ka(Ea),si(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(un(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==an&&(ic(an),an=null))),Ml(e,t),Wl(t),null;case 5:Jn(t);var a=Qn(Yn.current);if(s=t.type,null!==e&&null!=t.stateNode)Al(e,t,s,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(n(166));return Wl(t),null}if(e=Qn(Wn.current),un(t)){r=t.stateNode,s=t.type;var i=t.memoizedProps;switch(r[ua]=t,r[ha]=i,e=0!==(1&t.mode),s){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(a=0;a<Or.length;a++)Fr(Or[a],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":K(r,i),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fr("invalid",r);break;case"textarea":ae(r,i),Fr("invalid",r)}for(var o in be(s,i),a=null,i)if(i.hasOwnProperty(o)){var c=i[o];"children"===o?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),a=["children",""+c]):l.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Fr("scroll",r)}switch(s){case"input":G(r),Z(r,i,!0);break;case"textarea":G(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{o=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=o.createElement(s,{is:r.is}):(e=o.createElement(s),"select"===s&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,s),e[ua]=t,e[ha]=r,Rl(e,t,!1,!1),t.stateNode=e;e:{switch(o=ye(s,r),s){case"dialog":Fr("cancel",e),Fr("close",e),a=r;break;case"iframe":case"object":case"embed":Fr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Or.length;a++)Fr(Or[a],e);a=r;break;case"source":Fr("error",e),a=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),a=r;break;case"details":Fr("toggle",e),a=r;break;case"input":K(e,r),a=$(e,r),Fr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Fr("invalid",e)}for(i in be(s,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?fe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==s||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fr("scroll",e):null!=d&&y(e,i,d,o))}switch(s){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?se(e,!!r.multiple,i,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jr)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wl(t),null;case 6:if(e&&null!=t.stateNode)Pl(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(n(166));if(s=Qn(Yn.current),Qn(Wn.current),un(t)){if(r=t.stateNode,s=t.memoizedProps,r[ua]=t,(i=r.nodeValue!==s)&&null!==(e=tn))switch(e.tag){case 3:Xr(r.nodeValue,s,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,s,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===s.nodeType?s:s.ownerDocument).createTextNode(r))[ua]=t,t.stateNode=r}return Wl(t),null;case 13:if(ka(Zn),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rn&&null!==sn&&0!==(1&t.mode)&&0===(128&t.flags))hn(),mn(),t.flags|=98560,i=!1;else if(i=un(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(n(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(n(317));i[ua]=t}else mn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wl(t),i=!1}else null!==an&&(ic(an),an=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=s,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zn.current)?0===Oo&&(Oo=3):xc())),null!==t.updateQueue&&(t.flags|=4),Wl(t),null);case 4:return Kn(),Ml(e,t),null===e&&Ur(t.stateNode.containerInfo),Wl(t),null;case 10:return En(t.type._context),Wl(t),null;case 19:if(ka(Zn),null===(i=t.memoizedState))return Wl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)ql(i,!1);else{if(0!==Oo||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ei(e))){for(t.flags|=128,ql(i,!1),null!==(r=o.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;null!==s;)e=r,(i=s).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Sa(Zn,1&Zn.current|2),t.child}e=e.sibling}null!==i.tail&&Xe()>Ho&&(t.flags|=128,r=!0,ql(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(o))){if(t.flags|=128,r=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),ql(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!rn)return Wl(t),null}else 2*Xe()-i.renderingStartTime>Ho&&1073741824!==s&&(t.flags|=128,r=!0,ql(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(s=i.last)?s.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,s=Zn.current,Sa(Zn,r?1&s|2:1&s),t):(Wl(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ao)&&(Wl(t),6&t.subtreeFlags&&(t.flags|=8192)):Wl(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Yl(e,t){switch(en(t),t.tag){case 1:return Ma(t.type)&&Aa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Kn(),ka(_a),ka(Ea),si(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jn(t),null;case 13:if(ka(Zn),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));mn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(Zn),null;case 4:return Kn(),null;case 10:return En(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Rl=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Ml=function(){},Al=function(e,t,s,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Qn(Wn.current);var n,i=null;switch(s){case"input":a=$(e,a),r=$(e,r),i=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(d in be(s,r),s=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var o=a[d];for(n in o)o.hasOwnProperty(n)&&(s||(s={}),s[n]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(o=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(n in o)!o.hasOwnProperty(n)||c&&c.hasOwnProperty(n)||(s||(s={}),s[n]="");for(n in c)c.hasOwnProperty(n)&&o[n]!==c[n]&&(s||(s={}),s[n]=c[n])}else s||(i||(i=[]),i.push(d,s)),s=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fr("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Pl=function(e,t,s,r){s!==r&&(t.flags|=4)};var Ql=!1,$l=!1,Kl="function"===typeof WeakSet?WeakSet:Set,Xl=null;function Jl(e,t){var s=e.ref;if(null!==s)if("function"===typeof s)try{s(null)}catch(r){kc(e,t,r)}else s.current=null}function Zl(e,t,s){try{s()}catch(r){kc(e,t,r)}}var eo=!1;function to(e,t,s){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var n=a.destroy;a.destroy=void 0,void 0!==n&&Zl(t,s,n)}a=a.next}while(a!==r)}}function so(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function ro(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"===typeof t?t(e):t.current=e}}function ao(e){var t=e.alternate;null!==t&&(e.alternate=null,ao(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ua],delete t[ha],delete t[pa],delete t[xa],delete t[fa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function no(e){return 5===e.tag||3===e.tag||4===e.tag}function io(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||no(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lo(e,t,s){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(lo(e,t,s),e=e.sibling;null!==e;)lo(e,t,s),e=e.sibling}function oo(e,t,s){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==r&&null!==(e=e.child))for(oo(e,t,s),e=e.sibling;null!==e;)oo(e,t,s),e=e.sibling}var co=null,uo=!1;function ho(e,t,s){for(s=s.child;null!==s;)mo(e,t,s),s=s.sibling}function mo(e,t,s){if(nt&&"function"===typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(at,s)}catch(l){}switch(s.tag){case 5:$l||Jl(s,t);case 6:var r=co,a=uo;co=null,ho(e,t,s),uo=a,null!==(co=r)&&(uo?(e=co,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):co.removeChild(s.stateNode));break;case 18:null!==co&&(uo?(e=co,s=s.stateNode,8===e.nodeType?la(e.parentNode,s):1===e.nodeType&&la(e,s),Ht(e)):la(co,s.stateNode));break;case 4:r=co,a=uo,co=s.stateNode.containerInfo,uo=!0,ho(e,t,s),co=r,uo=a;break;case 0:case 11:case 14:case 15:if(!$l&&(null!==(r=s.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var n=a,i=n.destroy;n=n.tag,void 0!==i&&(0!==(2&n)||0!==(4&n))&&Zl(s,t,i),a=a.next}while(a!==r)}ho(e,t,s);break;case 1:if(!$l&&(Jl(s,t),"function"===typeof(r=s.stateNode).componentWillUnmount))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(l){kc(s,t,l)}ho(e,t,s);break;case 21:ho(e,t,s);break;case 22:1&s.mode?($l=(r=$l)||null!==s.memoizedState,ho(e,t,s),$l=r):ho(e,t,s);break;default:ho(e,t,s)}}function po(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new Kl),t.forEach(function(t){var r=_c.bind(null,e,t);s.has(t)||(s.add(t),t.then(r,r))})}}function xo(e,t){var s=t.deletions;if(null!==s)for(var r=0;r<s.length;r++){var a=s[r];try{var i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,uo=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,uo=!0;break e}o=o.return}if(null===co)throw Error(n(160));mo(i,l,a),co=null,uo=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){kc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fo(t,e),t=t.sibling}function fo(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xo(t,e),go(e),4&r){try{to(3,e,e.return),so(3,e)}catch(f){kc(e,e.return,f)}try{to(5,e,e.return)}catch(f){kc(e,e.return,f)}}break;case 1:xo(t,e),go(e),512&r&&null!==s&&Jl(s,s.return);break;case 5:if(xo(t,e),go(e),512&r&&null!==s&&Jl(s,s.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(f){kc(e,e.return,f)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,l=null!==s?s.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&X(a,i),ye(o,l);var d=ye(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];"style"===u?fe(a,h):"dangerouslySetInnerHTML"===u?ue(a,h):"children"===u?he(a,h):y(a,u,h,d)}switch(o){case"input":J(a,i);break;case"textarea":ne(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?se(a,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?se(a,!!i.multiple,i.defaultValue,!0):se(a,!!i.multiple,i.multiple?[]:"",!1))}a[ha]=i}catch(f){kc(e,e.return,f)}}break;case 6:if(xo(t,e),go(e),4&r){if(null===e.stateNode)throw Error(n(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(f){kc(e,e.return,f)}}break;case 3:if(xo(t,e),go(e),4&r&&null!==s&&s.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(f){kc(e,e.return,f)}break;case 4:default:xo(t,e),go(e);break;case 13:xo(t,e),go(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Uo=Xe())),4&r&&po(e);break;case 22:if(u=null!==s&&null!==s.memoizedState,1&e.mode?($l=(d=$l)||u,xo(t,e),$l=d):xo(t,e),go(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xl=e,u=e.child;null!==u;){for(h=Xl=u;null!==Xl;){switch(p=(m=Xl).child,m.tag){case 0:case 11:case 14:case 15:to(4,m,m.return);break;case 1:Jl(m,m.return);var x=m.stateNode;if("function"===typeof x.componentWillUnmount){r=m,s=m.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(f){kc(r,s,f)}}break;case 5:Jl(m,m.return);break;case 22:if(null!==m.memoizedState){jo(h);continue}}null!==p?(p.return=m,Xl=p):jo(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=h.stateNode,l=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=xe("display",l))}catch(f){kc(e,e.return,f)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(f){kc(e,e.return,f)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xo(t,e),go(e),4&r&&po(e);case 21:}}function go(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(no(s)){var r=s;break e}s=s.return}throw Error(n(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),oo(e,io(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;lo(e,io(e),i);break;default:throw Error(n(161))}}catch(l){kc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bo(e,t,s){Xl=e,yo(e,t,s)}function yo(e,t,s){for(var r=0!==(1&e.mode);null!==Xl;){var a=Xl,n=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Ql;if(!i){var l=a.alternate,o=null!==l&&null!==l.memoizedState||$l;l=Ql;var c=$l;if(Ql=i,($l=o)&&!c)for(Xl=a;null!==Xl;)o=(i=Xl).child,22===i.tag&&null!==i.memoizedState?No(a):null!==o?(o.return=i,Xl=o):No(a);for(;null!==n;)Xl=n,yo(n,t,s),n=n.sibling;Xl=a,Ql=l,$l=c}vo(e)}else 0!==(8772&a.subtreeFlags)&&null!==n?(n.return=a,Xl=n):vo(e)}}function vo(e){for(;null!==Xl;){var t=Xl;if(0!==(8772&t.flags)){var s=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$l||so(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$l)if(null===s)r.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:tl(t.type,s.memoizedProps);r.componentDidUpdate(a,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Bn(t,i,r);break;case 3:var l=t.updateQueue;if(null!==l){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}Bn(t,l,s)}break;case 5:var o=t.stateNode;if(null===s&&4&t.flags){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(n(163))}$l||512&t.flags&&ro(t)}catch(m){kc(t,t.return,m)}}if(t===e){Xl=null;break}if(null!==(s=t.sibling)){s.return=t.return,Xl=s;break}Xl=t.return}}function jo(e){for(;null!==Xl;){var t=Xl;if(t===e){Xl=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xl=s;break}Xl=t.return}}function No(e){for(;null!==Xl;){var t=Xl;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{so(4,t)}catch(o){kc(t,s,o)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(o){kc(t,a,o)}}var n=t.return;try{ro(t)}catch(o){kc(t,n,o)}break;case 5:var i=t.return;try{ro(t)}catch(o){kc(t,i,o)}}}catch(o){kc(t,t.return,o)}if(t===e){Xl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Xl=l;break}Xl=t.return}}var wo,ko=Math.ceil,So=v.ReactCurrentDispatcher,Co=v.ReactCurrentOwner,Eo=v.ReactCurrentBatchConfig,_o=0,To=null,Ro=null,Mo=0,Ao=0,Po=wa(0),Oo=0,Do=null,Io=0,Lo=0,Fo=0,zo=null,Vo=null,Uo=0,Ho=1/0,Bo=null,qo=!1,Wo=null,Go=null,Yo=!1,Qo=null,$o=0,Ko=0,Xo=null,Jo=-1,Zo=0;function ec(){return 0!==(6&_o)?Xe():-1!==Jo?Jo:Jo=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&_o)&&0!==Mo?Mo&-Mo:null!==xn.transition?(0===Zo&&(Zo=xt()),Zo):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function sc(e,t,s,r){if(50<Ko)throw Ko=0,Xo=null,Error(n(185));gt(e,s,r),0!==(2&_o)&&e===To||(e===To&&(0===(2&_o)&&(Lo|=s),4===Oo&&lc(e,Mo)),rc(e,r),1===s&&0===_o&&0===(1&t.mode)&&(Ho=Xe()+500,Fa&&Ua()))}function rc(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,n=e.pendingLanes;0<n;){var i=31-it(n),l=1<<i,o=a[i];-1===o?0!==(l&s)&&0===(l&r)||(a[i]=mt(l,t)):o<=t&&(e.expiredLanes|=l),n&=~l}}(e,t);var r=ht(e,e===To?Mo:0);if(0===r)null!==s&&Qe(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=s&&Qe(s),1===t)0===e.tag?function(e){Fa=!0,Va(e)}(oc.bind(null,e)):Va(oc.bind(null,e)),na(function(){0===(6&_o)&&Ua()}),s=null;else{switch(vt(r)){case 1:s=Ze;break;case 4:s=et;break;case 16:default:s=tt;break;case 536870912:s=rt}s=Tc(s,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function ac(e,t){if(Jo=-1,Zo=0,0!==(6&_o))throw Error(n(327));var s=e.callbackNode;if(Nc()&&e.callbackNode!==s)return null;var r=ht(e,e===To?Mo:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=fc(e,r);else{t=r;var a=_o;_o|=2;var i=pc();for(To===e&&Mo===t||(Bo=null,Ho=Xe()+500,hc(e,t));;)try{bc();break}catch(o){mc(e,o)}Cn(),So.current=i,_o=a,null!==Ro?t=0:(To=null,Mo=0,t=Oo)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=nc(e,a))),1===t)throw s=Do,hc(e,0),lc(e,r),rc(e,Xe()),s;if(6===t)lc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var r=0;r<s.length;r++){var a=s[r],n=a.getSnapshot;a=a.value;try{if(!ir(n(),a))return!1}catch(l){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=fc(e,r))&&(0!==(i=pt(e))&&(r=i,t=nc(e,i))),1===t))throw s=Do,hc(e,0),lc(e,r),rc(e,Xe()),s;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(n(345));case 2:case 5:jc(e,Vo,Bo);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Uo+500-Xe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=sa(jc.bind(null,e,Vo,Bo),t);break}jc(e,Vo,Bo);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-it(r);i=1<<l,(l=t[l])>a&&(a=l),r&=~i}if(r=a,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ko(r/1960))-r)){e.timeoutHandle=sa(jc.bind(null,e,Vo,Bo),r);break}jc(e,Vo,Bo);break;default:throw Error(n(329))}}}return rc(e,Xe()),e.callbackNode===s?ac.bind(null,e):null}function nc(e,t){var s=zo;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=Vo,Vo=s,null!==t&&ic(t)),e}function ic(e){null===Vo?Vo=e:Vo.push.apply(Vo,e)}function lc(e,t){for(t&=~Fo,t&=~Lo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-it(t),r=1<<s;e[s]=-1,t&=~r}}function oc(e){if(0!==(6&_o))throw Error(n(327));Nc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var s=fc(e,t);if(0!==e.tag&&2===s){var r=pt(e);0!==r&&(t=r,s=nc(e,r))}if(1===s)throw s=Do,hc(e,0),lc(e,t),rc(e,Xe()),s;if(6===s)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Vo,Bo),rc(e,Xe()),null}function cc(e,t){var s=_o;_o|=1;try{return e(t)}finally{0===(_o=s)&&(Ho=Xe()+500,Fa&&Ua())}}function dc(e){null!==Qo&&0===Qo.tag&&0===(6&_o)&&Nc();var t=_o;_o|=1;var s=Eo.transition,r=yt;try{if(Eo.transition=null,yt=1,e)return e()}finally{yt=r,Eo.transition=s,0===(6&(_o=t))&&Ua()}}function uc(){Ao=Po.current,ka(Po)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,ra(s)),null!==Ro)for(s=Ro.return;null!==s;){var r=s;switch(en(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Aa();break;case 3:Kn(),ka(_a),ka(Ea),si();break;case 5:Jn(r);break;case 4:Kn();break;case 13:case 19:ka(Zn);break;case 10:En(r.type._context);break;case 22:case 23:uc()}s=s.return}if(To=e,Ro=e=Pc(e.current,null),Mo=Ao=t,Oo=0,Do=null,Fo=Lo=Io=0,Vo=zo=null,null!==Mn){for(t=0;t<Mn.length;t++)if(null!==(r=(s=Mn[t]).interleaved)){s.interleaved=null;var a=r.next,n=s.pending;if(null!==n){var i=n.next;n.next=a,r.next=i}s.pending=r}Mn=null}return e}function mc(e,t){for(;;){var s=Ro;try{if(Cn(),ri.current=Xi,ci){for(var r=ii.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ci=!1}if(ni=0,oi=li=ii=null,di=!1,ui=0,Co.current=null,null===s||null===s.return){Oo=1,Do=t,Ro=null;break}e:{var i=e,l=s.return,o=s,c=t;if(t=Mo,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xl(l);if(null!==p){p.flags&=-257,fl(p,l,o,0,t),1&p.mode&&pl(i,d,t),c=d;var x=(t=p).updateQueue;if(null===x){var f=new Set;f.add(c),t.updateQueue=f}else x.add(c);break e}if(0===(1&t)){pl(i,d,t),xc();break e}c=Error(n(426))}else if(rn&&1&o.mode){var g=xl(l);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),fl(g,l,o,0,t),pn(ol(c,o));break e}}i=c=ol(c,o),4!==Oo&&(Oo=2),null===zo?zo=[i]:zo.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Un(i,hl(0,c,t));break e;case 1:o=c;var b=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Go||!Go.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Un(i,ml(i,o,t));break e}}i=i.return}while(null!==i)}vc(s)}catch(v){t=v,Ro===s&&null!==s&&(Ro=s=s.return);continue}break}}function pc(){var e=So.current;return So.current=Xi,null===e?Xi:e}function xc(){0!==Oo&&3!==Oo&&2!==Oo||(Oo=4),null===To||0===(268435455&Io)&&0===(268435455&Lo)||lc(To,Mo)}function fc(e,t){var s=_o;_o|=2;var r=pc();for(To===e&&Mo===t||(Bo=null,hc(e,t));;)try{gc();break}catch(a){mc(e,a)}if(Cn(),_o=s,So.current=r,null!==Ro)throw Error(n(261));return To=null,Mo=0,Oo}function gc(){for(;null!==Ro;)yc(Ro)}function bc(){for(;null!==Ro&&!$e();)yc(Ro)}function yc(e){var t=wo(e.alternate,e,Ao);e.memoizedProps=e.pendingProps,null===t?vc(e):Ro=t,Co.current=null}function vc(e){var t=e;do{var s=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(s=Gl(s,t,Ao)))return void(Ro=s)}else{if(null!==(s=Yl(s,t)))return s.flags&=32767,void(Ro=s);if(null===e)return Oo=6,void(Ro=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ro=t);Ro=t=e}while(null!==t);0===Oo&&(Oo=5)}function jc(e,t,s){var r=yt,a=Eo.transition;try{Eo.transition=null,yt=1,function(e,t,s,r){do{Nc()}while(null!==Qo);if(0!==(6&_o))throw Error(n(327));s=e.finishedWork;var a=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-it(s),n=1<<a;t[a]=0,r[a]=-1,e[a]=-1,s&=~n}}(e,i),e===To&&(Ro=To=null,Mo=0),0===(2064&s.subtreeFlags)&&0===(2064&s.flags)||Yo||(Yo=!0,Tc(tt,function(){return Nc(),null})),i=0!==(15990&s.flags),0!==(15990&s.subtreeFlags)||i){i=Eo.transition,Eo.transition=null;var l=yt;yt=1;var o=_o;_o|=4,Co.current=null,function(e,t){if(Zr=qt,hr(e=ur())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(r&&0!==r.rangeCount){s=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{s.nodeType,i.nodeType}catch(j){s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==s||0!==a&&3!==h.nodeType||(o=l+a),h!==i||0!==r&&3!==h.nodeType||(c=l+r),3===h.nodeType&&(l+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===s&&++d===a&&(o=l),m===i&&++u===r&&(c=l),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}s=-1===o||-1===c?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(ea={focusedElem:e,selectionRange:s},qt=!1,Xl=t;null!==Xl;)if(e=(t=Xl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xl=e;else for(;null!==Xl;){t=Xl;try{var x=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var f=x.memoizedProps,g=x.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?f:tl(t.type,f),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(n(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Xl=e;break}Xl=t.return}x=eo,eo=!1}(e,s),fo(s,e),mr(ea),qt=!!Zr,ea=Zr=null,e.current=s,bo(s,e,a),Ke(),_o=o,yt=l,Eo.transition=i}else e.current=s;if(Yo&&(Yo=!1,Qo=e,$o=a),i=e.pendingLanes,0===i&&(Go=null),function(e){if(nt&&"function"===typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(s.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],r(a.value,{componentStack:a.stack,digest:a.digest});if(qo)throw qo=!1,e=Wo,Wo=null,e;0!==(1&$o)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Xo?Ko++:(Ko=0,Xo=e):Ko=0,Ua()}(e,t,s,r)}finally{Eo.transition=a,yt=r}return null}function Nc(){if(null!==Qo){var e=vt($o),t=Eo.transition,s=yt;try{if(Eo.transition=null,yt=16>e?16:e,null===Qo)var r=!1;else{if(e=Qo,Qo=null,$o=0,0!==(6&_o))throw Error(n(331));var a=_o;for(_o|=4,Xl=e.current;null!==Xl;){var i=Xl,l=i.child;if(0!==(16&Xl.flags)){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Xl=d;null!==Xl;){var u=Xl;switch(u.tag){case 0:case 11:case 15:to(8,u,i)}var h=u.child;if(null!==h)h.return=u,Xl=h;else for(;null!==Xl;){var m=(u=Xl).sibling,p=u.return;if(ao(u),u===d){Xl=null;break}if(null!==m){m.return=p,Xl=m;break}Xl=p}}}var x=i.alternate;if(null!==x){var f=x.child;if(null!==f){x.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Xl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Xl=l;else e:for(;null!==Xl;){if(0!==(2048&(i=Xl).flags))switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Xl=b;break e}Xl=i.return}}var y=e.current;for(Xl=y;null!==Xl;){var v=(l=Xl).child;if(0!==(2064&l.subtreeFlags)&&null!==v)v.return=l,Xl=v;else e:for(l=y;null!==Xl;){if(0!==(2048&(o=Xl).flags))try{switch(o.tag){case 0:case 11:case 15:so(9,o)}}catch(N){kc(o,o.return,N)}if(o===l){Xl=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,Xl=j;break e}Xl=o.return}}if(_o=a,Ua(),nt&&"function"===typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(at,e)}catch(N){}r=!0}return r}finally{yt=s,Eo.transition=t}}return!1}function wc(e,t,s){e=zn(e,t=hl(0,t=ol(s,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function kc(e,t,s){if(3===e.tag)wc(e,e,s);else for(;null!==t;){if(3===t.tag){wc(t,e,s);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Go||!Go.has(r))){t=zn(t,e=ml(t,e=ol(s,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,s){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&s,To===e&&(Mo&s)===s&&(4===Oo||3===Oo&&(130023424&Mo)===Mo&&500>Xe()-Uo?hc(e,0):Fo|=s),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var s=ec();null!==(e=On(e,t))&&(gt(e,t,s),rc(e,s))}function Ec(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Cc(e,s)}function _c(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(s=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(n(314))}null!==r&&r.delete(t),Cc(e,s)}function Tc(e,t){return Ye(e,t)}function Rc(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,s,r){return new Rc(e,t,s,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var s=e.alternate;return null===s?((s=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Oc(e,t,s,r,a,i){var l=2;if(r=e,"function"===typeof e)Ac(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case w:return Dc(s.children,a,i,t);case k:l=8,a|=8;break;case S:return(e=Mc(12,s,t,2|a)).elementType=S,e.lanes=i,e;case T:return(e=Mc(13,s,t,a)).elementType=T,e.lanes=i,e;case R:return(e=Mc(19,s,t,a)).elementType=R,e.lanes=i,e;case P:return Ic(s,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:l=10;break e;case E:l=9;break e;case _:l=11;break e;case M:l=14;break e;case A:l=16,r=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Mc(l,s,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Dc(e,t,s,r){return(e=Mc(7,e,r,t)).lanes=s,e}function Ic(e,t,s,r){return(e=Mc(22,e,r,t)).elementType=P,e.lanes=s,e.stateNode={isHidden:!1},e}function Lc(e,t,s){return(e=Mc(6,e,null,t)).lanes=s,e}function Fc(e,t,s){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,s,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Vc(e,t,s,r,a,n,i,l,o){return e=new zc(e,t,s,l,o),1===t?(t=1,!0===n&&(t|=8)):t=0,n=Mc(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},In(n),e}function Uc(e){if(!e)return Ca;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ma(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var s=e.type;if(Ma(s))return Oa(e,s,t)}return t}function Hc(e,t,s,r,a,n,i,l,o){return(e=Vc(s,r,!0,e,0,n,0,l,o)).context=Uc(null),s=e.current,(n=Fn(r=ec(),a=tc(s))).callback=void 0!==t&&null!==t?t:null,zn(s,n,a),e.current.lanes=a,gt(e,a,r),rc(e,r),e}function Bc(e,t,s,r){var a=t.current,n=ec(),i=tc(a);return s=Uc(s),null===t.context?t.context=s:t.pendingContext=s,(t=Fn(n,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zn(a,t,i))&&(sc(e,a,i,n),Vn(e,a,i)),i}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}wo=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||_a.current)bl=!0;else{if(0===(e.lanes&s)&&0===(128&t.flags))return bl=!1,function(e,t,s){switch(t.tag){case 3:_l(t),mn();break;case 5:Xn(t);break;case 1:Ma(t.type)&&Da(t);break;case 4:$n(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Sa(Nn,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Sa(Zn,1&Zn.current),t.flags|=128,null):0!==(s&t.child.childLanes)?Il(e,t,s):(Sa(Zn,1&Zn.current),null!==(e=Bl(e,t,s))?e.sibling:null);Sa(Zn,1&Zn.current);break;case 19:if(r=0!==(s&t.childLanes),0!==(128&e.flags)){if(r)return Ul(e,t,s);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa(Zn,Zn.current),r)break;return null;case 22:case 23:return t.lanes=0,wl(e,t,s)}return Bl(e,t,s)}(e,t,s);bl=0!==(131072&e.flags)}else bl=!1,rn&&0!==(1048576&t.flags)&&Ja(t,Wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hl(e,t),e=t.pendingProps;var a=Ra(t,Ea.current);Tn(t,s),a=xi(null,t,r,e,a,s);var i=fi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ma(r)?(i=!0,Da(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,In(t),a.updater=rl,t.stateNode=a,a._reactInternals=t,ll(t,r,e,s),t=El(null,t,r,!0,i,s)):(t.tag=0,rn&&i&&Za(t),yl(null,t,a,s),t=t.child),t;case 16:r=t.elementType;e:{switch(Hl(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===M)return 14}return 2}(r),e=tl(r,e),a){case 0:t=Sl(null,t,r,e,s);break e;case 1:t=Cl(null,t,r,e,s);break e;case 11:t=vl(null,t,r,e,s);break e;case 14:t=jl(null,t,r,tl(r.type,e),s);break e}throw Error(n(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Sl(e,t,r,a=t.elementType===r?a:tl(r,a),s);case 1:return r=t.type,a=t.pendingProps,Cl(e,t,r,a=t.elementType===r?a:tl(r,a),s);case 3:e:{if(_l(t),null===e)throw Error(n(387));r=t.pendingProps,a=(i=t.memoizedState).element,Ln(e,t),Hn(t,r,null,s);var l=t.memoizedState;if(r=l.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Tl(e,t,r,s,a=ol(Error(n(423)),t));break e}if(r!==a){t=Tl(e,t,r,s,a=ol(Error(n(424)),t));break e}for(sn=oa(t.stateNode.containerInfo.firstChild),tn=t,rn=!0,an=null,s=jn(t,null,r,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(mn(),r===a){t=Bl(e,t,s);break e}yl(e,t,r,s)}t=t.child}return t;case 5:return Xn(t),null===e&&cn(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,l=a.children,ta(r,a)?l=null:null!==i&&ta(r,i)&&(t.flags|=32),kl(e,t),yl(e,t,l,s),t.child;case 6:return null===e&&cn(t),null;case 13:return Il(e,t,s);case 4:return $n(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=vn(t,null,r,s):yl(e,t,r,s),t.child;case 11:return r=t.type,a=t.pendingProps,vl(e,t,r,a=t.elementType===r?a:tl(r,a),s);case 7:return yl(e,t,t.pendingProps,s),t.child;case 8:case 12:return yl(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Sa(Nn,r._currentValue),r._currentValue=l,null!==i)if(ir(i.value,l)){if(i.children===a.children&&!_a.current){t=Bl(e,t,s);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Fn(-1,s&-s)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,null!==(c=i.alternate)&&(c.lanes|=s),_n(i.return,s,t),o.lanes|=s;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(n(341));l.lanes|=s,null!==(o=l.alternate)&&(o.lanes|=s),_n(l,s,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}yl(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Tn(t,s),r=r(a=Rn(a)),t.flags|=1,yl(e,t,r,s),t.child;case 14:return a=tl(r=t.type,t.pendingProps),jl(e,t,r,a=tl(r.type,a),s);case 15:return Nl(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:tl(r,a),Hl(e,t),t.tag=1,Ma(r)?(e=!0,Da(t)):e=!1,Tn(t,s),nl(t,r,a),ll(t,r,a,s),El(null,t,r,!0,e,s);case 19:return Ul(e,t,s);case 22:return wl(e,t,s)}throw Error(n(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,s,r,a){var n=s._reactRootContainer;if(n){var i=n;if("function"===typeof a){var l=a;a=function(){var e=qc(i);l.call(e)}}Bc(t,i,e,a)}else i=function(e,t,s,r,a){if(a){if("function"===typeof r){var n=r;r=function(){var e=qc(i);n.call(e)}}var i=Hc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[ma]=i.current,Ur(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var l=r;r=function(){var e=qc(o);l.call(e)}}var o=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=o,e[ma]=o.current,Ur(8===e.nodeType?e.parentNode:e),dc(function(){Bc(t,o,s,r)}),o}(s,t,e,a,r);return qc(i)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Bc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Bc(null,e,null,null)}),t[ma]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Pt.length&&0!==t&&t<Pt[s].priority;s++);Pt.splice(s,0,e),0===s&&Lt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ut(t.pendingLanes);0!==s&&(bt(t,1|s),rc(t,Xe()),0===(6&_o)&&(Ho=Xe()+500,Ua()))}break;case 13:dc(function(){var t=On(e,1);if(null!==t){var s=ec();sc(t,e,1,s)}}),Gc(e,1)}},Nt=function(e){if(13===e.tag){var t=On(e,134217728);if(null!==t)sc(t,e,134217728,ec());Gc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),s=On(e,t);if(null!==s)sc(s,e,t,ec());Gc(e,t)}},kt=function(){return yt},St=function(e,t){var s=yt;try{return yt=e,t()}finally{yt=s}},Ne=function(e,t,s){switch(t){case"input":if(J(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var a=va(r);if(!a)throw Error(n(90));Y(r),J(r,a)}}}break;case"textarea":ne(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},_e=cc,Te=dc;var ed={usingClientEntryPoint:!1,Events:[ba,ya,va,Ce,Ee,cc]},td={findFiberByHostInstance:ga,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{at=rd.inject(sd),nt=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(n(200));return function(e,t,s){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.createRoot=function(e,t){if(!Kc(e))throw Error(n(299));var s=!1,r="",a=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Vc(e,1,!1,null,0,s,0,r,a),e[ma]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,s){if(!Xc(t))throw Error(n(200));return Zc(null,e,t,!0,s)},t.hydrateRoot=function(e,t,s){if(!Kc(e))throw Error(n(405));var r=null!=s&&s.hydratedSources||null,a=!1,i="",l=Yc;if(null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(a=!0),void 0!==s.identifierPrefix&&(i=s.identifierPrefix),void 0!==s.onRecoverableError&&(l=s.onRecoverableError)),t=Hc(t,null,e,1,null!=s?s:null,a,0,i,l),e[ma]=t.current,Ur(e),r)for(e=0;e<r.length;e++)a=(a=(s=r[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new $c(t)},t.render=function(e,t,s){if(!Xc(t))throw Error(n(200));return Zc(null,e,t,!1,s)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(n(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ma]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!Xc(s))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return Zc(e,t,s,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,s)=>{e.exports=s(234)},950:(e,t,s)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(730)}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var n=Object.create(null);s.r(n);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&r;("object"==typeof l||"function"==typeof l)&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,s.d(n,i),n}})(),s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};s.r(r),s.d(r,{hasBrowserEnv:()=>$t,hasStandardBrowserEnv:()=>Xt,hasStandardBrowserWebWorkerEnv:()=>Jt,navigator:()=>Kt,origin:()=>Zt});var a,n=s(43),i=s.t(n,2),l=s(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));const c="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,s,r){return void 0===s&&(s=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?x(t):t,{state:s,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function x(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(e,t,s,r){void 0===r&&(r={});let{window:n=document.defaultView,v5Compat:i=!1}=r,l=n.history,u=a.Pop,x=null,f=g();function g(){return(l.state||{idx:null}).idx}function b(){u=a.Pop;let e=g(),t=null==e?null:e-f;f=e,x&&x({action:u,location:v.location,delta:t})}function y(e){let t="null"!==n.location.origin?n.location.origin:n.location.href,s="string"===typeof e?e:p(e);return s=s.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}null==f&&(f=0,l.replaceState(o({},l.state,{idx:f}),""));let v={get action(){return u},get location(){return e(n,l)},listen(e){if(x)throw new Error("A history only accepts one active listener");return n.addEventListener(c,b),x=e,()=>{n.removeEventListener(c,b),x=null}},createHref:e=>t(n,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){u=a.Push;let r=m(v.location,e,t);s&&s(r,e),f=g()+1;let o=h(r,f),c=v.createHref(r);try{l.pushState(o,"",c)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;n.location.assign(c)}i&&x&&x({action:u,location:v.location,delta:1})},replace:function(e,t){u=a.Replace;let r=m(v.location,e,t);s&&s(r,e),f=g();let n=h(r,f),o=v.createHref(r);l.replaceState(n,"",o),i&&x&&x({action:u,location:v.location,delta:0})},go:e=>l.go(e)};return v}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,s){return void 0===s&&(s="/"),y(e,t,s,!1)}function y(e,t,s,r){let a=P(("string"===typeof t?x(t):t).pathname||"/",s);if(null==a)return null;let n=v(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let i=null;for(let l=0;null==i&&l<n.length;++l){let e=A(a);i=R(n[l],e,r)}return i}function v(e,t,s,r){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===r&&(r="");let a=(e,a,n)=>{let i={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(d(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let l=U([r,i.relativePath]),o=s.concat(i);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),v(e.children,t,o,l)),(null!=e.path||e.index)&&t.push({path:l,score:T(l,e.index),routesMeta:o})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let r of j(e.path))a(e,t,r);else a(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[s,...r]=t,a=s.endsWith("?"),n=s.replace(/\?$/,"");if(0===r.length)return a?[n,""]:[n];let i=j(r.join("/")),l=[];return l.push(...i.map(e=>""===e?n:[n,e].join("/"))),a&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}const N=/^:[\w-]+$/,w=3,k=2,S=1,C=10,E=-2,_=e=>"*"===e;function T(e,t){let s=e.split("/"),r=s.length;return s.some(_)&&(r+=E),t&&(r+=k),s.filter(e=>!_(e)).reduce((e,t)=>e+(N.test(t)?w:""===t?S:C),r)}function R(e,t,s){void 0===s&&(s=!1);let{routesMeta:r}=e,a={},n="/",i=[];for(let l=0;l<r.length;++l){let e=r[l],o=l===r.length-1,c="/"===n?t:t.slice(n.length)||"/",d=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&s&&!r[r.length-1].route.index&&(d=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:U([n,d.pathname]),pathnameBase:H(U([n,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(n=U([n,d.pathnameBase]))}return i}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(r.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let n=new RegExp(a,t?void 0:"i");return[n,r]}(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let n=a[0],i=n.replace(/(.)\/+$/,"$1"),l=a.slice(1),o=r.reduce((e,t,s)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=l[s]||"";i=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[s];return e[r]=a&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{});return{params:o,pathname:n,pathnameBase:i,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&"/"!==r?null:e.slice(s)||"/"}const O=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function D(e,t){void 0===t&&(t="/");let s,{pathname:r,search:a="",hash:n=""}="string"===typeof e?x(e):e;if(r)if(i=r,O.test(i))s=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),u(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}s=r.startsWith("/")?I(r.substring(1),"/"):I(r,t)}else s=t;var i;return{pathname:s,search:B(a),hash:q(n)}}function I(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}function L(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function z(e,t){let s=F(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}function V(e,t,s,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=x(e):(a=o({},e),d(!a.pathname||!a.pathname.includes("?"),L("?","pathname","search",a)),d(!a.pathname||!a.pathname.includes("#"),L("#","pathname","hash",a)),d(!a.search||!a.search.includes("#"),L("#","search","hash",a)));let n,i=""===e||""===a.pathname,l=i?"/":a.pathname;if(null==l)n=s;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}n=e>=0?t[e]:"/"}let c=D(a,n),u=l&&"/"!==l&&l.endsWith("/"),h=(i||"."===l)&&s.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}const U=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const G=["post","put","patch","delete"],Y=(new Set(G),["get",...G]);new Set(Y),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Q.apply(this,arguments)}const $=n.createContext(null);const K=n.createContext(null);const X=n.createContext(null);const J=n.createContext(null);const Z=n.createContext({outlet:null,matches:[],isDataRoute:!1});const ee=n.createContext(null);function te(){return null!=n.useContext(J)}function se(){return te()||d(!1),n.useContext(J).location}function re(e){n.useContext(X).static||n.useLayoutEffect(e)}function ae(){let{isDataRoute:e}=n.useContext(Z);return e?function(){let{router:e}=xe(me.UseNavigateStable),t=ge(pe.UseNavigateStable),s=n.useRef(!1);re(()=>{s.current=!0});let r=n.useCallback(function(r,a){void 0===a&&(a={}),s.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Q({fromRouteId:t},a)))},[e,t]);return r}():function(){te()||d(!1);let e=n.useContext($),{basename:t,future:s,navigator:r}=n.useContext(X),{matches:a}=n.useContext(Z),{pathname:i}=se(),l=JSON.stringify(z(a,s.v7_relativeSplatPath)),o=n.useRef(!1);re(()=>{o.current=!0});let c=n.useCallback(function(s,a){if(void 0===a&&(a={}),!o.current)return;if("number"===typeof s)return void r.go(s);let n=V(s,JSON.parse(l),i,"path"===a.relative);null==e&&"/"!==t&&(n.pathname="/"===n.pathname?t:U([t,n.pathname])),(a.replace?r.replace:r.push)(n,a.state,a)},[t,r,l,i,e]);return c}()}function ne(){let{matches:e}=n.useContext(Z),t=e[e.length-1];return t?t.params:{}}function ie(e,t){let{relative:s}=void 0===t?{}:t,{future:r}=n.useContext(X),{matches:a}=n.useContext(Z),{pathname:i}=se(),l=JSON.stringify(z(a,r.v7_relativeSplatPath));return n.useMemo(()=>V(e,JSON.parse(l),i,"path"===s),[e,l,i,s])}function le(e,t,s,r){te()||d(!1);let{navigator:i}=n.useContext(X),{matches:l}=n.useContext(Z),o=l[l.length-1],c=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let h,m=se();if(t){var p;let e="string"===typeof t?x(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),h=e}else h=m;let f=h.pathname||"/",g=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:g});let v=he(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:U([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:U([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,s,r);return t&&v?n.createElement(J.Provider,{value:{location:Q({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:a.Pop}},v):v}function oe(){let e=function(){var e;let t=n.useContext(ee),s=fe(pe.UseRouteError),r=ge(pe.UseRouteError);if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[r]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),s?n.createElement("pre",{style:a},s):null,null)}const ce=n.createElement(oe,null);class de extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(Z.Provider,{value:this.props.routeContext},n.createElement(ee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ue(e){let{routeContext:t,match:s,children:r}=e,a=n.useContext($);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),n.createElement(Z.Provider,{value:t},r)}function he(e,t,s,r){var a;if(void 0===t&&(t=[]),void 0===s&&(s=null),void 0===r&&(r=null),null==e){var i;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(i=r)&&i.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let l=e,o=null==(a=s)?void 0:a.errors;if(null!=o){let e=l.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||d(!1),l=l.slice(0,Math.min(l.length,e+1))}let c=!1,u=-1;if(s&&r&&r.v7_partialHydration)for(let n=0;n<l.length;n++){let e=l[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=n),e.route.id){let{loaderData:t,errors:r}=s,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){c=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,r,a)=>{let i,d=!1,h=null,m=null;var p;s&&(i=o&&r.route.id?o[r.route.id]:void 0,h=r.route.errorElement||ce,c&&(u<0&&0===a?(p="route-fallback",!1||be[p]||(be[p]=!0),d=!0,m=null):u===a&&(d=!0,m=r.route.hydrateFallbackElement||null)));let x=t.concat(l.slice(0,a+1)),f=()=>{let t;return t=i?h:d?m:r.route.Component?n.createElement(r.route.Component,null):r.route.element?r.route.element:e,n.createElement(ue,{match:r,routeContext:{outlet:e,matches:x,isDataRoute:null!=s},children:t})};return s&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?n.createElement(de,{location:s.location,revalidation:s.revalidation,component:h,error:i,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}var me=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(me||{}),pe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(pe||{});function xe(e){let t=n.useContext($);return t||d(!1),t}function fe(e){let t=n.useContext(K);return t||d(!1),t}function ge(e){let t=function(){let e=n.useContext(Z);return e||d(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||d(!1),s.route.id}const be={};function ye(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ve(e){let{to:t,replace:s,state:r,relative:a}=e;te()||d(!1);let{future:i,static:l}=n.useContext(X),{matches:o}=n.useContext(Z),{pathname:c}=se(),u=ae(),h=V(t,z(o,i.v7_relativeSplatPath),c,"path"===a),m=JSON.stringify(h);return n.useEffect(()=>u(JSON.parse(m),{replace:s,state:r,relative:a}),[u,m,a,s,r]),null}function je(e){d(!1)}function Ne(e){let{basename:t="/",children:s=null,location:r,navigationType:i=a.Pop,navigator:l,static:o=!1,future:c}=e;te()&&d(!1);let u=t.replace(/^\/*/,"/"),h=n.useMemo(()=>({basename:u,navigator:l,static:o,future:Q({v7_relativeSplatPath:!1},c)}),[u,c,l,o]);"string"===typeof r&&(r=x(r));let{pathname:m="/",search:p="",hash:f="",state:g=null,key:b="default"}=r,y=n.useMemo(()=>{let e=P(m,u);return null==e?null:{location:{pathname:e,search:p,hash:f,state:g,key:b},navigationType:i}},[u,m,p,f,g,b,i]);return null==y?null:n.createElement(X.Provider,{value:h},n.createElement(J.Provider,{children:s,value:y}))}function we(e){let{children:t,location:s}=e;return le(ke(t),s)}new Promise(()=>{});n.Component;function ke(e,t){void 0===t&&(t=[]);let s=[];return n.Children.forEach(e,(e,r)=>{if(!n.isValidElement(e))return;let a=[...t,r];if(e.type===n.Fragment)return void s.push.apply(s,ke(e.props.children,a));e.type!==je&&d(!1),e.props.index&&e.props.children&&d(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ke(e.props.children,a)),s.push(i)}),s}var Se=s(950),Ce=s.t(Se,2);function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Ee.apply(this,arguments)}function _e(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}function Te(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let r=e[s];return t.concat(Array.isArray(r)?r.map(e=>[s,e]):[[s,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Re=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Af){}new Map;const Me=i.startTransition;Ce.flushSync,i.useId;function Ae(e){let{basename:t,children:s,future:r,window:a}=e,i=n.useRef();var l;null==i.current&&(i.current=(void 0===(l={window:a,v5Compat:!0})&&(l={}),f(function(e,t){let{pathname:s,search:r,hash:a}=e.location;return m("",{pathname:s,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:p(t)},null,l)));let o=i.current,[c,d]=n.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=n.useCallback(e=>{u&&Me?Me(()=>d(e)):d(e)},[d,u]);return n.useLayoutEffect(()=>o.listen(h),[o,h]),n.useEffect(()=>ye(r),[r]),n.createElement(Ne,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:o,future:r})}const Pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Oe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=n.forwardRef(function(e,t){let s,{onClick:r,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:u,preventScrollReset:h,viewTransition:m}=e,x=_e(e,Re),{basename:f}=n.useContext(X),g=!1;if("string"===typeof u&&Oe.test(u)&&(s=u,Pe))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),s=P(t.pathname,f);t.origin===e.origin&&null!=s?u=s+t.search+t.hash:g=!0}catch(Af){}let b=function(e,t){let{relative:s}=void 0===t?{}:t;te()||d(!1);let{basename:r,navigator:a}=n.useContext(X),{hash:i,pathname:l,search:o}=ie(e,{relative:s}),c=l;return"/"!==r&&(c="/"===l?r:U([r,l])),a.createHref({pathname:c,search:o,hash:i})}(u,{relative:a}),y=function(e,t){let{target:s,replace:r,state:a,preventScrollReset:i,relative:l,viewTransition:o}=void 0===t?{}:t,c=ae(),d=se(),u=ie(e,{relative:l});return n.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,s)){t.preventDefault();let s=void 0!==r?r:p(d)===p(u);c(e,{replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,r,a,s,e,i,l,o])}(u,{replace:l,state:o,target:c,preventScrollReset:h,relative:a,viewTransition:m});return n.createElement("a",Ee({},x,{href:s||b,onClick:g||i?r:function(e){r&&r(e),e.defaultPrevented||y(e)},ref:t,target:c}))});var Ie,Le;function Fe(e){let t=n.useRef(Te(e)),s=n.useRef(!1),r=se(),a=n.useMemo(()=>function(e,t){let s=Te(e);return t&&t.forEach((e,r)=>{s.has(r)||t.getAll(r).forEach(e=>{s.append(r,e)})}),s}(r.search,s.current?null:t.current),[r.search]),i=ae(),l=n.useCallback((e,t)=>{const r=Te("function"===typeof e?e(a):e);s.current=!0,i("?"+r,t)},[i,a]);return[a,l]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Le||(Le={}));function ze(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ve}=Object.prototype,{getPrototypeOf:Ue}=Object,{iterator:He,toStringTag:Be}=Symbol,qe=(We=Object.create(null),e=>{const t=Ve.call(e);return We[t]||(We[t]=t.slice(8,-1).toLowerCase())});var We;const Ge=e=>(e=e.toLowerCase(),t=>qe(t)===e),Ye=e=>t=>typeof t===e,{isArray:Qe}=Array,$e=Ye("undefined");function Ke(e){return null!==e&&!$e(e)&&null!==e.constructor&&!$e(e.constructor)&&Ze(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Xe=Ge("ArrayBuffer");const Je=Ye("string"),Ze=Ye("function"),et=Ye("number"),tt=e=>null!==e&&"object"===typeof e,st=e=>{if("object"!==qe(e))return!1;const t=Ue(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Be in e)&&!(He in e)},rt=Ge("Date"),at=Ge("File"),nt=Ge("Blob"),it=Ge("FileList"),lt=Ge("URLSearchParams"),[ot,ct,dt,ut]=["ReadableStream","Request","Response","Headers"].map(Ge);function ht(e,t){let s,r,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Qe(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Ke(e))return;const r=a?Object.getOwnPropertyNames(e):Object.keys(e),n=r.length;let i;for(s=0;s<n;s++)i=r[s],t.call(null,e[i],i,e)}}function mt(e,t){if(Ke(e))return null;t=t.toLowerCase();const s=Object.keys(e);let r,a=s.length;for(;a-- >0;)if(r=s[a],t===r.toLowerCase())return r;return null}const pt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:s.g,xt=e=>!$e(e)&&e!==pt;const ft=(gt="undefined"!==typeof Uint8Array&&Ue(Uint8Array),e=>gt&&e instanceof gt);var gt;const bt=Ge("HTMLFormElement"),yt=(e=>{let{hasOwnProperty:t}=e;return(e,s)=>t.call(e,s)})(Object.prototype),vt=Ge("RegExp"),jt=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),r={};ht(s,(s,a)=>{let n;!1!==(n=t(s,a,e))&&(r[a]=n||s)}),Object.defineProperties(e,r)};const Nt=Ge("AsyncFunction"),wt=((e,t)=>{return e?setImmediate:t?(s="axios@".concat(Math.random()),r=[],pt.addEventListener("message",e=>{let{source:t,data:a}=e;t===pt&&a===s&&r.length&&r.shift()()},!1),e=>{r.push(e),pt.postMessage(s,"*")}):e=>setTimeout(e);var s,r})("function"===typeof setImmediate,Ze(pt.postMessage)),kt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(pt):"undefined"!==typeof process&&process.nextTick||wt,St={isArray:Qe,isArrayBuffer:Xe,isBuffer:Ke,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ze(e.append)&&("formdata"===(t=qe(e))||"object"===t&&Ze(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Xe(e.buffer),t},isString:Je,isNumber:et,isBoolean:e=>!0===e||!1===e,isObject:tt,isPlainObject:st,isEmptyObject:e=>{if(!tt(e)||Ke(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Af){return!1}},isReadableStream:ot,isRequest:ct,isResponse:dt,isHeaders:ut,isUndefined:$e,isDate:rt,isFile:at,isBlob:nt,isRegExp:vt,isFunction:Ze,isStream:e=>tt(e)&&Ze(e.pipe),isURLSearchParams:lt,isTypedArray:ft,isFileList:it,forEach:ht,merge:function e(){const{caseless:t,skipUndefined:s}=xt(this)&&this||{},r={},a=(a,n)=>{const i=t&&mt(r,n)||n;st(r[i])&&st(a)?r[i]=e(r[i],a):st(a)?r[i]=e({},a):Qe(a)?r[i]=a.slice():s&&$e(a)||(r[i]=a)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&ht(arguments[n],a);return r},extend:function(e,t,s){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ht(t,(t,r)=>{s&&Ze(t)?e[r]=ze(t,s):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,r)=>{let a,n,i;const l={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),n=a.length;n-- >0;)i=a[n],r&&!r(i,e,t)||l[i]||(t[i]=e[i],l[i]=!0);e=!1!==s&&Ue(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:qe,kindOfTest:Ge,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const r=e.indexOf(t,s);return-1!==r&&r===s},toArray:e=>{if(!e)return null;if(Qe(e))return e;let t=e.length;if(!et(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[He]).call(e);let r;for(;(r=s.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const r=[];for(;null!==(s=e.exec(t));)r.push(s);return r},isHTMLForm:bt,hasOwnProperty:yt,hasOwnProp:yt,reduceDescriptors:jt,freezeMethods:e=>{jt(e,(t,s)=>{if(Ze(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const r=e[s];Ze(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))})},toObjectSet:(e,t)=>{const s={},r=e=>{e.forEach(e=>{s[e]=!0})};return Qe(e)?r(e):r(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,s){return t.toUpperCase()+s}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:mt,global:pt,isContextDefined:xt,isSpecCompliantForm:function(e){return!!(e&&Ze(e.append)&&"FormData"===e[Be]&&e[He])},toJSONObject:e=>{const t=new Array(10),s=(e,r)=>{if(tt(e)){if(t.indexOf(e)>=0)return;if(Ke(e))return e;if(!("toJSON"in e)){t[r]=e;const a=Qe(e)?[]:{};return ht(e,(e,t)=>{const n=s(e,r+1);!$e(n)&&(a[t]=n)}),t[r]=void 0,a}}return e};return s(e,0)},isAsyncFn:Nt,isThenable:e=>e&&(tt(e)||Ze(e))&&Ze(e.then)&&Ze(e.catch),setImmediate:wt,asap:kt,isIterable:e=>null!=e&&Ze(e[He])};function Ct(e,t,s,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}St.inherits(Ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:St.toJSONObject(this.config),code:this.code,status:this.status}}});const Et=Ct.prototype,_t={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{_t[e]={value:e}}),Object.defineProperties(Ct,_t),Object.defineProperty(Et,"isAxiosError",{value:!0}),Ct.from=(e,t,s,r,a,n)=>{const i=Object.create(Et);St.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const l=e&&e.message?e.message:"Error",o=null==t&&e?e.code:t;return Ct.call(i,l,o,s,r,a),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",n&&Object.assign(i,n),i};const Tt=Ct;function Rt(e){return St.isPlainObject(e)||St.isArray(e)}function Mt(e){return St.endsWith(e,"[]")?e.slice(0,-2):e}function At(e,t,s){return e?e.concat(t).map(function(e,t){return e=Mt(e),!s&&t?"["+e+"]":e}).join(s?".":""):t}const Pt=St.toFlatObject(St,{},null,function(e){return/^is[A-Z]/.test(e)});const Ot=function(e,t,s){if(!St.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(s=St.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!St.isUndefined(t[e])})).metaTokens,a=s.visitor||c,n=s.dots,i=s.indexes,l=(s.Blob||"undefined"!==typeof Blob&&Blob)&&St.isSpecCompliantForm(t);if(!St.isFunction(a))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(St.isDate(e))return e.toISOString();if(St.isBoolean(e))return e.toString();if(!l&&St.isBlob(e))throw new Tt("Blob is not supported. Use a Buffer instead.");return St.isArrayBuffer(e)||St.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,a){let l=e;if(e&&!a&&"object"===typeof e)if(St.endsWith(s,"{}"))s=r?s:s.slice(0,-2),e=JSON.stringify(e);else if(St.isArray(e)&&function(e){return St.isArray(e)&&!e.some(Rt)}(e)||(St.isFileList(e)||St.endsWith(s,"[]"))&&(l=St.toArray(e)))return s=Mt(s),l.forEach(function(e,r){!St.isUndefined(e)&&null!==e&&t.append(!0===i?At([s],r,n):null===i?s:s+"[]",o(e))}),!1;return!!Rt(e)||(t.append(At(a,s,n),o(e)),!1)}const d=[],u=Object.assign(Pt,{defaultVisitor:c,convertValue:o,isVisitable:Rt});if(!St.isObject(e))throw new TypeError("data must be an object");return function e(s,r){if(!St.isUndefined(s)){if(-1!==d.indexOf(s))throw Error("Circular reference detected in "+r.join("."));d.push(s),St.forEach(s,function(s,n){!0===(!(St.isUndefined(s)||null===s)&&a.call(t,s,St.isString(n)?n.trim():n,r,u))&&e(s,r?r.concat(n):[n])}),d.pop()}}(e),t};function Dt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function It(e,t){this._pairs=[],e&&Ot(e,this,t)}const Lt=It.prototype;Lt.append=function(e,t){this._pairs.push([e,t])},Lt.toString=function(e){const t=e?function(t){return e.call(this,t,Dt)}:Dt;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Ft=It;function zt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Vt(e,t,s){if(!t)return e;const r=s&&s.encode||zt;St.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let n;if(n=a?a(t,s):St.isURLSearchParams(t)?t.toString():new Ft(t,s).toString(r),n){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}const Ut=class{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){St.forEach(this.handlers,function(t){null!==t&&e(t)})}},Ht={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};function Bt(e){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(e)}function qt(e){var t=function(e,t){if("object"!=Bt(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=Bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bt(t)?t:t+""}function Wt(e,t,s){return(t=qt(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Gt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Yt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(s),!0).forEach(function(t){Wt(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gt(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}const Qt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Ft,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},$t="undefined"!==typeof window&&"undefined"!==typeof document,Kt="object"===typeof navigator&&navigator||void 0,Xt=$t&&(!Kt||["ReactNative","NativeScript","NS"].indexOf(Kt.product)<0),Jt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Zt=$t&&window.location.href||"http://localhost",es=Yt(Yt({},r),Qt);const ts=function(e){function t(e,s,r,a){let n=e[a++];if("__proto__"===n)return!0;const i=Number.isFinite(+n),l=a>=e.length;if(n=!n&&St.isArray(r)?r.length:n,l)return St.hasOwnProp(r,n)?r[n]=[r[n],s]:r[n]=s,!i;r[n]&&St.isObject(r[n])||(r[n]=[]);return t(e,s,r[n],a)&&St.isArray(r[n])&&(r[n]=function(e){const t={},s=Object.keys(e);let r;const a=s.length;let n;for(r=0;r<a;r++)n=s[r],t[n]=e[n];return t}(r[n])),!i}if(St.isFormData(e)&&St.isFunction(e.entries)){const s={};return St.forEachEntry(e,(e,r)=>{t(function(e){return St.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,s,0)}),s}return null};const ss={transitional:Ht,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",r=s.indexOf("application/json")>-1,a=St.isObject(e);a&&St.isHTMLForm(e)&&(e=new FormData(e));if(St.isFormData(e))return r?JSON.stringify(ts(e)):e;if(St.isArrayBuffer(e)||St.isBuffer(e)||St.isStream(e)||St.isFile(e)||St.isBlob(e)||St.isReadableStream(e))return e;if(St.isArrayBufferView(e))return e.buffer;if(St.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ot(e,new es.classes.URLSearchParams,Yt({visitor:function(e,t,s,r){return es.isNode&&St.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=St.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ot(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,s){if(St.isString(e))try{return(t||JSON.parse)(e),St.trim(e)}catch(Af){if("SyntaxError"!==Af.name)throw Af}return(s||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ss.transitional,s=t&&t.forcedJSONParsing,r="json"===this.responseType;if(St.isResponse(e)||St.isReadableStream(e))return e;if(e&&St.isString(e)&&(s&&!this.responseType||r)){const s=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(Af){if(s){if("SyntaxError"===Af.name)throw Tt.from(Af,Tt.ERR_BAD_RESPONSE,this,null,this.response);throw Af}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:es.classes.FormData,Blob:es.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};St.forEach(["delete","get","head","post","put","patch"],e=>{ss.headers[e]={}});const rs=ss,as=St.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ns=Symbol("internals");function is(e){return e&&String(e).trim().toLowerCase()}function ls(e){return!1===e||null==e?e:St.isArray(e)?e.map(ls):String(e)}function os(e,t,s,r,a){return St.isFunction(r)?r.call(this,t,s):(a&&(t=s),St.isString(t)?St.isString(r)?-1!==t.indexOf(r):St.isRegExp(r)?r.test(t):void 0:void 0)}class cs{constructor(e){e&&this.set(e)}set(e,t,s){const r=this;function a(e,t,s){const a=is(t);if(!a)throw new Error("header name must be a non-empty string");const n=St.findKey(r,a);(!n||void 0===r[n]||!0===s||void 0===s&&!1!==r[n])&&(r[n||t]=ls(e))}const n=(e,t)=>St.forEach(e,(e,s)=>a(e,s,t));if(St.isPlainObject(e)||e instanceof this.constructor)n(e,t);else if(St.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))n((e=>{const t={};let s,r,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),s=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!s||t[s]&&as[s]||("set-cookie"===s?t[s]?t[s].push(r):t[s]=[r]:t[s]=t[s]?t[s]+", "+r:r)}),t})(e),t);else if(St.isObject(e)&&St.isIterable(e)){let s,r,a={};for(const t of e){if(!St.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(s=a[r])?St.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}n(a,t)}else null!=e&&a(t,e,s);return this}get(e,t){if(e=is(e)){const s=St.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(e);)t[r[1]]=r[2];return t}(e);if(St.isFunction(t))return t.call(this,e,s);if(St.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=is(e)){const s=St.findKey(this,e);return!(!s||void 0===this[s]||t&&!os(0,this[s],s,t))}return!1}delete(e,t){const s=this;let r=!1;function a(e){if(e=is(e)){const a=St.findKey(s,e);!a||t&&!os(0,s[a],a,t)||(delete s[a],r=!0)}}return St.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let s=t.length,r=!1;for(;s--;){const a=t[s];e&&!os(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,s={};return St.forEach(this,(r,a)=>{const n=St.findKey(s,a);if(n)return t[n]=ls(r),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}(a):String(a).trim();i!==a&&delete t[a],t[i]=ls(r),s[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return St.forEach(this,(s,r)=>{null!=s&&!1!==s&&(t[r]=e&&St.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,s]=e;return t+": "+s}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[ns]=this[ns]={accessors:{}}).accessors,s=this.prototype;function r(e){const r=is(e);t[r]||(!function(e,t){const s=St.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+s,{value:function(e,s,a){return this[r].call(this,t,e,s,a)},configurable:!0})})}(s,e),t[r]=!0)}return St.isArray(e)?e.forEach(r):r(e),this}}cs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),St.reduceDescriptors(cs.prototype,(e,t)=>{let{value:s}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(e){this[r]=e}}}),St.freezeMethods(cs);const ds=cs;function us(e,t){const s=this||rs,r=t||s,a=ds.from(r.headers);let n=r.data;return St.forEach(e,function(e){n=e.call(s,n,a.normalize(),t?t.status:void 0)}),a.normalize(),n}function hs(e){return!(!e||!e.__CANCEL__)}function ms(e,t,s){Tt.call(this,null==e?"canceled":e,Tt.ERR_CANCELED,t,s),this.name="CanceledError"}St.inherits(ms,Tt,{__CANCEL__:!0});const ps=ms;function xs(e,t,s){const r=s.config.validateStatus;s.status&&r&&!r(s.status)?t(new Tt("Request failed with status code "+s.status,[Tt.ERR_BAD_REQUEST,Tt.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}const fs=function(e,t){e=e||10;const s=new Array(e),r=new Array(e);let a,n=0,i=0;return t=void 0!==t?t:1e3,function(l){const o=Date.now(),c=r[i];a||(a=o),s[n]=l,r[n]=o;let d=i,u=0;for(;d!==n;)u+=s[d++],d%=e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),o-a<t)return;const h=c&&o-c;return h?Math.round(1e3*u/h):void 0}};const gs=function(e,t){let s,r,a=0,n=1e3/t;const i=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=n,s=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];t>=n?i(o,e):(s=o,r||(r=setTimeout(()=>{r=null,i(s)},n-t)))},()=>s&&i(s)]},bs=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const a=fs(50,250);return gs(s=>{const n=s.loaded,i=s.lengthComputable?s.total:void 0,l=n-r,o=a(l);r=n;e({loaded:n,total:i,progress:i?n/i:void 0,bytes:l,rate:o||void 0,estimated:o&&i&&n<=i?(i-n)/o:void 0,event:s,lengthComputable:null!=i,[t?"download":"upload"]:!0})},s)},ys=(e,t)=>{const s=null!=e;return[r=>t[0]({lengthComputable:s,total:e,loaded:r}),t[1]]},vs=e=>function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return St.asap(()=>e(...s))},js=es.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,es.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(es.origin),es.navigator&&/(msie|trident)/i.test(es.navigator.userAgent)):()=>!0,Ns=es.hasStandardBrowserEnv?{write(e,t,s,r,a,n,i){if("undefined"===typeof document)return;const l=["".concat(e,"=").concat(encodeURIComponent(t))];St.isNumber(s)&&l.push("expires=".concat(new Date(s).toUTCString())),St.isString(r)&&l.push("path=".concat(r)),St.isString(a)&&l.push("domain=".concat(a)),!0===n&&l.push("secure"),St.isString(i)&&l.push("SameSite=".concat(i)),document.cookie=l.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function ws(e,t,s){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ks=e=>e instanceof ds?Yt({},e):e;function Ss(e,t){t=t||{};const s={};function r(e,t,s,r){return St.isPlainObject(e)&&St.isPlainObject(t)?St.merge.call({caseless:r},e,t):St.isPlainObject(t)?St.merge({},t):St.isArray(t)?t.slice():t}function a(e,t,s,a){return St.isUndefined(t)?St.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function n(e,t){if(!St.isUndefined(t))return r(void 0,t)}function i(e,t){return St.isUndefined(t)?St.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function l(s,a,n){return n in t?r(s,a):n in e?r(void 0,s):void 0}const o={url:n,method:n,data:n,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(e,t,s)=>a(ks(e),ks(t),0,!0)};return St.forEach(Object.keys(Yt(Yt({},e),t)),function(r){const n=o[r]||a,i=n(e[r],t[r],r);St.isUndefined(i)&&n!==l||(s[r]=i)}),s}const Cs=e=>{const t=Ss({},e);let{data:s,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:n,headers:i,auth:l}=t;if(t.headers=i=ds.from(i),t.url=Vt(ws(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),St.isFormData(s))if(es.hasStandardBrowserEnv||es.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(St.isFunction(s.getHeaders)){const e=s.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[s,r]=e;t.includes(s.toLowerCase())&&i.set(s,r)})}if(es.hasStandardBrowserEnv&&(r&&St.isFunction(r)&&(r=r(t)),r||!1!==r&&js(t.url))){const e=a&&n&&Ns.read(n);e&&i.set(a,e)}return t},Es="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,s){const r=Cs(e);let a=r.data;const n=ds.from(r.headers).normalize();let i,l,o,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=r;function p(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let x=new XMLHttpRequest;function f(){if(!x)return;const r=ds.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());xs(function(e){t(e),p()},function(e){s(e),p()},{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:r,config:e,request:x}),x=null}x.open(r.method.toUpperCase(),r.url,!0),x.timeout=r.timeout,"onloadend"in x?x.onloadend=f:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(f)},x.onabort=function(){x&&(s(new Tt("Request aborted",Tt.ECONNABORTED,e,x)),x=null)},x.onerror=function(t){const r=t&&t.message?t.message:"Network Error",a=new Tt(r,Tt.ERR_NETWORK,e,x);a.event=t||null,s(a),x=null},x.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||Ht;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),s(new Tt(t,a.clarifyTimeoutError?Tt.ETIMEDOUT:Tt.ECONNABORTED,e,x)),x=null},void 0===a&&n.setContentType(null),"setRequestHeader"in x&&St.forEach(n.toJSON(),function(e,t){x.setRequestHeader(t,e)}),St.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),u&&"json"!==u&&(x.responseType=r.responseType),m&&([o,d]=bs(m,!0),x.addEventListener("progress",o)),h&&x.upload&&([l,c]=bs(h),x.upload.addEventListener("progress",l),x.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{x&&(s(!t||t.type?new ps(null,e,x):t),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===es.protocols.indexOf(g)?s(new Tt("Unsupported protocol "+g+":",Tt.ERR_BAD_REQUEST,e)):x.send(a||null)})},_s=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,r=new AbortController;const a=function(e){if(!s){s=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Tt?t:new ps(t instanceof Error?t.message:t))}};let n=t&&setTimeout(()=>{n=null,a(new Tt("timeout ".concat(t," of ms exceeded"),Tt.ETIMEDOUT))},t);const i=()=>{e&&(n&&clearTimeout(n),n=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:l}=r;return l.unsubscribe=()=>St.asap(i),l}};function Ts(e,t){this.v=e,this.k=t}function Rs(e){return function(){return new Ms(e.apply(this,arguments))}}function Ms(e){var t,s;function r(t,s){try{var n=e[t](s),i=n.value,l=i instanceof Ts;Promise.resolve(l?i.v:i).then(function(s){if(l){var o="return"===t?"return":"next";if(!i.k||s.done)return r(o,s);s=e[o](s).value}a(n.done?"return":"normal",s)},function(e){r("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):s=null}this._invoke=function(e,a){return new Promise(function(n,i){var l={key:e,arg:a,resolve:n,reject:i,next:null};s?s=s.next=l:(t=s=l,r(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function As(e){return new Ts(e,0)}function Ps(e){var t={},s=!1;function r(t,r){return s=!0,r=new Promise(function(s){s(e[t](r))}),{done:!1,value:new Ts(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return s?(s=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(s)throw s=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return s?(s=!1,e):r("return",e)}),t}function Os(e){var t,s,r,a=2;for("undefined"!=typeof Symbol&&(s=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(s&&null!=(t=e[s]))return t.call(e);if(r&&null!=(t=e[r]))return new Ds(t.call(e));s="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Ds(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Ds=function(e){this.s=e,this.n=e.next},Ds.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var s=this.s.return;return void 0===s?Promise.resolve({value:e,done:!0}):t(s.apply(this.s,arguments))},throw:function(e){var s=this.s.return;return void 0===s?Promise.reject(e):t(s.apply(this.s,arguments))}},new Ds(e)}Ms.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ms.prototype.next=function(e){return this._invoke("next",e)},Ms.prototype.throw=function(e){return this._invoke("throw",e)},Ms.prototype.return=function(e){return this._invoke("return",e)};const Is=function*(e,t){let s=e.byteLength;if(!t||s<t)return void(yield e);let r,a=0;for(;a<s;)r=a+t,yield e.slice(a,r),a=r},Ls=function(){var e=Rs(function*(e,t){var s,r=!1,a=!1;try{for(var n,i=Os(Fs(e));r=!(n=yield As(i.next())).done;r=!1){const e=n.value;yield*Ps(Os(Is(e,t)))}}catch(l){a=!0,s=l}finally{try{r&&null!=i.return&&(yield As(i.return()))}finally{if(a)throw s}}});return function(t,s){return e.apply(this,arguments)}}(),Fs=function(){var e=Rs(function*(e){if(e[Symbol.asyncIterator])return void(yield*Ps(Os(e)));const t=e.getReader();try{for(;;){const{done:e,value:s}=yield As(t.read());if(e)break;yield s}}finally{yield As(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),zs=(e,t,s,r)=>{const a=Ls(e,t);let n,i=0,l=e=>{n||(n=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return l(),void e.close();let n=r.byteLength;if(s){let e=i+=n;s(e)}e.enqueue(new Uint8Array(r))}catch(t){throw l(t),t}},cancel:e=>(l(e),a.return())},{highWaterMark:2})},{isFunction:Vs}=St,Us=(e=>{let{Request:t,Response:s}=e;return{Request:t,Response:s}})(St.global),{ReadableStream:Hs,TextEncoder:Bs}=St.global,qs=function(e){try{for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return!!e(...s)}catch(Af){return!1}},Ws=e=>{e=St.merge.call({skipUndefined:!0},Us,e);const{fetch:t,Request:s,Response:r}=e,a=t?Vs(t):"function"===typeof fetch,n=Vs(s),i=Vs(r);if(!a)return!1;const l=a&&Vs(Hs),o=a&&("function"===typeof Bs?(c=new Bs,e=>c.encode(e)):async e=>new Uint8Array(await new s(e).arrayBuffer()));var c;const d=n&&l&&qs(()=>{let e=!1;const t=new s(es.origin,{body:new Hs,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&l&&qs(()=>St.isReadableStream(new r("").body)),h={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,s)=>{let r=t&&t[e];if(r)return r.call(t);throw new Tt("Response type '".concat(e,"' is not supported"),Tt.ERR_NOT_SUPPORT,s)})});const m=async(e,t)=>{const r=St.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(St.isBlob(e))return e.size;if(St.isSpecCompliantForm(e)){const t=new s(es.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return St.isArrayBufferView(e)||St.isArrayBuffer(e)?e.byteLength:(St.isURLSearchParams(e)&&(e+=""),St.isString(e)?(await o(e)).byteLength:void 0)})(t):r};return async e=>{let{url:a,method:i,data:l,signal:o,cancelToken:c,timeout:p,onDownloadProgress:x,onUploadProgress:f,responseType:g,headers:b,withCredentials:y="same-origin",fetchOptions:v}=Cs(e),j=t||fetch;g=g?(g+"").toLowerCase():"text";let N=_s([o,c&&c.toAbortSignal()],p),w=null;const k=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let S;try{if(f&&d&&"get"!==i&&"head"!==i&&0!==(S=await m(b,l))){let e,t=new s(a,{method:"POST",body:l,duplex:"half"});if(St.isFormData(l)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,s]=ys(S,bs(vs(f)));l=zs(t.body,65536,e,s)}}St.isString(y)||(y=y?"include":"omit");const t=n&&"credentials"in s.prototype,o=Yt(Yt({},v),{},{signal:N,method:i.toUpperCase(),headers:b.normalize().toJSON(),body:l,duplex:"half",credentials:t?y:void 0});w=n&&new s(a,o);let c=await(n?j(w,v):j(a,o));const p=u&&("stream"===g||"response"===g);if(u&&(x||p&&k)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=St.toFiniteNumber(c.headers.get("content-length")),[s,a]=x&&ys(t,bs(vs(x),!0))||[];c=new r(zs(c.body,65536,s,()=>{a&&a(),k&&k()}),e)}g=g||"text";let C=await h[St.findKey(h,g)||"text"](c,e);return!p&&k&&k(),await new Promise((t,s)=>{xs(t,s,{data:C,headers:ds.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:w})})}catch(C){if(k&&k(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new Tt("Network Error",Tt.ERR_NETWORK,e,w),{cause:C.cause||C});throw Tt.from(C,C&&C.code,e,w)}}},Gs=new Map,Ys=e=>{let t=e&&e.env||{};const{fetch:s,Request:r,Response:a}=t,n=[r,a,s];let i,l,o=n.length,c=Gs;for(;o--;)i=n[o],l=c.get(i),void 0===l&&c.set(i,l=o?new Map:Ws(t)),c=l;return l},Qs=(Ys(),{http:null,xhr:Es,fetch:{get:Ys}});St.forEach(Qs,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Af){}Object.defineProperty(e,"adapterName",{value:t})}});const $s=e=>"- ".concat(e),Ks=e=>St.isFunction(e)||null===e||!1===e;const Xs={getAdapter:function(e,t){e=St.isArray(e)?e:[e];const{length:s}=e;let r,a;const n={};for(let i=0;i<s;i++){let s;if(r=e[i],a=r,!Ks(r)&&(a=Qs[(s=String(r)).toLowerCase()],void 0===a))throw new Tt("Unknown adapter '".concat(s,"'"));if(a&&(St.isFunction(a)||(a=a.get(t))))break;n[s||"#"+i]=a}if(!a){const e=Object.entries(n).map(e=>{let[t,s]=e;return"adapter ".concat(t," ")+(!1===s?"is not supported by the environment":"is not available in the build")});let t=s?e.length>1?"since :\n"+e.map($s).join("\n"):" "+$s(e[0]):"as no adapter specified";throw new Tt("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return a},adapters:Qs};function Js(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ps(null,e)}function Zs(e){Js(e),e.headers=ds.from(e.headers),e.data=us.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Xs.getAdapter(e.adapter||rs.adapter,e)(e).then(function(t){return Js(e),t.data=us.call(e,e.transformResponse,t),t.headers=ds.from(t.headers),t},function(t){return hs(t)||(Js(e),t&&t.response&&(t.response.data=us.call(e,e.transformResponse,t.response),t.response.headers=ds.from(t.response.headers))),Promise.reject(t)})}const er="1.13.2",tr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{tr[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const sr={};tr.transitional=function(e,t,s){function r(e,t){return"[Axios v"+er+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}return(s,a,n)=>{if(!1===e)throw new Tt(r(a," has been removed"+(t?" in "+t:"")),Tt.ERR_DEPRECATED);return t&&!sr[a]&&(sr[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,a,n)}},tr.spelling=function(e){return(t,s)=>(console.warn("".concat(s," is likely a misspelling of ").concat(e)),!0)};const rr={assertOptions:function(e,t,s){if("object"!==typeof e)throw new Tt("options must be an object",Tt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const n=r[a],i=t[n];if(i){const t=e[n],s=void 0===t||i(t,n,e);if(!0!==s)throw new Tt("option "+n+" must be "+s,Tt.ERR_BAD_OPTION_VALUE);continue}if(!0!==s)throw new Tt("Unknown option "+n,Tt.ERR_BAD_OPTION)}},validators:tr},ar=rr.validators;class nr{constructor(e){this.defaults=e||{},this.interceptors={request:new Ut,response:new Ut}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{s.stack?t&&!String(s.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+t):s.stack=t}catch(Af){}}throw s}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ss(this.defaults,t);const{transitional:s,paramsSerializer:r,headers:a}=t;void 0!==s&&rr.assertOptions(s,{silentJSONParsing:ar.transitional(ar.boolean),forcedJSONParsing:ar.transitional(ar.boolean),clarifyTimeoutError:ar.transitional(ar.boolean)},!1),null!=r&&(St.isFunction(r)?t.paramsSerializer={serialize:r}:rr.assertOptions(r,{encode:ar.function,serialize:ar.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),rr.assertOptions(t,{baseUrl:ar.spelling("baseURL"),withXsrfToken:ar.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=a&&St.merge(a.common,a[t.method]);a&&St.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=ds.concat(n,a);const i=[];let l=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!l){const e=[Zs.bind(this),void 0];for(e.unshift(...i),e.push(...o),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=Zs.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return Vt(ws((e=Ss(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}St.forEach(["delete","get","head","options"],function(e){nr.prototype[e]=function(t,s){return this.request(Ss(s||{},{method:e,url:t,data:(s||{}).data}))}}),St.forEach(["post","put","patch"],function(e){function t(t){return function(s,r,a){return this.request(Ss(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}nr.prototype[e]=t(),nr.prototype[e+"Form"]=t(!0)});const ir=nr;class lr{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const s=this;this.promise.then(e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{s.subscribe(e),t=e}).then(e);return r.cancel=function(){s.unsubscribe(t)},r},e(function(e,r,a){s.reason||(s.reason=new ps(e,r,a),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new lr(function(t){e=t}),cancel:e}}}const or=lr;const cr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(cr).forEach(e=>{let[t,s]=e;cr[s]=t});const dr=cr;const ur=function e(t){const s=new ir(t),r=ze(ir.prototype.request,s);return St.extend(r,ir.prototype,s,{allOwnKeys:!0}),St.extend(r,s,null,{allOwnKeys:!0}),r.create=function(s){return e(Ss(t,s))},r}(rs);ur.Axios=ir,ur.CanceledError=ps,ur.CancelToken=or,ur.isCancel=hs,ur.VERSION=er,ur.toFormData=Ot,ur.AxiosError=Tt,ur.Cancel=ur.CanceledError,ur.all=function(e){return Promise.all(e)},ur.spread=function(e){return function(t){return e.apply(null,t)}},ur.isAxiosError=function(e){return St.isObject(e)&&!0===e.isAxiosError},ur.mergeConfig=Ss,ur.AxiosHeaders=ds,ur.formToJSON=e=>ts(St.isHTMLForm(e)?new FormData(e):e),ur.getAdapter=Xs.getAdapter,ur.HttpStatusCode=dr,ur.default=ur;const hr=ur.create({baseURL:"/api",headers:{"Content-Type":"application/json"},timeout:3e4,withCredentials:!0});hr.interceptors.request.use(e=>{const t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t));const s=localStorage.getItem("csrfToken");s&&(e.headers["X-CSRF-Token"]=s);const r=localStorage.getItem("selectedStoreId");if(r&&(e.headers["X-Shop-Id"]=r),e.data instanceof FormData&&delete e.headers["Content-Type"],"/auth/profile"===e.url&&"put"===e.method){if("string"===typeof e.data&&36===e.data.length&&e.data.includes("-"))return Promise.reject(new Error("Les donn\xe9es ne peuvent pas \xeatre un UUID. Veuillez envoyer un objet avec name et/ou phone."));if("object"!==typeof e.data||Array.isArray(e.data))return Promise.reject(new Error("Les donn\xe9es doivent \xeatre un objet"))}return e},e=>Promise.reject(e));let mr=!1,pr=[];function xr(e){return mr?new Promise(t=>{var s;s=s=>{e.headers.Authorization="Bearer ".concat(s),t(hr(e))},pr.push(s)}):(mr=!0,hr.post("/auth/refresh",{},{withCredentials:!0}).then(t=>{const{accessToken:s,csrfToken:r}=t.data;var a;return localStorage.setItem("token",s),r&&localStorage.setItem("csrfToken",r),a=s,pr.forEach(e=>e(a)),pr=[],e.headers.Authorization="Bearer ".concat(s),hr(e)}).catch(()=>(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("csrfToken"),window.location.href="/login",Promise.reject(new Error("Session expir\xe9e. Veuillez vous reconnecter.")))).finally(()=>{mr=!1}))}hr.interceptors.response.use(e=>e,e=>{if(e.response){var t,s;const{status:r,data:a,config:n}=e.response;return 401!==r||!n||null!==(t=n.url)&&void 0!==t&&t.startsWith("/auth/refresh")||null!==(s=n.url)&&void 0!==s&&s.startsWith("/auth/login")?401===r?(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("csrfToken"),window.location.href="/login",Promise.reject(new Error("Session expir\xe9e. Veuillez vous reconnecter."))):Promise.reject(new Error((null===a||void 0===a?void 0:a.message)||(null===a||void 0===a?void 0:a.error)||"Une erreur est survenue")):xr(n)}return e.request?Promise.reject(new Error("Impossible de contacter le serveur")):Promise.reject(new Error(e.message))});const fr=hr;async function gr(){const e=await fr.get("/auth/me");return e.data.user&&(localStorage.setItem("user",JSON.stringify(e.data.user)),window.dispatchEvent(new CustomEvent("userUpdated",{detail:e.data.user}))),e.data}async function br(e){return(await fr.post("/auth/resend-verification",{email:e})).data}var yr=s(579);const vr=(0,n.createContext)(null);function jr(e){let{children:t}=e;const[s,r]=(0,n.useState)(null),[a,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{const e=localStorage.getItem("user"),t=localStorage.getItem("token");if(e&&t)try{const t=JSON.parse(e);r(t)}catch(l){localStorage.removeItem("user"),localStorage.removeItem("token")}i(!1);const s=e=>{e.detail&&(r(e.detail),localStorage.setItem("user",JSON.stringify(e.detail)))};window.addEventListener("userUpdated",s);const a=()=>{"visible"===document.visibilityState&&localStorage.getItem("token")&&gr().catch(()=>{})};document.addEventListener("visibilitychange",a);const n=e=>{if("user"===e.key&&e.newValue)try{const t=JSON.parse(e.newValue);t&&t.id&&r(t)}catch(t){}};return window.addEventListener("storage",n),()=>{window.removeEventListener("userUpdated",s),document.removeEventListener("visibilitychange",a),window.removeEventListener("storage",n)}},[]);const l={user:s,loading:a,login:async(e,t)=>{try{const s=await async function(e,t){const s=await fr.post("/auth/login",{email:e,password:t});return s.data.accessToken&&(localStorage.setItem("token",s.data.accessToken),localStorage.setItem("user",JSON.stringify(s.data.user)),s.data.csrfToken&&localStorage.setItem("csrfToken",s.data.csrfToken)),s.data}(e,t);return s.user&&s.accessToken?(r(s.user),{success:!0,user:s.user}):{success:!1,error:"Email ou mot de passe incorrect"}}catch(a){var s;if(null!==(s=a.response)&&void 0!==s&&s.data){const e=a.response.data;return{success:!1,error:e.message||"Erreur lors de la connexion",requiresAdminApproval:e.requiresAdminApproval||!1,requiresEmailVerification:e.requiresEmailVerification||!1}}return{success:!1,error:a.message||"Erreur lors de la connexion"}}},logout:()=>{r(null),localStorage.removeItem("user"),localStorage.removeItem("token")},isAuthenticated:!!s};return(0,yr.jsx)(vr.Provider,{value:l,children:t})}function Nr(){const e=(0,n.useContext)(vr);if(!e)throw new Error("useAuth doit \xeatre utilis\xe9 dans un AuthProvider");return e}async function wr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/shops",{params:e})).data}async function kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/client/shops",{params:e})).data}async function Sr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/manager/shops",{params:e})).data}const Cr=(0,n.createContext)(null);function Er(e){let{children:t}=e;const{user:s}=Nr(),[r,a]=(0,n.useState)([]),[i,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(!1);(0,n.useEffect)(()=>{s?d():(a([]),l(null))},[s]);const d=(0,n.useCallback)(async()=>{if(s)try{c(!0);const e="CLIENT"===s.role,t="MANAGER"===s.role,r=e?kr:t?Sr:wr,n=await r({page:1,limit:200});let o=(null===n||void 0===n?void 0:n.shops)||[];if(["MANAGER","PREPARATEUR","LIVREUR","COMMERCIAL","STOCK_MANAGER"].includes(s.role)){const e=s.storeId||localStorage.getItem("selectedStoreId");e&&(o=o.filter(t=>t&&t.id===e),o.length&&l(e))}o=o.filter(e=>e&&e.id&&e.name),a(o);const d=localStorage.getItem("selectedStoreId");d&&o.some(e=>e.id===d)?l(d):1!==o.length||i||l(o[0].id)}catch(e){console.error("Erreur de chargement des magasins:",e)}finally{c(!1)}},[s,i]),u=(0,n.useCallback)(e=>{l(e),localStorage.setItem("selectedStoreId",e)},[]),h=r.find(e=>e.id===i)||r[0]||null,m={stores:r,selectedStoreId:i,activeStore:h,loading:o,selectStore:u,loadStores:d};return(0,yr.jsx)(Cr.Provider,{value:m,children:t})}function _r(){const e=(0,n.useContext)(Cr);if(!e)throw new Error("useStore doit \xeatre utilis\xe9 dans un StoreProvider");return e}const Tr=(0,n.createContext)(null);function Rr(e){let{children:t}=e;const[s,r]=(0,n.useState)([]),a=e=>{r(t=>t.filter(t=>t.productId!==e))},i={cartItems:s,addToCart:(e,t,s)=>{r(r=>r.find(t=>t.productId===e.id)?r.map(s=>s.productId===e.id?Yt(Yt({},s),{},{quantity:s.quantity+t}):s):[...r,{productId:e.id,product:e,quantity:t,unit:s,price:e.priceHT||0}])},removeFromCart:a,updateQuantity:(e,t)=>{t<=0?a(e):r(s=>s.map(s=>s.productId===e?Yt(Yt({},s),{},{quantity:t}):s))},clearCart:()=>{r([])},getTotal:()=>s.reduce((e,t)=>e+t.price*t.quantity,0)};return(0,yr.jsx)(Tr.Provider,{value:i,children:t})}function Mr(){const e=(0,n.useContext)(Tr);if(!e)throw new Error("useCart doit \xeatre utilis\xe9 dans un CartProvider");return e}const Ar=(0,n.createContext)(null);function Pr(e){let{children:t}=e;const[s,r]=(0,n.useState)([]),[a,i]=(0,n.useState)(!1),l={orders:s,setOrders:r,loading:a,setLoading:i};return(0,yr.jsx)(Ar.Provider,{value:l,children:t})}class Or extends n.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?(0,yr.jsx)("div",{className:"flex items-center justify-center py-20 bg-gray-50",children:(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Une erreur est survenue"}),(0,yr.jsx)("p",{className:"text-gray-600 mb-4",children:"D\xe9sol\xe9, quelque chose s'est mal pass\xe9. Veuillez r\xe9essayer."}),(0,yr.jsx)("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"btn btn-primary",children:"Recharger la page"})]})}):this.props.children}}const Dr=Or;function Ir(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Lr=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Fr=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>Boolean(e)&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var zr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Vr=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Ur=(0,n.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:l="",children:o,iconNode:c}=e,d=Ir(e,Vr);return(0,n.createElement)("svg",Yt(Yt(Yt({ref:t},zr),{},{width:r,height:r,stroke:s,strokeWidth:i?24*Number(a)/Number(r):a,className:Fr("lucide",l)},!o&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"}),d),[...c.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),Hr=["className"],Br=(e,t)=>{const s=(0,n.forwardRef)((s,r)=>{let{className:a}=s,i=Ir(s,Hr);return(0,n.createElement)(Ur,Yt({ref:r,iconNode:t,className:Fr("lucide-".concat((l=Lr(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),a)},i));var l});return s.displayName=Lr(e),s},qr=Br("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Wr=Br("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Gr=Br("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]),Yr=Br("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Qr=Br("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),$r=Br("factory",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Kr=Br("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Xr=Br("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Jr=Br("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),Zr=Br("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),ea=Br("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ta=Br("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),sa=Br("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),ra=Br("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),aa=Br("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),na=Br("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),ia=Br("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),la=Br("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),oa=Br("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),ca=Br("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),da=Br("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ua=Br("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ha=Br("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),ma=Br("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),pa="/login",xa="/verify-email",fa={DASHBOARD:"/admin/dashboard",CLIENTS:"/admin/clients",STORES:"/admin/stores",USERS:"/admin/users",ORDERS:"/admin/orders",PRODUCTS:"/admin/products",CATEGORIES:"/admin/categories",PRICING:"/admin/pricing",SUPPLIERS:"/admin/suppliers",SALES:"/admin/sales",INVOICES:"/admin/invoices",RETURNS:"/admin/returns",PAYMENTS:"/admin/payments",REPORTS:"/admin/reports",ANALYTICS:"/admin/analytics",EXPORTS:"/admin/exports",EMAILS:"/admin/emails",ORDERS_AGGREGATE:"/admin/orders/aggregate",SUPPLIER_ORDERS:"/admin/supplier-orders",NOTIFICATIONS:"/admin/notifications",SETTINGS:"/admin/settings"},ga={DASHBOARD:"/client/dashboard",ORDERS:"/client/orders",ORDER_CREATE:"/client/orders/create",ORDER_DETAIL:"/client/orders/:id",PREPARATION:"/client/preparation",STORES:"/client/stores",STORE_DETAIL:"/client/stores/:id",PRODUCTS:"/client/products",STOCKS:"/client/stocks",SALES:"/client/sales",CUSTOMERS:"/client/customers",PROMOTIONS:"/client/promotions",DELIVERIES:"/client/deliveries",FINANCES:"/client/finances",NOTIFICATIONS:"/client/notifications",USERS:"/client/users",SETTINGS:"/client/settings"},ba={DASHBOARD:"/manager/dashboard",STORES:"/manager/stores",USERS:"/manager/users",ORDERS:"/manager/orders",STOCKS:"/manager/stocks",SALES:"/manager/sales",REPORTS:"/manager/reports",GOALS:"/manager/goals",NOTIFICATIONS:"/manager/notifications",SETTINGS:"/manager/settings"},ya="/help",va=e=>{switch(e){case"ADMIN":return fa.DASHBOARD;case"CLIENT":case"PREPARATEUR":case"LIVREUR":case"COMMERCIAL":case"STOCK_MANAGER":return ga.DASHBOARD;case"MANAGER":return ba.DASHBOARD;default:return pa}},ja="ADMIN",Na="CLIENT",wa="MANAGER",ka="PREPARATEUR",Sa="LIVREUR",Ca="COMMERCIAL",Ea="STOCK_MANAGER",_a="FINANCE",Ta={[ja]:"Administrateur",[Na]:"Client",[wa]:"Manager",[ka]:"Pr\xe9parateur",[Sa]:"Livreur",[Ca]:"Commercial",[Ea]:"Gestionnaire de stock",[_a]:"Finance"},Ra=Br("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ma=Br("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Aa=Br("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);async function Pa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/notifications",{params:e})).data}async function Oa(e){return(await fr.put("/notifications/"+e+"/read")).data}async function Da(){return(await fr.put("/notifications/read-all")).data}async function Ia(){return(await fr.get("/notifications/unread-count")).data}const La={ORDER_NEW:"from-blue-50 to-blue-100 border-blue-200 text-blue-800",ORDER_STATUS_CHANGED:"from-blue-50 to-blue-100 border-blue-200 text-blue-800",ORDER_READY:"from-green-50 to-green-100 border-green-200 text-green-800",ORDER_DELIVERED:"from-green-50 to-green-100 border-green-200 text-green-800",PAYMENT_RECEIVED:"from-green-50 to-green-100 border-green-200 text-green-800",STOCK_LOW:"from-orange-50 to-orange-100 border-orange-200 text-orange-800",STOCK_OUT:"from-red-50 to-red-100 border-red-200 text-red-800",SYSTEM_ALERT:"from-amber-50 to-amber-100 border-amber-200 text-amber-800"};const Fa=function(){const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!1),[a,i]=(0,n.useState)(0),[l,o]=(0,n.useState)(!1),c=(0,n.useCallback)(async()=>{try{var e,s;o(!0);const[r,a]=await Promise.all([Pa({limit:20}),Ia()]);t(null!==(e=null===r||void 0===r?void 0:r.notifications)&&void 0!==e?e:[]),i(null!==(s=null===a||void 0===a?void 0:a.count)&&void 0!==s?s:0)}catch(r){t([]),i(0)}finally{o(!1)}},[]);(0,n.useEffect)(()=>{c();const e=setInterval(c,6e4);return()=>clearInterval(e)},[c]),(0,n.useEffect)(()=>{s&&c()},[s,c]);const d=async s=>{const r=e.find(e=>e.id===s);try{await async function(e){return(await fr.delete("/notifications/"+e)).data}(s),t(e=>e.filter(e=>e.id!==s)),r&&!r.read&&i(e=>Math.max(0,e-1))}catch(a){}};return(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsxs)("button",{onClick:()=>r(!s),className:"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,yr.jsx)(na,{className:"h-6 w-6"}),a>0&&(0,yr.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center animate-pulse",children:a})]}),s&&(0,yr.jsxs)("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-xl shadow-2xl border-2 border-gray-200 z-50 max-h-96 overflow-y-auto",children:[(0,yr.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-primary-500 to-primary-600 text-white p-4 rounded-t-xl",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsx)("h3",{className:"font-bold text-lg",children:"Notifications"}),(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[a>0&&(0,yr.jsx)("button",{onClick:async()=>{try{await Da(),t(e=>e.map(e=>Yt(Yt({},e),{},{read:!0}))),i(0)}catch(e){}},className:"text-xs bg-white/20 hover:bg-white/30 px-2 py-1 rounded transition-colors",children:"Tout lire"}),(0,yr.jsx)("button",{onClick:()=>r(!1),className:"hover:bg-white/20 p-1 rounded transition-colors",children:(0,yr.jsx)(ua,{className:"h-4 w-4"})})]})]})}),(0,yr.jsx)("div",{className:"p-2",children:0===e.length?(0,yr.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,yr.jsx)(na,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,yr.jsx)("p",{className:"text-sm",children:"Aucune notification"})]}):e.map(e=>{const s=e.icon;return(0,yr.jsx)("div",{className:"mb-2 p-3 rounded-lg border-2 bg-gradient-to-r ".concat((r=e.type,La[r]||"from-gray-50 to-gray-100 border-gray-200 text-gray-800")," ").concat(e.read?"opacity-60":""," hover:shadow-md transition-all"),children:(0,yr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,yr.jsx)(s,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("h4",{className:"font-bold text-sm mb-1",children:e.title}),(0,yr.jsx)("p",{className:"text-xs mb-2",children:e.message}),(0,yr.jsx)("p",{className:"text-xs opacity-70",children:new Date(e.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),(0,yr.jsxs)("div",{className:"flex flex-col space-y-1",children:[!e.read&&(0,yr.jsx)("button",{onClick:()=>(async e=>{try{await Oa(e),t(t=>t.map(t=>t.id===e?Yt(Yt({},t),{},{read:!0}):t)),i(e=>Math.max(0,e-1))}catch(s){}})(e.id),className:"text-xs hover:underline",title:"Marquer comme lu",children:"\u2713"}),(0,yr.jsx)("button",{onClick:()=>d(e.id),className:"text-xs hover:underline text-red-600",title:"Supprimer",children:"\u2715"})]})]})},e.id);var r})})]})]})},za=Br("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Va=Br("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Ua=Br("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);const Ha=function(){const[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(""),[a,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(-1),u=(0,n.useRef)(null),h=(0,n.useRef)(null),m=ae();(0,n.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&(t(!1),r(""),i(null))},s=e=>{if("Escape"===e.key)t(!1),r(""),i(null);else if("k"===e.key&&(e.metaKey||e.ctrlKey)){var s,a;e.preventDefault(),t(!0),null===(s=u.current)||void 0===s||null===(a=s.querySelector("input"))||void 0===a||a.focus()}};return document.addEventListener("mousedown",e),document.addEventListener("keydown",s),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",s)}},[]),(0,n.useEffect)(()=>{if(s.length<2)return void i(null);const e=setTimeout(async()=>{o(!0);try{const e=await async function(e){try{return(await fr.get("/search",{params:{q:e}})).data}catch(r){var t,s;if(404===(null===(t=r.response)||void 0===t?void 0:t.status)||403===(null===(s=r.response)||void 0===s?void 0:s.status))return{success:!0,results:{products:[],clients:[],orders:[],users:[],stores:[]}};throw r}}(s);i(e.results),d(-1)}catch(e){console.error("Erreur recherche:",e),i(null)}finally{o(!1)}},300);return()=>clearTimeout(e)},[s]);const p=(e,s)=>{switch(t(!1),r(""),i(null),e){case"product":m("".concat(fa.PRODUCTS,"?highlight=").concat(s.id));break;case"client":m("".concat(fa.CLIENTS,"?highlight=").concat(s.id));break;case"order":m("".concat(fa.ORDERS,"?highlight=").concat(s.id));break;case"user":m("".concat(fa.USERS,"?highlight=").concat(s.id));break;case"store":m("".concat(fa.STORES,"?highlight=").concat(s.id))}},x=e=>({product:Qr,client:Wr,order:Yr,user:za,store:Gr}[e]||Qr),f=a?[...a.products.map(e=>Yt(Yt({},e),{},{type:"product"})),...a.clients.map(e=>Yt(Yt({},e),{},{type:"client"})),...a.orders.map(e=>Yt(Yt({},e),{},{type:"order"})),...a.users.map(e=>Yt(Yt({},e),{},{type:"user"})),...a.stores.map(e=>Yt(Yt({},e),{},{type:"store"}))]:[];return(0,yr.jsxs)("div",{ref:u,className:"relative",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher... (Ctrl+K)",value:s,onChange:e=>{r(e.target.value),t(!0)},onFocus:()=>t(!0),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s&&(0,yr.jsx)("button",{onClick:()=>{r(""),i(null)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,yr.jsx)(ua,{className:"h-4 w-4"})})]}),e&&(0,yr.jsx)("div",{ref:h,className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:l?(0,yr.jsxs)("div",{className:"p-8 text-center",children:[(0,yr.jsx)(Ua,{className:"h-6 w-6 animate-spin text-blue-600 mx-auto mb-2"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Recherche en cours..."})]}):s.length<2?(0,yr.jsx)("div",{className:"p-8 text-center",children:(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Tapez au moins 2 caract\xe8res"})}):0===f.length?(0,yr.jsx)("div",{className:"p-8 text-center",children:(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Aucun r\xe9sultat trouv\xe9"})}):(0,yr.jsxs)("div",{className:"py-2",children:[a&&(0,yr.jsx)("div",{className:"px-4 py-2 border-b border-gray-200 bg-gray-50",children:(0,yr.jsxs)("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:[f.length," r\xe9sultat",f.length>1?"s":""]})}),(null===a||void 0===a?void 0:a.products.length)>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,yr.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Produits"})}),a.products.map((e,t)=>{var s,r;const a=x("product");return(0,yr.jsxs)("button",{onClick:()=>p("product",e),className:"w-full px-4 py-3 hover:bg-gray-50 flex items-center gap-3 text-left transition-colors",children:[(0,yr.jsx)(a,{className:"h-5 w-5 text-blue-600"}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:[null===(s=e.category)||void 0===s?void 0:s.name," \u2022 ",e.sku]})]}),(0,yr.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:[null===(r=e.price)||void 0===r?void 0:r.toFixed(2)," \u20ac"]})]},e.id)})]}),(null===a||void 0===a?void 0:a.clients.length)>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,yr.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Clients"})}),a.clients.map(e=>{const t=x("client");return(0,yr.jsxs)("button",{onClick:()=>p("client",e),className:"w-full px-4 py-3 hover:bg-gray-50 flex items-center gap-3 text-left transition-colors",children:[(0,yr.jsx)(t,{className:"h-5 w-5 text-green-600"}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:[e.city," \u2022 ",e.email]})]})]},e.id)})]}),(null===a||void 0===a?void 0:a.orders.length)>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,yr.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Commandes"})}),a.orders.map(e=>{var t,s;const r=x("order");return(0,yr.jsxs)("button",{onClick:()=>p("order",e),className:"w-full px-4 py-3 hover:bg-gray-50 flex items-center gap-3 text-left transition-colors",children:[(0,yr.jsx)(r,{className:"h-5 w-5 text-orange-600"}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.orderNumber||e.id.substring(0,8)}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:[null===(t=e.shop)||void 0===t?void 0:t.name," \u2022 ",new Date(e.createdAt).toLocaleDateString("fr-FR")]})]}),(0,yr.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:[null===(s=e.totalTTC)||void 0===s?void 0:s.toFixed(2)," \u20ac"]})]},e.id)})]}),(null===a||void 0===a?void 0:a.users.length)>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,yr.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Utilisateurs"})}),a.users.map(e=>{const t=x("user");return(0,yr.jsxs)("button",{onClick:()=>p("user",e),className:"w-full px-4 py-3 hover:bg-gray-50 flex items-center gap-3 text-left transition-colors",children:[(0,yr.jsx)(t,{className:"h-5 w-5 text-purple-600"}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.name||e.email}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:[e.email," \u2022 ",e.role]})]})]},e.id)})]}),(null===a||void 0===a?void 0:a.stores.length)>0&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,yr.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase",children:"Magasins"})}),a.stores.map(e=>{const t=x("store");return(0,yr.jsxs)("button",{onClick:()=>p("store",e),className:"w-full px-4 py-3 hover:bg-gray-50 flex items-center gap-3 text-left transition-colors",children:[(0,yr.jsx)(t,{className:"h-5 w-5 text-indigo-600"}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:[e.address," \u2022 ",e.city," ",e.postalCode]})]})]},e.id)})]})]})})]})};const Ba=function(e){var t,s;let{children:r}=e;const{user:a,logout:i}=Nr(),l=ae(),o=se(),[c,d]=(0,n.useState)(!1),u=(()=>{if(!a)return[];const e=a.role;return"ADMIN"===e?[{path:fa.DASHBOARD,label:"Dashboard",icon:qr},{path:fa.CLIENTS,label:"Clients",icon:Wr},{path:fa.STORES,label:"Magasins",icon:Gr},{path:fa.USERS,label:"Utilisateurs",icon:Wr},{path:fa.ORDERS,label:"Commandes",icon:Yr},{path:fa.ORDERS_AGGREGATE,label:"Agr\xe9gation",icon:Qr},{path:fa.SUPPLIER_ORDERS,label:"Commandes Fournisseur",icon:$r},{path:fa.PRODUCTS,label:"Produits",icon:Qr},{path:fa.CATEGORIES,label:"Cat\xe9gories",icon:Kr},{path:fa.PRICING,label:"Tarification",icon:Kr},{path:fa.SUPPLIERS,label:"Fournisseurs",icon:$r},{path:fa.SALES,label:"Ventes",icon:Xr},{path:fa.INVOICES,label:"Facturation",icon:Jr},{path:fa.PAYMENTS,label:"Paiements",icon:Zr},{path:fa.RETURNS,label:"Retours",icon:ea},{path:fa.REPORTS,label:"Rapports",icon:ta},{path:fa.ANALYTICS,label:"Analytics",icon:sa},{path:fa.EXPORTS,label:"Exports",icon:ra},{path:fa.EMAILS,label:"Emails",icon:aa},{path:fa.NOTIFICATIONS,label:"Notifications",icon:na},{path:fa.SETTINGS,label:"Param\xe8tres",icon:ia}]:"CLIENT"===e?[{path:ga.DASHBOARD,label:"Dashboard",icon:qr},{path:ga.ORDERS,label:"Commandes",icon:Yr},{path:ga.PREPARATION,label:"Pr\xe9paration",icon:Qr},{path:ga.PRODUCTS,label:"Produits",icon:Qr},{path:ga.STOCKS,label:"Stocks",icon:Qr},{path:ga.SALES,label:"Ventes",icon:Xr},{path:ga.CUSTOMERS,label:"Clients",icon:la},{path:ga.PROMOTIONS,label:"Promotions",icon:oa},{path:ga.DELIVERIES,label:"Livraisons",icon:ca},{path:ga.FINANCES,label:"Finances",icon:Xr},{path:ga.NOTIFICATIONS,label:"Notifications",icon:na},{path:ga.SETTINGS,label:"Param\xe8tres",icon:ia}]:"MANAGER"===e?[{path:ba.DASHBOARD,label:"Dashboard",icon:qr},{path:ba.STORES,label:"Mes Magasins",icon:Gr},{path:ba.USERS,label:"\xc9quipes",icon:Wr},{path:ba.ORDERS,label:"Commandes",icon:Yr},{path:ba.STOCKS,label:"Stocks",icon:Qr},{path:ba.SALES,label:"Ventes",icon:Xr},{path:ba.REPORTS,label:"Rapports",icon:ta},{path:ba.GOALS,label:"Objectifs",icon:da},{path:ba.NOTIFICATIONS,label:"Notifications",icon:na},{path:ba.SETTINGS,label:"Param\xe8tres",icon:ia}]:[{path:ga.DASHBOARD,label:"Dashboard",icon:qr},{path:ga.ORDERS,label:"Commandes",icon:Yr},{path:ga.PREPARATION,label:"Pr\xe9paration",icon:Qr},{path:ga.PRODUCTS,label:"Produits",icon:Qr},{path:ga.STOCKS,label:"Stocks",icon:Qr},{path:ga.SALES,label:"Ventes",icon:Xr},{path:ga.DELIVERIES,label:"Livraisons",icon:ca},{path:ga.SETTINGS,label:"Param\xe8tres",icon:ia}]})(),h=e=>o.pathname===e;return(0,yr.jsxs)("div",{className:"min-h-screen bg-gray-50 lg:flex",children:[(0,yr.jsx)("aside",{className:"fixed top-0 left-0 z-40 h-screen transition-all duration-300 ".concat(c?"translate-x-0":"-translate-x-full"," lg:translate-x-0 lg:relative lg:z-auto w-64 bg-white border-r border-gray-200 lg:flex-shrink-0 shadow-xl lg:shadow-none"),children:(0,yr.jsxs)("div",{className:"h-full flex flex-col",children:[(0,yr.jsxs)("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-br from-primary-50 to-white",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsx)("h1",{className:"text-xl font-bold text-gradient animate-fade-in",children:"Fruits & L\xe9gumes"}),(0,yr.jsx)("button",{onClick:()=>d(!1),className:"lg:hidden p-2 text-gray-400 hover:text-gray-600",children:(0,yr.jsx)(ua,{className:"h-5 w-5"})})]}),a&&(0,yr.jsx)("p",{className:"text-sm text-gray-600 mt-2 animate-slide-in-right",children:(0,yr.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-primary-100 text-primary-700 text-xs font-semibold",children:Ta[a.role]||a.role})})]}),(0,yr.jsx)("nav",{className:"flex-1 overflow-y-auto p-4",children:(0,yr.jsx)("ul",{className:"space-y-2",children:u.map((e,t)=>{const s=e.icon;return(0,yr.jsx)("li",{className:"animate-slide-in-right",style:{animationDelay:"".concat(.05*t,"s")},children:(0,yr.jsxs)(De,{to:e.path,onClick:()=>d(!1),className:"group flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-300 ".concat(h(e.path)?"bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold shadow-md":"text-gray-700 hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 hover:shadow-sm hover:translate-x-1"),children:[(0,yr.jsx)(s,{className:"h-5 w-5 transition-transform group-hover:scale-110 ".concat(h(e.path)?"animate-bounce-in":"")}),(0,yr.jsx)("span",{children:e.label})]})},e.path)})})}),(0,yr.jsx)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(0,yr.jsxs)("button",{onClick:()=>{i(),l(pa)},className:"group flex items-center space-x-3 w-full px-4 py-3 text-gray-700 hover:bg-red-50 hover:text-red-600 rounded-lg transition-all duration-300 hover:shadow-md",children:[(0,yr.jsx)(ha,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-medium",children:"D\xe9connexion"})]})})]})}),c&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>d(!1)}),(0,yr.jsxs)("div",{className:"lg:flex-1 lg:overflow-hidden",children:[(0,yr.jsx)("header",{className:"glass bg-white/95 border-b border-gray-200 sticky top-0 z-20 shadow-sm",children:(0,yr.jsxs)("div",{className:"px-4 lg:px-6 py-3 lg:py-4 flex items-center justify-between",children:[(0,yr.jsx)("button",{onClick:()=>d(!0),className:"lg:hidden p-2 text-gray-400 hover:text-primary-600 transition-all hover:scale-110 active:scale-95",children:(0,yr.jsx)(ma,{className:"h-6 w-6"})}),(0,yr.jsx)("div",{className:"flex-1 max-w-2xl mx-4 hidden md:block",children:(0,yr.jsx)(Ha,{})}),(0,yr.jsx)("div",{className:"flex-1 md:hidden"}),a&&(0,yr.jsxs)("div",{className:"flex items-center space-x-3 lg:space-x-5",children:[(0,yr.jsx)(Fa,{}),(0,yr.jsxs)("div",{className:"flex items-center space-x-3 group",children:[(0,yr.jsxs)("div",{className:"text-right hidden md:block",children:[(0,yr.jsx)("p",{className:"text-sm font-semibold text-gray-900 group-hover:text-primary-600 transition-colors",children:a.name||"".concat(a.firstName||""," ").concat(a.lastName||"").trim()||"Utilisateur"}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:a.email})]}),(0,yr.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-bold shadow-md group-hover:shadow-lg transition-all group-hover:scale-110 overflow-hidden",children:a.avatarUrl?(0,yr.jsx)("img",{src:a.avatarUrl,alt:"",className:"w-full h-full object-cover"}):(0,yr.jsx)("span",{children:((a.name||"").split(" ").filter(Boolean).map(e=>e.charAt(0)).slice(0,2).join("")||((null===(t=a.firstName)||void 0===t?void 0:t.charAt(0))||"")+((null===(s=a.lastName)||void 0===s?void 0:s.charAt(0))||"")||"U").toUpperCase()})})]})]})]})}),(0,yr.jsx)("main",{className:"p-3 md:p-4 lg:p-6 pb-6 md:pb-8",children:r})]})]})},qa="clients",Wa="stores",Ga="users",Ya="orders",Qa="products",$a="stocks",Ka="invoices",Xa="suppliers",Ja="commissions",Za={READ:"read",CREATE:"create",UPDATE:"update",DELETE:"delete"},en={ADMIN:{[qa]:[Za.READ,Za.CREATE,Za.UPDATE,Za.DELETE],[Wa]:[Za.READ,Za.CREATE,Za.UPDATE,Za.DELETE],[Ga]:[Za.READ,Za.CREATE,Za.UPDATE,Za.DELETE],[Ya]:[Za.READ,Za.UPDATE],[Qa]:[Za.READ,Za.CREATE,Za.UPDATE,Za.DELETE],[Ka]:[Za.READ],[Xa]:[Za.READ,Za.CREATE,Za.UPDATE,Za.DELETE],[Ja]:[Za.READ]},CLIENT:{[Ya]:[Za.READ,Za.CREATE],[Qa]:[Za.READ],[$a]:[Za.READ],[Ka]:[Za.READ]},MANAGER:{[Ya]:[Za.READ,Za.UPDATE],[Qa]:[Za.READ],[$a]:[Za.READ,Za.UPDATE]},PREPARATEUR:{[Ya]:[Za.READ,Za.UPDATE],[$a]:[Za.READ,Za.UPDATE]},LIVREUR:{[Ya]:[Za.READ,Za.UPDATE]}};function tn(e){const{user:t}=Nr(),s=(0,n.useMemo)(()=>{var s;return t&&t.role&&(null===(s=en[t.role])||void 0===s?void 0:s[e])||[]},[t,e]);return{canRead:s.includes(Za.READ),canCreate:s.includes(Za.CREATE),canUpdate:s.includes(Za.UPDATE),canDelete:s.includes(Za.DELETE),permissions:s}}const sn=function(e){let{children:t,requiredRole:s,requiredResource:r,requiredAction:a,requiredRoles:n=[]}=e;const{user:i,loading:l}=Nr(),{canRead:o}=tn(r||Ya);if(l)return(0,yr.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Chargement..."})]})});if(!i)return(0,yr.jsx)(ve,{to:pa,replace:!0});if(s&&i.role!==s)if(n.length>0&&n.includes(i.role));else if(0===n.length)return(0,yr.jsx)(ve,{to:pa,replace:!0});return r&&a&&a===Za.READ&&!o?(0,yr.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acc\xe8s refus\xe9"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Vous n'avez pas les permissions n\xe9cessaires pour acc\xe9der \xe0 cette page."})]})}):(0,yr.jsx)(yr.Fragment,{children:t})},rn=Br("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),an=Br("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),nn=Br("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),ln=Br("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),on=Br("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),cn=Br("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),dn=Br("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),un=Br("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const hn=function(e){let{isOpen:t,onClose:s,message:r,type:a="info",duration:i=4e3}=e;if((0,n.useEffect)(()=>{if(t&&i>0){const e=setTimeout(()=>{s()},i);return()=>clearTimeout(e)}},[t,i,s]),!t)return null;const l={success:{icon:cn,bg:"bg-green-500",border:"border-green-600"},error:{icon:dn,bg:"bg-red-500",border:"border-red-600"},warning:{icon:dn,bg:"bg-yellow-500",border:"border-yellow-600"},info:{icon:un,bg:"bg-blue-500",border:"border-blue-600"}},o=l[a]||l.info,c=o.icon;return(0,yr.jsxs)("div",{className:"fixed bottom-4 right-4 ".concat(o.bg," text-white px-6 py-4 rounded-xl shadow-xl border-2 ").concat(o.border," flex items-center space-x-3 animate-slide-in-right z-50 min-w-[300px] max-w-md"),children:[(0,yr.jsx)(c,{className:"h-5 w-5 flex-shrink-0"}),(0,yr.jsx)("p",{className:"flex-1 font-medium",children:r}),(0,yr.jsx)("button",{onClick:s,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:(0,yr.jsx)(ua,{className:"h-4 w-4"})})]})};function mn(){const[e,t]=(0,n.useState)({isOpen:!1,message:"",type:"info"}),s=(0,n.useCallback)(function(e){t({isOpen:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"})},[]),r=(0,n.useCallback)(()=>{t(e=>Yt(Yt({},e),{},{isOpen:!1}))},[]),a=(0,n.useCallback)(e=>{s(e,"success")},[s]),i=(0,n.useCallback)(e=>{s(e,"error")},[s]),l=(0,n.useCallback)(e=>{s(e,"info")},[s]);return{toast:e,showToast:s,hideToast:r,showSuccess:a,showError:i,showInfo:l}}const pn=function(){const e=ae(),{login:t}=Nr(),{toast:s,hideToast:r,showError:a,showSuccess:i}=mn(),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)({email:"",password:""}),[u,h]=(0,n.useState)({name:"",email:"",password:"",confirmPassword:"",phone:"",shopName:"",address:"",city:"",postalCode:""}),[m,p]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1);return(0,yr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4 py-8",children:(0,yr.jsxs)("div",{className:l?"max-w-2xl w-full":"max-w-md w-full",children:[(0,yr.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,yr.jsxs)("div",{className:"text-center mb-8",children:[(0,yr.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-600 rounded-full mb-4",children:(0,yr.jsx)(rn,{className:"h-8 w-8 text-white"})}),(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:l?"Cr\xe9er un compte":"Connexion"}),(0,yr.jsx)("p",{className:"text-gray-600",children:l?"Cr\xe9ez votre compte pour commencer":"Connectez-vous \xe0 votre compte"})]}),(0,yr.jsx)("div",{className:"flex justify-center mb-6",children:(0,yr.jsxs)("div",{className:"inline-flex bg-gray-100 rounded-lg p-1",children:[(0,yr.jsx)("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(l?"text-gray-600 hover:text-gray-900":"bg-primary-600 text-white"),children:"Connexion"}),(0,yr.jsx)("button",{type:"button",onClick:()=>o(!0),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(l?"bg-primary-600 text-white":"text-gray-600 hover:text-gray-900"),children:"Inscription"})]})}),l?(0,yr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),p(!0),u.password!==u.confirmPassword)return a("Les mots de passe ne correspondent pas"),void p(!1);if(u.password.length<6)return a("Le mot de passe doit contenir au moins 6 caract\xe8res"),void p(!1);try{const e=await async function(e){return(await fr.post("/auth/register",e)).data}({name:u.name,email:u.email,password:u.password,phone:u.phone||void 0,shopName:u.shopName,address:u.address,city:u.city,postalCode:u.postalCode});e.success?(i("Inscription r\xe9ussie ! Un email de confirmation a \xe9t\xe9 envoy\xe9. Votre compte sera activ\xe9 apr\xe8s approbation par un administrateur."),o(!1),h({name:"",email:"",password:"",confirmPassword:"",phone:"",shopName:"",address:"",city:"",postalCode:""})):a(e.message||"Erreur lors de l'inscription")}catch(r){var t,s;a((null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Erreur lors de l'inscription"),console.error(r)}finally{p(!1)}},className:"space-y-4",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet *"}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",value:u.name,onChange:e=>h(Yt(Yt({},u),{},{name:e.target.value})),className:"input pl-10",placeholder:"Jean Dupont",required:!0})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(aa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"email",value:u.email,onChange:e=>h(Yt(Yt({},u),{},{email:e.target.value})),className:"input pl-10",placeholder:"votre@email.com",required:!0})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"tel",value:u.phone,onChange:e=>h(Yt(Yt({},u),{},{phone:e.target.value})),className:"input pl-10",placeholder:"0612345678"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom du magasin *"}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(ln,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",value:u.shopName,onChange:e=>h(Yt(Yt({},u),{},{shopName:e.target.value})),className:"input pl-10",placeholder:"\xc9picerie du Centre",required:!0})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse *"}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(on,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",value:u.address,onChange:e=>h(Yt(Yt({},u),{},{address:e.target.value})),className:"input pl-10",placeholder:"123 Rue de la R\xe9publique",required:!0})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ville *"}),(0,yr.jsx)("input",{type:"text",value:u.city,onChange:e=>h(Yt(Yt({},u),{},{city:e.target.value})),className:"input",placeholder:"Paris",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Code postal *"}),(0,yr.jsx)("input",{type:"text",value:u.postalCode,onChange:e=>h(Yt(Yt({},u),{},{postalCode:e.target.value})),className:"input",placeholder:"75001",pattern:"[0-9]{5}",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe *"}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(an,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"password",value:u.password,onChange:e=>h(Yt(Yt({},u),{},{password:e.target.value})),className:"input pl-10",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",minLength:6,required:!0})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe *"}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(an,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"password",value:u.confirmPassword,onChange:e=>h(Yt(Yt({},u),{},{confirmPassword:e.target.value})),className:"input pl-10",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",minLength:6,required:!0})]})]})]}),(0,yr.jsx)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,yr.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,yr.jsx)("strong",{children:"Note :"})," Apr\xe8s votre inscription, vous recevrez un email de confirmation. Votre compte devra \xe9galement \xeatre approuv\xe9 par un administrateur avant de pouvoir vous connecter."]})}),(0,yr.jsx)("button",{type:"submit",disabled:m,className:"w-full btn btn-primary flex items-center justify-center space-x-2 mt-6",children:m?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,yr.jsx)("span",{children:"Inscription..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(za,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Cr\xe9er mon compte"})]})})]}):(0,yr.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),p(!0);try{const s=await t(c.email,c.password);if(s.success){const t=va(s.user.role);e(t)}else s.requiresAdminApproval?a("Votre compte est en attente d'approbation par un administrateur. Vous recevrez un email une fois votre compte approuv\xe9."):s.requiresEmailVerification?(f(!0),a("Votre adresse email n'a pas \xe9t\xe9 v\xe9rifi\xe9e. Veuillez v\xe9rifier votre bo\xeete mail et cliquer sur le lien de confirmation.")):(f(!1),a(s.error||"Email ou mot de passe incorrect"))}catch(r){a("Erreur lors de la connexion"),console.error(r)}finally{p(!1)}},className:"space-y-6",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(aa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"email",value:c.email,onChange:e=>d(Yt(Yt({},c),{},{email:e.target.value})),className:"input pl-10",placeholder:"votre@email.com",required:!0})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe"}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(an,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"password",value:c.password,onChange:e=>d(Yt(Yt({},c),{},{password:e.target.value})),className:"input pl-10",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0})]})]}),(0,yr.jsx)("button",{type:"submit",disabled:m,className:"w-full btn btn-primary flex items-center justify-center space-x-2",children:m?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,yr.jsx)("span",{children:"Connexion..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(rn,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Se connecter"})]})}),x&&(0,yr.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,yr.jsx)("p",{className:"text-sm text-yellow-800 mb-3",children:"Votre adresse email n'a pas \xe9t\xe9 v\xe9rifi\xe9e. V\xe9rifiez votre bo\xeete mail et cliquez sur le lien de confirmation."}),(0,yr.jsx)("button",{type:"button",onClick:async()=>{b(!0);try{await br(c.email),i("Un nouvel email de v\xe9rification a \xe9t\xe9 envoy\xe9. V\xe9rifiez votre bo\xeete mail.")}catch(e){const t=(null===e||void 0===e?void 0:e.message)||"";t.toLowerCase().includes("d\xe9j\xe0 v\xe9rifi\xe9")?(i("Votre email est d\xe9j\xe0 v\xe9rifi\xe9. Vous pouvez vous connecter."),f(!1)):a(t||"Erreur lors de l'envoi de l'email. Veuillez r\xe9essayer.")}finally{b(!1)}},disabled:g,className:"w-full btn btn-secondary text-sm flex items-center justify-center space-x-2",children:g?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),(0,yr.jsx)("span",{children:"Envoi..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(aa,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Renvoyer l'email de v\xe9rification"})]})})]})]})]}),(0,yr.jsx)(hn,Yt(Yt({},s),{},{onClose:r}))]})})},xn=Br("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),fn=Br("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const gn=function(){const[e]=Fe(),t=ae(),s=e.get("token"),[r,a]=(0,n.useState)("loading"),[i,l]=(0,n.useState)("");(0,n.useEffect)(()=>{if(!s)return a("error"),void l("Lien invalide : token manquant.");(async()=>{try{await async function(e){return(await fr.get("/auth/verify-email",{params:{token:e}})).data}(s),a("success"),l("Votre adresse email a \xe9t\xe9 v\xe9rifi\xe9e avec succ\xe8s.");if(!!localStorage.getItem("token"))try{const e=await gr();null!==e&&void 0!==e&&e.user&&(localStorage.setItem("user",JSON.stringify(e.user)),window.dispatchEvent(new CustomEvent("userUpdated",{detail:e.user})))}catch(Af){console.warn("Impossible de rafra\xeechir le profil:",Af)}}catch(r){var e,t;a("error");const s=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||r.message||"Token invalide ou expir\xe9.";l(s)}})()},[s]);const o=()=>{t(pa)};return(0,yr.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-white flex items-center justify-center p-4",children:(0,yr.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 text-center",children:["loading"===r&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(xn,{className:"h-16 w-16 text-primary-500 animate-spin mx-auto mb-4"}),(0,yr.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"V\xe9rification en cours..."}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Veuillez patienter."})]}),"success"===r&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(Ma,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,yr.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email v\xe9rifi\xe9"}),(0,yr.jsx)("p",{className:"text-gray-600 mb-6",children:i}),(0,yr.jsx)("button",{type:"button",onClick:()=>{const e=localStorage.getItem("user");if(e)try{const s=JSON.parse(e);t(va(s.role)||fa.DASHBOARD)}catch(s){t(pa)}else t(pa)},className:"w-full btn btn-primary",children:"Continuer vers l'application"}),!localStorage.getItem("token")&&(0,yr.jsx)("button",{type:"button",onClick:o,className:"w-full mt-3 btn btn-secondary",children:"Se connecter"})]}),"error"===r&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(fn,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),(0,yr.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,yr.jsx)("p",{className:"text-gray-600 mb-6",children:i}),(0,yr.jsx)("button",{type:"button",onClick:o,className:"w-full btn btn-primary",children:"Retour \xe0 la connexion"})]})]})})};const bn=()=>{const e=new Date,t=e.getHours(),s=e.getMinutes(),r=60*t+s;return r>=720&&r<1200?{allowed:!0,message:"Vous pouvez passer commande jusqu'\xe0 20h00. Il est actuellement ".concat(t,"h").concat(s.toString().padStart(2,"0"),"."),currentHour:t,remainingTime:"".concat(20-t,"h").concat(59-s,"min")}:t<12?{allowed:!1,message:"Les commandes sont accept\xe9es uniquement entre 12h00 et 20h00. Il est actuellement ".concat(t,"h").concat(s.toString().padStart(2,"0"),". Veuillez r\xe9essayer \xe0 partir de 12h00."),currentHour:t,nextAvailableTime:"12h00 aujourd'hui"}:{allowed:!1,message:"Les commandes sont accept\xe9es uniquement entre 12h00 et 20h00. Il est actuellement ".concat(t,"h").concat(s.toString().padStart(2,"0"),". Les commandes sont ferm\xe9es pour aujourd'hui. Prochaine ouverture : demain \xe0 12h00."),currentHour:t,nextAvailableTime:"12h00 demain"}},yn=()=>{const e=new Date,t=e.getHours(),s=e.getMinutes();if(t>=20)return"Ferm\xe9";if(t<12){const e=60-s;return"Ouvre dans ".concat(12-t-1,"h").concat(e,"min")}const r=60-s;return"".concat(19-t,"h").concat(r,"min restantes")};const vn=function(e){let{role:t="SHOP"}=e;const[s,r]=(0,n.useState)(bn()),[a,i]=(0,n.useState)(yn());return(0,n.useEffect)(()=>{const e=setInterval(()=>{r(bn()),i(yn())},6e4);return()=>clearInterval(e)},[]),"ADMIN"===t?(0,yr.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-200 rounded-xl p-4 mb-6 animate-scale-in",children:(0,yr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg",children:(0,yr.jsx)(Ra,{className:"h-5 w-5 text-white"})}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("h3",{className:"font-bold text-blue-900 mb-1",children:"\ud83d\udccb R\xe9ception des commandes"}),(0,yr.jsxs)("p",{className:"text-sm text-blue-700",children:["Vous recevez les commandes des magasins ",(0,yr.jsx)("strong",{children:"\xe0 partir de 00h00 chaque jour"}),". Les commandes pass\xe9es hier sont maintenant visibles."]})]})]})}):s.allowed?(0,yr.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-4 mb-6 animate-scale-in",children:(0,yr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-green-500 rounded-lg animate-pulse",children:(0,yr.jsx)(Ma,{className:"h-5 w-5 text-white"})}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,yr.jsx)("h3",{className:"font-bold text-green-900",children:"\u2705 Commandes OUVERTES"}),(0,yr.jsx)("span",{className:"px-3 py-1 bg-green-200 text-green-800 text-xs font-bold rounded-full",children:a})]}),(0,yr.jsx)("p",{className:"text-sm text-green-700",children:s.message}),(0,yr.jsxs)("p",{className:"text-xs text-green-600 mt-2",children:["\ud83d\udca1 ",(0,yr.jsx)("strong",{children:"Conseil"})," : Passez vos commandes avant 20h00 pour une r\xe9ception optimale demain entre 10h-12h."]})]})]})}):(0,yr.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border-2 border-red-200 rounded-xl p-4 mb-6 animate-scale-in",children:(0,yr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-red-500 rounded-lg",children:(0,yr.jsx)(dn,{className:"h-5 w-5 text-white"})}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("h3",{className:"font-bold text-red-900 mb-1",children:"\ud83d\udd12 Commandes FERM\xc9ES"}),(0,yr.jsx)("p",{className:"text-sm text-red-700 mb-2",children:s.message}),(0,yr.jsxs)("div",{className:"bg-red-200 rounded-lg p-3 mt-3",children:[(0,yr.jsx)("p",{className:"text-xs font-bold text-red-900 mb-1",children:"\u23f0 Horaires de commande :"}),(0,yr.jsxs)("ul",{className:"text-xs text-red-800 space-y-1",children:[(0,yr.jsxs)("li",{children:["\u2022 ",(0,yr.jsx)("strong",{children:"Ouverture"})," : 12h00"]}),(0,yr.jsxs)("li",{children:["\u2022 ",(0,yr.jsx)("strong",{children:"Fermeture"})," : 20h00"]}),(0,yr.jsxs)("li",{children:["\u2022 ",(0,yr.jsx)("strong",{children:"Prochaine ouverture"})," : ",s.nextAvailableTime]})]})]})]})]})})};const jn=function(){const e=ae(),[t,s]=(0,n.useState)({clients:0,stores:0,users:0,orders:0,products:0,commission:0}),[r,a]=(0,n.useState)(!0);(0,n.useEffect)(()=>{i()},[]);const i=async()=>{try{var e,t,r,n,i,l;a(!0);const o=await async function(){return(await fr.get("/admin/stats/counts")).data}(),c=(null===o||void 0===o?void 0:o.counts)||{};s({clients:null!==(e=c.clients)&&void 0!==e?e:0,stores:null!==(t=c.stores)&&void 0!==t?t:0,users:null!==(r=c.users)&&void 0!==r?r:0,orders:null!==(n=c.orders)&&void 0!==n?n:0,products:null!==(i=c.products)&&void 0!==i?i:0,commission:null!==(l=c.commission)&&void 0!==l?l:0})}catch(o){console.error("Erreur lors du chargement des statistiques:",o)}finally{a(!1)}};if(r)return(0,yr.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,yr.jsxs)("div",{className:"text-center animate-bounce-in",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600 mx-auto mb-4"}),(0,yr.jsx)("div",{className:"absolute inset-0 rounded-full bg-primary-100 blur-xl animate-pulse"})]}),(0,yr.jsx)("p",{className:"text-gray-600 font-medium animate-pulse",children:"Chargement des donn\xe9es..."})]})});const l=[{title:"Clients",value:t.clients,icon:Wr,color:"primary",route:fa.CLIENTS},{title:"Magasins",value:t.stores,icon:Gr,color:"blue",route:fa.STORES},{title:"Utilisateurs",value:t.users,icon:Wr,color:"green",route:fa.USERS},{title:"Commandes",value:t.orders,icon:Yr,color:"purple",route:fa.ORDERS},{title:"Produits",value:t.products,icon:Qr,color:"orange",route:fa.PRODUCTS},{title:"Commission totale",value:"".concat((t.commission||0).toFixed(2)," \u20ac"),icon:Xr,color:"green",route:fa.ORDERS}];return(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"animate-slide-up",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:"Tableau de bord ADMIN"}),(0,yr.jsx)("p",{className:"text-gray-600 text-lg",children:"Vue globale du syst\xe8me"})]}),(0,yr.jsx)(vn,{role:"ADMIN"}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((t,s)=>{const r=t.icon;return(0,yr.jsxs)("div",{onClick:()=>e(t.route),className:"group relative overflow-hidden card bg-gradient-to-br ".concat({primary:"from-primary-50 to-primary-100 border-primary-200 text-primary-600",blue:"from-blue-50 to-blue-100 border-blue-200 text-blue-600",green:"from-green-50 to-green-100 border-green-200 text-green-600",purple:"from-purple-50 to-purple-100 border-purple-200 text-purple-600",orange:"from-orange-50 to-orange-100 border-orange-200 text-orange-600"}[t.color]," cursor-pointer card-hover shine animate-scale-in"),style:{animationDelay:"".concat(.1*s,"s")},children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between relative z-10",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1 font-medium",children:t.title}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900 group-hover:scale-110 transition-transform",children:t.value})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(r,{className:"h-12 w-12 opacity-60 group-hover:opacity-100 transition-all group-hover:rotate-12 group-hover:scale-125"}),(0,yr.jsx)("div",{className:"absolute inset-0 bg-white/30 rounded-full blur-xl group-hover:bg-white/50 transition-all"})]})]}),(0,yr.jsx)("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-white/20 rounded-full blur-3xl group-hover:scale-150 transition-transform duration-500"})]},s)})}),(0,yr.jsxs)("div",{className:"relative overflow-hidden rounded-2xl animate-slide-up",style:{animationDelay:"0.6s"},children:[(0,yr.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-50 via-blue-50 to-purple-50 opacity-60"}),(0,yr.jsx)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm"}),(0,yr.jsxs)("div",{className:"relative z-10 p-8 border-2 border-white/50 rounded-2xl shadow-xl",children:[(0,yr.jsxs)("div",{className:"flex items-center mb-8",children:[(0,yr.jsx)("div",{className:"p-3 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl shadow-lg mr-4 animate-pulse",children:(0,yr.jsx)(sa,{className:"h-6 w-6 text-white"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Actions rapides"}),(0,yr.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Cr\xe9ez rapidement de nouveaux \xe9l\xe9ments"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5",children:[(0,yr.jsxs)("button",{onClick:()=>e(fa.CLIENTS),className:"group relative overflow-hidden bg-white hover:bg-gradient-to-br hover:from-green-50 hover:to-green-100 border-2 border-green-200 hover:border-green-400 rounded-xl p-6 shadow-md hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[(0,yr.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,yr.jsx)("div",{className:"p-4 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-lg group-hover:scale-110 group-hover:rotate-6 transition-all",children:(0,yr.jsx)(Wr,{className:"h-8 w-8 text-white"})}),(0,yr.jsx)("span",{className:"font-bold text-gray-800 group-hover:text-green-700 transition-colors",children:"Nouveau client"})]}),(0,yr.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]}),(0,yr.jsxs)("button",{onClick:()=>e(fa.STORES),className:"group relative overflow-hidden bg-white hover:bg-gradient-to-br hover:from-blue-50 hover:to-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 shadow-md hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[(0,yr.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,yr.jsx)("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg group-hover:scale-110 group-hover:rotate-6 transition-all",children:(0,yr.jsx)(Gr,{className:"h-8 w-8 text-white"})}),(0,yr.jsx)("span",{className:"font-bold text-gray-800 group-hover:text-blue-700 transition-colors",children:"Nouveau magasin"})]}),(0,yr.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]}),(0,yr.jsxs)("button",{onClick:()=>e(fa.USERS),className:"group relative overflow-hidden bg-white hover:bg-gradient-to-br hover:from-purple-50 hover:to-purple-100 border-2 border-purple-200 hover:border-purple-400 rounded-xl p-6 shadow-md hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[(0,yr.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,yr.jsx)("div",{className:"p-4 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl shadow-lg group-hover:scale-110 group-hover:rotate-6 transition-all",children:(0,yr.jsx)(Wr,{className:"h-8 w-8 text-white"})}),(0,yr.jsx)("span",{className:"font-bold text-gray-800 group-hover:text-purple-700 transition-colors",children:"Nouvel utilisateur"})]}),(0,yr.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]}),(0,yr.jsxs)("button",{onClick:()=>e(fa.PRODUCTS),className:"group relative overflow-hidden bg-white hover:bg-gradient-to-br hover:from-orange-50 hover:to-orange-100 border-2 border-orange-200 hover:border-orange-400 rounded-xl p-6 shadow-md hover:shadow-2xl transition-all duration-300 hover:scale-105",children:[(0,yr.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,yr.jsx)("div",{className:"p-4 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl shadow-lg group-hover:scale-110 group-hover:rotate-6 transition-all",children:(0,yr.jsx)(Qr,{className:"h-8 w-8 text-white"})}),(0,yr.jsx)("span",{className:"font-bold text-gray-800 group-hover:text-orange-700 transition-colors",children:"Nouveau produit"})]}),(0,yr.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})]})]})]})]})},Nn=Br("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),wn=Br("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),kn=Br("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);async function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/shops",{params:e})).data}const Cn=function(){const{toast:e,showToast:t,hideToast:s,showSuccess:r,showError:a}=mn(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(""),[h,m]=(0,n.useState)(!1),[p,x]=(0,n.useState)({isOpen:!1,clientId:null}),[f,g]=(0,n.useState)(null),[b,y]=(0,n.useState)({companyName:"",siret:"",address:{street:"",city:"",zipCode:"",country:"France"},contactEmail:"",contactPhone:""});(0,n.useEffect)(()=>{v()},[]);const v=async()=>{try{c(!0);const e=await Sn({page:1,limit:100});l(e.clients||e.users||[])}catch(e){a("Erreur lors du chargement des clients"),console.error(e)}finally{c(!1)}},j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,s,r,a;e?(g(e),y({companyName:e.companyName||"",siret:e.siret||"",address:{street:(null===(t=e.address)||void 0===t?void 0:t.street)||"",city:(null===(s=e.address)||void 0===s?void 0:s.city)||"",zipCode:(null===(r=e.address)||void 0===r?void 0:r.zipCode)||"",country:(null===(a=e.address)||void 0===a?void 0:a.country)||"France"},contactEmail:e.contactEmail||"",contactPhone:e.contactPhone||""})):(g(null),y({companyName:"",siret:"",address:{street:"",city:"",zipCode:"",country:"France"},contactEmail:"",contactPhone:""}));m(!0)},N=()=>{m(!1),g(null)},w=async e=>{try{await async function(e){return(await fr.delete("/shops/"+e)).data}(e),r("Client supprim\xe9 avec succ\xe8s"),v()}catch(t){a("Erreur lors de la suppression"),console.error(t)}x({isOpen:!1,clientId:null})},k=i.filter(e=>{var t,s,r;if(!d)return!0;const a=d.toLowerCase();return(null===(t=e.companyName)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(s=e.siret)||void 0===s?void 0:s.includes(a))||(null===(r=e.contactEmail)||void 0===r?void 0:r.toLowerCase().includes(a))});return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Clients"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Gestion des clients et propri\xe9taires de magasins"})]}),(0,yr.jsxs)("button",{onClick:()=>j(),className:"btn btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Nn,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Nouveau client"})]})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher un client (nom, SIRET, email)...",value:d,onChange:e=>u(e.target.value),className:"input pl-10"})]})}),o?(0,yr.jsx)("div",{className:"card text-center py-8",children:(0,yr.jsx)("p",{className:"text-gray-600",children:"Chargement..."})}):0===k.length?(0,yr.jsx)("div",{className:"card text-center py-8",children:(0,yr.jsx)("p",{className:"text-gray-600",children:"Aucun client trouv\xe9"})}):(0,yr.jsx)("div",{className:"card overflow-hidden",children:(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Raison sociale"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Adresse"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(e=>{var t,s,r;return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.companyName}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:["SIRET: ",e.siret]})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:[(null===(t=e.address)||void 0===t?void 0:t.street)&&(0,yr.jsx)("p",{children:e.address.street}),(null===(s=e.address)||void 0===s?void 0:s.city)&&(null===(r=e.address)||void 0===r?void 0:r.zipCode)&&(0,yr.jsxs)("p",{children:[e.address.zipCode," ",e.address.city]})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,yr.jsx)("p",{children:e.contactEmail}),e.contactPhone&&(0,yr.jsx)("p",{children:e.contactPhone})]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(!1!==e.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:!1!==e.isActive?"Actif":"Inactif"})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("button",{onClick:()=>j(e),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Modifier",children:(0,yr.jsx)(wn,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>x({isOpen:!0,clientId:e.id}),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:(0,yr.jsx)(kn,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),h&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:f?"Modifier le client":"Nouveau client"}),(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{f?(await async function(e,t){return(await fr.put("/shops/"+e,t)).data}(f.id,b),r("Client modifi\xe9 avec succ\xe8s")):(await async function(e){return(await fr.post("/shops",e)).data}(b),r("Client cr\xe9\xe9 avec succ\xe8s")),N(),v()}catch(t){a(f?"Erreur lors de la modification":"Erreur lors de la cr\xe9ation"),console.error(t)}},className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Raison sociale *"}),(0,yr.jsx)("input",{type:"text",value:b.companyName,onChange:e=>y(Yt(Yt({},b),{},{companyName:e.target.value})),className:"input",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"SIRET *"}),(0,yr.jsx)("input",{type:"text",value:b.siret,onChange:e=>y(Yt(Yt({},b),{},{siret:e.target.value})),className:"input",required:!0})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rue",value:b.address.street,onChange:e=>y(Yt(Yt({},b),{},{address:Yt(Yt({},b.address),{},{street:e.target.value})})),className:"input mb-2"}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,yr.jsx)("input",{type:"text",placeholder:"Code postal",value:b.address.zipCode,onChange:e=>y(Yt(Yt({},b),{},{address:Yt(Yt({},b.address),{},{zipCode:e.target.value})})),className:"input"}),(0,yr.jsx)("input",{type:"text",placeholder:"Ville",value:b.address.city,onChange:e=>y(Yt(Yt({},b),{},{address:Yt(Yt({},b.address),{},{city:e.target.value})})),className:"input"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),(0,yr.jsx)("input",{type:"email",value:b.contactEmail,onChange:e=>y(Yt(Yt({},b),{},{contactEmail:e.target.value})),className:"input",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("input",{type:"tel",value:b.contactPhone,onChange:e=>y(Yt(Yt({},b),{},{contactPhone:e.target.value})),className:"input"})]})]}),(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,yr.jsx)("button",{type:"button",onClick:N,className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsx)("button",{type:"submit",className:"btn btn-primary",children:f?"Modifier":"Cr\xe9er"})]})]})]})}),p.isOpen&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,yr.jsx)(dn,{className:"h-6 w-6 text-red-600"}),(0,yr.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Supprimer le client"})]}),(0,yr.jsx)("p",{className:"text-gray-600 mb-6",children:"\xcates-vous s\xfbr de vouloir supprimer ce client ? Cette action est irr\xe9versible et supprimera tous les magasins associ\xe9s."}),(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,yr.jsx)("button",{onClick:()=>x({isOpen:!1,clientId:null}),className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsx)("button",{onClick:()=>w(p.clientId),className:"btn bg-red-600 text-white hover:bg-red-700",children:"Supprimer"})]})]})}),(0,yr.jsx)(hn,Yt(Yt({},e),{},{onClose:s}))]})};async function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/admin/users",{params:e})).data}async function _n(e){return(await fr.post("/admin/users",e)).data}async function Tn(e,t){return(await fr.put("/admin/users/".concat(e),t)).data}async function Rn(e){return(await fr.delete("/admin/users/".concat(e))).data}async function Mn(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];if(s.length>0)throw console.error("\u274c ERREUR: updateUserProfile appel\xe9 avec plusieurs arguments (ancien format):",e,s),console.error('\u274c Utilisez updateUserProfile({ name: "...", phone: "..." }) au lieu de updateUserProfile(user.id, {...})'),new Error('Format incorrect: utilisez updateUserProfile({ name: "...", phone: "..." })');if(!e||"object"!==typeof e||Array.isArray(e))throw console.error("\u274c ERREUR: updateUserProfile re\xe7oit des donn\xe9es invalides:",e,"Type:",typeof e),new Error("Les donn\xe9es doivent \xeatre un objet");if("string"===typeof e||"object"===typeof e&&0===Object.keys(e).length&&e.constructor===Object)throw console.error("\u274c ERREUR: updateUserProfile re\xe7oit des donn\xe9es vides ou invalides:",e),new Error("Les donn\xe9es doivent contenir name et/ou phone");console.log("\ud83d\udce4 updateUserProfile appel\xe9 avec:",JSON.stringify(e),"Type:",typeof e),console.log("\ud83d\udce4 Keys:",Object.keys(e));const a={name:e.name||null,phone:e.phone||null};console.log("\ud83d\udce4 Donn\xe9es finales envoy\xe9es:",JSON.stringify(a));const n=await fr.put("/auth/profile",a,{headers:{"Content-Type":"application/json"}});return n.data.user&&(localStorage.setItem("user",JSON.stringify(n.data.user)),window.dispatchEvent(new CustomEvent("userUpdated",{detail:n.data.user}))),n.data}async function An(e,t){return(await fr.put("/auth/change-password",{currentPassword:e,newPassword:t})).data}async function Pn(e){const t=new FormData;t.append("avatar",e),await fr.post("/auth/avatar",t);const s=await gr();if(null!==s&&void 0!==s&&s.user){const e=Date.now(),t=s.user.avatarUrl?"".concat(s.user.avatarUrl).concat(s.user.avatarUrl.includes("?")?"&":"?","v=").concat(e):null,r=Yt(Yt({},s.user),{},{avatarUrl:t});localStorage.setItem("user",JSON.stringify(r)),window.dispatchEvent(new CustomEvent("userUpdated",{detail:r}))}return s}async function On(e){return(await fr.get("/admin/users/".concat(e,"/roles"))).data}const Dn=function(){const{toast:e,showToast:t,hideToast:s,showSuccess:r,showError:a}=mn(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(!0),[p,x]=(0,n.useState)(""),[f,g]=(0,n.useState)(!1),[b,y]=(0,n.useState)({isOpen:!1,storeId:null}),[v,j]=(0,n.useState)(null),[N,w]=(0,n.useState)({name:"",code:"",address:{street:"",city:"",zipCode:"",country:"France"},phone:"",email:"",clientId:"",managerId:""});(0,n.useEffect)(()=>{k()},[]);const k=async()=>{try{m(!0),await Promise.all([S(),C(),E()])}catch(e){a("Erreur lors du chargement des donn\xe9es"),console.error(e)}finally{m(!1)}},S=async()=>{try{const e=await wr({page:1,limit:100});l(e.shops||[])}catch(e){a("Erreur lors du chargement des magasins"),console.error(e)}},C=async()=>{try{const e=await Sn();c(e.clients||e.users||[])}catch(e){console.error(e)}},E=async()=>{try{var e;const t=await En({role:"MANAGER"});u(null!==(e=null===t||void 0===t?void 0:t.users)&&void 0!==e?e:[])}catch(t){console.error(t)}},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,s,r,a;e?(j(e),w({name:e.name||"",code:e.code||"",address:{street:(null===(t=e.address)||void 0===t?void 0:t.street)||"",city:(null===(s=e.address)||void 0===s?void 0:s.city)||"",zipCode:(null===(r=e.address)||void 0===r?void 0:r.zipCode)||"",country:(null===(a=e.address)||void 0===a?void 0:a.country)||"France"},phone:e.phone||"",email:e.email||"",clientId:e.clientId||"",managerId:e.managerId||""})):(j(null),w({name:"",code:"",address:{street:"",city:"",zipCode:"",country:"France"},phone:"",email:"",clientId:"",managerId:""}));g(!0)},T=()=>{g(!1),j(null)},R=async e=>{try{await async function(e){return(await fr.delete("/shops/".concat(e))).data}(e),r("Magasin supprim\xe9 avec succ\xe8s"),S()}catch(t){a("Erreur lors de la suppression"),console.error(t)}y({isOpen:!1,storeId:null})},M=i.filter(e=>{var t,s;if(!p)return!0;const r=p.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(s=e.code)||void 0===s?void 0:s.toLowerCase().includes(r))});return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Magasins"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Gestion des magasins et entrep\xf4ts"})]}),(0,yr.jsxs)("button",{onClick:()=>_(),className:"btn btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Nn,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Nouveau magasin"})]})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher un magasin...",value:p,onChange:e=>x(e.target.value),className:"input pl-10"})]})}),h?(0,yr.jsx)("div",{className:"card text-center py-8",children:(0,yr.jsx)("p",{className:"text-gray-600",children:"Chargement..."})}):0===M.length?(0,yr.jsx)("div",{className:"card text-center py-8",children:(0,yr.jsx)("p",{className:"text-gray-600",children:"Aucun magasin trouv\xe9"})}):(0,yr.jsx)("div",{className:"card overflow-hidden",children:(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Adresse"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(e=>{var t,s,r;const a=o.find(t=>t.id===e.clientId),n=d.find(t=>t.id===e.managerId);return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:["Code: ",e.code]})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,yr.jsx)("p",{children:(null===a||void 0===a?void 0:a.companyName)||"Non assign\xe9"}),n&&(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:["Manager: ",n.firstName," ",n.lastName]})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:[(null===(t=e.address)||void 0===t?void 0:t.street)&&(0,yr.jsxs)("p",{className:"flex items-center space-x-1",children:[(0,yr.jsx)(on,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:e.address.street})]}),(null===(s=e.address)||void 0===s?void 0:s.city)&&(null===(r=e.address)||void 0===r?void 0:r.zipCode)&&(0,yr.jsxs)("p",{children:[e.address.zipCode," ",e.address.city]})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:[e.phone&&(0,yr.jsxs)("p",{className:"flex items-center space-x-1",children:[(0,yr.jsx)(nn,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:e.phone})]}),e.email&&(0,yr.jsxs)("p",{className:"flex items-center space-x-1",children:[(0,yr.jsx)(aa,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:e.email})]})]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("button",{onClick:()=>_(e),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Modifier",children:(0,yr.jsx)(wn,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>y({isOpen:!0,storeId:e.id}),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:(0,yr.jsx)(kn,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),f&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:v?"Modifier le magasin":"Nouveau magasin"}),(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{v?(await async function(e,t){return(await fr.put("/shops/".concat(e),t)).data}(v.id,N),r("Magasin modifi\xe9 avec succ\xe8s")):(await async function(e){return(await fr.post("/shops",e)).data}(N),r("Magasin cr\xe9\xe9 avec succ\xe8s")),T(),S()}catch(t){a(v?"Erreur lors de la modification":"Erreur lors de la cr\xe9ation"),console.error(t)}},className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom du magasin *"}),(0,yr.jsx)("input",{type:"text",value:N.name,onChange:e=>w(Yt(Yt({},N),{},{name:e.target.value})),className:"input",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Code *"}),(0,yr.jsx)("input",{type:"text",value:N.code,onChange:e=>w(Yt(Yt({},N),{},{code:e.target.value})),className:"input",placeholder:"ex: PARIS-NORD-001",required:!0})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Client *"}),(0,yr.jsxs)("select",{value:N.clientId,onChange:e=>w(Yt(Yt({},N),{},{clientId:e.target.value})),className:"input",required:!0,children:[(0,yr.jsx)("option",{value:"",children:"S\xe9lectionner un client"}),o.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.companyName},e.id))]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Manager"}),(0,yr.jsxs)("select",{value:N.managerId,onChange:e=>w(Yt(Yt({},N),{},{managerId:e.target.value})),className:"input",children:[(0,yr.jsx)("option",{value:"",children:"Non assign\xe9"}),d.map(e=>(0,yr.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rue",value:N.address.street,onChange:e=>w(Yt(Yt({},N),{},{address:Yt(Yt({},N.address),{},{street:e.target.value})})),className:"input mb-2"}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,yr.jsx)("input",{type:"text",placeholder:"Code postal",value:N.address.zipCode,onChange:e=>w(Yt(Yt({},N),{},{address:Yt(Yt({},N.address),{},{zipCode:e.target.value})})),className:"input"}),(0,yr.jsx)("input",{type:"text",placeholder:"Ville",value:N.address.city,onChange:e=>w(Yt(Yt({},N),{},{address:Yt(Yt({},N.address),{},{city:e.target.value})})),className:"input"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("input",{type:"tel",value:N.phone,onChange:e=>w(Yt(Yt({},N),{},{phone:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,yr.jsx)("input",{type:"email",value:N.email,onChange:e=>w(Yt(Yt({},N),{},{email:e.target.value})),className:"input"})]})]}),(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,yr.jsx)("button",{type:"button",onClick:T,className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsx)("button",{type:"submit",className:"btn btn-primary",children:v?"Modifier":"Cr\xe9er"})]})]})]})}),b.isOpen&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,yr.jsx)(dn,{className:"h-6 w-6 text-red-600"}),(0,yr.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Supprimer le magasin"})]}),(0,yr.jsx)("p",{className:"text-gray-600 mb-6",children:"\xcates-vous s\xfbr de vouloir supprimer ce magasin ? Cette action est irr\xe9versible."}),(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,yr.jsx)("button",{onClick:()=>y({isOpen:!1,storeId:null}),className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsx)("button",{onClick:()=>R(b.storeId),className:"btn bg-red-600 text-white hover:bg-red-700",children:"Supprimer"})]})]})}),(0,yr.jsx)(hn,Yt(Yt({},e),{},{onClose:s}))]})},In=Br("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Ln=Br("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Fn=Br("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),zn=Br("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Vn=function(e){let{isOpen:t,onClose:s,title:r,children:a,size:n="md"}=e;return t?(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 md:p-0",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg md:rounded-lg rounded-t-2xl md:rounded-t-lg p-4 md:p-6 w-full mx-0 md:mx-4 max-h-[90vh] md:max-h-[85vh] overflow-y-auto ".concat({sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"}[n]," touch-target"),children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6 sticky top-0 bg-white pb-2 border-b border-gray-200 -mx-4 md:-mx-6 px-4 md:px-6",children:[r&&(0,yr.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:r}),(0,yr.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-colors touch-target","aria-label":"Fermer",children:(0,yr.jsx)(ua,{className:"h-5 w-5"})})]}),(0,yr.jsx)("div",{className:"mt-2",children:a})]})}):null},Un={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Hn(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const Bn={date:Hn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Hn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Hn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},qn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Wn(e){return(t,s)=>{let r;if("formatting"===(null!==s&&void 0!==s&&s.context?String(s.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=null!==s&&void 0!==s&&s.width?String(s.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=null!==s&&void 0!==s&&s.width?String(s.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const Gn={ordinalNumber:(e,t)=>{const s=Number(e),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},era:Wn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Wn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Wn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Wn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Wn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Yn(e){return function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=s.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],n=t.match(a);if(!n)return null;const i=n[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(l)?function(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s;return}(l,e=>e.test(i)):function(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s;return}(l,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(o):o,c=s.valueCallback?s.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const Qn={ordinalNumber:($n={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e.match($n.matchPattern);if(!s)return null;const r=s[0],a=e.match($n.parsePattern);if(!a)return null;let n=$n.valueCallback?$n.valueCallback(a[0]):a[0];return n=t.valueCallback?t.valueCallback(n):n,{value:n,rest:e.slice(r.length)}}),era:Yn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Yn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Yn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Yn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Yn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var $n;const Kn={code:"en-US",formatDistance:(e,t,s)=>{let r;const a=Un[e];return r="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==s&&void 0!==s&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r},formatLong:Bn,formatRelative:(e,t,s,r)=>qn[e],localize:Gn,match:Qn,options:{weekStartsOn:0,firstWeekContainsDate:1}};let Xn={};function Jn(){return Xn}Math.pow(10,8);const Zn=6048e5,ei=Symbol.for("constructDateFrom");function ti(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&ei in e?e[ei](t):e instanceof Date?new e.constructor(t):new Date(t)}function si(e,t){return ti(t||e,e)}function ri(e){const t=si(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function ai(e,t){const s=si(e,null===t||void 0===t?void 0:t.in);return s.setHours(0,0,0,0),s}function ni(e,t,s){const[r,a]=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];const a=ti.bind(null,e||s.find(e=>"object"===typeof e));return s.map(a)}(null===s||void 0===s?void 0:s.in,e,t),n=ai(r),i=ai(a),l=+n-ri(n),o=+i-ri(i);return Math.round((l-o)/864e5)}function ii(e,t){const s=si(e,null===t||void 0===t?void 0:t.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}function li(e,t){const s=si(e,null===t||void 0===t?void 0:t.in);return ni(s,ii(s))+1}function oi(e,t){var s,r,a,n,i,l;const o=Jn(),c=null!==(s=null!==(r=null!==(a=null!==(n=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==n?n:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==a?a:o.weekStartsOn)&&void 0!==r?r:null===(l=o.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==s?s:0,d=si(e,null===t||void 0===t?void 0:t.in),u=d.getDay(),h=(u<c?7:0)+u-c;return d.setDate(d.getDate()-h),d.setHours(0,0,0,0),d}function ci(e,t){return oi(e,Yt(Yt({},t),{},{weekStartsOn:1}))}function di(e,t){const s=si(e,null===t||void 0===t?void 0:t.in),r=s.getFullYear(),a=ti(s,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const n=ci(a),i=ti(s,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=ci(i);return s.getTime()>=n.getTime()?r+1:s.getTime()>=l.getTime()?r:r-1}function ui(e,t){const s=di(e,t),r=ti((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),ci(r)}function hi(e,t){const s=si(e,null===t||void 0===t?void 0:t.in),r=+ci(s)-+ui(s);return Math.round(r/Zn)+1}function mi(e,t){var s,r,a,n,i,l;const o=si(e,null===t||void 0===t?void 0:t.in),c=o.getFullYear(),d=Jn(),u=null!==(s=null!==(r=null!==(a=null!==(n=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==n?n:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:d.firstWeekContainsDate)&&void 0!==r?r:null===(l=d.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==s?s:1,h=ti((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,u),h.setHours(0,0,0,0);const m=oi(h,t),p=ti((null===t||void 0===t?void 0:t.in)||e,0);p.setFullYear(c,0,u),p.setHours(0,0,0,0);const x=oi(p,t);return+o>=+m?c+1:+o>=+x?c:c-1}function pi(e,t){var s,r,a,n,i,l;const o=Jn(),c=null!==(s=null!==(r=null!==(a=null!==(n=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==n?n:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:o.firstWeekContainsDate)&&void 0!==r?r:null===(l=o.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==s?s:1,d=mi(e,t),u=ti((null===t||void 0===t?void 0:t.in)||e,0);u.setFullYear(d,0,c),u.setHours(0,0,0,0);return oi(u,t)}function xi(e,t){const s=si(e,null===t||void 0===t?void 0:t.in),r=+oi(s,t)-+pi(s,t);return Math.round(r/Zn)+1}function fi(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const gi={y(e,t){const s=e.getFullYear(),r=s>0?s:1-s;return fi("yy"===t?r%100:r,t.length)},M(e,t){const s=e.getMonth();return"M"===t?String(s+1):fi(s+1,2)},d:(e,t)=>fi(e.getDate(),t.length),a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return"am"===s?"a.m.":"p.m."}},h:(e,t)=>fi(e.getHours()%12||12,t.length),H:(e,t)=>fi(e.getHours(),t.length),m:(e,t)=>fi(e.getMinutes(),t.length),s:(e,t)=>fi(e.getSeconds(),t.length),S(e,t){const s=t.length,r=e.getMilliseconds();return fi(Math.trunc(r*Math.pow(10,s-3)),t.length)}},bi="midnight",yi="noon",vi="morning",ji="afternoon",Ni="evening",wi="night",ki={G:function(e,t,s){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});default:return s.era(r,{width:"wide"})}},y:function(e,t,s){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return s.ordinalNumber(r,{unit:"year"})}return gi.y(e,t)},Y:function(e,t,s,r){const a=mi(e,r),n=a>0?a:1-a;if("YY"===t){return fi(n%100,2)}return"Yo"===t?s.ordinalNumber(n,{unit:"year"}):fi(n,t.length)},R:function(e,t){return fi(di(e),t.length)},u:function(e,t){return fi(e.getFullYear(),t.length)},Q:function(e,t,s){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return fi(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,s){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return fi(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,s){const r=e.getMonth();switch(t){case"M":case"MM":return gi.M(e,t);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,s){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return fi(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,s,r){const a=xi(e,r);return"wo"===t?s.ordinalNumber(a,{unit:"week"}):fi(a,t.length)},I:function(e,t,s){const r=hi(e);return"Io"===t?s.ordinalNumber(r,{unit:"week"}):fi(r,t.length)},d:function(e,t,s){return"do"===t?s.ordinalNumber(e.getDate(),{unit:"date"}):gi.d(e,t)},D:function(e,t,s){const r=li(e);return"Do"===t?s.ordinalNumber(r,{unit:"dayOfYear"}):fi(r,t.length)},E:function(e,t,s){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,s,r){const a=e.getDay(),n=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(n);case"ee":return fi(n,2);case"eo":return s.ordinalNumber(n,{unit:"day"});case"eee":return s.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,s,r){const a=e.getDay(),n=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(n);case"cc":return fi(n,t.length);case"co":return s.ordinalNumber(n,{unit:"day"});case"ccc":return s.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(a,{width:"narrow",context:"standalone"});case"cccccc":return s.day(a,{width:"short",context:"standalone"});default:return s.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,s){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return fi(a,t.length);case"io":return s.ordinalNumber(a,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,s){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(r,{width:"narrow",context:"formatting"});default:return s.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,s){const r=e.getHours();let a;switch(a=12===r?yi:0===r?bi:r/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,s){const r=e.getHours();let a;switch(a=r>=17?Ni:r>=12?ji:r>=4?vi:wi,t){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,s){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),s.ordinalNumber(t,{unit:"hour"})}return gi.h(e,t)},H:function(e,t,s){return"Ho"===t?s.ordinalNumber(e.getHours(),{unit:"hour"}):gi.H(e,t)},K:function(e,t,s){const r=e.getHours()%12;return"Ko"===t?s.ordinalNumber(r,{unit:"hour"}):fi(r,t.length)},k:function(e,t,s){let r=e.getHours();return 0===r&&(r=24),"ko"===t?s.ordinalNumber(r,{unit:"hour"}):fi(r,t.length)},m:function(e,t,s){return"mo"===t?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):gi.m(e,t)},s:function(e,t,s){return"so"===t?s.ordinalNumber(e.getSeconds(),{unit:"second"}):gi.s(e,t)},S:function(e,t){return gi.S(e,t)},X:function(e,t,s){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Ci(r);case"XXXX":case"XX":return Ei(r);default:return Ei(r,":")}},x:function(e,t,s){const r=e.getTimezoneOffset();switch(t){case"x":return Ci(r);case"xxxx":case"xx":return Ei(r);default:return Ei(r,":")}},O:function(e,t,s){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Si(r,":");default:return"GMT"+Ei(r,":")}},z:function(e,t,s){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Si(r,":");default:return"GMT"+Ei(r,":")}},t:function(e,t,s){return fi(Math.trunc(+e/1e3),t.length)},T:function(e,t,s){return fi(+e,t.length)}};function Si(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),n=r%60;return 0===n?s+String(a):s+String(a)+t+fi(n,2)}function Ci(e,t){if(e%60===0){return(e>0?"-":"+")+fi(Math.abs(e)/60,2)}return Ei(e,t)}function Ei(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s=e>0?"-":"+",r=Math.abs(e);return s+fi(Math.trunc(r/60),2)+t+fi(r%60,2)}const _i=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Ti=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Ri={p:Ti,P:(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],r=s[1],a=s[2];if(!a)return _i(e,t);let n;switch(r){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",_i(r,t)).replace("{{time}}",Ti(a,t))}},Mi=/^D+$/,Ai=/^Y+$/,Pi=["D","DD","YY","YYYY"];function Oi(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function Di(e){return!(!Oi(e)&&"number"!==typeof e||isNaN(+si(e)))}const Ii=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Li=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fi=/^'([^]*?)'?$/,zi=/''/g,Vi=/[a-zA-Z]/;function Ui(e,t,s){var r,a,n,i,l,o,c,d,u,h,m,p,x,f;const g=Jn(),b=null!==(r=null!==(a=null===s||void 0===s?void 0:s.locale)&&void 0!==a?a:g.locale)&&void 0!==r?r:Kn,y=null!==(n=null!==(i=null!==(l=null!==(o=null===s||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==o?o:null===s||void 0===s||null===(c=s.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==l?l:g.firstWeekContainsDate)&&void 0!==i?i:null===(d=g.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==n?n:1,v=null!==(u=null!==(h=null!==(m=null!==(p=null===s||void 0===s?void 0:s.weekStartsOn)&&void 0!==p?p:null===s||void 0===s||null===(x=s.locale)||void 0===x||null===(x=x.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==m?m:g.weekStartsOn)&&void 0!==h?h:null===(f=g.locale)||void 0===f||null===(f=f.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==u?u:0,j=si(e,null===s||void 0===s?void 0:s.in);if(!Di(j))throw new RangeError("Invalid time value");let N=t.match(Li).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,Ri[t])(e,b.formatLong)}return e}).join("").match(Ii).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Hi(e)};if(ki[t])return{isToken:!0,value:e};if(t.match(Vi))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});b.localize.preprocessor&&(N=b.localize.preprocessor(j,N));const w={firstWeekContainsDate:y,weekStartsOn:v,locale:b};return N.map(r=>{if(!r.isToken)return r.value;const a=r.value;(null!==s&&void 0!==s&&s.useAdditionalWeekYearTokens||!function(e){return Ai.test(e)}(a))&&(null!==s&&void 0!==s&&s.useAdditionalDayOfYearTokens||!function(e){return Mi.test(e)}(a))||function(e,t,s){const r=function(e,t,s){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,s);if(console.warn(r),Pi.includes(e))throw new RangeError(r)}(a,t,String(e));return(0,ki[a[0]])(j,a,b.localize,w)}).join("")}function Hi(e){const t=e.match(Fi);return t?t[1].replace(zi,"'"):e}const Bi=function(){var e,t;const{toast:s,hideToast:r,showSuccess:a,showError:i}=mn(),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[m,p]=(0,n.useState)(!0),[x,f]=(0,n.useState)(""),[g,b]=(0,n.useState)(""),[y,v]=(0,n.useState)(""),[j,N]=(0,n.useState)(!1),[w,k]=(0,n.useState)({isOpen:!1,userId:null}),[S,C]=(0,n.useState)(null),[E,_]=(0,n.useState)({isOpen:!1,userId:null,roles:[],user:null}),[T,R]=(0,n.useState)({isOpen:!1,userId:null,user:null}),[M,A]=(0,n.useState)({isOpen:!1,userId:null,activities:[]}),[P,O]=(0,n.useState)({email:"",firstName:"",lastName:"",phone:"",role:"CLIENT",clientId:"",storeId:"",isActive:!0}),D=["ADMIN","CLIENT","MANAGER","PREPARATEUR","LIVREUR","COMMERCIAL","STOCK_MANAGER","FINANCE"];(0,n.useEffect)(()=>{I()},[]);const I=async()=>{try{p(!0),await Promise.all([L(),F(),z()])}catch(e){i("Erreur lors du chargement des donn\xe9es"),console.error(e)}finally{p(!1)}},L=async()=>{try{const e={page:1,limit:100,role:g||void 0},t=await En(e);o(t.users||[])}catch(e){i("Erreur lors du chargement des utilisateurs"),console.error(e)}},F=async()=>{try{var e;const t=await Sn();d(null!==(e=null===t||void 0===t?void 0:t.shops)&&void 0!==e?e:[])}catch(t){console.error(t)}},z=async()=>{try{var e;const t=await wr();h(null!==(e=null===t||void 0===t?void 0:t.shops)&&void 0!==e?e:[])}catch(t){console.error(t)}};(0,n.useEffect)(()=>{void 0!==g&&L()},[g]);const V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){C(e);const{firstName:t,lastName:s}=(e=>{if(!e||"string"!==typeof e)return{firstName:"",lastName:""};const t=e.trim().split(/\s+/);return 0===t.length?{firstName:"",lastName:""}:1===t.length?{firstName:t[0],lastName:""}:{firstName:t[0],lastName:t.slice(1).join(" ")}})(e.name);O({email:e.email||"",firstName:t,lastName:s,phone:e.phone||"",role:e.role||"CLIENT",clientId:e.clientId||"",storeId:e.storeId||"",isActive:void 0===e.isActive||e.isActive})}else C(null),O({email:"",firstName:"",lastName:"",phone:"",role:"CLIENT",clientId:"",storeId:"",isActive:!0});N(!0)},U=()=>{N(!1),C(null)},H=async e=>{try{await async function(e,t){return(await fr.put("/admin/users/".concat(e,"/status"),{isActive:t})).data}(e.id,!e.isActive),a("Utilisateur ".concat(!1!==e.isActive?"d\xe9sactiv\xe9":"activ\xe9"," avec succ\xe8s")),L()}catch(t){i("Erreur lors du changement de statut"),console.error(t)}},B=async(e,t,s)=>{try{await async function(e,t,s,r){return(await fr.post("/admin/users/".concat(e,"/roles"),{role:t,scopeType:s,scopeId:r})).data}(E.userId,e,t,s),a("R\xf4le assign\xe9 avec succ\xe8s");const r=await On(E.userId);_(Yt(Yt({},E),{},{roles:r.roles||[]}))}catch(r){i("Erreur lors de l'assignation du r\xf4le")}},q=async e=>{try{await async function(e,t){return(await fr.delete("/admin/users/".concat(e,"/roles/").concat(t))).data}(E.userId,e),a("R\xf4le retir\xe9 avec succ\xe8s");const t=await On(E.userId);_(Yt(Yt({},E),{},{roles:t.roles||[]}))}catch(t){i("Erreur lors de la suppression du r\xf4le")}},W=async e=>{try{const t=await async function(e){return(await fr.get("/admin/users/".concat(e,"/activity"))).data}(e.id);A({isOpen:!0,userId:e.id,activity:t.activity||[],user:e})}catch(t){i("Erreur lors du chargement de l'historique")}},G=async e=>{try{await async function(e){return(await fr.put("/admin/users/".concat(e,"/approve"))).data}(e),a("Utilisateur approuv\xe9 avec succ\xe8s"),L()}catch(t){i("Erreur lors de l'approbation"),console.error(t)}},Y=async e=>{try{await async function(e){return(await fr.put("/admin/users/".concat(e,"/reject"))).data}(e),a("Approbation retir\xe9e avec succ\xe8s"),L()}catch(t){i("Erreur lors du rejet"),console.error(t)}},Q=l.filter(e=>{if(x){var t,s,r,a;const n=x.toLowerCase();if(!((null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(n))||(null===(r=e.firstName)||void 0===r?void 0:r.toLowerCase().includes(n))||(null===(a=e.lastName)||void 0===a?void 0:a.toLowerCase().includes(n))))return!1}if("pending"===y){if("CLIENT"!==e.role||e.isApproved)return!1}else if("approved"===y&&("CLIENT"!==e.role||!e.isApproved))return!1;return!0}),$=["CLIENT"].includes(P.role),K=["MANAGER","PREPARATEUR","LIVREUR","COMMERCIAL","STOCK_MANAGER","FINANCE"].includes(P.role);return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Utilisateurs"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Gestion des utilisateurs et permissions"})]}),(0,yr.jsxs)("button",{onClick:()=>V(),className:"btn btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Nn,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Nouvel utilisateur"})]})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher un utilisateur...",value:x,onChange:e=>f(e.target.value),className:"input pl-10"})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsxs)("select",{value:g,onChange:e=>{b(e.target.value)},className:"input pl-10",children:[(0,yr.jsx)("option",{value:"",children:"Tous les r\xf4les"}),D.map(e=>(0,yr.jsx)("option",{value:e,children:e},e))]})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Ra,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"input pl-10",children:[(0,yr.jsx)("option",{value:"",children:"Tous les statuts"}),(0,yr.jsx)("option",{value:"pending",children:"En attente d'approbation"}),(0,yr.jsx)("option",{value:"approved",children:"Approuv\xe9s"})]})]})]})}),m?(0,yr.jsx)("div",{className:"card text-center py-8",children:(0,yr.jsx)("p",{className:"text-gray-600",children:"Chargement..."})}):0===Q.length?(0,yr.jsx)("div",{className:"card text-center py-8",children:(0,yr.jsx)("p",{className:"text-gray-600",children:"Aucun utilisateur trouv\xe9"})}):(0,yr.jsx)("div",{className:"card overflow-hidden",children:(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xf4le"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client / Magasin"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"V\xe9rification"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Q.map(e=>{const t=c.find(t=>t.id===e.clientId),s=u.find(t=>t.id===e.storeId);return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.email}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:e.name||"-"})]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)(In,{className:"h-4 w-4 text-gray-400"}),(0,yr.jsx)("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 text-xs font-semibold rounded-lg",children:e.role})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:[t&&(0,yr.jsxs)("p",{children:["Client: ",t.companyName]}),s&&(0,yr.jsxs)("p",{children:["Magasin: ",s.name]}),!t&&!s&&(0,yr.jsx)("p",{className:"text-gray-400",children:"-"})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:e.phone&&(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,yr.jsx)(nn,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:e.phone})]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,yr.jsx)("div",{className:"flex items-center space-x-1",children:e.emailVerified?(0,yr.jsxs)("span",{className:"flex items-center space-x-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold",children:[(0,yr.jsx)(Ma,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:"Email v\xe9rifi\xe9"})]}):(0,yr.jsxs)("span",{className:"flex items-center space-x-1 px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-semibold",children:[(0,yr.jsx)(Ra,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:"Email non v\xe9rifi\xe9"})]})}),"CLIENT"===e.role&&(0,yr.jsx)("div",{className:"flex items-center space-x-1",children:e.isApproved?(0,yr.jsxs)("span",{className:"flex items-center space-x-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold",children:[(0,yr.jsx)(Ma,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:"Approuv\xe9"})]}):(0,yr.jsxs)("span",{className:"flex items-center space-x-1 px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-semibold",children:[(0,yr.jsx)(Ra,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:"En attente"})]})})]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(!1!==e.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:!1!==e.isActive?"Actif":"Inactif"})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:["CLIENT"===e.role&&!e.isApproved&&(0,yr.jsx)("button",{onClick:()=>G(e.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approuver l'utilisateur",children:(0,yr.jsx)(Ma,{className:"h-4 w-4"})}),"CLIENT"===e.role&&e.isApproved&&(0,yr.jsx)("button",{onClick:()=>Y(e.id),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Retirer l'approbation",children:(0,yr.jsx)(fn,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>V(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Modifier",children:(0,yr.jsx)(wn,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>(async e=>{try{const t=await On(e.id);_({isOpen:!0,userId:e.id,roles:t.roles||[],user:e})}catch(t){i("Erreur lors du chargement des r\xf4les")}})(e),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"G\xe9rer les r\xf4les",children:(0,yr.jsx)(In,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>R({isOpen:!0,userId:e.id,newPassword:""}),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"R\xe9initialiser mot de passe",children:(0,yr.jsx)(Ln,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>W(e),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Historique",children:(0,yr.jsx)(Fn,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>H(e),className:"p-2 rounded-lg transition-colors ".concat(!1!==e.isActive?"text-yellow-600 hover:bg-yellow-50":"text-green-600 hover:bg-green-50"),title:!1!==e.isActive?"D\xe9sactiver":"Activer",children:(0,yr.jsx)(zn,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>k({isOpen:!0,userId:e.id}),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:(0,yr.jsx)(kn,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),j&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:S?"Modifier l'utilisateur":"Nouvel utilisateur"}),(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=Yt(Yt({},P),{},{name:"".concat(P.firstName||""," ").concat(P.lastName||"").trim()||void 0});delete e.firstName,delete e.lastName,S?(await Tn(S.id,e),a("Utilisateur modifi\xe9 avec succ\xe8s")):(await _n(e),a("Utilisateur cr\xe9\xe9 avec succ\xe8s")),U(),L()}catch(t){i(S?"Erreur lors de la modification":"Erreur lors de la cr\xe9ation"),console.error(t)}},className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pr\xe9nom *"}),(0,yr.jsx)("input",{type:"text",value:P.firstName,onChange:e=>O(Yt(Yt({},P),{},{firstName:e.target.value})),className:"input",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom *"}),(0,yr.jsx)("input",{type:"text",value:P.lastName,onChange:e=>O(Yt(Yt({},P),{},{lastName:e.target.value})),className:"input",required:!0})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),(0,yr.jsx)("input",{type:"email",value:P.email,onChange:e=>O(Yt(Yt({},P),{},{email:e.target.value})),className:"input",required:!0,disabled:!!S})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("input",{type:"tel",value:P.phone,onChange:e=>O(Yt(Yt({},P),{},{phone:e.target.value})),className:"input"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"R\xf4le *"}),(0,yr.jsx)("select",{value:P.role,onChange:e=>{O(Yt(Yt({},P),{},{role:e.target.value,clientId:"",storeId:""}))},className:"input",required:!0,children:D.map(e=>(0,yr.jsx)("option",{value:e,children:e},e))})]}),$&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Client"}),(0,yr.jsxs)("select",{value:P.clientId,onChange:e=>O(Yt(Yt({},P),{},{clientId:e.target.value})),className:"input",children:[(0,yr.jsx)("option",{value:"",children:"S\xe9lectionner un client"}),c.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.companyName},e.id))]})]}),K&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Magasin"}),(0,yr.jsxs)("select",{value:P.storeId,onChange:e=>O(Yt(Yt({},P),{},{storeId:e.target.value})),className:"input",children:[(0,yr.jsx)("option",{value:"",children:"S\xe9lectionner un magasin"}),u.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),S&&(0,yr.jsx)("div",{children:(0,yr.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("input",{type:"checkbox",checked:P.isActive,onChange:e=>O(Yt(Yt({},P),{},{isActive:e.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,yr.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Actif"})]})}),(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,yr.jsx)("button",{type:"button",onClick:U,className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsx)("button",{type:"submit",className:"btn btn-primary",children:S?"Modifier":"Cr\xe9er"})]})]})]})}),w.isOpen&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,yr.jsx)(dn,{className:"h-6 w-6 text-red-600"}),(0,yr.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Supprimer l'utilisateur"})]}),(0,yr.jsx)("p",{className:"text-gray-600 mb-6",children:"\xcates-vous s\xfbr de vouloir supprimer cet utilisateur ? Cette action est irr\xe9versible."}),(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,yr.jsx)("button",{onClick:()=>k({isOpen:!1,userId:null}),className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsx)("button",{onClick:()=>(async e=>{try{await Rn(e),a("Utilisateur supprim\xe9 avec succ\xe8s"),L()}catch(t){i("Erreur lors de la suppression"),console.error(t)}k({isOpen:!1,userId:null})})(w.userId),className:"btn bg-red-600 text-white hover:bg-red-700",children:"Supprimer"})]})]})}),E.isOpen&&(0,yr.jsx)(Vn,{isOpen:E.isOpen,onClose:()=>_({isOpen:!1,userId:null,roles:[]}),title:"Gestion des r\xf4les - ".concat((null===(e=E.user)||void 0===e?void 0:e.email)||""),children:(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-semibold mb-2",children:"R\xf4les assign\xe9s"}),(0,yr.jsx)("div",{className:"space-y-2",children:0===E.roles.length?(0,yr.jsx)("p",{className:"text-gray-500 text-sm",children:"Aucun r\xf4le assign\xe9"}):E.roles.map(e=>(0,yr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("span",{className:"font-semibold",children:e.role}),(0,yr.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["(","ORG"===e.scopeType?"Organisation":"Magasin",")"]})]}),(0,yr.jsx)("button",{onClick:()=>q(e.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 text-sm",children:"Retirer"})]},e.id))})]}),(0,yr.jsxs)("div",{className:"border-t pt-4",children:[(0,yr.jsx)("h3",{className:"font-semibold mb-2",children:"Assigner un nouveau r\xf4le"}),(0,yr.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=e.target;B(t.role.value,t.scopeType.value,t.scopeId.value||null),t.reset()},className:"space-y-3",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,yr.jsxs)("select",{name:"role",className:"input",required:!0,children:[(0,yr.jsx)("option",{value:"",children:"S\xe9lectionner un r\xf4le"}),D.map(e=>(0,yr.jsx)("option",{value:e,children:e},e))]}),(0,yr.jsxs)("select",{name:"scopeType",className:"input",required:!0,children:[(0,yr.jsx)("option",{value:"ORG",children:"Organisation"}),(0,yr.jsx)("option",{value:"SHOP",children:"Magasin"})]})]}),(0,yr.jsx)("button",{type:"submit",className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Assigner"})]})]})]})}),T.isOpen&&(0,yr.jsx)(Vn,{isOpen:T.isOpen,onClose:()=>R({isOpen:!1,userId:null,newPassword:""}),title:"R\xe9initialiser le mot de passe",children:(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nouveau mot de passe *"}),(0,yr.jsx)("input",{type:"password",value:T.newPassword,onChange:e=>R(Yt(Yt({},T),{},{newPassword:e.target.value})),className:"input w-full",placeholder:"Minimum 8 caract\xe8res",required:!0,minLength:8})]}),(0,yr.jsxs)("div",{className:"flex gap-3",children:[(0,yr.jsx)("button",{onClick:()=>R({isOpen:!1,userId:null,newPassword:""}),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,yr.jsx)("button",{onClick:async()=>{try{await async function(e,t){return(await fr.put("/admin/users/".concat(e,"/password"),{newPassword:t})).data}(T.userId,T.newPassword),a("Mot de passe r\xe9initialis\xe9 avec succ\xe8s"),R({isOpen:!1,userId:null,newPassword:""})}catch(e){i("Erreur lors de la r\xe9initialisation")}},disabled:T.newPassword.length<8,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50",children:"R\xe9initialiser"})]})]})}),M.isOpen&&(0,yr.jsx)(Vn,{isOpen:M.isOpen,onClose:()=>A({isOpen:!1,userId:null,activity:[]}),title:"Historique - ".concat((null===(t=M.user)||void 0===t?void 0:t.email)||""),children:(0,yr.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:0===M.activity.length?(0,yr.jsx)("p",{className:"text-gray-500 text-sm",children:"Aucune activit\xe9 enregistr\xe9e"}):M.activity.map((e,t)=>(0,yr.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,yr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-sm",children:e.action}),(0,yr.jsx)("p",{className:"text-xs text-gray-600",children:e.entity})]}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:e.createdAt?Ui(new Date(e.createdAt),"dd/MM/yyyy HH:mm"):"-"})]})},t))})}),(0,yr.jsx)(hn,Yt(Yt({},s),{},{onClose:r}))]})};async function qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/orders",{params:e})).data}async function Wi(e){return(await fr.post("/orders",e)).data}async function Gi(e,t){return(await fr.put("/orders/".concat(e),t)).data}async function Yi(e){const t={status:"SUPPLIER_ORDERED"};e&&(t.storeId=e);return(await fr.get("/orders",{params:t})).data}async function Qi(e){const t={status:"PREPARATION"};e&&(t.storeId=e);return(await fr.get("/orders",{params:t})).data}const $i=function(){var e,t,s,r;ae();const{toast:a,showToast:i,hideToast:l,showSuccess:o,showError:c}=mn(),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(!0),[p,x]=(0,n.useState)("all"),[f,g]=(0,n.useState)(""),[b,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)(null),[N,w]=(0,n.useState)({new:0,aggregated:0,supplierOrdered:0,preparing:0,shipping:0,delivered:0,totalCommission:0});(0,n.useEffect)(()=>{k()},[]);const k=async()=>{try{m(!0);const e=await qi({limit:2e3}),t=((null===e||void 0===e?void 0:e.orders)||[]).filter(e=>(e=>{const t=new Date,s=new Date(e);return new Date(s.getFullYear(),s.getMonth(),s.getDate())<new Date(t.getFullYear(),t.getMonth(),t.getDate())})(e.createdAt));u(t);const s=t.filter(e=>"NEW"===e.status).length,r=t.filter(e=>"AGGREGATED"===e.status).length,a=t.filter(e=>"SUPPLIER_ORDERED"===e.status).length,n=t.filter(e=>"PREPARATION"===e.status).length,i=t.filter(e=>"LIVRAISON"===e.status).length,l=t.filter(e=>"LIVREE"===e.status).length,o=t.filter(e=>"LIVREE"===e.status).reduce((e,t)=>{var s;return e+(null!==(s=t.totalMargin)&&void 0!==s?s:0)},0);w({new:s,aggregated:r,supplierOrdered:a,preparing:n,shipping:i,delivered:l,totalCommission:o})}catch(e){c("Erreur chargement commandes")}finally{m(!1)}},S=e=>({NEW:"Nouvelle",AGGREGATED:"Agr\xe9g\xe9e",SUPPLIER_ORDERED:"Commande fournisseur",PREPARATION:"En pr\xe9paration",LIVRAISON:"En livraison",LIVREE:"Livr\xe9e",ANNULEE:"Annul\xe9e"}[e]||e),C=e=>{const t=[{key:"NEW",label:"Nouvelle",icon:Yr},{key:"AGGREGATED",label:"Agr\xe9g\xe9e",icon:Qr},{key:"SUPPLIER_ORDERED",label:"Commande fournisseur",icon:Ma},{key:"PREPARATION",label:"Pr\xe9paration",icon:Qr},{key:"LIVRAISON",label:"Livraison",icon:ca},{key:"LIVREE",label:"Livr\xe9e",icon:Ma}],s=t.findIndex(t=>t.key===e);return t.map((e,t)=>Yt(Yt({},e),{},{completed:t<s,current:t===s,pending:t>s}))},E=d.filter(e=>{var t,s;const r="all"===p||e.status===p,a=!f||(null===(t=e.orderNumber)||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase()))||(null===(s=e.storeName)||void 0===s?void 0:s.toLowerCase().includes(f.toLowerCase()));return r&&a});return h?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[a.visible&&(0,yr.jsx)(hn,{message:a.message,type:a.type,onClose:l}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:"Gestion Commandes"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Toutes les commandes re\xe7ues (J-1)"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-4",children:[(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Nouvelles"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:N.new})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Agr\xe9g\xe9es"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:N.aggregated})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-indigo-50 to-indigo-100 border-2 border-indigo-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Commande fournisseur"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:N.supplierOrdered})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-yellow-50 to-yellow-100 border-2 border-yellow-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Pr\xe9paration"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:N.preparing})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Livraison"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:N.shipping})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Livr\xe9es"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-green-600",children:N.delivered})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Commission"}),(0,yr.jsxs)("p",{className:"text-xl font-bold text-orange-600",children:[N.totalCommission.toFixed(2)," \u20ac"]})]})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher...",value:f,onChange:e=>g(e.target.value),className:"w-full pl-10"})]}),(0,yr.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"w-full",children:[(0,yr.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,yr.jsx)("option",{value:"NEW",children:"Nouvelles"}),(0,yr.jsx)("option",{value:"AGGREGATED",children:"Agr\xe9g\xe9es"}),(0,yr.jsx)("option",{value:"SUPPLIER_ORDERED",children:"Commande fournisseur"}),(0,yr.jsx)("option",{value:"PREPARATION",children:"En pr\xe9paration"}),(0,yr.jsx)("option",{value:"LIVRAISON",children:"En livraison"}),(0,yr.jsx)("option",{value:"LIVREE",children:"Livr\xe9es"})]}),(0,yr.jsxs)("button",{className:"btn-primary flex items-center justify-center space-x-2",children:[(0,yr.jsx)(ra,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Export Excel"})]})]})}),(0,yr.jsxs)("div",{className:"card overflow-x-auto",children:[(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"N\xb0 Commande"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Magasin"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Produits"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Montant HT"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Commission"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Statut"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:E.map(e=>{var t,s,r;return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.orderNumber||"CMD-".concat(e.id)}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(e.createdAt).toLocaleDateString("fr-FR")}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.storeName||"Magasin"}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-600",children:[(null===(t=e.items)||void 0===t?void 0:t.length)||0," produit(s)"]}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900",children:[(null===(s=e.totalHT)||void 0===s?void 0:s.toFixed(2))||"0.00"," \u20ac"]}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-right",children:(0,yr.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:[(e.commission||0).toFixed(2)," \u20ac"]})}),(0,yr.jsx)("td",{className:"px-4 py-3 text-center",children:(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat((r=e.status,{NEW:"bg-blue-100 text-blue-700",AGGREGATED:"bg-purple-100 text-purple-700",SUPPLIER_ORDERED:"bg-indigo-100 text-indigo-700",PREPARATION:"bg-yellow-100 text-yellow-700",LIVRAISON:"bg-orange-100 text-orange-700",LIVREE:"bg-green-100 text-green-700",ANNULEE:"bg-red-100 text-red-700"}[r]||"bg-gray-100 text-gray-700")),children:S(e.status)})}),(0,yr.jsx)("td",{className:"px-4 py-3 text-center",children:(0,yr.jsx)("button",{onClick:()=>(e=>{j(e),y(!0)})(e),className:"p-2 bg-primary-50 hover:bg-primary-100 text-primary-600 rounded-lg transition-colors",children:(0,yr.jsx)(zn,{className:"h-4 w-4"})})})]},e.id)})})]}),0===E.length&&(0,yr.jsxs)("div",{className:"text-center py-12",children:[(0,yr.jsx)(Yr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-500",children:"Aucune commande trouv\xe9e"})]})]}),b&&v&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,yr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,yr.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Commande ",v.orderNumber||"#".concat(v.id)]}),(0,yr.jsxs)("p",{className:"text-sm text-gray-500",children:["Date: ",new Date(v.createdAt).toLocaleString("fr-FR")]})]}),(0,yr.jsx)("button",{onClick:()=>y(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,yr.jsx)(fn,{className:"h-6 w-6"})})]})}),(0,yr.jsxs)("div",{className:"p-6 space-y-6",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Statut de la commande"}),(0,yr.jsx)("div",{className:"flex items-center justify-between",children:C(v.status).map((e,t)=>{const s=e.icon;return(0,yr.jsxs)(n.Fragment,{children:[(0,yr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,yr.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(e.completed?"bg-green-500 text-white":e.current?"bg-primary-500 text-white animate-pulse":"bg-gray-200 text-gray-400"),children:(0,yr.jsx)(s,{className:"h-6 w-6"})}),(0,yr.jsx)("p",{className:"text-xs mt-2 font-medium ".concat(e.current?"text-primary-600":"text-gray-600"),children:e.label})]}),t<C(v.status).length-1&&(0,yr.jsx)("div",{className:"flex-1 h-1 mx-2 ".concat(e.completed?"bg-green-500":"bg-gray-200")})]},e.key)})})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{className:"card bg-gray-50",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Magasin"}),(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:v.storeName||"N/A"})]}),(0,yr.jsxs)("div",{className:"card bg-gray-50",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Commission"}),(0,yr.jsxs)("p",{className:"font-semibold text-green-600",children:[(v.commission||0).toFixed(2)," \u20ac"]})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Produits command\xe9s"}),(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold",children:"Produit"}),(0,yr.jsx)("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Quantit\xe9"}),(0,yr.jsx)("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Prix unit."}),(0,yr.jsx)("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Total"})]})}),(0,yr.jsx)("tbody",{className:"divide-y",children:null===(e=v.items)||void 0===e?void 0:e.map((e,t)=>{var s,r,a;return(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("td",{className:"px-4 py-2 text-sm font-medium",children:(null===(s=e.product)||void 0===s?void 0:s.name)||"Produit"}),(0,yr.jsxs)("td",{className:"px-4 py-2 text-sm text-right",children:[e.quantity," ",e.unit||"kg"]}),(0,yr.jsxs)("td",{className:"px-4 py-2 text-sm text-right",children:[(null===(r=e.unitPrice)||void 0===r?void 0:r.toFixed(2))||"0.00"," \u20ac"]}),(0,yr.jsxs)("td",{className:"px-4 py-2 text-sm text-right font-semibold",children:[(null===(a=e.totalPrice)||void 0===a?void 0:a.toFixed(2))||"0.00"," \u20ac"]})]},t)})}),(0,yr.jsxs)("tfoot",{className:"bg-gray-50 font-bold",children:[(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("td",{colSpan:"3",className:"px-4 py-3 text-right",children:"Total HT :"}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-right",children:[(null===(t=v.totalHT)||void 0===t?void 0:t.toFixed(2))||"0.00"," \u20ac"]})]}),(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("td",{colSpan:"3",className:"px-4 py-3 text-right",children:"TVA (20%) :"}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-right",children:[(null!==(s=v.totalTVA)&&void 0!==s?s:.2*(v.totalHT||0)).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("tr",{className:"text-lg",children:[(0,yr.jsx)("td",{colSpan:"3",className:"px-4 py-3 text-right",children:"Total TTC :"}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-right text-primary-600",children:[(null!==(r=v.totalTTC)&&void 0!==r?r:1.2*(v.totalHT||0)).toFixed(2)," \u20ac"]})]})]})]})})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-3 pt-4 border-t",children:["NEW"===v.status&&(0,yr.jsx)("button",{className:"btn-primary flex-1 py-3",children:"Agr\xe9ger"}),"AGGREGATED"===v.status&&(0,yr.jsx)("button",{className:"btn-primary flex-1 py-3",children:"Cr\xe9er commande fournisseur"}),"SUPPLIER_ORDERED"===v.status&&(0,yr.jsx)("button",{className:"btn-primary flex-1 py-3",children:'Marquer "En pr\xe9paration"'}),"PREPARATION"===v.status&&(0,yr.jsx)("button",{className:"btn-primary flex-1 py-3",children:'Marquer "En livraison"'}),"LIVRAISON"===v.status&&(0,yr.jsx)("button",{className:"btn-primary flex-1 py-3",children:'Marquer "Livr\xe9e"'}),(0,yr.jsx)("button",{onClick:()=>y(!1),className:"btn-secondary py-3 px-6",children:"Fermer"})]})]})]})})]})},Ki=Br("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);const Xi=function(e){let{data:t=[],columns:s=[],currentPage:r=1,totalPages:a=1,total:n=0,onPageChange:i,loading:l=!1,emptyMessage:o="Aucune donn\xe9e trouv\xe9e"}=e;return l?(0,yr.jsxs)("div",{className:"card text-center py-8",children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Chargement..."})]}):0===t.length?(0,yr.jsx)("div",{className:"card text-center py-8",children:(0,yr.jsx)("p",{className:"text-gray-600",children:o})}):(0,yr.jsxs)("div",{className:"card overflow-hidden",children:[(0,yr.jsx)("div",{className:"overflow-x-auto -webkit-overflow-scrolling-touch table-container",children:(0,yr.jsxs)("table",{className:"w-full min-w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsx)("tr",{children:s.map((e,t)=>(0,yr.jsx)("th",{className:"px-3 md:px-6 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:e.label},t))})}),(0,yr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e,t)=>(0,yr.jsx)("tr",{className:"hover:bg-gray-50",children:s.map((t,s)=>(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t.render?t.render(e[t.key],e):e[t.key]},s))},e.id||t))})]})}),a>1&&(0,yr.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:["Affichage de ",20*(r-1)+1," \xe0 ",Math.min(20*r,n)," sur ",n]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("button",{onClick:()=>i(r-1),disabled:1===r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xe9c\xe9dent"}),(0,yr.jsxs)("span",{className:"px-4 py-2 text-sm font-medium text-gray-700",children:["Page ",r," sur ",a]}),(0,yr.jsx)("button",{onClick:()=>i(r+1),disabled:r===a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Suivant"})]})]})]})};const Ji=function(e){let{isOpen:t,onClose:s,onConfirm:r,title:a="Confirmer l'action",message:n="\xcates-vous s\xfbr de vouloir effectuer cette action ?",confirmText:i="Confirmer",cancelText:l="Annuler",type:o="danger"}=e;const c={danger:{icon:"text-red-600",button:"btn-danger"},warning:{icon:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700"},info:{icon:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700"}},d=c[o]||c.danger;return(0,yr.jsx)(Vn,{isOpen:t,onClose:s,title:a,size:"sm",closeOnOverlayClick:!1,children:(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,yr.jsx)("div",{className:"flex-shrink-0 p-2 bg-".concat(o,"-50 rounded-lg"),children:(0,yr.jsx)(Aa,{className:"h-6 w-6 ".concat(d.icon)})}),(0,yr.jsx)("p",{className:"text-gray-700 flex-1",children:n})]}),(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,yr.jsx)("button",{onClick:s,className:"btn btn-secondary",children:l}),(0,yr.jsx)("button",{onClick:()=>{r(),s()},className:"btn ".concat(d.button),children:i})]})]})})};async function Zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/products",{params:e})).data}const el=function(){const{user:e}=Nr(),{canCreate:t,canUpdate:s,canDelete:r}=tn(Qa),{toast:a,showToast:i,hideToast:l,showSuccess:o,showError:c}=mn(),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(!0),[p,x]=(0,n.useState)(1),[f,g]=(0,n.useState)(1),[b,y]=(0,n.useState)(0),[v,j]=(0,n.useState)(""),[N,w]=(0,n.useState)(""),[k,S]=(0,n.useState)(""),[C,E]=(0,n.useState)(!1),[_,T]=(0,n.useState)({isOpen:!1,productId:null}),[R,M]=(0,n.useState)(null),[A,P]=(0,n.useState)({name:"",description:"",categoryId:"",subCategoryId:"",unit:"kg",priceHT:"",priceHT_T2:"",tva:"5.5",sku:"",photoUrl:"",origine:"",packaging:"",presentation:"",gencod:"",barcode:"",stock:"",isActive:!0}),[O,D]=(0,n.useState)(null),[I,L]=(0,n.useState)([]),[F,z]=(0,n.useState)([]),[V,U]=(0,n.useState)(!1);(0,n.useEffect)(()=>{H()},[p]),(0,n.useEffect)(()=>{B()},[]);const H=async()=>{try{var e,t;m(!0);const s={page:p,limit:20,category:N||void 0,subCategory:k||void 0,search:v||void 0},r=await Zi(s);u(r.products||[]),g((null===(e=r.pagination)||void 0===e?void 0:e.totalPages)||1),y((null===(t=r.pagination)||void 0===t?void 0:t.total)||0)}catch(s){c("Erreur lors du chargement des produits"),console.error(s)}finally{m(!1)}};(0,n.useEffect)(()=>{if(void 0!==v||void 0!==N||void 0!==k){const e=setTimeout(()=>{x(1),H()},500);return()=>clearTimeout(e)}},[v,N,k]);const B=async()=>{try{U(!0);const e=(await fr.get("/categories")).data.categories||[];L(e.map(e=>({id:e.id,name:e.name,icon:e.icon,color:e.color})))}catch(e){console.error("Erreur chargement cat\xe9gories:",e),L([])}finally{U(!1)}},q=async e=>{if(e)try{const t=(await fr.get("/categories/".concat(e,"/subcategories"))).data.subCategories||[];z(t.map(e=>({id:e.id,name:e.name,icon:e.icon})))}catch(t){console.error("Erreur chargement sous-cat\xe9gories:",t),z([])}else z([])},W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t,s,r,a;M(e);const n=e.categoryId||(null===(t=e.customCategory)||void 0===t?void 0:t.id)||"",i=e.subCategoryId||(null===(s=e.customSubCategory)||void 0===s?void 0:s.id)||"";P({name:e.name||"",description:e.description||"",categoryId:n,subCategoryId:i,unit:e.unit||"kg",priceHT:(null===(r=e.priceHT)||void 0===r?void 0:r.toString())||"",tva:(null===(a=e.tva)||void 0===a?void 0:a.toString())||"5.5",sku:e.sku||"",isActive:void 0===e.isActive||e.isActive}),n&&q(n)}else M(null),P({name:"",description:"",categoryId:"",subCategoryId:"",unit:"kg",priceHT:"",priceHT_T2:"",tva:"5.5",sku:"",photoUrl:"",origine:"",packaging:"",presentation:"",gencod:"",barcode:"",stock:"",isActive:!0}),D(null),z([]);E(!0)},G=()=>{E(!1),M(null)},Y=async e=>{try{await async function(e){return(await fr.delete("/products/".concat(e))).data}(e),o("Produit supprim\xe9 avec succ\xe8s"),H()}catch(t){c("Erreur lors de la suppression"),console.error(t)}T({isOpen:!1,productId:null})},Q=d.filter(e=>{var t,s,r,a,n,i;if(!v)return!0;const l=v.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(l))||(null===(s=e.sku)||void 0===s?void 0:s.toLowerCase().includes(l))||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(l))||(null===(a=e.gencod)||void 0===a?void 0:a.toLowerCase().includes(l))||(null===(n=e.barcode)||void 0===n?void 0:n.toLowerCase().includes(l))||(null===(i=e.origine)||void 0===i?void 0:i.toLowerCase().includes(l))}),$=[{key:"photoUrl",label:"Photo",render:(e,t)=>{const s=(r=e)&&"string"===typeof r?r.startsWith("http://")||r.startsWith("https://")?r:("undefined"!==typeof window?window.location.origin:"")+(r.startsWith("/")?r:"/".concat(r)):"";var r;return(0,yr.jsx)("div",{className:"flex items-center justify-center",children:s?(0,yr.jsx)("img",{src:s,alt:t.name||"",className:"h-12 w-12 object-cover rounded-lg border border-gray-200"}):(0,yr.jsx)("div",{className:"h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,yr.jsx)(Qr,{className:"h-6 w-6 text-gray-400"})})})}},{key:"name",label:"Produit",render:(e,t)=>(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e}),t.sku&&(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",t.sku]}),t.gencod&&(0,yr.jsxs)("p",{className:"text-xs text-gray-400",children:["GENCOD: ",t.gencod]})]})},{key:"category",label:"Cat\xe9gorie",render:(e,t)=>{var s,r,a;return(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,yr.jsx)(Kr,{className:"h-3 w-3"}),(0,yr.jsx)("span",{className:"font-semibold",children:(null===(s=t.customCategory)||void 0===s?void 0:s.name)||e||"Non class\xe9"})]}),((null===(r=t.customSubCategory)||void 0===r?void 0:r.name)||t.subCategory)&&(0,yr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(null===(a=t.customSubCategory)||void 0===a?void 0:a.name)||t.subCategory})]})}},{key:"unit",label:"Unit\xe9",render:e=>(0,yr.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-semibold rounded-lg",children:e})},{key:"priceHT",label:"Prix",render:(e,t)=>{const s=null==t.tvaRate||Number.isNaN(t.tvaRate)?5.5:t.tvaRate,r=null==e||Number.isNaN(e)?0:Number(e),a=r*(1+s/100);return(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("p",{className:"font-bold text-gray-900",children:[a.toFixed(2)," \u20ac"]}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:["HT: ",r.toFixed(2)," \u20ac"]}),null!=t.priceHT_T2&&!Number.isNaN(t.priceHT_T2)&&(0,yr.jsxs)("p",{className:"text-xs text-blue-600",children:["T2: ",Number(t.priceHT_T2).toFixed(2)," \u20ac HT"]})]})}},{key:"stock",label:"Stock",render:(e,t)=>{var s,r,a;const n=null!==(s=null!==(r=null!==(a=t.totalShopStock)&&void 0!==a?a:e)&&void 0!==r?r:t.stock)&&void 0!==s?s:0,i=Number(n),l=Number.isNaN(i)?0:i,o=l>0&&l<=10,c=0===l;return(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("span",{className:"font-bold ".concat(c?"text-red-600":o?"text-orange-600":"text-green-600"),children:l}),c&&(0,yr.jsx)("span",{className:"text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded-full",children:"Rupture"}),o&&!c&&(0,yr.jsx)("span",{className:"text-xs px-2 py-0.5 bg-orange-100 text-orange-700 rounded-full",children:"Faible"})]})}},{key:"isActive",label:"Statut",render:e=>(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(e?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e?"Actif":"Inactif"})},{key:"actions",label:"Actions",render:(e,t)=>(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&(0,yr.jsx)("button",{onClick:()=>W(t),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Modifier",children:(0,yr.jsx)(wn,{className:"h-4 w-4"})}),r&&(0,yr.jsx)("button",{onClick:()=>T({isOpen:!0,productId:t.id}),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:(0,yr.jsx)(kn,{className:"h-4 w-4"})})]})}];return(0,yr.jsx)(sn,{requiredRole:"ADMIN",requiredResource:Qa,requiredAction:Za.READ,children:(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Produits"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Catalogue produits avec cat\xe9gories et sous-cat\xe9gories"})]}),t&&(0,yr.jsxs)("button",{onClick:()=>W(),className:"btn btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Nn,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Nouveau produit"})]})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher un produit (nom, SKU, description)...",value:v,onChange:e=>j(e.target.value),className:"input pl-10"})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsxs)("select",{value:N,onChange:e=>{const t=e.target.value;w(t),S(""),x(1),t?q(t):z([])},className:"input pl-10",children:[(0,yr.jsx)("option",{value:"",children:"Toutes les cat\xe9gories"}),I.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,yr.jsx)("div",{className:"relative",children:(0,yr.jsxs)("select",{value:k,onChange:e=>{S(e.target.value),x(1)},className:"input",disabled:!N||0===F.length,children:[(0,yr.jsx)("option",{value:"",children:"Toutes les sous-cat\xe9gories"}),F.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,yr.jsxs)("button",{onClick:()=>{try{const e=Q.map(e=>{var t,s,r,a;return{Nom:e.name,SKU:e.sku||"",Description:e.description||"","Cat\xe9gorie":(null===(t=e.customCategory)||void 0===t?void 0:t.name)||e.category||"","Sous-cat\xe9gorie":(null===(s=e.customSubCategory)||void 0===s?void 0:s.name)||e.subCategory||"","Unit\xe9":e.unit,"Prix HT":(null===(r=e.priceHT)||void 0===r?void 0:r.toFixed(2))||"0.00","Prix HT T2":(null===(a=e.priceHT_T2)||void 0===a?void 0:a.toFixed(2))||"","TVA (%)":e.tva||"5.5",Stock:e.stock||"0",Origine:e.origine||"",Packaging:e.packaging||"","Pr\xe9sentation":e.presentation||"",GENCOD:e.gencod||"","Code-barres":e.barcode||"",Actif:e.isActive?"Oui":"Non"}}),t=Object.keys(e[0]||{}),s=[t.join(";"),...e.map(e=>t.map(t=>'"'.concat(e[t],'"')).join(";"))].join("\n"),r=new Blob(["\ufeff"+s],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(r),a.download="produits_".concat((new Date).toISOString().split("T")[0],".csv"),a.click(),o("".concat(e.length," produits export\xe9s avec succ\xe8s"))}catch(e){c("Erreur lors de l'export"),console.error(e)}},className:"btn btn-secondary flex items-center space-x-2",title:"Exporter en CSV",children:[(0,yr.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,yr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,yr.jsx)("span",{children:"Export CSV"})]})]})}),(0,yr.jsx)(Xi,{data:Q,columns:$,currentPage:p,totalPages:f,total:b,onPageChange:x,loading:h,emptyMessage:"Aucun produit trouv\xe9"}),(0,yr.jsx)(Vn,{isOpen:C,onClose:G,title:R?"Modifier le produit":"Nouveau produit",size:"lg",children:(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=parseFloat(A.priceHT)||0,t=parseFloat(A.priceHT_T2)||0,s=parseFloat(A.tva)||5.5,r=parseInt(A.stock)||0;if(e<0||t<0)return void c("Les prix ne peuvent pas \xeatre n\xe9gatifs");if(s<0||s>100)return void c("Le taux de TVA doit \xeatre entre 0 et 100%");const a=new FormData;Object.keys(A).forEach(e=>{"photoUrl"!==e&&""!==A[e]&&a.append(e,A[e])}),a.set("priceHT",e),a.set("priceHT_T2",t),a.set("tva",s),a.set("stock",r),O&&a.append("photo",O),R?(await fr.put("/products/".concat(R.id),a,{headers:{"Content-Type":"multipart/form-data"}}),o("Produit modifi\xe9 avec succ\xe8s")):(await fr.post("/products",a,{headers:{"Content-Type":"multipart/form-data"}}),o("Produit cr\xe9\xe9 avec succ\xe8s")),G(),H()}catch(t){c(R?"Erreur lors de la modification":"Erreur lors de la cr\xe9ation"),console.error(t)}},className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom du produit *"}),(0,yr.jsx)("input",{type:"text",value:A.name,onChange:e=>P(Yt(Yt({},A),{},{name:e.target.value})),className:"input",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"SKU (Code produit)"}),(0,yr.jsx)("input",{type:"text",value:A.sku,onChange:e=>P(Yt(Yt({},A),{},{sku:e.target.value})),className:"input",placeholder:"ex: FRUIT-POMME-001"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),(0,yr.jsx)("textarea",{value:A.description,onChange:e=>P(Yt(Yt({},A),{},{description:e.target.value})),className:"input",rows:"3"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cat\xe9gorie *"}),(0,yr.jsxs)("select",{value:A.categoryId,onChange:e=>{const t=e.target.value;P(Yt(Yt({},A),{},{categoryId:t,subCategoryId:""})),q(t)},className:"input",required:!0,disabled:V,children:[(0,yr.jsx)("option",{value:"",children:V?"Chargement...":"S\xe9lectionner une cat\xe9gorie"}),I.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Sous-cat\xe9gorie"}),(0,yr.jsxs)("select",{value:A.subCategoryId,onChange:e=>P(Yt(Yt({},A),{},{subCategoryId:e.target.value})),className:"input",disabled:!A.categoryId||0===F.length,children:[(0,yr.jsx)("option",{value:"",children:A.categoryId?0===F.length?"Aucune sous-cat\xe9gorie":"Optionnel":"S\xe9lectionnez d'abord une cat\xe9gorie"}),F.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Unit\xe9 *"}),(0,yr.jsx)("select",{value:A.unit,onChange:e=>P(Yt(Yt({},A),{},{unit:e.target.value})),className:"input",required:!0,children:["kg","pi\xe8ce","botte","t\xeate","botte","kg (cagette)"].map(e=>(0,yr.jsx)("option",{value:e,children:e},e))})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Prix HT (\u20ac) *"}),(0,yr.jsx)("input",{type:"number",step:"0.01",value:A.priceHT,onChange:e=>P(Yt(Yt({},A),{},{priceHT:e.target.value})),className:"input",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"TVA (%) *"}),(0,yr.jsxs)("select",{value:A.tva,onChange:e=>P(Yt(Yt({},A),{},{tva:e.target.value})),className:"input",required:!0,children:[(0,yr.jsx)("option",{value:"5.5",children:"5.5%"}),(0,yr.jsx)("option",{value:"10",children:"10%"}),(0,yr.jsx)("option",{value:"20",children:"20%"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Prix HT Tarif 2 (\u20ac)"}),(0,yr.jsx)("input",{type:"number",step:"0.01",value:A.priceHT_T2,onChange:e=>P(Yt(Yt({},A),{},{priceHT_T2:e.target.value})),className:"input",placeholder:"Prix pour tarif 2"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Stock initial"}),(0,yr.jsx)("input",{type:"number",value:A.stock,onChange:e=>P(Yt(Yt({},A),{},{stock:e.target.value})),className:"input",placeholder:"Quantit\xe9 en stock"})]})]}),(0,yr.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,yr.jsx)("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:"\ud83d\udcf8 Photo du produit"}),(0,yr.jsxs)("div",{className:"space-y-3",children:[A.photoUrl&&!O&&(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("img",{src:A.photoUrl,alt:"Photo actuelle",className:"h-20 w-20 object-cover rounded-lg border"}),(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:"Photo actuelle"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return c("La taille de l'image ne doit pas d\xe9passer 5MB"),void(e.target.value="");D(t)}},className:"input"}),(0,yr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Format: JPG, PNG (max 5MB)"})]})]})]}),(0,yr.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,yr.jsx)("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:"\ud83d\udccb Informations avanc\xe9es"}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Origine"}),(0,yr.jsx)("input",{type:"text",value:A.origine,onChange:e=>P(Yt(Yt({},A),{},{origine:e.target.value})),className:"input",placeholder:"ex: France, Espagne..."})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Packaging"}),(0,yr.jsx)("input",{type:"text",value:A.packaging,onChange:e=>P(Yt(Yt({},A),{},{packaging:e.target.value})),className:"input",placeholder:"ex: Carton 5kg, Barquette..."})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pr\xe9sentation"}),(0,yr.jsx)("input",{type:"text",value:A.presentation,onChange:e=>P(Yt(Yt({},A),{},{presentation:e.target.value})),className:"input",placeholder:"ex: Vrac, Emball\xe9..."})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"GENCOD"}),(0,yr.jsx)("input",{type:"text",value:A.gencod,onChange:e=>P(Yt(Yt({},A),{},{gencod:e.target.value})),className:"input",placeholder:"Code GENCOD/EAN"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Code-barres"}),(0,yr.jsx)("input",{type:"text",value:A.barcode,onChange:e=>P(Yt(Yt({},A),{},{barcode:e.target.value})),className:"input",placeholder:"Code-barres interne"})]})]})]}),(0,yr.jsx)("div",{children:(0,yr.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("input",{type:"checkbox",checked:A.isActive,onChange:e=>P(Yt(Yt({},A),{},{isActive:e.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,yr.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Produit actif"})]})}),(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,yr.jsx)("button",{type:"button",onClick:G,className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsx)("button",{type:"submit",className:"btn btn-primary",children:R?"Modifier":"Cr\xe9er"})]})]})}),(0,yr.jsx)(Ji,{isOpen:_.isOpen,onClose:()=>T({isOpen:!1,productId:null}),onConfirm:()=>Y(_.productId),title:"Supprimer le produit",message:"\xcates-vous s\xfbr de vouloir supprimer ce produit ? Cette action est irr\xe9versible.",confirmText:"Supprimer",type:"danger"}),(0,yr.jsx)(hn,Yt(Yt({},a),{},{onClose:l}))]})})},tl=Br("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),sl=Br("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),rl=Br("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),al=Br("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),nl=Br("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),il=Br("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ll=Br("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const ol=function(){const{toast:e,showToast:t,showSuccess:s,showError:r,hideToast:a}=mn(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1),[p,x]=(0,n.useState)(null),[f,g]=(0,n.useState)(null),[b,y]=(0,n.useState)(null),[v,j]=(0,n.useState)({}),[N,w]=(0,n.useState)(""),[k,S]=(0,n.useState)(null),[C,E]=(0,n.useState)(null),[_,T]=(0,n.useState)({name:"",description:"",icon:"",color:"",imageUrl:"",isActive:!0}),[R,M]=(0,n.useState)({name:"",description:"",icon:"",imageUrl:"",isActive:!0});(0,n.useEffect)(()=>{A()},[]);const A=async()=>{try{c(!0);const e=(await fr.get("/categories")).data.categories||[],t=await Promise.all(e.map(async e=>{try{const t=await fr.get("/categories/".concat(e.id,"/subcategories"));return Yt(Yt({},e),{},{subCategories:t.data.subCategories||[]})}catch(t){return console.error("Erreur chargement sous-cat\xe9gories pour ".concat(e.name,":"),t),Yt(Yt({},e),{},{subCategories:[]})}}));l(t)}catch(e){r("Erreur lors du chargement des cat\xe9gories"),console.error(e)}finally{c(!1)}},P=async(e,t)=>{const s=i.findIndex(t=>t.id===e);if(-1===s)return;if("up"===t&&0===s)return;if("down"===t&&s===i.length-1)return;const a="up"===t?s-1:s+1,n=i[s],l=i[a];try{await Promise.all([fr.put("/categories/".concat(n.id),{order:l.order}),fr.put("/categories/".concat(l.id),{order:n.order})]),A()}catch(o){r("Erreur lors du r\xe9ordonnancement")}},O=i.filter(e=>{var t,s,r;if(!N)return!0;const a=N.toLowerCase(),n=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(a)),i=null===(r=e.subCategories)||void 0===r?void 0:r.some(e=>{var t,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(a))});return n||i}),D=i.reduce((e,t)=>{var s;return e+((null===(s=t._count)||void 0===s?void 0:s.subCategories)||0)},0),I=i.reduce((e,t)=>{var s;return e+((null===(s=t._count)||void 0===s?void 0:s.products)||0)},0);return o?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)(hn,{toast:e,onClose:()=>t(null)}),(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Gestion des Cat\xe9gories"}),(0,yr.jsx)("p",{className:"text-gray-600 mt-2",children:"G\xe9rez les cat\xe9gories et sous-cat\xe9gories de produits"})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsxs)("button",{onClick:()=>{try{const e=i.map(e=>{var t,s;return{Nom:e.name,Description:e.description||"",Icon:e.icon||"",Couleur:e.color||"",Ordre:e.order||0,Actif:e.isActive?"Oui":"Non","Sous-cat\xe9gories":(null===(t=e._count)||void 0===t?void 0:t.subCategories)||0,Produits:(null===(s=e._count)||void 0===s?void 0:s.products)||0}}),t=Object.keys(e[0]||{}),r=[t.join(";"),...e.map(e=>t.map(t=>'"'.concat(e[t],'"')).join(";"))].join("\n"),a=new Blob(["\ufeff"+r],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");n.href=URL.createObjectURL(a),n.download="categories_".concat((new Date).toISOString().split("T")[0],".csv"),n.click(),s("".concat(e.length," cat\xe9gories export\xe9es"))}catch(e){r("Erreur lors de l'export")}},className:"btn-secondary flex items-center space-x-2",children:[(0,yr.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,yr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,yr.jsx)("span",{children:"Export CSV"})]}),(0,yr.jsxs)("button",{onClick:()=>{x(null),S(null),T({name:"",description:"",icon:"",color:"",imageUrl:"",isActive:!0}),u(!0)},className:"btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Nn,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Nouvelle Cat\xe9gorie"})]})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,yr.jsx)("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Total Cat\xe9gories"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:i.length})]}),(0,yr.jsx)(Kr,{className:"h-12 w-12 text-blue-400"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Sous-cat\xe9gories"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:D})]}),(0,yr.jsx)(Kr,{className:"h-12 w-12 text-purple-400"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Produits Total"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-green-600",children:I})]}),(0,yr.jsx)(Qr,{className:"h-12 w-12 text-green-400"})]})})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher une cat\xe9gorie ou sous-cat\xe9gorie...",value:N,onChange:e=>w(e.target.value),className:"input pl-10 w-full"})]})}),(0,yr.jsx)("div",{className:"space-y-4",children:O.map((e,t)=>(0,yr.jsxs)("div",{className:"card border-2 hover:shadow-lg transition-shadow",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,yr.jsx)("button",{onClick:()=>{return t=e.id,void j(e=>Yt(Yt({},e),{},{[t]:!e[t]}));var t},className:"text-gray-500 hover:text-gray-700",children:v[e.id]?(0,yr.jsx)(tl,{className:"h-5 w-5"}):(0,yr.jsx)(sl,{className:"h-5 w-5"})}),e.imageUrl?(0,yr.jsx)("img",{src:e.imageUrl,alt:e.name,className:"h-12 w-12 object-cover rounded-lg border border-gray-200"}):(0,yr.jsx)("div",{className:"h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,yr.jsx)(Kr,{className:"h-6 w-6 text-gray-400"})}),(0,yr.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[e.color&&(0,yr.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("div",{className:"font-semibold text-gray-900",children:e.name}),e.description&&(0,yr.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]}),(0,yr.jsxs)("button",{onClick:()=>(async(e,t)=>{try{await fr.put("/categories/".concat(e),{isActive:!t}),s("Cat\xe9gorie ".concat(t?"d\xe9sactiv\xe9e":"activ\xe9e")),A()}catch(a){r("Erreur lors de la modification")}})(e.id,e.isActive),className:"px-3 py-1 text-xs rounded-full font-semibold cursor-pointer transition-colors ".concat(e.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),title:e.isActive?"Cliquer pour d\xe9sactiver":"Cliquer pour activer",children:[(0,yr.jsx)(rl,{className:"h-3 w-3 inline mr-1"}),e.isActive?"Actif":"Inactif"]}),e.subCategories&&e.subCategories.length>0&&(0,yr.jsxs)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full",children:[e.subCategories.length," sous-cat"]}),e._count&&(0,yr.jsxs)("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full",children:[e._count.products," produit",e._count.products>1?"s":""]})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yr.jsx)("button",{onClick:()=>P(e.id,"up"),className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",disabled:0===t,title:"Monter",children:(0,yr.jsx)(al,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>P(e.id,"down"),className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",disabled:t===O.length-1,title:"Descendre",children:(0,yr.jsx)(nl,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>(async e=>{try{const t={name:"".concat(e.name," (copie)"),description:e.description,icon:e.icon,color:e.color,imageUrl:e.imageUrl,isActive:e.isActive,order:i.length};await fr.post("/categories",t),s("Cat\xe9gorie dupliqu\xe9e avec succ\xe8s"),A()}catch(t){r("Erreur lors de la duplication")}})(e),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-md",title:"Dupliquer",children:(0,yr.jsx)(il,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>(e=>{y(e),g(null),M({name:"",description:"",icon:""}),m(!0)})(e),className:"px-2 py-1.5 text-sm bg-green-50 text-green-700 hover:bg-green-100 rounded-md flex items-center space-x-1",title:"Ajouter une sous-cat\xe9gorie",children:(0,yr.jsx)(Nn,{className:"h-3.5 w-3.5"})}),(0,yr.jsx)("button",{onClick:()=>(e=>{x(e),T({name:e.name,description:e.description||"",icon:e.icon||"",color:e.color||"",imageUrl:e.imageUrl||"",isActive:void 0===e.isActive||e.isActive}),S(null),u(!0)})(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Modifier",children:(0,yr.jsx)(wn,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>(async e=>{var t;const a=i.find(t=>t.id===e),n=(null===a||void 0===a||null===(t=a._count)||void 0===t?void 0:t.products)||0;if(n>0){if(!window.confirm("Cette cat\xe9gorie contient ".concat(n," produit(s). \xcates-vous s\xfbr de vouloir la supprimer ?")))return}else if(!window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette cat\xe9gorie ?"))return;try{await fr.delete("/categories/".concat(e)),s("Cat\xe9gorie supprim\xe9e"),A()}catch(c){var l,o;r((null===(l=c.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)||"Erreur lors de la suppression")}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Supprimer",children:(0,yr.jsx)(kn,{className:"h-4 w-4"})})]})]}),v[e.id]&&e.subCategories&&e.subCategories.length>0&&(0,yr.jsx)("div",{className:"border-t bg-gray-50 p-4",children:(0,yr.jsx)("div",{className:"space-y-2",children:e.subCategories.map(t=>(0,yr.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border hover:shadow-sm transition-shadow",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,yr.jsx)("div",{className:"w-1 h-8 bg-blue-400 rounded"}),t.imageUrl?(0,yr.jsx)("img",{src:t.imageUrl,alt:t.name,className:"h-8 w-8 object-cover rounded border border-gray-200"}):(0,yr.jsx)("div",{className:"h-8 w-8 bg-gray-50 rounded flex items-center justify-center",children:(0,yr.jsx)(Kr,{className:"h-4 w-4 text-gray-300"})}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("div",{className:"font-medium text-gray-800",children:t.name}),t.description&&(0,yr.jsx)("div",{className:"text-xs text-gray-500",children:t.description})]}),(0,yr.jsxs)("button",{onClick:()=>(async(e,t)=>{try{await fr.put("/categories/subcategories/".concat(e),{isActive:!t}),s("Sous-cat\xe9gorie ".concat(t?"d\xe9sactiv\xe9e":"activ\xe9e")),A()}catch(a){r("Erreur lors de la modification")}})(t.id,t.isActive),className:"px-2 py-0.5 text-xs rounded-full font-semibold cursor-pointer transition-colors ".concat(t.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),title:t.isActive?"Cliquer pour d\xe9sactiver":"Cliquer pour activer",children:[(0,yr.jsx)(rl,{className:"h-2.5 w-2.5 inline mr-1"}),t.isActive?"Actif":"Inactif"]}),t._count&&(0,yr.jsxs)("span",{className:"px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded-full",children:[t._count.products," prod"]})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("button",{onClick:()=>((e,t)=>{y(e),g(t),M({name:t.name,description:t.description||"",icon:t.icon||""}),m(!0)})(e,t),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Modifier",children:(0,yr.jsx)(wn,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>(async(e,t)=>{var a;const n=(null===t||void 0===t||null===(a=t._count)||void 0===a?void 0:a.products)||0;if(n>0){if(!window.confirm("Cette sous-cat\xe9gorie contient ".concat(n," produit(s). \xcates-vous s\xfbr de vouloir la supprimer ?")))return}else if(!window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette sous-cat\xe9gorie ?"))return;try{await fr.delete("/categories/subcategories/".concat(e)),s("Sous-cat\xe9gorie supprim\xe9e avec succ\xe8s"),A()}catch(o){var i,l;r((null===(i=o.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)||"Erreur lors de la suppression")}})(t.id,t),className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Supprimer",children:(0,yr.jsx)(kn,{className:"h-4 w-4"})})]})]},t.id))})}),v[e.id]&&(!e.subCategories||0===e.subCategories.length)&&(0,yr.jsx)("div",{className:"border-t bg-gray-50 p-4 text-center text-gray-500 text-sm",children:'Aucune sous-cat\xe9gorie. Cliquez sur "+ Sous-cat\xe9gorie" pour en ajouter.'})]},e.id))}),0===i.length&&!o&&(0,yr.jsxs)("div",{className:"card text-center py-12 text-gray-500",children:[(0,yr.jsx)(Kr,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,yr.jsx)("p",{children:"Aucune cat\xe9gorie trouv\xe9e"})]}),(0,yr.jsx)(Vn,{isOpen:d,onClose:()=>u(!1),title:p?"Modifier la cat\xe9gorie":"Nouvelle cat\xe9gorie",children:(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();if(i.some(e=>e.name.toLowerCase()===_.name.toLowerCase()&&e.id!==(null===p||void 0===p?void 0:p.id)))r("Une cat\xe9gorie avec ce nom existe d\xe9j\xe0");else try{const e=new FormData;Object.keys(_).forEach(t=>{""!==_[t]&&null!==_[t]&&e.append(t,_[t])}),k&&e.append("image",k),p?(await fr.put("/categories/".concat(p.id),e,{headers:{"Content-Type":"multipart/form-data"}}),s("Cat\xe9gorie modifi\xe9e avec succ\xe8s")):(await fr.post("/categories",e,{headers:{"Content-Type":"multipart/form-data"}}),s("Cat\xe9gorie cr\xe9\xe9e avec succ\xe8s")),u(!1),x(null),S(null),T({name:"",description:"",icon:"",color:"",imageUrl:"",isActive:!0}),A()}catch(n){var t,a;r((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Erreur lors de l'enregistrement")}},className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom *"}),(0,yr.jsx)("input",{type:"text",required:!0,value:_.name,onChange:e=>T(Yt(Yt({},_),{},{name:e.target.value})),className:"input",placeholder:"Ex: Fruits exotiques"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,yr.jsx)("textarea",{value:_.description,onChange:e=>T(Yt(Yt({},_),{},{description:e.target.value})),className:"input",rows:"3",placeholder:"Description de la cat\xe9gorie"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Icon (emoji ou nom)"}),(0,yr.jsx)("input",{type:"text",value:_.icon,onChange:e=>T(Yt(Yt({},_),{},{icon:e.target.value})),className:"input",placeholder:"Ex: \ud83c\udf4e ou fruit-icon"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Couleur (hex)"}),(0,yr.jsxs)("div",{className:"flex space-x-2",children:[(0,yr.jsx)("input",{type:"text",value:_.color,onChange:e=>T(Yt(Yt({},_),{},{color:e.target.value})),className:"input flex-1",placeholder:"#FF5733"}),(0,yr.jsx)("input",{type:"color",value:_.color||"#000000",onChange:e=>T(Yt(Yt({},_),{},{color:e.target.value})),className:"h-10 w-20 rounded border"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcf8 Image de la cat\xe9gorie"}),_.imageUrl&&!k&&(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("img",{src:_.imageUrl,alt:"Image actuelle",className:"h-16 w-16 object-cover rounded-lg border"}),(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:"Image actuelle"})]}),(0,yr.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return r("La taille de l'image ne doit pas d\xe9passer 5MB"),void(e.target.value="");S(t)}},className:"input"}),(0,yr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Format: JPG, PNG (max 5MB)"})]}),(0,yr.jsx)("div",{children:(0,yr.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,yr.jsx)("input",{type:"checkbox",checked:_.isActive,onChange:e=>T(Yt(Yt({},_),{},{isActive:e.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,yr.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Cat\xe9gorie active"})]})}),(0,yr.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,yr.jsxs)("button",{type:"button",onClick:()=>u(!1),className:"btn-secondary flex items-center space-x-2",children:[(0,yr.jsx)(ua,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Annuler"})]}),(0,yr.jsxs)("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(ll,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:p?"Modifier":"Cr\xe9er"})]})]})]})}),(0,yr.jsx)(Vn,{isOpen:h,onClose:()=>m(!1),title:f?"Modifier la sous-cat\xe9gorie":"Nouvelle sous-cat\xe9gorie - ".concat(null===b||void 0===b?void 0:b.name),children:(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{f?(await fr.put("/categories/subcategories/".concat(f.id),R),s("Sous-cat\xe9gorie modifi\xe9e avec succ\xe8s")):(await fr.post("/categories/".concat(b.id,"/subcategories"),R),s("Sous-cat\xe9gorie cr\xe9\xe9e avec succ\xe8s")),m(!1),g(null),y(null),M({name:"",description:"",icon:""}),A()}catch(n){var t,a;r((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Erreur lors de l'enregistrement")}},className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom *"}),(0,yr.jsx)("input",{type:"text",required:!0,value:R.name,onChange:e=>M(Yt(Yt({},R),{},{name:e.target.value})),className:"input",placeholder:"Ex: Pommes rouges"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,yr.jsx)("textarea",{value:R.description,onChange:e=>M(Yt(Yt({},R),{},{description:e.target.value})),className:"input",rows:"3",placeholder:"Description de la sous-cat\xe9gorie"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Icon (emoji ou nom)"}),(0,yr.jsx)("input",{type:"text",value:R.icon,onChange:e=>M(Yt(Yt({},R),{},{icon:e.target.value})),className:"input",placeholder:"Ex: \ud83c\udf4e ou icon-name"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcf8 Image de la sous-cat\xe9gorie"}),R.imageUrl&&!C&&(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("img",{src:R.imageUrl,alt:"Image actuelle",className:"h-16 w-16 object-cover rounded-lg border"}),(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:"Image actuelle"})]}),(0,yr.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return r("La taille de l'image ne doit pas d\xe9passer 5MB"),void(e.target.value="");E(t)}},className:"input"}),(0,yr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Format: JPG, PNG (max 5MB)"})]}),(0,yr.jsx)("div",{children:(0,yr.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,yr.jsx)("input",{type:"checkbox",checked:R.isActive,onChange:e=>M(Yt(Yt({},R),{},{isActive:e.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,yr.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Sous-cat\xe9gorie active"})]})}),(0,yr.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,yr.jsxs)("button",{type:"button",onClick:()=>m(!1),className:"btn-secondary flex items-center space-x-2",children:[(0,yr.jsx)(ua,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Annuler"})]}),(0,yr.jsxs)("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(ll,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:f?"Modifier":"Cr\xe9er"})]})]})]})}),(0,yr.jsx)(hn,{toast:e,onClose:a})]})},cl=Br("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),dl=Br("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ul=Br("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),hl=Br("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);async function ml(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/suppliers",{params:e})).data}async function pl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await fr.get("/suppliers/".concat(e,"/catalog"),{params:t})).data}async function xl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/suppliers/orders",{params:e})).data}async function fl(e){return(await fr.get("/suppliers/".concat(e,"/evaluations"))).data}async function gl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await fr.get("/suppliers/export-csv",{params:e,responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");return r.href=s,r.setAttribute("download","fournisseurs-".concat(Date.now(),".csv")),document.body.appendChild(r),r.click(),r.remove(),t.data}const bl=function(){const{toast:e,showToast:t,showSuccess:s,showError:r,hideToast:a}=mn(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)({}),[d,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)(null),[N,w]=(0,n.useState)([]),[k,S]=(0,n.useState)([]),[C,E]=(0,n.useState)([]),[_,T]=(0,n.useState)("info"),[R,M]=(0,n.useState)({name:"",contact:"",email:"",phone:"",address:"",siret:"",tva:"",paymentTerms:"Net 30 jours",averageDeliveryDays:2,notes:""});(0,n.useEffect)(()=>{A(),P()},[]);const A=async()=>{try{u(!0);const e=await ml();l(e.suppliers||[])}catch(e){r("Erreur lors du chargement des fournisseurs"),console.error(e)}finally{u(!1)}},P=async()=>{try{const e=await async function(){return(await fr.get("/suppliers/stats")).data}();c(e.stats||{})}catch(e){console.error("Erreur stats:",e)}},O=async e=>{try{const t=await async function(e){return(await fr.get("/suppliers/".concat(e))).data}(e.id);j(t.supplier||e);const[s,r,a]=await Promise.all([pl(e.id),xl({supplierId:e.id}),fl(e.id)]);w(s.catalog||[]),S(r.orders||[]),E(a.evaluations||[]),g(!0),T("info")}catch(t){r("Erreur lors du chargement des d\xe9tails")}},D=(i||[]).filter(e=>{var t,s,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(s=e.contact)||void 0===s?void 0:s.toLowerCase().includes(h.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(h.toLowerCase()))}),I=e=>{const t={ACTIVE:{bg:"bg-green-100",text:"text-green-700",label:"Actif"},INACTIVE:{bg:"bg-gray-100",text:"text-gray-700",label:"Inactif"},PENDING:{bg:"bg-yellow-100",text:"text-yellow-700",label:"En attente"}},s=t[e]||t.ACTIVE;return(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(s.bg," ").concat(s.text),children:s.label})};return d&&0===i.length?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)(hn,{toast:e,hideToast:a}),(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-orange-900 to-orange-600 bg-clip-text text-transparent",children:"Gestion des Fournisseurs"}),(0,yr.jsxs)("div",{className:"flex gap-2",children:[(0,yr.jsxs)("label",{className:"btn-secondary cursor-pointer",children:[(0,yr.jsx)(cl,{className:"h-5 w-5 mr-2"}),"Importer CSV",(0,yr.jsx)("input",{type:"file",accept:".csv",onChange:async e=>{const t=e.target.files[0];if(t)try{await async function(e){const t=new FormData;return t.append("file",e),(await fr.post("/suppliers/import-csv",t,{headers:{"Content-Type":"multipart/form-data"}})).data}(t),s("Import r\xe9ussi"),A()}catch(a){r("Erreur lors de l'import")}},className:"hidden"})]}),(0,yr.jsxs)("button",{onClick:async()=>{try{await gl(),s("Export t\xe9l\xe9charg\xe9")}catch(e){r("Erreur lors de l'export")}},className:"btn-secondary",children:[(0,yr.jsx)(ra,{className:"h-5 w-5 mr-2"}),"Exporter CSV"]}),(0,yr.jsxs)("button",{onClick:()=>{j(null),M({name:"",contact:"",email:"",phone:"",address:"",siret:"",tva:"",paymentTerms:"Net 30 jours",averageDeliveryDays:2,notes:""}),x(!0)},className:"btn-primary",children:[(0,yr.jsx)(Nn,{className:"h-5 w-5 mr-2"}),"Nouveau Fournisseur"]})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200 rounded-xl p-6",children:[(0,yr.jsx)($r,{className:"h-10 w-10 text-orange-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total Fournisseurs"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:o.total||0})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-6",children:[(0,yr.jsx)(Qr,{className:"h-10 w-10 text-green-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Produits catalogue"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:o.totalCatalogProducts||0})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-xl p-6",children:[(0,yr.jsx)(dl,{className:"h-10 w-10 text-blue-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Commandes"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:o.totalOrders||0})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-xl p-6",children:[(0,yr.jsx)(ul,{className:"h-10 w-10 text-purple-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Note moyenne"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[(o.avgRating||0).toFixed(1)," / 5"]})]})]}),(0,yr.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher un fournisseur...",value:h,onChange:e=>m(e.target.value),className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fournisseur"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"D\xe9lai moyen"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:D.map(e=>(0,yr.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"flex items-center",children:[(0,yr.jsx)($r,{className:"h-8 w-8 text-orange-500 mr-3"}),(0,yr.jsx)("span",{className:"font-semibold text-gray-900",children:e.name})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:e.contact||"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:e.email||"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:e.phone||"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("span",{className:"text-sm text-gray-600",children:[e.averageDeliveryDays||0," jours"]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:I(e.status||"ACTIVE")}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)("button",{onClick:()=>O(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Voir d\xe9tails",children:(0,yr.jsx)(dl,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{onClick:()=>{j(e),M(e),x(!0)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Modifier",children:(0,yr.jsx)(hl,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{onClick:()=>{j(e),y(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:(0,yr.jsx)(kn,{className:"h-5 w-5"})})]})})]},e.id))})]})}),0===D.length&&(0,yr.jsxs)("div",{className:"text-center py-12",children:[(0,yr.jsx)($r,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucun fournisseur trouv\xe9"})]})]}),p&&(0,yr.jsx)(Vn,{isOpen:p,onClose:()=>{x(!1),j(null)},title:v?"Modifier le fournisseur":"Nouveau fournisseur",children:(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{v?(await async function(e,t){return(await fr.put("/suppliers/".concat(e),t)).data}(v.id,R),s("Fournisseur modifi\xe9 avec succ\xe8s")):(await async function(e){return(await fr.post("/suppliers",e)).data}(R),s("Fournisseur cr\xe9\xe9 avec succ\xe8s")),x(!1),M({name:"",contact:"",email:"",phone:"",address:"",siret:"",tva:"",paymentTerms:"Net 30 jours",averageDeliveryDays:2,notes:""}),j(null),A(),P()}catch(n){var t,a;r((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Erreur lors de l'enregistrement")}},className:"space-y-4",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom *"}),(0,yr.jsx)("input",{type:"text",value:R.name,onChange:e=>M(Yt(Yt({},R),{},{name:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact"}),(0,yr.jsx)("input",{type:"text",value:R.contact,onChange:e=>M(Yt(Yt({},R),{},{contact:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,yr.jsx)("input",{type:"email",value:R.email,onChange:e=>M(Yt(Yt({},R),{},{email:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("input",{type:"tel",value:R.phone,onChange:e=>M(Yt(Yt({},R),{},{phone:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse"}),(0,yr.jsx)("textarea",{value:R.address,onChange:e=>M(Yt(Yt({},R),{},{address:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:"2"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SIRET"}),(0,yr.jsx)("input",{type:"text",value:R.siret,onChange:e=>M(Yt(Yt({},R),{},{siret:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\xb0 TVA"}),(0,yr.jsx)("input",{type:"text",value:R.tva,onChange:e=>M(Yt(Yt({},R),{},{tva:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conditions paiement"}),(0,yr.jsxs)("select",{value:R.paymentTerms,onChange:e=>M(Yt(Yt({},R),{},{paymentTerms:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,yr.jsx)("option",{value:"Net 7 jours",children:"Net 7 jours"}),(0,yr.jsx)("option",{value:"Net 15 jours",children:"Net 15 jours"}),(0,yr.jsx)("option",{value:"Net 30 jours",children:"Net 30 jours"}),(0,yr.jsx)("option",{value:"Net 45 jours",children:"Net 45 jours"}),(0,yr.jsx)("option",{value:"Net 60 jours",children:"Net 60 jours"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xe9lai livraison (jours)"}),(0,yr.jsx)("input",{type:"number",value:R.averageDeliveryDays,onChange:e=>M(Yt(Yt({},R),{},{averageDeliveryDays:parseInt(e.target.value)})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,yr.jsx)("textarea",{value:R.notes,onChange:e=>M(Yt(Yt({},R),{},{notes:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:"3"})]}),(0,yr.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,yr.jsx)("button",{type:"button",onClick:()=>{x(!1),j(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,yr.jsxs)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,yr.jsx)(ll,{className:"h-5 w-5 inline mr-2"}),v?"Modifier":"Cr\xe9er"]})]})]})}),f&&v&&(0,yr.jsx)(Vn,{isOpen:f,onClose:()=>g(!1),title:v.name,children:(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("div",{className:"border-b border-gray-200",children:(0,yr.jsxs)("nav",{className:"flex space-x-8",children:[(0,yr.jsx)("button",{onClick:()=>T("info"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("info"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Informations"}),(0,yr.jsxs)("button",{onClick:()=>T("catalog"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("catalog"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Catalogue (",N.length,")"]}),(0,yr.jsxs)("button",{onClick:()=>T("orders"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("orders"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Commandes (",k.length,")"]}),(0,yr.jsxs)("button",{onClick:()=>T("evals"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("evals"===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["\xc9valuations (",C.length,")"]})]})}),"info"===_&&(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Contact"}),(0,yr.jsx)("p",{className:"font-semibold",children:v.contact||"-"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,yr.jsx)("p",{className:"font-semibold",children:v.email||"-"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("p",{className:"font-semibold",children:v.phone||"-"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"SIRET"}),(0,yr.jsx)("p",{className:"font-semibold",children:v.siret||"-"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"N\xb0 TVA"}),(0,yr.jsx)("p",{className:"font-semibold",children:v.tva||"-"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Conditions paiement"}),(0,yr.jsx)("p",{className:"font-semibold",children:v.paymentTerms||"-"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"D\xe9lai livraison"}),(0,yr.jsxs)("p",{className:"font-semibold",children:[v.averageDeliveryDays||0," jours"]})]})]}),v.address&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Adresse"}),(0,yr.jsx)("p",{className:"font-semibold",children:v.address})]}),v.notes&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Notes"}),(0,yr.jsx)("p",{className:"text-gray-700",children:v.notes})]})]}),"catalog"===_&&(0,yr.jsx)("div",{className:"space-y-3",children:0===N.length?(0,yr.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Aucun produit au catalogue"}):N.map(e=>(0,yr.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,yr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold",children:e.productName}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:e.supplierReference||"-"})]}),(0,yr.jsxs)("p",{className:"font-bold text-green-600",children:[(e.price||0).toFixed(2)," \u20ac"]})]})},e.id))}),"orders"===_&&(0,yr.jsx)("div",{className:"space-y-3",children:0===k.length?(0,yr.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Aucune commande"}):k.map(e=>(0,yr.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,yr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("p",{className:"font-semibold",children:["Commande #",e.orderNumber]}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.createdAt).toLocaleDateString("fr-FR")})]}),(0,yr.jsxs)("p",{className:"font-bold",children:[(e.totalAmount||0).toFixed(2)," \u20ac"]})]})},e.id))}),"evals"===_&&(0,yr.jsx)("div",{className:"space-y-3",children:0===C.length?(0,yr.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Aucune \xe9valuation"}):C.map(e=>(0,yr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,yr.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)(ul,{className:"h-5 w-5 text-yellow-500 fill-current"}),(0,yr.jsxs)("span",{className:"font-semibold",children:[e.rating," / 5"]})]}),(0,yr.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString("fr-FR")})]}),e.comment&&(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:e.comment})]},e.id))})]})}),b&&v&&(0,yr.jsx)(Vn,{isOpen:b,onClose:()=>{y(!1),j(null)},title:"Confirmer la suppression",children:(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("p",{children:["\xcates-vous s\xfbr de vouloir supprimer le fournisseur ",(0,yr.jsx)("strong",{children:v.name})," ?"]}),(0,yr.jsx)("p",{className:"text-sm text-red-600",children:"Cette action est irr\xe9versible."}),(0,yr.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,yr.jsx)("button",{onClick:()=>{y(!1),j(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,yr.jsxs)("button",{onClick:async()=>{try{await async function(e){return(await fr.delete("/suppliers/".concat(e))).data}(v.id),s("Fournisseur supprim\xe9"),y(!1),j(null),A(),P()}catch(e){r("Erreur lors de la suppression")}},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[(0,yr.jsx)(kn,{className:"h-5 w-5 inline mr-2"}),"Supprimer"]})]})]})})]})};async function yl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/orders",{params:Yt(Yt({},e),{},{status:"LIVREE"})})).data}async function vl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/admin/stats/sales-evolution",{params:e})).data}const jl=function(){const{toast:e,showToast:t,hideToast:s,showError:r}=mn(),[a,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(""),[m,p]=(0,n.useState)("");(0,n.useEffect)(()=>{x()},[u,m]);const x=async()=>{try{var e;d(!0);const t={limit:2e3};u&&(t.startDate=u),m&&(t.endDate=m);const s=await yl(t),r=null!==(e=null===s||void 0===s?void 0:s.orders)&&void 0!==e?e:[];i(r);const a=r.reduce((e,t)=>{var s;return e+(null!==(s=t.totalTTC)&&void 0!==s?s:0)},0),n=r.reduce((e,t)=>{var s,r,a;return e+(null!==(s=t.totalMargin)&&void 0!==s?s:(null!==(r=t.totalTTC)&&void 0!==r?r:0)-(null!==(a=t.totalHT)&&void 0!==a?a:0))},0);o({totalRevenue:a,totalMargin:n,totalSales:r.length,averageMarginPercent:a?Math.round(n/a*100):0})}catch(t){r("Erreur lors du chargement des ventes")}finally{d(!1)}};return c?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[e.visible&&(0,yr.jsx)(hn,{message:e.message,type:e.type,onClose:s}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:"Ventes ADMIN"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Historique ventes propres Fattah"})]}),l&&(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yr.jsx)("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"CA Total"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[l.totalRevenue.toFixed(2)," \u20ac"]})]}),(0,yr.jsx)(Xr,{className:"h-12 w-12 text-blue-500 opacity-60"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Marge Totale"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[l.totalMargin.toFixed(2)," \u20ac"]})]}),(0,yr.jsx)(sa,{className:"h-12 w-12 text-green-500 opacity-60"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Nb Ventes"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:l.totalSales})]}),(0,yr.jsx)(Qr,{className:"h-12 w-12 text-purple-500 opacity-60"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Marge %"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[l.averageMarginPercent,"%"]})]}),(0,yr.jsx)(sa,{className:"h-12 w-12 text-orange-500 opacity-60"})]})})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date d\xe9but"}),(0,yr.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"w-full"})]}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date fin"}),(0,yr.jsx)("input",{type:"date",value:m,onChange:e=>p(e.target.value),className:"w-full"})]}),(0,yr.jsx)("button",{className:"btn-primary mt-7 px-6 py-3",children:(0,yr.jsx)(ra,{className:"h-5 w-5"})})]})}),(0,yr.jsx)("div",{className:"card overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"N\xb0 Vente"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Magasin"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Client"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Prix achat"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Prix vente"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Marge"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:a.map(e=>{var t,s,r,a,n,i,l,o,c;const d=null!==(t=e.totalTTC)&&void 0!==t?t:0,u=null!==(s=e.totalHT)&&void 0!==s?s:0,h=null!==(r=e.totalMargin)&&void 0!==r?r:d-u,m=d?Math.round(h/d*100):null!==(a=e.totalMarginPercent)&&void 0!==a?a:0;return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.orderNumber||(null===(n=e.id)||void 0===n?void 0:n.slice(0,8))}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.createdAt?"".concat(Ui(new Date(e.createdAt),"dd/MM/yyyy")," ").concat(Ui(new Date(e.createdAt),"HH:mm")):"\u2014"}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:null!==(i=null===(l=e.shop)||void 0===l?void 0:l.name)&&void 0!==i?i:"\u2014"}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:null!==(o=null===(c=e.shop)||void 0===c?void 0:c.name)&&void 0!==o?o:"\u2014"}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:[u.toFixed(2)," \u20ac"]}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900",children:[d.toFixed(2)," \u20ac"]}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-right",children:(0,yr.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full font-bold",children:["+",h.toFixed(2)," \u20ac (",m,"%)"]})}),(0,yr.jsx)("td",{className:"px-4 py-3 text-center",children:(0,yr.jsx)("button",{className:"p-2 bg-primary-50 hover:bg-primary-100 text-primary-600 rounded-lg transition-colors",children:(0,yr.jsx)(zn,{className:"h-4 w-4"})})})]},e.id)})})]})})]})};async function Nl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/reports/products",{params:e})).data}async function wl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/reports/categories",{params:e})).data}async function kl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/reports/clients",{params:e})).data}async function Sl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/reports/trends",{params:e})).data}async function Cl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/reports/performance",{params:e})).data}async function El(){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/reports/sales",{params:e})).data}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}async function _l(){return Cl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}async function Tl(){return kl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}const Rl=function(){const{toast:e,showToast:t,hideToast:s,showError:r}=mn(),[a,i]=(0,n.useState)(!0),[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),[m,p]=(0,n.useState)("week");(0,n.useEffect)(()=>{x()},[m]);const x=async()=>{try{var e,t,s,a,n,l,c,u,p;i(!0);const{startDate:r,endDate:x}=(e=>{const t=new Date,s=new Date;return s.setHours(0,0,0,0),t.setHours(23,59,59,999),"day"===e||("week"===e?s.setDate(s.getDate()-7):"month"===e?s.setMonth(s.getMonth()-1):"year"===e&&s.setFullYear(s.getFullYear()-1)),{startDate:s.toISOString().slice(0,10),endDate:t.toISOString().slice(0,10)}})(m),f={startDate:r,endDate:x},[g,b,y]=await Promise.all([El(f),_l(f),Tl(f)]),v=null!==(e=null===g||void 0===g?void 0:g.stats)&&void 0!==e?e:{},j=null!==(t=null===g||void 0===g?void 0:g.orders)&&void 0!==t?t:[],N={};j.forEach(e=>{var t;const s=new Date(e.createdAt).toISOString().split("T")[0];N[s]||(N[s]={date:s,orders:0,amount:0}),N[s].orders++,N[s].amount+=null!==(t=e.totalTTC)&&void 0!==t?t:0});const w=Object.values(N).sort((e,t)=>e.date.localeCompare(t.date)).slice(-7),k={};j.forEach(e=>{var t,s,r,a;const n=e.shop,i=null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:"unknown";k[i]||(k[i]={id:i,name:null!==(s=null===n||void 0===n?void 0:n.name)&&void 0!==s?s:"Inconnu",orders:0,amount:0,commission:0}),k[i].orders++,k[i].amount+=null!==(r=e.totalTTC)&&void 0!==r?r:0,k[i].commission+=null!==(a=e.totalMargin)&&void 0!==a?a:0});const S=Object.values(k).sort((e,t)=>t.amount-e.amount).slice(0,5),C=null!==(s=v.totalOrders)&&void 0!==s?s:j.length,E=null!==(a=v.totalTTC)&&void 0!==a?a:j.reduce((e,t)=>{var s;return e+(null!==(s=t.totalTTC)&&void 0!==s?s:0)},0),_=null!==(n=null===b||void 0===b?void 0:b.performance)&&void 0!==n?n:{};o({summary:{growthRate:0,totalOrders:C,totalAmount:E,totalCommission:null!==(l=_.totalCommission)&&void 0!==l?l:j.filter(e=>"LIVREE"===e.status).reduce((e,t)=>{var s;return e+(null!==(s=t.totalMargin)&&void 0!==s?s:0)},0),averageOrderValue:C?E/C:0},timeline:w,topStores:S,byStatus:Object.entries(null!==(c=v.ordersByStatus)&&void 0!==c?c:{}).map(e=>{let[t,s]=e;return{status:t,count:s,amount:0}})}),d({commissionPercent:E?Math.round((null!==(u=_.totalCommission)&&void 0!==u?u:0)/E*100):0,topProfitable:[]}),h(null!==(p=null===y||void 0===y?void 0:y.clients)&&void 0!==p?p:[])}catch(x){r("Erreur chargement rapports")}finally{i(!1)}};if(a)return(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})});const f=Math.max(1,...((null===l||void 0===l?void 0:l.timeline)||[]).map(e=>e.orders));return(0,yr.jsxs)("div",{className:"space-y-6",children:[e.visible&&(0,yr.jsx)(hn,{message:e.message,type:e.type,onClose:s}),(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:"Rapports & Statistiques"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Vue d'ensemble des performances"})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-lg",children:[(0,yr.jsx)("option",{value:"day",children:"Aujourd'hui"}),(0,yr.jsx)("option",{value:"week",children:"Cette semaine"}),(0,yr.jsx)("option",{value:"month",children:"Ce mois"}),(0,yr.jsx)("option",{value:"year",children:"Cette ann\xe9e"})]}),(0,yr.jsxs)("button",{className:"btn-primary flex items-center space-x-2 px-4 py-2",children:[(0,yr.jsx)(ra,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Export PDF"})]})]})]}),l&&(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yr.jsx)(Yr,{className:"h-10 w-10 text-blue-500"}),(0,yr.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:["+",l.summary.growthRate,"%"]})]}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total Commandes"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:l.summary.totalOrders})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yr.jsx)(Xr,{className:"h-10 w-10 text-green-500"}),(0,yr.jsx)(sa,{className:"h-6 w-6 text-green-500"})]}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"CA Total"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[l.summary.totalAmount.toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yr.jsx)(Xr,{className:"h-10 w-10 text-orange-500"}),(0,yr.jsxs)("span",{className:"text-xs font-bold text-orange-600",children:[null===c||void 0===c?void 0:c.commissionPercent,"%"]})]}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Commission Totale"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[l.summary.totalCommission.toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,yr.jsx)(Yr,{className:"h-10 w-10 text-purple-500"})}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Panier Moyen"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[l.summary.averageOrderValue.toFixed(2)," \u20ac"]})]})]}),(null===l||void 0===l?void 0:l.timeline)&&(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,yr.jsx)(ta,{className:"h-6 w-6 mr-2 text-primary-600"}),"\xc9volution Commandes (7 derniers jours)"]}),(0,yr.jsx)("div",{className:"space-y-4",children:l.timeline.map((e,t)=>(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,yr.jsx)("span",{className:"text-sm font-medium text-gray-700",children:new Date(e.date).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})}),(0,yr.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,yr.jsxs)("span",{className:"text-gray-600",children:[e.orders," commandes"]}),(0,yr.jsxs)("span",{className:"font-bold text-gray-900",children:[e.amount.toFixed(2)," \u20ac"]})]})]}),(0,yr.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,yr.jsx)("div",{className:"h-full bg-gradient-to-r from-primary-400 to-primary-600 rounded-full transition-all",style:{width:"".concat(e.orders/f*100,"%")}})})]},t))})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(null===l||void 0===l?void 0:l.topStores)&&(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,yr.jsx)(Gr,{className:"h-6 w-6 mr-2 text-primary-600"}),"Top Magasins"]}),(0,yr.jsx)("div",{className:"space-y-3",children:l.topStores.map((e,t)=>(0,yr.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,yr.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ".concat(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-600":"bg-gray-300"),children:t+1}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,yr.jsxs)("p",{className:"text-sm text-gray-600",children:[e.orders," commandes"]})]}),(0,yr.jsxs)("div",{className:"text-right",children:[(0,yr.jsxs)("p",{className:"font-bold text-gray-900",children:[e.amount.toFixed(2)," \u20ac"]}),(0,yr.jsxs)("p",{className:"text-sm text-green-600",children:["+",e.commission.toFixed(2)," \u20ac"]})]})]},e.id))})]}),(null===c||void 0===c?void 0:c.topProfitable)&&(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,yr.jsx)(Qr,{className:"h-6 w-6 mr-2 text-primary-600"}),"Top Produits Rentables"]}),(0,yr.jsx)("div",{className:"space-y-3",children:c.topProfitable.map((e,t)=>(0,yr.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,yr.jsxs)("p",{className:"font-bold text-green-600",children:["+",e.margin.toFixed(2)," \u20ac"]})]}),(0,yr.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,yr.jsx)("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full",style:{width:"".concat(e.marginPercent,"%")}})}),(0,yr.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Marge: ",e.marginPercent,"%"]})]},t))})]})]}),(null===l||void 0===l?void 0:l.byStatus)&&(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"R\xe9partition par Statut"}),(0,yr.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:l.byStatus.map(e=>(0,yr.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl text-center",children:[(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.count}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:e.status}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.amount.toFixed(2)," \u20ac"]})]},e.status))})]})]})},Ml=Br("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),Al=Br("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),Pl=Br("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);function Ol(e){return e+.5|0}const Dl=(e,t,s)=>Math.max(Math.min(e,s),t);function Il(e){return Dl(Ol(2.55*e),0,255)}function Ll(e){return Dl(Ol(255*e),0,255)}function Fl(e){return Dl(Ol(e/2.55)/100,0,1)}function zl(e){return Dl(Ol(100*e),0,100)}const Vl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ul=[..."0123456789ABCDEF"],Hl=e=>Ul[15&e],Bl=e=>Ul[(240&e)>>4]+Ul[15&e],ql=e=>(240&e)>>4===(15&e);function Wl(e){var t=(e=>ql(e.r)&&ql(e.g)&&ql(e.b)&&ql(e.a))(e)?Hl:Bl;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Gl=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Yl(e,t,s){const r=t*Math.min(s,1-s),a=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return s-r*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function Ql(e,t,s){const r=function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return s-s*t*Math.max(Math.min(a,4-a,1),0)};return[r(5),r(3),r(1)]}function $l(e,t,s){const r=Yl(e,1,.5);let a;for(t+s>1&&(a=1/(t+s),t*=a,s*=a),a=0;a<3;a++)r[a]*=1-t-s,r[a]+=t;return r}function Kl(e){const t=e.r/255,s=e.g/255,r=e.b/255,a=Math.max(t,s,r),n=Math.min(t,s,r),i=(a+n)/2;let l,o,c;return a!==n&&(c=a-n,o=i>.5?c/(2-a-n):c/(a+n),l=function(e,t,s,r,a){return e===a?(t-s)/r+(t<s?6:0):t===a?(s-e)/r+2:(e-t)/r+4}(t,s,r,c,a),l=60*l+.5),[0|l,o||0,i]}function Xl(e,t,s,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,r)).map(Ll)}function Jl(e,t,s){return Xl(Yl,e,t,s)}function Zl(e){return(e%360+360)%360}function eo(e){const t=Gl.exec(e);let s,r=255;if(!t)return;t[5]!==s&&(r=t[6]?Il(+t[5]):Ll(+t[5]));const a=Zl(+t[2]),n=+t[3]/100,i=+t[4]/100;return s="hwb"===t[1]?function(e,t,s){return Xl($l,e,t,s)}(a,n,i):"hsv"===t[1]?function(e,t,s){return Xl(Ql,e,t,s)}(a,n,i):Jl(a,n,i),{r:s[0],g:s[1],b:s[2],a:r}}const to={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},so={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let ro;function ao(e){ro||(ro=function(){const e={},t=Object.keys(so),s=Object.keys(to);let r,a,n,i,l;for(r=0;r<t.length;r++){for(i=l=t[r],a=0;a<s.length;a++)n=s[a],l=l.replace(n,to[n]);n=parseInt(so[i],16),e[l]=[n>>16&255,n>>8&255,255&n]}return e}(),ro.transparent=[0,0,0,0]);const t=ro[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const no=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const io=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,lo=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function oo(e,t,s){if(e){let r=Kl(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*s,0===t?360:1)),r=Jl(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function co(e,t){return e?Object.assign(t||{},e):e}function uo(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ll(e[3]))):(t=co(e,{r:0,g:0,b:0,a:1})).a=Ll(t.a),t}function ho(e){return"r"===e.charAt(0)?function(e){const t=no.exec(e);let s,r,a,n=255;if(t){if(t[7]!==s){const e=+t[7];n=t[8]?Il(e):Dl(255*e,0,255)}return s=+t[1],r=+t[3],a=+t[5],s=255&(t[2]?Il(s):Dl(s,0,255)),r=255&(t[4]?Il(r):Dl(r,0,255)),a=255&(t[6]?Il(a):Dl(a,0,255)),{r:s,g:r,b:a,a:n}}}(e):eo(e)}class mo{constructor(e){if(e instanceof mo)return e;const t=typeof e;let s;"object"===t?s=uo(e):"string"===t&&(s=function(e){var t,s=e.length;return"#"===e[0]&&(4===s||5===s?t={r:255&17*Vl[e[1]],g:255&17*Vl[e[2]],b:255&17*Vl[e[3]],a:5===s?17*Vl[e[4]]:255}:7!==s&&9!==s||(t={r:Vl[e[1]]<<4|Vl[e[2]],g:Vl[e[3]]<<4|Vl[e[4]],b:Vl[e[5]]<<4|Vl[e[6]],a:9===s?Vl[e[7]]<<4|Vl[e[8]]:255})),t}(e)||ao(e)||ho(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=co(this._rgb);return e&&(e.a=Fl(e.a)),e}set rgb(e){this._rgb=uo(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Fl(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?Wl(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Kl(e),s=t[0],r=zl(t[1]),a=zl(t[2]);return e.a<255?"hsla(".concat(s,", ").concat(r,"%, ").concat(a,"%, ").concat(Fl(e.a),")"):"hsl(".concat(s,", ").concat(r,"%, ").concat(a,"%)")}(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,r=e.rgb;let a;const n=t===a?.5:t,i=2*n-1,l=s.a-r.a,o=((i*l===-1?i:(i+l)/(1+i*l))+1)/2;a=1-o,s.r=255&o*s.r+a*r.r+.5,s.g=255&o*s.g+a*r.g+.5,s.b=255&o*s.b+a*r.b+.5,s.a=n*s.a+(1-n)*r.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,s){const r=lo(Fl(e.r)),a=lo(Fl(e.g)),n=lo(Fl(e.b));return{r:Ll(io(r+s*(lo(Fl(t.r))-r))),g:Ll(io(a+s*(lo(Fl(t.g))-a))),b:Ll(io(n+s*(lo(Fl(t.b))-n))),a:e.a+s*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new mo(this.rgb)}alpha(e){return this._rgb.a=Ll(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Ol(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return oo(this._rgb,2,e),this}darken(e){return oo(this._rgb,2,-e),this}saturate(e){return oo(this._rgb,1,e),this}desaturate(e){return oo(this._rgb,1,-e),this}rotate(e){return function(e,t){var s=Kl(e);s[0]=Zl(s[0]+t),s=Jl(s),e.r=s[0],e.g=s[1],e.b=s[2]}(this._rgb,e),this}}function po(){}const xo=(()=>{let e=0;return()=>e++})();function fo(e){return null===e||void 0===e}function go(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function bo(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function yo(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function vo(e,t){return yo(e)?e:t}function jo(e,t){return"undefined"===typeof e?t:e}const No=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function wo(e,t,s){if(e&&"function"===typeof e.call)return e.apply(s,t)}function ko(e,t,s,r){let a,n,i;if(go(e))if(n=e.length,r)for(a=n-1;a>=0;a--)t.call(s,e[a],a);else for(a=0;a<n;a++)t.call(s,e[a],a);else if(bo(e))for(i=Object.keys(e),n=i.length,a=0;a<n;a++)t.call(s,e[i[a]],i[a])}function So(e,t){let s,r,a,n;if(!e||!t||e.length!==t.length)return!1;for(s=0,r=e.length;s<r;++s)if(a=e[s],n=t[s],a.datasetIndex!==n.datasetIndex||a.index!==n.index)return!1;return!0}function Co(e){if(go(e))return e.map(Co);if(bo(e)){const t=Object.create(null),s=Object.keys(e),r=s.length;let a=0;for(;a<r;++a)t[s[a]]=Co(e[s[a]]);return t}return e}function Eo(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function _o(e,t,s,r){if(!Eo(e))return;const a=t[e],n=s[e];bo(a)&&bo(n)?To(a,n,r):t[e]=Co(n)}function To(e,t,s){const r=go(t)?t:[t],a=r.length;if(!bo(e))return e;const n=(s=s||{}).merger||_o;let i;for(let l=0;l<a;++l){if(i=r[l],!bo(i))continue;const t=Object.keys(i);for(let r=0,a=t.length;r<a;++r)n(t[r],e,i,s)}return e}function Ro(e,t){return To(e,t,{merger:Mo})}function Mo(e,t,s){if(!Eo(e))return;const r=t[e],a=s[e];bo(r)&&bo(a)?Ro(r,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Co(a))}const Ao={"":e=>e,x:e=>e.x,y:e=>e.y};function Po(e,t){const s=Ao[t]||(Ao[t]=function(e){const t=function(e){const t=e.split("."),s=[];let r="";for(const a of t)r+=a,r.endsWith("\\")?r=r.slice(0,-1)+".":(s.push(r),r="");return s}(e);return e=>{for(const s of t){if(""===s)break;e=e&&e[s]}return e}}(t));return s(e)}function Oo(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Do=e=>"undefined"!==typeof e,Io=e=>"function"===typeof e,Lo=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};const Fo=Math.PI,zo=2*Fo,Vo=zo+Fo,Uo=Number.POSITIVE_INFINITY,Ho=Fo/180,Bo=Fo/2,qo=Fo/4,Wo=2*Fo/3,Go=Math.log10,Yo=Math.sign;function Qo(e,t,s){return Math.abs(e-t)<s}function $o(e){const t=Math.round(e);e=Qo(e,t,e/1e3)?t:e;const s=Math.pow(10,Math.floor(Go(e))),r=e/s;return(r<=1?1:r<=2?2:r<=5?5:10)*s}function Ko(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Xo(e,t,s){let r,a,n;for(r=0,a=e.length;r<a;r++)n=e[r][s],isNaN(n)||(t.min=Math.min(t.min,n),t.max=Math.max(t.max,n))}function Jo(e){return e*(Fo/180)}function Zo(e){return e*(180/Fo)}function ec(e){if(!yo(e))return;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s++;return s}function tc(e,t){const s=t.x-e.x,r=t.y-e.y,a=Math.sqrt(s*s+r*r);let n=Math.atan2(r,s);return n<-.5*Fo&&(n+=zo),{angle:n,distance:a}}function sc(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function rc(e,t){return(e-t+Vo)%zo-Fo}function ac(e){return(e%zo+zo)%zo}function nc(e,t,s,r){const a=ac(e),n=ac(t),i=ac(s),l=ac(n-a),o=ac(i-a),c=ac(a-n),d=ac(a-i);return a===n||a===i||r&&n===i||l>o&&c<d}function ic(e,t,s){return Math.max(t,Math.min(s,e))}function lc(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,s)-r&&e<=Math.max(t,s)+r}function oc(e,t,s){s=s||(s=>e[s]<t);let r,a=e.length-1,n=0;for(;a-n>1;)r=n+a>>1,s(r)?n=r:a=r;return{lo:n,hi:a}}const cc=(e,t,s,r)=>oc(e,s,r?r=>{const a=e[r][t];return a<s||a===s&&e[r+1][t]===s}:r=>e[r][t]<s),dc=(e,t,s)=>oc(e,s,r=>e[r][t]>=s);const uc=["push","pop","shift","splice","unshift"];function hc(e,t){const s=e._chartjs;if(!s)return;const r=s.listeners,a=r.indexOf(t);-1!==a&&r.splice(a,1),r.length>0||(uc.forEach(t=>{delete e[t]}),delete e._chartjs)}function mc(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const pc="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function xc(e,t){let s=[],r=!1;return function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];s=n,r||(r=!0,pc.call(window,()=>{r=!1,e.apply(t,s)}))}}const fc=e=>"start"===e?"left":"end"===e?"right":"center",gc=(e,t,s)=>"start"===e?t:"end"===e?s:(t+s)/2;function bc(e,t,s){const r=t.length;let a=0,n=r;if(e._sorted){const{iScale:i,vScale:l,_parsed:o}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=i.axis,{min:u,max:h,minDefined:m,maxDefined:p}=i.getUserBounds();if(m){if(a=Math.min(cc(o,d,u).lo,s?r:cc(t,d,i.getPixelForValue(u)).lo),c){const e=o.slice(0,a+1).reverse().findIndex(e=>!fo(e[l.axis]));a-=Math.max(0,e)}a=ic(a,0,r-1)}if(p){let e=Math.max(cc(o,i.axis,h,!0).hi+1,s?0:cc(t,d,i.getPixelForValue(h),!0).hi+1);if(c){const t=o.slice(e-1).findIndex(e=>!fo(e[l.axis]));e+=Math.max(0,t)}n=ic(e,a,r)-a}else n=r-a}return{start:a,count:n}}function yc(e){const{xScale:t,yScale:s,_scaleRanges:r}=e,a={xmin:t.min,xmax:t.max,ymin:s.min,ymax:s.max};if(!r)return e._scaleRanges=a,!0;const n=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==s.min||r.ymax!==s.max;return Object.assign(r,a),n}const vc=e=>0===e||1===e,jc=(e,t,s)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*zo/s),Nc=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*zo/s)+1,wc={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Bo),easeOutSine:e=>Math.sin(e*Bo),easeInOutSine:e=>-.5*(Math.cos(Fo*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>vc(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>vc(e)?e:jc(e,.075,.3),easeOutElastic:e=>vc(e)?e:Nc(e,.075,.3),easeInOutElastic(e){const t=.1125;return vc(e)?e:e<.5?.5*jc(2*e,t,.45):.5+.5*Nc(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-wc.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,s=2.75;return e<1/s?t*e*e:e<2/s?t*(e-=1.5/s)*e+.75:e<2.5/s?t*(e-=2.25/s)*e+.9375:t*(e-=2.625/s)*e+.984375},easeInOutBounce:e=>e<.5?.5*wc.easeInBounce(2*e):.5*wc.easeOutBounce(2*e-1)+.5};function kc(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Sc(e){return kc(e)?e:new mo(e)}function Cc(e){return kc(e)?e:new mo(e).saturate(.5).darken(.1).hexString()}const Ec=["x","y","borderWidth","radius","tension"],_c=["color","borderColor","backgroundColor"];const Tc=new Map;function Rc(e,t,s){return function(e,t){t=t||{};const s=e+JSON.stringify(t);let r=Tc.get(s);return r||(r=new Intl.NumberFormat(e,t),Tc.set(s,r)),r}(t,s).format(e)}const Mc={values:e=>go(e)?e:""+e,numeric(e,t,s){if(0===e)return"0";const r=this.chart.options.locale;let a,n=e;if(s.length>1){const t=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(t<1e-4||t>1e15)&&(a="scientific"),n=function(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e));return s}(e,s)}const i=Go(Math.abs(n)),l=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),o={notation:a,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(o,this.options.ticks.format),Rc(e,r,o)},logarithmic(e,t,s){if(0===e)return"0";const r=s[t].significand||e/Math.pow(10,Math.floor(Go(e)));return[1,2,3,5,10,15].includes(r)||t>.8*s.length?Mc.numeric.call(this,e,t,s):""}};var Ac={formatters:Mc};const Pc=Object.create(null),Oc=Object.create(null);function Dc(e,t){if(!t)return e;const s=t.split(".");for(let r=0,a=s.length;r<a;++r){const t=s[r];e=e[t]||(e[t]=Object.create(null))}return e}function Ic(e,t,s){return"string"===typeof t?To(Dc(e,t),s):To(Dc(e,""),t)}class Lc{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Cc(t.backgroundColor),this.hoverBorderColor=(e,t)=>Cc(t.borderColor),this.hoverColor=(e,t)=>Cc(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Ic(this,e,t)}get(e){return Dc(this,e)}describe(e,t){return Ic(Oc,e,t)}override(e,t){return Ic(Pc,e,t)}route(e,t,s,r){const a=Dc(this,e),n=Dc(this,s),i="_"+t;Object.defineProperties(a,{[i]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=n[r];return bo(e)?Object.assign({},t,e):jo(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach(e=>e(this))}}var Fc=new Lc({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:_c},numbers:{type:"number",properties:Ec}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ac.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function zc(e,t,s,r,a){let n=t[a];return n||(n=t[a]=e.measureText(a).width,s.push(a)),n>r&&(r=n),r}function Vc(e,t,s,r){let a=(r=r||{}).data=r.data||{},n=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(a=r.data={},n=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let i=0;const l=s.length;let o,c,d,u,h;for(o=0;o<l;o++)if(u=s[o],void 0===u||null===u||go(u)){if(go(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||go(h)||(i=zc(e,a,n,i,h))}else i=zc(e,a,n,i,u);e.restore();const m=n.length/2;if(m>s.length){for(o=0;o<m;o++)delete a[n[o]];n.splice(0,m)}return i}function Uc(e,t,s){const r=e.currentDevicePixelRatio,a=0!==s?Math.max(s/2,.5):0;return Math.round((t-a)*r)/r+a}function Hc(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Bc(e,t,s,r){qc(e,t,s,r,null)}function qc(e,t,s,r,a){let n,i,l,o,c,d,u,h;const m=t.pointStyle,p=t.rotation,x=t.radius;let f=(p||0)*Ho;if(m&&"object"===typeof m&&(n=m.toString(),"[object HTMLImageElement]"===n||"[object HTMLCanvasElement]"===n))return e.save(),e.translate(s,r),e.rotate(f),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(x)||x<=0)){switch(e.beginPath(),m){default:a?e.ellipse(s,r,a/2,x,0,0,zo):e.arc(s,r,x,0,zo),e.closePath();break;case"triangle":d=a?a/2:x,e.moveTo(s+Math.sin(f)*d,r-Math.cos(f)*x),f+=Wo,e.lineTo(s+Math.sin(f)*d,r-Math.cos(f)*x),f+=Wo,e.lineTo(s+Math.sin(f)*d,r-Math.cos(f)*x),e.closePath();break;case"rectRounded":c=.516*x,o=x-c,i=Math.cos(f+qo)*o,u=Math.cos(f+qo)*(a?a/2-c:o),l=Math.sin(f+qo)*o,h=Math.sin(f+qo)*(a?a/2-c:o),e.arc(s-u,r-l,c,f-Fo,f-Bo),e.arc(s+h,r-i,c,f-Bo,f),e.arc(s+u,r+l,c,f,f+Bo),e.arc(s-h,r+i,c,f+Bo,f+Fo),e.closePath();break;case"rect":if(!p){o=Math.SQRT1_2*x,d=a?a/2:o,e.rect(s-d,r-o,2*d,2*o);break}f+=qo;case"rectRot":u=Math.cos(f)*(a?a/2:x),i=Math.cos(f)*x,l=Math.sin(f)*x,h=Math.sin(f)*(a?a/2:x),e.moveTo(s-u,r-l),e.lineTo(s+h,r-i),e.lineTo(s+u,r+l),e.lineTo(s-h,r+i),e.closePath();break;case"crossRot":f+=qo;case"cross":u=Math.cos(f)*(a?a/2:x),i=Math.cos(f)*x,l=Math.sin(f)*x,h=Math.sin(f)*(a?a/2:x),e.moveTo(s-u,r-l),e.lineTo(s+u,r+l),e.moveTo(s+h,r-i),e.lineTo(s-h,r+i);break;case"star":u=Math.cos(f)*(a?a/2:x),i=Math.cos(f)*x,l=Math.sin(f)*x,h=Math.sin(f)*(a?a/2:x),e.moveTo(s-u,r-l),e.lineTo(s+u,r+l),e.moveTo(s+h,r-i),e.lineTo(s-h,r+i),f+=qo,u=Math.cos(f)*(a?a/2:x),i=Math.cos(f)*x,l=Math.sin(f)*x,h=Math.sin(f)*(a?a/2:x),e.moveTo(s-u,r-l),e.lineTo(s+u,r+l),e.moveTo(s+h,r-i),e.lineTo(s-h,r+i);break;case"line":i=a?a/2:Math.cos(f)*x,l=Math.sin(f)*x,e.moveTo(s-i,r-l),e.lineTo(s+i,r+l);break;case"dash":e.moveTo(s,r),e.lineTo(s+Math.cos(f)*(a?a/2:x),r+Math.sin(f)*x);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Wc(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function Gc(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Yc(e){e.restore()}function Qc(e,t,s,r,a){if(!t)return e.lineTo(s.x,s.y);if("middle"===a){const r=(t.x+s.x)/2;e.lineTo(r,t.y),e.lineTo(r,s.y)}else"after"===a!==!!r?e.lineTo(t.x,s.y):e.lineTo(s.x,t.y);e.lineTo(s.x,s.y)}function $c(e,t,s,r){if(!t)return e.lineTo(s.x,s.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?s.cp2x:s.cp1x,r?s.cp2y:s.cp1y,s.x,s.y)}function Kc(e,t,s,r,a){if(a.strikethrough||a.underline){const n=e.measureText(r),i=t-n.actualBoundingBoxLeft,l=t+n.actualBoundingBoxRight,o=s-n.actualBoundingBoxAscent,c=s+n.actualBoundingBoxDescent,d=a.strikethrough?(o+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(i,d),e.lineTo(l,d),e.stroke()}}function Xc(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function Jc(e,t,s,r,a){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=go(t)?t:[t],l=n.strokeWidth>0&&""!==n.strokeColor;let o,c;for(e.save(),e.font=a.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),fo(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,n),o=0;o<i.length;++o)c=i[o],n.backdrop&&Xc(e,n.backdrop),l&&(n.strokeColor&&(e.strokeStyle=n.strokeColor),fo(n.strokeWidth)||(e.lineWidth=n.strokeWidth),e.strokeText(c,s,r,n.maxWidth)),e.fillText(c,s,r,n.maxWidth),Kc(e,s,r,c,n),r+=Number(a.lineHeight);e.restore()}function Zc(e,t){const{x:s,y:r,w:a,h:n,radius:i}=t;e.arc(s+i.topLeft,r+i.topLeft,i.topLeft,1.5*Fo,Fo,!0),e.lineTo(s,r+n-i.bottomLeft),e.arc(s+i.bottomLeft,r+n-i.bottomLeft,i.bottomLeft,Fo,Bo,!0),e.lineTo(s+a-i.bottomRight,r+n),e.arc(s+a-i.bottomRight,r+n-i.bottomRight,i.bottomRight,Bo,0,!0),e.lineTo(s+a,r+i.topRight),e.arc(s+a-i.topRight,r+i.topRight,i.topRight,0,-Bo,!0),e.lineTo(s+i.topLeft,r)}const ed=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,td=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function sd(e,t){const s=(""+e).match(ed);if(!s||"normal"===s[1])return 1.2*t;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100}return t*e}const rd=e=>+e||0;function ad(e,t){const s={},r=bo(t),a=r?Object.keys(t):t,n=bo(e)?r?s=>jo(e[s],e[t[s]]):t=>e[t]:()=>e;for(const i of a)s[i]=rd(n(i));return s}function nd(e){return ad(e,{top:"y",right:"x",bottom:"y",left:"x"})}function id(e){return ad(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ld(e){const t=nd(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function od(e,t){e=e||{},t=t||Fc.font;let s=jo(e.size,t.size);"string"===typeof s&&(s=parseInt(s,10));let r=jo(e.style,t.style);r&&!(""+r).match(td)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const a={family:jo(e.family,t.family),lineHeight:sd(jo(e.lineHeight,t.lineHeight),s),size:s,style:r,weight:jo(e.weight,t.weight),string:""};return a.string=function(e){return!e||fo(e.size)||fo(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function cd(e,t,s,r){let a,n,i,l=!0;for(a=0,n=e.length;a<n;++a)if(i=e[a],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),l=!1),void 0!==s&&go(i)&&(i=i[s%i.length],l=!1),void 0!==i))return r&&!l&&(r.cacheable=!1),i}function dd(e,t){return Object.assign(Object.create(e),t)}function ud(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],s=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const a=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof s&&(s=Nd("_fallback",e));const n={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:s,_getTarget:r,override:r=>ud([r,...e],t,a,s)};return new Proxy(n,{deleteProperty:(t,s)=>(delete t[s],delete t._keys,delete e[0][s],!0),get:(s,r)=>fd(s,r,()=>function(e,t,s,r){let a;for(const n of t)if(a=Nd(pd(n,e),s),"undefined"!==typeof a)return xd(e,a)?vd(s,r,e,a):a}(r,t,e,s)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>wd(e).includes(t),ownKeys:e=>wd(e),set(e,t,s){const a=e._storage||(e._storage=r());return e[t]=a[t]=s,delete e._keys,!0}})}function hd(e,t,s,r){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:md(e,r),setContext:t=>hd(e,t,s,r),override:a=>hd(e.override(a),t,s,r)};return new Proxy(a,{deleteProperty:(t,s)=>(delete t[s],delete e[s],!0),get:(e,t,s)=>fd(e,t,()=>function(e,t,s){const{_proxy:r,_context:a,_subProxy:n,_descriptors:i}=e;let l=r[t];Io(l)&&i.isScriptable(t)&&(l=function(e,t,s,r){const{_proxy:a,_context:n,_subProxy:i,_stack:l}=s;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let o=t(n,i||r);l.delete(e),xd(e,o)&&(o=vd(a._scopes,a,e,o));return o}(t,l,e,s));go(l)&&l.length&&(l=function(e,t,s,r){const{_proxy:a,_context:n,_subProxy:i,_descriptors:l}=s;if("undefined"!==typeof n.index&&r(e))return t[n.index%t.length];if(bo(t[0])){const s=t,r=a._scopes.filter(e=>e!==s);t=[];for(const o of s){const s=vd(r,a,e,o);t.push(hd(s,n,i&&i[e],l))}}return t}(t,l,e,i.isIndexable));xd(t,l)&&(l=hd(l,a,n&&n[t],i));return l}(e,t,s)),getOwnPropertyDescriptor:(t,s)=>t._descriptors.allKeys?Reflect.has(e,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,s),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,s)=>Reflect.has(e,s),ownKeys:()=>Reflect.ownKeys(e),set:(t,s,r)=>(e[s]=r,delete t[s],!0)})}function md(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:s=t.scriptable,_indexable:r=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:s,indexable:r,isScriptable:Io(s)?s:()=>s,isIndexable:Io(r)?r:()=>r}}const pd=(e,t)=>e?e+Oo(t):t,xd=(e,t)=>bo(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function fd(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=s();return e[t]=r,r}function gd(e,t,s){return Io(e)?e(t,s):e}const bd=(e,t)=>!0===e?t:"string"===typeof e?Po(t,e):void 0;function yd(e,t,s,r,a){for(const n of t){const t=bd(s,n);if(t){e.add(t);const n=gd(t._fallback,s,a);if("undefined"!==typeof n&&n!==s&&n!==r)return n}else if(!1===t&&"undefined"!==typeof r&&s!==r)return null}return!1}function vd(e,t,s,r){const a=t._rootScopes,n=gd(t._fallback,s,r),i=[...e,...a],l=new Set;l.add(r);let o=jd(l,i,s,n||s,r);return null!==o&&(("undefined"===typeof n||n===s||(o=jd(l,i,n,o,r),null!==o))&&ud(Array.from(l),[""],a,n,()=>function(e,t,s){const r=e._getTarget();t in r||(r[t]={});const a=r[t];if(go(a)&&bo(s))return s;return a||{}}(t,s,r)))}function jd(e,t,s,r,a){for(;s;)s=yd(e,t,s,r,a);return s}function Nd(e,t){for(const s of t){if(!s)continue;const t=s[e];if("undefined"!==typeof t)return t}}function wd(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const s of e)for(const e of Object.keys(s).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function kd(e,t,s,r){const{iScale:a}=e,{key:n="r"}=this._parsing,i=new Array(r);let l,o,c,d;for(l=0,o=r;l<o;++l)c=l+s,d=t[c],i[l]={r:a.parse(Po(d,n),c)};return i}const Sd=Number.EPSILON||1e-14,Cd=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ed=e=>"x"===e?"y":"x";function _d(e,t,s,r){const a=e.skip?t:e,n=t,i=s.skip?t:s,l=sc(n,a),o=sc(i,n);let c=l/(l+o),d=o/(l+o);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=r*c,h=r*d;return{previous:{x:n.x-u*(i.x-a.x),y:n.y-u*(i.y-a.y)},next:{x:n.x+h*(i.x-a.x),y:n.y+h*(i.y-a.y)}}}function Td(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const s=Ed(t),r=e.length,a=Array(r).fill(0),n=Array(r);let i,l,o,c=Cd(e,0);for(i=0;i<r;++i)if(l=o,o=c,c=Cd(e,i+1),o){if(c){const e=c[t]-o[t];a[i]=0!==e?(c[s]-o[s])/e:0}n[i]=l?c?Yo(a[i-1])!==Yo(a[i])?0:(a[i-1]+a[i])/2:a[i-1]:a[i]}!function(e,t,s){const r=e.length;let a,n,i,l,o,c=Cd(e,0);for(let d=0;d<r-1;++d)o=c,c=Cd(e,d+1),o&&c&&(Qo(t[d],0,Sd)?s[d]=s[d+1]=0:(a=s[d]/t[d],n=s[d+1]/t[d],l=Math.pow(a,2)+Math.pow(n,2),l<=9||(i=3/Math.sqrt(l),s[d]=a*i*t[d],s[d+1]=n*i*t[d])))}(e,a,n),function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=Ed(s),a=e.length;let n,i,l,o=Cd(e,0);for(let c=0;c<a;++c){if(i=l,l=o,o=Cd(e,c+1),!l)continue;const a=l[s],d=l[r];i&&(n=(a-i[s])/3,l["cp1".concat(s)]=a-n,l["cp1".concat(r)]=d-n*t[c]),o&&(n=(o[s]-a)/3,l["cp2".concat(s)]=a+n,l["cp2".concat(r)]=d+n*t[c])}}(e,n,t)}function Rd(e,t,s){return Math.max(Math.min(e,s),t)}function Md(e,t,s,r,a){let n,i,l,o;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)Td(e,a);else{let s=r?e[e.length-1]:e[0];for(n=0,i=e.length;n<i;++n)l=e[n],o=_d(s,l,e[Math.min(n+1,i-(r?0:1))%i],t.tension),l.cp1x=o.previous.x,l.cp1y=o.previous.y,l.cp2x=o.next.x,l.cp2y=o.next.y,s=l}t.capBezierPoints&&function(e,t){let s,r,a,n,i,l=Wc(e[0],t);for(s=0,r=e.length;s<r;++s)i=n,n=l,l=s<r-1&&Wc(e[s+1],t),n&&(a=e[s],i&&(a.cp1x=Rd(a.cp1x,t.left,t.right),a.cp1y=Rd(a.cp1y,t.top,t.bottom)),l&&(a.cp2x=Rd(a.cp2x,t.left,t.right),a.cp2y=Rd(a.cp2y,t.top,t.bottom)))}(e,s)}function Ad(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Pd(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Od(e,t,s){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[s])):r=e,r}const Dd=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Id=["top","right","bottom","left"];function Ld(e,t,s){const r={};s=s?"-"+s:"";for(let a=0;a<4;a++){const n=Id[a];r[n]=parseFloat(e[t+"-"+n+s])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Fd(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:r}=t,a=Dd(s),n="border-box"===a.boxSizing,i=Ld(a,"padding"),l=Ld(a,"border","width"),{x:o,y:c,box:d}=function(e,t){const s=e.touches,r=s&&s.length?s[0]:e,{offsetX:a,offsetY:n}=r;let i,l,o=!1;if(((e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot))(a,n,e.target))i=a,l=n;else{const e=t.getBoundingClientRect();i=r.clientX-e.left,l=r.clientY-e.top,o=!0}return{x:i,y:l,box:o}}(e,s),u=i.left+(d&&l.left),h=i.top+(d&&l.top);let{width:m,height:p}=t;return n&&(m-=i.width+l.width,p-=i.height+l.height),{x:Math.round((o-u)/m*s.width/r),y:Math.round((c-h)/p*s.height/r)}}const zd=e=>Math.round(10*e)/10;function Vd(e,t,s,r){const a=Dd(e),n=Ld(a,"margin"),i=Od(a.maxWidth,e,"clientWidth")||Uo,l=Od(a.maxHeight,e,"clientHeight")||Uo,o=function(e,t,s){let r,a;if(void 0===t||void 0===s){const n=e&&Pd(e);if(n){const e=n.getBoundingClientRect(),i=Dd(n),l=Ld(i,"border","width"),o=Ld(i,"padding");t=e.width-o.width-l.width,s=e.height-o.height-l.height,r=Od(i.maxWidth,n,"clientWidth"),a=Od(i.maxHeight,n,"clientHeight")}else t=e.clientWidth,s=e.clientHeight}return{width:t,height:s,maxWidth:r||Uo,maxHeight:a||Uo}}(e,t,s);let{width:c,height:d}=o;if("content-box"===a.boxSizing){const e=Ld(a,"border","width"),t=Ld(a,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-n.width),d=Math.max(0,r?c/r:d-n.height),c=zd(Math.min(c,i,o.maxWidth)),d=zd(Math.min(d,l,o.maxHeight)),c&&!d&&(d=zd(c/2));return(void 0!==t||void 0!==s)&&r&&o.height&&d>o.height&&(d=o.height,c=zd(Math.floor(d*r))),{width:c,height:d}}function Ud(e,t,s){const r=t||1,a=zd(e.height*r),n=zd(e.width*r);e.height=zd(e.height),e.width=zd(e.width);const i=e.canvas;return i.style&&(s||!i.style.height&&!i.style.width)&&(i.style.height="".concat(e.height,"px"),i.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||i.height!==a||i.width!==n)&&(e.currentDevicePixelRatio=r,i.height=a,i.width=n,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Hd=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Ad()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Af){}return e}();function Bd(e,t){const s=function(e,t){return Dd(e).getPropertyValue(t)}(e,t),r=s&&s.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function qd(e,t,s,r){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}}function Wd(e,t,s,r){return{x:e.x+s*(t.x-e.x),y:"middle"===r?s<.5?e.y:t.y:"after"===r?s<1?e.y:t.y:s>0?t.y:e.y}}function Gd(e,t,s,r){const a={x:e.cp2x,y:e.cp2y},n={x:t.cp1x,y:t.cp1y},i=qd(e,a,s),l=qd(a,n,s),o=qd(n,t,s),c=qd(i,l,s),d=qd(l,o,s);return qd(c,d,s)}function Yd(e,t,s){return e?function(e,t){return{x:s=>e+e+t-s,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,s):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Qd(e,t){let s,r;"ltr"!==t&&"rtl"!==t||(s=e.canvas.style,r=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=r)}function $d(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Kd(e){return"angle"===e?{between:nc,compare:rc,normalize:ac}:{between:lc,compare:(e,t)=>e-t,normalize:e=>e}}function Xd(e){let{start:t,end:s,count:r,loop:a,style:n}=e;return{start:t%r,end:s%r,loop:a&&(s-t+1)%r===0,style:n}}function Jd(e,t,s){if(!s)return[e];const{property:r,start:a,end:n}=s,i=t.length,{compare:l,between:o,normalize:c}=Kd(r),{start:d,end:u,loop:h,style:m}=function(e,t,s){const{property:r,start:a,end:n}=s,{between:i,normalize:l}=Kd(r),o=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=o,h+=o,c=0,d=o;c<d&&i(l(t[u%o][r]),a,n);++c)u--,h--;u%=o,h%=o}return h<u&&(h+=o),{start:u,end:h,loop:m,style:e.style}}(e,t,s),p=[];let x,f,g,b=!1,y=null;const v=()=>b||o(a,g,x)&&0!==l(a,g),j=()=>!b||0===l(n,x)||o(n,g,x);for(let N=d,w=d;N<=u;++N)f=t[N%i],f.skip||(x=c(f[r]),x!==g&&(b=o(x,a,n),null===y&&v()&&(y=0===l(x,a)?N:w),null!==y&&j()&&(p.push(Xd({start:y,end:N,loop:h,count:i,style:m})),y=null),w=N,g=x));return null!==y&&p.push(Xd({start:y,end:u,loop:h,count:i,style:m})),p}function Zd(e,t){const s=[],r=e.segments;for(let a=0;a<r.length;a++){const n=Jd(r[a],e.points,t);n.length&&s.push(...n)}return s}function eu(e,t,s,r){return r&&r.setContext&&s?function(e,t,s,r){const a=e._chart.getContext(),n=tu(e.options),{_datasetIndex:i,options:{spanGaps:l}}=e,o=s.length,c=[];let d=n,u=t[0].start,h=u;function m(e,t,r,a){const n=l?-1:1;if(e!==t){for(e+=o;s[e%o].skip;)e-=n;for(;s[t%o].skip;)t+=n;e%o!==t%o&&(c.push({start:e%o,end:t%o,loop:r,style:a}),d=a,u=t%o)}}for(const p of t){u=l?u:p.start;let e,t=s[u%o];for(h=u+1;h<=p.end;h++){const n=s[h%o];e=tu(r.setContext(dd(a,{type:"segment",p0:t,p1:n,p0DataIndex:(h-1)%o,p1DataIndex:h%o,datasetIndex:i}))),su(e,d)&&m(u,h-1,p.loop,d),t=n,d=e}u<h-1&&m(u,h-1,p.loop,d)}return c}(e,t,s,r):t}function tu(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function su(e,t){if(!t)return!1;const s=[],r=function(e,t){return kc(t)?(s.includes(t)||s.push(t),s.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function ru(e,t,s){return e.options.clip?e[s]:t[s]}function au(e,t){const s=t._clip;if(s.disabled)return!1;const r=function(e,t){const{xScale:s,yScale:r}=e;return s&&r?{left:ru(s,t,"left"),right:ru(s,t,"right"),top:ru(r,t,"top"),bottom:ru(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===s.left?0:r.left-(!0===s.left?0:s.left),right:!1===s.right?e.width:r.right+(!0===s.right?0:s.right),top:!1===s.top?0:r.top-(!0===s.top?0:s.top),bottom:!1===s.bottom?e.height:r.bottom+(!0===s.bottom?0:s.bottom)}}class nu{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,r){const a=t.listeners[r],n=t.duration;a.forEach(r=>r({chart:e,initial:t.initial,numSteps:n,currentStep:Math.min(s-t.start,n)}))}_refresh(){this._request||(this._running=!0,this._request=pc.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const a=s.items;let n,i=a.length-1,l=!1;for(;i>=0;--i)n=a[i],n._active?(n._total>s.duration&&(s.duration=n._total),n.tick(e),l=!0):(a[i]=a[a.length-1],a.pop());l&&(r.draw(),this._notify(r,s,e,"progress")),a.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),t+=a.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var iu=new nu;const lu="transparent",ou={boolean:(e,t,s)=>s>.5?t:e,color(e,t,s){const r=Sc(e||lu),a=r.valid&&Sc(t||lu);return a&&a.valid?a.mix(r,s).hexString():t},number:(e,t,s)=>e+(t-e)*s};class cu{constructor(e,t,s,r){const a=t[s];r=cd([e.to,r,a,e.from]);const n=cd([e.from,a,r]);this._active=!0,this._fn=e.fn||ou[e.type||typeof n],this._easing=wc[e.easing]||wc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=n,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const r=this._target[this._prop],a=s-this._start,n=this._duration-a;this._start=s,this._duration=Math.floor(Math.max(n,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=cd([e.to,t,r,e.from]),this._from=cd([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,r=this._prop,a=this._from,n=this._loop,i=this._to;let l;if(this._active=a!==i&&(n||t<s),!this._active)return this._target[r]=i,void this._notify(!0);t<0?this._target[r]=a:(l=t/s%2,l=n&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(a,i,l))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][t]()}}class du{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!bo(e))return;const t=Object.keys(Fc.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const a=e[r];if(!bo(a))return;const n={};for(const e of t)n[e]=a[e];(go(a.properties)&&a.properties||[r]).forEach(e=>{e!==r&&s.has(e)||s.set(e,n)})})}_animateOptions(e,t){const s=t.options,r=function(e,t){if(!t)return;let s=e.options;if(!s)return void(e.options=t);s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}}));return s}(e,s);if(!r)return[];const a=this._createAnimations(r,s);return s.$shared&&function(e,t){const s=[],r=Object.keys(t);for(let a=0;a<r.length;a++){const t=e[r[a]];t&&t.active()&&s.push(t.wait())}return Promise.all(s)}(e.options.$animations,s).then(()=>{e.options=s},()=>{}),a}_createAnimations(e,t){const s=this._properties,r=[],a=e.$animations||(e.$animations={}),n=Object.keys(t),i=Date.now();let l;for(l=n.length-1;l>=0;--l){const o=n[l];if("$"===o.charAt(0))continue;if("options"===o){r.push(...this._animateOptions(e,t));continue}const c=t[o];let d=a[o];const u=s.get(o);if(d){if(u&&d.active()){d.update(u,c,i);continue}d.cancel()}u&&u.duration?(a[o]=d=new cu(u,e,o,c),r.push(d)):e[o]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const s=this._createAnimations(e,t);return s.length?(iu.add(this._chart,s),!0):void 0}}function uu(e,t){const s=e&&e.options||{},r=s.reverse,a=void 0===s.min?t:0,n=void 0===s.max?t:0;return{start:r?n:a,end:r?a:n}}function hu(e,t){const s=[],r=e._getSortedDatasetMetas(t);let a,n;for(a=0,n=r.length;a<n;++a)s.push(r[a].index);return s}function mu(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=e.keys,n="single"===r.mode;let i,l,o,c;if(null===t)return;let d=!1;for(i=0,l=a.length;i<l;++i){if(o=+a[i],o===s){if(d=!0,r.all)continue;break}c=e.values[o],yo(c)&&(n||0===t||Yo(t)===Yo(c))&&(t+=c)}return d||r.all?t:0}function pu(e,t){const s=e&&e.options.stacked;return s||void 0===s&&void 0!==t.stack}function xu(e,t,s){const r=e[t]||(e[t]={});return r[s]||(r[s]={})}function fu(e,t,s,r){for(const a of t.getMatchingVisibleMetas(r).reverse()){const t=e[a.index];if(s&&t>0||!s&&t<0)return a.index}return null}function gu(e,t){const{chart:s,_cachedMeta:r}=e,a=s._stacks||(s._stacks={}),{iScale:n,vScale:i,index:l}=r,o=n.axis,c=i.axis,d=function(e,t,s){return"".concat(e.id,".").concat(t.id,".").concat(s.stack||s.type)}(n,i,r),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[o]:s,[c]:n}=e;h=(e._stacks||(e._stacks={}))[c]=xu(a,d,s),h[l]=n,h._top=fu(h,i,!0,r.type),h._bottom=fu(h,i,!1,r.type);(h._visualValues||(h._visualValues={}))[l]=n}}function bu(e,t){const s=e.scales;return Object.keys(s).filter(e=>s[e].axis===t).shift()}function yu(e,t){const s=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][s])return;delete t[r][s],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[s]&&delete t[r]._visualValues[s]}}}const vu=e=>"reset"===e||"none"===e,ju=(e,t)=>t?e:Object.assign({},e);class Nu{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=pu(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&yu(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),r=(e,t,s,r)=>"x"===e?t:"r"===e?r:s,a=t.xAxisID=jo(s.xAxisID,bu(e,"x")),n=t.yAxisID=jo(s.yAxisID,bu(e,"y")),i=t.rAxisID=jo(s.rAxisID,bu(e,"r")),l=t.indexAxis,o=t.iAxisID=r(l,a,n,i),c=t.vAxisID=r(l,n,a,i);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(n),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(o),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&hc(this._data,this),e._stacked&&yu(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(bo(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:s,vScale:r}=t,a="x"===s.axis?"x":"y",n="x"===r.axis?"x":"y",i=Object.keys(e),l=new Array(i.length);let o,c,d;for(o=0,c=i.length;o<c;++o)d=i[o],l[o]={[a]:d,[n]:e[d]};return l}(t,e)}else if(s!==t){if(s){hc(s,this);const e=this._cachedMeta;yu(e),e._parsed=[]}t&&Object.isExtensible(t)&&(a=this,(r=t)._chartjs?r._chartjs.listeners.push(a):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[a]}}),uc.forEach(e=>{const t="_onData"+Oo(e),s=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];const i=s.apply(this,a);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...a)}),i}})}))),this._syncList=[],this._data=t}var r,a}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const a=t._stacked;t._stacked=pu(t.vScale,t),t.stack!==s.stack&&(r=!0,yu(t),t.stack=s.stack),this._resyncElements(e),(r||a!==t._stacked)&&(gu(this,t._parsed),t._stacked=pu(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:r}=this,{iScale:a,_stacked:n}=s,i=a.axis;let l,o,c,d=0===e&&t===r.length||s._sorted,u=e>0&&s._parsed[e-1];if(!1===this._parsing)s._parsed=r,s._sorted=!0,c=r;else{c=go(r[e])?this.parseArrayData(s,r,e,t):bo(r[e])?this.parseObjectData(s,r,e,t):this.parsePrimitiveData(s,r,e,t);const a=()=>null===o[i]||u&&o[i]<u[i];for(l=0;l<t;++l)s._parsed[l+e]=o=c[l],d&&(a()&&(d=!1),u=o);s._sorted=d}n&&gu(this,c)}parsePrimitiveData(e,t,s,r){const{iScale:a,vScale:n}=e,i=a.axis,l=n.axis,o=a.getLabels(),c=a===n,d=new Array(r);let u,h,m;for(u=0,h=r;u<h;++u)m=u+s,d[u]={[i]:c||a.parse(o[m],m),[l]:n.parse(t[m],m)};return d}parseArrayData(e,t,s,r){const{xScale:a,yScale:n}=e,i=new Array(r);let l,o,c,d;for(l=0,o=r;l<o;++l)c=l+s,d=t[c],i[l]={x:a.parse(d[0],c),y:n.parse(d[1],c)};return i}parseObjectData(e,t,s,r){const{xScale:a,yScale:n}=e,{xAxisKey:i="x",yAxisKey:l="y"}=this._parsing,o=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+s,h=t[u],o[c]={x:a.parse(Po(h,i),u),y:n.parse(Po(h,l),u)};return o}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const r=this.chart,a=this._cachedMeta,n=t[e.axis];return mu({keys:hu(r,!0),values:t._stacks[e.axis]._visualValues},n,a.index,{mode:s})}updateRangeFromParsed(e,t,s,r){const a=s[t.axis];let n=null===a?NaN:a;const i=r&&s._stacks[t.axis];r&&i&&(r.values=i,n=mu(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,n),e.max=Math.max(e.max,n)}getMinMax(e,t){const s=this._cachedMeta,r=s._parsed,a=s._sorted&&e===s.iScale,n=r.length,i=this._getOtherScale(e),l=((e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:hu(s,!0),values:null})(t,s,this.chart),o={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:s,minDefined:r,maxDefined:a}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:a?s:Number.POSITIVE_INFINITY}}(i);let u,h;function m(){h=r[u];const t=h[i.axis];return!yo(h[e.axis])||c>t||d<t}for(u=0;u<n&&(m()||(this.updateRangeFromParsed(o,e,h,l),!a));++u);if(a)for(u=n-1;u>=0;--u)if(!m()){this.updateRangeFromParsed(o,e,h,l);break}return o}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let r,a,n;for(r=0,a=t.length;r<a;++r)n=t[r][e.axis],yo(n)&&s.push(n);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,r=t.vScale,a=this.getParsed(e);return{label:s?""+s.getLabelForValue(a[s.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,s,r,a;return bo(e)?(t=e.top,s=e.right,r=e.bottom,a=e.left):t=s=r=a=e,{top:t,right:s,bottom:r,left:a,disabled:!1===e}}(jo(this.options.clip,function(e,t,s){if(!1===s)return!1;const r=uu(e,s),a=uu(t,s);return{top:a.end,right:r.end,bottom:a.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,r=s.data||[],a=t.chartArea,n=[],i=this._drawStart||0,l=this._drawCount||r.length-i,o=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(e,a,i,l),c=i;c<i+l;++c){const t=r[c];t.hidden||(t.active&&o?n.push(t):t.draw(e,a))}for(c=0;c<n.length;++c)n[c].draw(e,a)}getStyle(e,t){const s=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const r=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];a=t.$context||(t.$context=function(e,t,s){return dd(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),a.parsed=this.getParsed(e),a.raw=r.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function(e,t){return dd(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=s,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",s=arguments.length>2?arguments[2]:void 0;const r="active"===t,a=this._cachedDataOpts,n=e+"-"+t,i=a[n],l=this.enableOptionSharing&&Do(s);if(i)return ju(i,l);const o=this.chart.config,c=o.datasetElementScopeKeys(this._type,e),d=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=o.getOptionScopes(this.getDataset(),c),h=Object.keys(Fc.elements[e]),m=o.resolveNamedOptions(u,h,()=>this.getContext(s,r,t),d);return m.$shared&&(m.$shared=l,a[n]=Object.freeze(ju(m,l))),m}_resolveAnimations(e,t,s){const r=this.chart,a=this._cachedDataOpts,n="animation-".concat(t),i=a[n];if(i)return i;let l;if(!1!==r.options.animation){const r=this.chart.config,a=r.datasetAnimationScopeKeys(this._type,t),n=r.getOptionScopes(this.getDataset(),a);l=r.createResolver(n,this.getContext(e,s,t))}const o=new du(r,l&&l.animations);return l&&l._cacheable&&(a[n]=Object.freeze(o)),o}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||vu(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),r=this._sharedOptions,a=this.getSharedOptions(s),n=this.includeOptions(t,a)||a!==r;return this.updateSharedOptions(a,t,s),{sharedOptions:a,includeOptions:n}}updateElement(e,t,s,r){vu(r)?Object.assign(e,s):this._resolveAnimations(t,r).update(e,s)}updateSharedOptions(e,t,s){e&&!vu(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,r){e.active=r;const a=this.getStyle(t,r);this._resolveAnimations(t,s,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[i,l,o]of this._syncList)this[i](l,o);this._syncList=[];const r=s.length,a=t.length,n=Math.min(a,r);n&&this.parse(0,n),a>r?this._insertElements(r,a-r,e):a<r&&this._removeElements(a,r-a)}_insertElements(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,a=r.data,n=e+t;let i;const l=e=>{for(e.length+=t,i=e.length-1;i>=n;i--)e[i]=e[i-t]};for(l(a),i=e;i<n;++i)a[i]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,t),s&&this.updateElements(a,e,t,"reset")}updateElements(e,t,s,r){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,t);s._stacked&&yu(s,r)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,r]=e;this[t](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function wu(e){const t=e.iScale,s=function(e,t){if(!e._cache.$bar){const s=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,a=s.length;t<a;t++)r=r.concat(s[t].controller.getAllParsedValues(e));e._cache.$bar=mc(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,a,n,i,l=t._length;const o=()=>{32767!==n&&-32768!==n&&(Do(i)&&(l=Math.min(l,Math.abs(n-i)||l)),i=n)};for(r=0,a=s.length;r<a;++r)n=t.getPixelForValue(s[r]),o();for(i=void 0,r=0,a=t.ticks.length;r<a;++r)n=t.getPixelForTick(r),o();return l}function ku(e,t,s,r){return go(e)?function(e,t,s,r){const a=s.parse(e[0],r),n=s.parse(e[1],r),i=Math.min(a,n),l=Math.max(a,n);let o=i,c=l;Math.abs(i)>Math.abs(l)&&(o=l,c=i),t[s.axis]=c,t._custom={barStart:o,barEnd:c,start:a,end:n,min:i,max:l}}(e,t,s,r):t[s.axis]=s.parse(e,r),t}function Su(e,t,s,r){const a=e.iScale,n=e.vScale,i=a.getLabels(),l=a===n,o=[];let c,d,u,h;for(c=s,d=s+r;c<d;++c)h=t[c],u={},u[a.axis]=l||a.parse(i[c],c),o.push(ku(h,u,n,c));return o}function Cu(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Eu(e,t,s,r){let a=t.borderSkipped;const n={};if(!a)return void(e.borderSkipped=n);if(!0===a)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:l,reverse:o,top:c,bottom:d}=function(e){let t,s,r,a,n;return e.horizontal?(t=e.base>e.x,s="left",r="right"):(t=e.base<e.y,s="bottom",r="top"),t?(a="end",n="start"):(a="start",n="end"),{start:s,end:r,reverse:t,top:a,bottom:n}}(e);"middle"===a&&s&&(e.enableBorderRadius=!0,(s._top||0)===r?a=c:(s._bottom||0)===r?a=d:(n[_u(d,i,l,o)]=!0,a=c)),n[_u(a,i,l,o)]=!0,e.borderSkipped=n}function _u(e,t,s,r){var a,n,i;return r?(i=s,e=Tu(e=(a=e)===(n=t)?i:a===i?n:a,s,t)):e=Tu(e,t,s),e}function Tu(e,t,s){return"start"===e?t:"end"===e?s:e}function Ru(e,t,s){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===s?.33:0:r}Wt(Nu,"defaults",{}),Wt(Nu,"datasetElementType",null),Wt(Nu,"dataElementType",null);class Mu extends Nu{parsePrimitiveData(e,t,s,r){return Su(e,t,s,r)}parseArrayData(e,t,s,r){return Su(e,t,s,r)}parseObjectData(e,t,s,r){const{iScale:a,vScale:n}=e,{xAxisKey:i="x",yAxisKey:l="y"}=this._parsing,o="x"===a.axis?i:l,c="x"===n.axis?i:l,d=[];let u,h,m,p;for(u=s,h=s+r;u<h;++u)p=t[u],m={},m[a.axis]=a.parse(Po(p,o),u),d.push(ku(Po(p,c),m,n,u));return d}updateRangeFromParsed(e,t,s,r){super.updateRangeFromParsed(e,t,s,r);const a=s._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:r}=t,a=this.getParsed(e),n=a._custom,i=Cu(n)?"["+n.start+", "+n.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+s.getLabelForValue(a[s.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,r){const a="reset"===r,{index:n,_cachedMeta:{vScale:i}}=this,l=i.getBasePixel(),o=i.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+s;h++){const t=this.getParsed(h),s=a||fo(t[i.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[i.axis],x={horizontal:o,base:s.base,enableBorderRadius:!p||Cu(t._custom)||n===p._top||n===p._bottom,x:o?s.head:m.center,y:o?m.center:s.head,height:o?m.size:Math.abs(s.size),width:o?Math.abs(s.size):m.size};u&&(x.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const f=x.options||e[h].options;Eu(x,f,p,n),Ru(x,f,c.ratio),this.updateElement(e[h],h,x,r)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),a=s.options.stacked,n=[],i=this._cachedMeta.controller.getParsed(t),l=i&&i[s.axis],o=e=>{const t=e._parsed.find(e=>e[s.axis]===l),r=t&&t[e.vScale.axis];if(fo(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!o(c))&&((!1===a||-1===n.indexOf(c.stack)||void 0===a&&void 0===c.stack)&&n.push(c.stack),c.index===e))break;return n.length||n.push(void 0),n}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[jo("x"===this.chart.options.indexAxis?s.xAxisID:s.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,s){const r=this._getStacks(e,s),a=void 0!==t?r.indexOf(t):-1;return-1===a?r.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,r=[];let a,n;for(a=0,n=t.data.length;a<n;++a)r.push(s.getPixelForValue(this.getParsed(a)[s.axis],a));const i=e.barThickness;return{min:i||wu(t),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:r},options:{base:a,minBarLength:n}}=this,i=a||0,l=this.getParsed(e),o=l._custom,c=Cu(o);let d,u,h=l[t.axis],m=0,p=s?this.applyStack(t,l,s):h;p!==h&&(m=p-h,p=h),c&&(h=o.barStart,p=o.barEnd-o.barStart,0!==h&&Yo(h)!==Yo(o.barEnd)&&(m=0),m+=h);const x=fo(a)||c?m:a;let f=t.getPixelForValue(x);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(m+p):f,u=d-f,Math.abs(u)<n){u=function(e,t,s){return 0!==e?Yo(e):(t.isHorizontal()?1:-1)*(t.min>=s?1:-1)}(u,t,i)*n,h===i&&(f-=u/2);const e=t.getPixelForDecimal(0),a=t.getPixelForDecimal(1),o=Math.min(e,a),m=Math.max(e,a);f=Math.max(Math.min(f,m),o),d=f+u,s&&!c&&(l._stacks[t.axis]._visualValues[r]=t.getValueForPixel(d)-t.getValueForPixel(f))}if(f===t.getPixelForValue(i)){const e=Yo(u)*t.getLineWidthForValue(i)/2;f+=e,u-=e}return{size:u,base:f,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const s=t.scale,r=this.options,a=r.skipNull,n=jo(r.maxBarThickness,1/0);let i,l;const o=this._getAxisCount();if(t.grouped){const s=a?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,s,r){const a=t.pixels,n=a[e];let i=e>0?a[e-1]:null,l=e<a.length-1?a[e+1]:null;const o=s.categoryPercentage;null===i&&(i=n-(null===l?t.end-t.start:l-n)),null===l&&(l=n+n-i);const c=n-(n-Math.min(i,l))/2*o;return{chunk:Math.abs(l-i)/2*o/r,ratio:s.barPercentage,start:c}}(e,t,r,s*o):function(e,t,s,r){const a=s.barThickness;let n,i;return fo(a)?(n=t.min*s.categoryPercentage,i=s.barPercentage):(n=a*r,i=1),{chunk:n/r,ratio:i,start:t.pixels[e]-n/2}}(e,t,r,s*o),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(jo(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+u;i=c.start+c.chunk*h+c.chunk/2,l=Math.min(n,c.chunk*c.ratio)}else i=s.getPixelForValue(this.getParsed(e)[s.axis],e),l=Math.min(n,t.min*t.ratio);return{base:i-l/2,head:i+l/2,center:i,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,r=s.length;let a=0;for(;a<r;++a)null===this.getParsed(a)[t.axis]||s[a].hidden||s[a].draw(this._ctx)}}Wt(Mu,"id","bar"),Wt(Mu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Wt(Mu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Au extends Nu{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,s,r){const a=super.parsePrimitiveData(e,t,s,r);for(let n=0;n<a.length;n++)a[n]._custom=this.resolveDataElementOptions(n+s).radius;return a}parseArrayData(e,t,s,r){const a=super.parseArrayData(e,t,s,r);for(let n=0;n<a.length;n++){const e=t[s+n];a[n]._custom=jo(e[2],this.resolveDataElementOptions(n+s).radius)}return a}parseObjectData(e,t,s,r){const a=super.parseObjectData(e,t,s,r);for(let n=0;n<a.length;n++){const e=t[s+n];a[n]._custom=jo(e&&e.r&&+e.r,this.resolveDataElementOptions(n+s).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let s=e.length-1;s>=0;--s)t=Math.max(t,e[s].size(this.resolveDataElementOptions(s))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:a}=t,n=this.getParsed(e),i=r.getLabelForValue(n.x),l=a.getLabelForValue(n.y),o=n._custom;return{label:s[e]||"",value:"("+i+", "+l+(o?", "+o:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,s,r){const a="reset"===r,{iScale:n,vScale:i}=this._cachedMeta,{sharedOptions:l,includeOptions:o}=this._getSharedOptions(t,r),c=n.axis,d=i.axis;for(let u=t;u<t+s;u++){const t=e[u],s=!a&&this.getParsed(u),h={},m=h[c]=a?n.getPixelForDecimal(.5):n.getPixelForValue(s[c]),p=h[d]=a?i.getBasePixel():i.getPixelForValue(s[d]);h.skip=isNaN(m)||isNaN(p),o&&(h.options=l||this.resolveDataElementOptions(u,t.active?"active":r),a&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const s=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const a=r.radius;return"active"!==t&&(r.radius=0),r.radius+=jo(s&&s._custom,a),r}}Wt(Au,"id","bubble"),Wt(Au,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Wt(Au,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Pu extends Nu{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=s;else{let a,n,i=e=>+s[e];if(bo(s[e])){const{key:e="value"}=this._parsing;i=t=>+Po(s[t],e)}for(a=e,n=e+t;a<n;++a)r._parsed[a]=i(a)}}_getRotation(){return Jo(this.options.rotation-90)}_getCircumference(){return Jo(this.options.circumference)}_getRotationExtents(){let e=zo,t=-zo;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,a=r._getRotation(),n=r._getCircumference();e=Math.min(e,a),t=Math.max(t,a+n)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,r=this._cachedMeta,a=r.data,n=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,i=Math.max((Math.min(s.width,s.height)-n)/2,0),l=Math.min((o=this.options.cutout,c=i,"string"===typeof o&&o.endsWith("%")?parseFloat(o)/100:+o/c),1);var o,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:p,offsetX:x,offsetY:f}=function(e,t,s){let r=1,a=1,n=0,i=0;if(t<zo){const l=e,o=l+t,c=Math.cos(l),d=Math.sin(l),u=Math.cos(o),h=Math.sin(o),m=(e,t,r)=>nc(e,l,o,!0)?1:Math.max(t,t*s,r,r*s),p=(e,t,r)=>nc(e,l,o,!0)?-1:Math.min(t,t*s,r,r*s),x=m(0,c,u),f=m(Bo,d,h),g=p(Fo,c,u),b=p(Fo+Bo,d,h);r=(x-g)/2,a=(f-b)/2,n=-(x+g)/2,i=-(f+b)/2}return{ratioX:r,ratioY:a,offsetX:n,offsetY:i}}(h,u,l),g=(s.width-n)/m,b=(s.height-n)/p,y=Math.max(Math.min(g,b)/2,0),v=No(this.options.radius,y),j=(v-Math.max(v*l,0))/this._getVisibleDatasetWeightTotal();this.offsetX=x*v,this.offsetY=f*v,r.total=this.calculateTotal(),this.outerRadius=v-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*d,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const s=this.options,r=this._cachedMeta,a=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*a/zo)}updateElements(e,t,s,r){const a="reset"===r,n=this.chart,i=n.chartArea,l=n.options.animation,o=(i.left+i.right)/2,c=(i.top+i.bottom)/2,d=a&&l.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(t,r);let x,f=this._getRotation();for(x=0;x<t;++x)f+=this._circumference(x,a);for(x=t;x<t+s;++x){const t=this._circumference(x,a),s=e[x],n={x:o+this.offsetX,y:c+this.offsetY,startAngle:f,endAngle:f+t,circumference:t,outerRadius:h,innerRadius:u};p&&(n.options=m||this.resolveDataElementOptions(x,s.active?"active":r)),f+=t,this.updateElement(s,x,n,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s,r=0;for(s=0;s<t.length;s++){const a=e._parsed[s];null===a||isNaN(a)||!this.chart.getDataVisibility(s)||t[s].hidden||(r+=Math.abs(a))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?zo*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,r=s.data.labels||[],a=Rc(t._parsed[e],s.options.locale);return{label:r[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const s=this.chart;let r,a,n,i,l;if(!e)for(r=0,a=s.data.datasets.length;r<a;++r)if(s.isDatasetVisible(r)){n=s.getDatasetMeta(r),e=n.data,i=n.controller;break}if(!e)return 0;for(r=0,a=e.length;r<a;++r)l=i.resolveDataElementOptions(r),"inner"!==l.borderAlign&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,r=e.length;s<r;++s){const e=this.resolveDataElementOptions(s);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(jo(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Wt(Pu,"id","doughnut"),Wt(Pu,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Wt(Pu,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Wt(Pu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:s,textAlign:r,color:a,useBorderRadius:n,borderRadius:i}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((t,l)=>{const o=e.getDatasetMeta(0).controller.getStyle(l);return{text:t,fillStyle:o.backgroundColor,fontColor:a,hidden:!e.getDataVisibility(l),lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:o.borderWidth,strokeStyle:o.borderColor,textAlign:r,pointStyle:s,borderRadius:n&&(i||o.borderRadius),index:l}}):[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}});class Ou extends Nu{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:r=[],_dataset:a}=t,n=this.chart._animationsDisabled;let{start:i,count:l}=bc(t,r,n);this._drawStart=i,this._drawCount=l,yc(t)&&(i=0,l=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!a._decimated,s.points=r;const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0),o.segment=this.options.segment,this.updateElement(s,void 0,{animated:!n,options:o},e),this.updateElements(r,i,l,e)}updateElements(e,t,s,r){const a="reset"===r,{iScale:n,vScale:i,_stacked:l,_dataset:o}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),u=n.axis,h=i.axis,{spanGaps:m,segment:p}=this.options,x=Ko(m)?m:Number.POSITIVE_INFINITY,f=this.chart._animationsDisabled||a||"none"===r,g=t+s,b=e.length;let y=t>0&&this.getParsed(t-1);for(let v=0;v<b;++v){const s=e[v],m=f?s:{};if(v<t||v>=g){m.skip=!0;continue}const b=this.getParsed(v),j=fo(b[h]),N=m[u]=n.getPixelForValue(b[u],v),w=m[h]=a||j?i.getBasePixel():i.getPixelForValue(l?this.applyStack(i,b,l):b[h],v);m.skip=isNaN(N)||isNaN(w)||j,m.stop=v>0&&Math.abs(b[u]-y[u])>x,p&&(m.parsed=b,m.raw=o.data[v]),d&&(m.options=c||this.resolveDataElementOptions(v,s.active?"active":r)),f||this.updateElement(s,v,m,r),y=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return s;const a=r[0].size(this.resolveDataElementOptions(0)),n=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,a,n)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Wt(Ou,"id","line"),Wt(Ou,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Wt(Ou,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Du extends Nu{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,r=s.data.labels||[],a=Rc(t._parsed[e].r,s.options.locale);return{label:r[e]||"",value:a}}parseObjectData(e,t,s,r){return kd.bind(this)(e,t,s,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,s=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(r/2,0),n=(a-Math.max(s.cutoutPercentage?a/100*s.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-n*this.index,this.innerRadius=this.outerRadius-n}updateElements(e,t,s,r){const a="reset"===r,n=this.chart,i=n.options.animation,l=this._cachedMeta.rScale,o=l.xCenter,c=l.yCenter,d=l.getIndexAngle(0)-.5*Fo;let u,h=d;const m=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,m);for(u=t;u<t+s;u++){const t=e[u];let s=h,p=h+this._computeAngle(u,r,m),x=n.getDataVisibility(u)?l.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=p,a&&(i.animateScale&&(x=0),i.animateRotate&&(s=p=d));const f={x:o,y:c,innerRadius:0,outerRadius:x,startAngle:s,endAngle:p,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,f,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,s){return this.chart.getDataVisibility(e)?Jo(this.resolveDataElementOptions(e,t).angle||s):0}}Wt(Du,"id","polarArea"),Wt(Du,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Wt(Du,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return t.labels.map((t,a)=>{const n=e.getDatasetMeta(0).controller.getStyle(a);return{text:t,fillStyle:n.backgroundColor,strokeStyle:n.borderColor,fontColor:r,lineWidth:n.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Iu extends Pu{}Wt(Iu,"id","pie"),Wt(Iu,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Lu extends Nu{getLabelAndValue(e){const t=this._cachedMeta.vScale,s=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(s[t.axis])}}parseObjectData(e,t,s,r){return kd.bind(this)(e,t,s,r)}update(e){const t=this._cachedMeta,s=t.dataset,r=t.data||[],a=t.iScale.getLabels();if(s.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const n={_loop:!0,_fullLoop:a.length===r.length,options:t};this.updateElement(s,void 0,n,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,s,r){const a=this._cachedMeta.rScale,n="reset"===r;for(let i=t;i<t+s;i++){const t=e[i],s=this.resolveDataElementOptions(i,t.active?"active":r),l=a.getPointPositionForValue(i,this.getParsed(i).r),o=n?a.xCenter:l.x,c=n?a.yCenter:l.y,d={x:o,y:c,angle:l.angle,skip:isNaN(o)||isNaN(c),options:s};this.updateElement(t,i,d,r)}}}Wt(Lu,"id","radar"),Wt(Lu,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Wt(Lu,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Fu extends Nu{getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:a}=t,n=this.getParsed(e),i=r.getLabelForValue(n.x),l=a.getLabelForValue(n.y);return{label:s[e]||"",value:"("+i+", "+l+")"}}update(e){const t=this._cachedMeta,{data:s=[]}=t,r=this.chart._animationsDisabled;let{start:a,count:n}=bc(t,s,r);if(this._drawStart=a,this._drawCount=n,yc(t)&&(a=0,n=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:n}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!n._decimated,a.points=s;const i=this.resolveDatasetElementOptions(e);i.segment=this.options.segment,this.updateElement(a,void 0,{animated:!r,options:i},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(s,a,n,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,s,r){const a="reset"===r,{iScale:n,vScale:i,_stacked:l,_dataset:o}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=n.axis,m=i.axis,{spanGaps:p,segment:x}=this.options,f=Ko(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||a||"none"===r;let b=t>0&&this.getParsed(t-1);for(let y=t;y<t+s;++y){const t=e[y],s=this.getParsed(y),c=g?t:{},p=fo(s[m]),v=c[h]=n.getPixelForValue(s[h],y),j=c[m]=a||p?i.getBasePixel():i.getPixelForValue(l?this.applyStack(i,s,l):s[m],y);c.skip=isNaN(v)||isNaN(j)||p,c.stop=y>0&&Math.abs(s[h]-b[h])>f,x&&(c.parsed=s,c.raw=o.data[y]),u&&(c.options=d||this.resolveDataElementOptions(y,t.active?"active":r)),g||this.updateElement(t,y,c,r),b=s}this.updateSharedOptions(d,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}const s=e.dataset,r=s.options&&s.options.borderWidth||0;if(!t.length)return r;const a=t[0].size(this.resolveDataElementOptions(0)),n=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,a,n)/2}}Wt(Fu,"id","scatter"),Wt(Fu,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Wt(Fu,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function zu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Vu{static override(e){Object.assign(Vu.prototype,e)}constructor(e){Wt(this,"options",void 0),this.options=e||{}}init(){}formats(){return zu()}parse(){return zu()}format(){return zu()}add(){return zu()}diff(){return zu()}startOf(){return zu()}endOf(){return zu()}}var Uu=Vu;function Hu(e,t,s,r){const{controller:a,data:n,_sorted:i}=e,l=a._cachedMeta.iScale,o=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&"r"!==t&&i&&n.length){const i=l._reversePixels?dc:cc;if(!r){const r=i(n,t,s);if(o){const{vScale:t}=a._cachedMeta,{_parsed:s}=e,n=s.slice(0,r.lo+1).reverse().findIndex(e=>!fo(e[t.axis]));r.lo-=Math.max(0,n);const i=s.slice(r.hi).findIndex(e=>!fo(e[t.axis]));r.hi+=Math.max(0,i)}return r}if(a._sharedOptions){const e=n[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=i(n,t,s-r),a=i(n,t,s+r);return{lo:e.lo,hi:a.hi}}}}return{lo:0,hi:n.length-1}}function Bu(e,t,s,r,a){const n=e.getSortedVisibleDatasetMetas(),i=s[t];for(let l=0,o=n.length;l<o;++l){const{index:e,data:s}=n[l],{lo:o,hi:c}=Hu(n[l],t,i,a);for(let t=o;t<=c;++t){const a=s[t];a.skip||r(a,e,t)}}}function qu(e,t,s,r,a){const n=[];if(!a&&!e.isPointInArea(t))return n;return Bu(e,s,t,function(s,i,l){(a||Wc(s,e.chartArea,0))&&s.inRange(t.x,t.y,r)&&n.push({element:s,datasetIndex:i,index:l})},!0),n}function Wu(e,t,s,r,a,n){let i=[];const l=function(e){const t=-1!==e.indexOf("x"),s=-1!==e.indexOf("y");return function(e,r){const a=t?Math.abs(e.x-r.x):0,n=s?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(n,2))}}(s);let o=Number.POSITIVE_INFINITY;return Bu(e,s,t,function(s,c,d){const u=s.inRange(t.x,t.y,a);if(r&&!u)return;const h=s.getCenterPoint(a);if(!(!!n||e.isPointInArea(h))&&!u)return;const m=l(t,h);m<o?(i=[{element:s,datasetIndex:c,index:d}],o=m):m===o&&i.push({element:s,datasetIndex:c,index:d})}),i}function Gu(e,t,s,r,a,n){return n||e.isPointInArea(t)?"r"!==s||r?Wu(e,t,s,r,a,n):function(e,t,s,r){let a=[];return Bu(e,s,t,function(e,s,n){const{startAngle:i,endAngle:l}=e.getProps(["startAngle","endAngle"],r),{angle:o}=tc(e,{x:t.x,y:t.y});nc(o,i,l)&&a.push({element:e,datasetIndex:s,index:n})}),a}(e,t,s,a):[]}function Yu(e,t,s,r,a){const n=[],i="x"===s?"inXRange":"inYRange";let l=!1;return Bu(e,s,t,(e,r,o)=>{e[i]&&e[i](t[s],a)&&(n.push({element:e,datasetIndex:r,index:o}),l=l||e.inRange(t.x,t.y,a))}),r&&!l?[]:n}var Qu={evaluateInteractionItems:Bu,modes:{index(e,t,s,r){const a=Fd(t,e),n=s.axis||"x",i=s.includeInvisible||!1,l=s.intersect?qu(e,a,n,r,i):Gu(e,a,n,!1,r,i),o=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=l[0].index,s=e.data[t];s&&!s.skip&&o.push({element:s,datasetIndex:e.index,index:t})}),o):[]},dataset(e,t,s,r){const a=Fd(t,e),n=s.axis||"xy",i=s.includeInvisible||!1;let l=s.intersect?qu(e,a,n,r,i):Gu(e,a,n,!1,r,i);if(l.length>0){const t=l[0].datasetIndex,s=e.getDatasetMeta(t).data;l=[];for(let e=0;e<s.length;++e)l.push({element:s[e],datasetIndex:t,index:e})}return l},point:(e,t,s,r)=>qu(e,Fd(t,e),s.axis||"xy",r,s.includeInvisible||!1),nearest(e,t,s,r){const a=Fd(t,e),n=s.axis||"xy",i=s.includeInvisible||!1;return Gu(e,a,n,s.intersect,r,i)},x:(e,t,s,r)=>Yu(e,Fd(t,e),"x",s.intersect,r),y:(e,t,s,r)=>Yu(e,Fd(t,e),"y",s.intersect,r)}};const $u=["left","top","right","bottom"];function Ku(e,t){return e.filter(e=>e.pos===t)}function Xu(e,t){return e.filter(e=>-1===$u.indexOf(e.pos)&&e.box.axis===t)}function Ju(e,t){return e.sort((e,s)=>{const r=t?s:e,a=t?e:s;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function Zu(e,t){const s=function(e){const t={};for(const s of e){const{stack:e,pos:r,stackWeight:a}=s;if(!e||!$u.includes(r))continue;const n=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});n.count++,n.weight+=a}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:a}=t;let n,i,l;for(n=0,i=e.length;n<i;++n){l=e[n];const{fullSize:i}=l.box,o=s[l.stack],c=o&&l.stackWeight/o.weight;l.horizontal?(l.width=c?c*r:i&&t.availableWidth,l.height=a):(l.width=r,l.height=c?c*a:i&&t.availableHeight)}return s}function eh(e,t,s,r){return Math.max(e[s],t[s])+Math.max(e[r],t[r])}function th(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function sh(e,t,s,r){const{pos:a,box:n}=s,i=e.maxPadding;if(!bo(a)){s.size&&(e[a]-=s.size);const t=r[s.stack]||{size:0,count:1};t.size=Math.max(t.size,s.horizontal?n.height:n.width),s.size=t.size/t.count,e[a]+=s.size}n.getPadding&&th(i,n.getPadding());const l=Math.max(0,t.outerWidth-eh(i,e,"left","right")),o=Math.max(0,t.outerHeight-eh(i,e,"top","bottom")),c=l!==e.w,d=o!==e.h;return e.w=l,e.h=o,s.horizontal?{same:c,other:d}:{same:d,other:c}}function rh(e,t){const s=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],s[e])}),r}return r(e?["left","right"]:["top","bottom"])}function ah(e,t,s,r){const a=[];let n,i,l,o,c,d;for(n=0,i=e.length,c=0;n<i;++n){l=e[n],o=l.box,o.update(l.width||t.w,l.height||t.h,rh(l.horizontal,t));const{same:i,other:u}=sh(t,s,l,r);c|=i&&a.length,d=d||u,o.fullSize||a.push(l)}return c&&ah(a,t,s,r)||d}function nh(e,t,s,r,a){e.top=s,e.left=t,e.right=t+r,e.bottom=s+a,e.width=r,e.height=a}function ih(e,t,s,r){const a=s.padding;let{x:n,y:i}=t;for(const l of e){const e=l.box,o=r[l.stack]||{count:1,placed:0,weight:1},c=l.stackWeight/o.weight||1;if(l.horizontal){const r=t.w*c,n=o.size||e.height;Do(o.start)&&(i=o.start),e.fullSize?nh(e,a.left,i,s.outerWidth-a.right-a.left,n):nh(e,t.left+o.placed,i,r,n),o.start=i,o.placed+=r,i=e.bottom}else{const r=t.h*c,i=o.size||e.width;Do(o.start)&&(n=o.start),e.fullSize?nh(e,n,a.top,i,s.outerHeight-a.bottom-a.top):nh(e,n,t.top+o.placed,i,r),o.start=n,o.placed+=r,n=e.right}}t.x=n,t.y=i}var lh={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;-1!==s&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,r){if(!e)return;const a=ld(e.options.layout.padding),n=Math.max(t-a.width,0),i=Math.max(s-a.height,0),l=function(e){const t=function(e){const t=[];let s,r,a,n,i,l;for(s=0,r=(e||[]).length;s<r;++s)a=e[s],({position:n,options:{stack:i,stackWeight:l=1}}=a),t.push({index:s,box:a,pos:n,horizontal:a.isHorizontal(),weight:a.weight,stack:i&&n+i,stackWeight:l});return t}(e),s=Ju(t.filter(e=>e.box.fullSize),!0),r=Ju(Ku(t,"left"),!0),a=Ju(Ku(t,"right")),n=Ju(Ku(t,"top"),!0),i=Ju(Ku(t,"bottom")),l=Xu(t,"x"),o=Xu(t,"y");return{fullSize:s,leftAndTop:r.concat(n),rightAndBottom:a.concat(o).concat(i).concat(l),chartArea:Ku(t,"chartArea"),vertical:r.concat(a).concat(o),horizontal:n.concat(i).concat(l)}}(e.boxes),o=l.vertical,c=l.horizontal;ko(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=o.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:s,padding:a,availableWidth:n,availableHeight:i,vBoxMaxWidth:n/2/d,hBoxMaxHeight:i/2}),h=Object.assign({},a);th(h,ld(r));const m=Object.assign({maxPadding:h,w:n,h:i,x:a.left,y:a.top},a),p=Zu(o.concat(c),u);ah(l.fullSize,m,u,p),ah(o,m,u,p),ah(c,m,u,p)&&ah(o,m,u,p),function(e){const t=e.maxPadding;function s(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}(m),ih(l.leftAndTop,m,u,p),m.x+=m.w,m.y+=m.h,ih(l.rightAndBottom,m,u,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ko(l.chartArea,t=>{const s=t.box;Object.assign(s,e.chartArea),s.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class oh{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,r){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):s)}}isAttached(e){return!0}updateConfig(e){}}class ch extends oh{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const dh="$chartjs",uh={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hh=e=>null===e||""===e;const mh=!!Hd&&{passive:!0};function ph(e,t,s){e&&e.canvas&&e.canvas.removeEventListener(t,s,mh)}function xh(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function fh(e,t,s){const r=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const s of e)t=t||xh(s.addedNodes,r),t=t&&!xh(s.removedNodes,r);t&&s()});return a.observe(document,{childList:!0,subtree:!0}),a}function gh(e,t,s){const r=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const s of e)t=t||xh(s.removedNodes,r),t=t&&!xh(s.addedNodes,r);t&&s()});return a.observe(document,{childList:!0,subtree:!0}),a}const bh=new Map;let yh=0;function vh(){const e=window.devicePixelRatio;e!==yh&&(yh=e,bh.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function jh(e,t,s){const r=e.canvas,a=r&&Pd(r);if(!a)return;const n=xc((e,t)=>{const r=a.clientWidth;s(e,t),r<a.clientWidth&&s()},window),i=new ResizeObserver(e=>{const t=e[0],s=t.contentRect.width,r=t.contentRect.height;0===s&&0===r||n(s,r)});return i.observe(a),function(e,t){bh.size||window.addEventListener("resize",vh),bh.set(e,t)}(e,n),i}function Nh(e,t,s){s&&s.disconnect(),"resize"===t&&function(e){bh.delete(e),bh.size||window.removeEventListener("resize",vh)}(e)}function wh(e,t,s){const r=e.canvas,a=xc(t=>{null!==e.ctx&&s(function(e,t){const s=uh[e.type]||e.type,{x:r,y:a}=Fd(e,t);return{type:s,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==a?a:null}}(t,e))},e);return function(e,t,s){e&&e.addEventListener(t,s,mh)}(r,t,a),a}class kh extends oh{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(function(e,t){const s=e.style,r=e.getAttribute("height"),a=e.getAttribute("width");if(e[dh]={initial:{height:r,width:a,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",hh(a)){const t=Bd(e,"width");void 0!==t&&(e.width=t)}if(hh(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Bd(e,"height");void 0!==t&&(e.height=t)}}(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[dh])return!1;const s=t[dh].initial;["height","width"].forEach(e=>{const r=s[e];fo(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=s.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[dh],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),a={attach:fh,detach:gh,resize:jh}[t]||wh;r[t]=a(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),r=s[t];if(!r)return;({attach:Nh,detach:Nh,resize:Nh}[t]||ph)(e,t,r),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,r){return Vd(e,t,s,r)}isAttached(e){const t=e&&Pd(e);return!(!t||!t.isConnected)}}class Sh{constructor(){Wt(this,"x",void 0),Wt(this,"y",void 0),Wt(this,"active",!1),Wt(this,"options",void 0),Wt(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return Ko(this.x)&&Ko(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const r={};return e.forEach(e=>{r[e]=s[e]&&s[e].active()?s[e]._to:this[e]}),r}}function Ch(e,t){const s=e.options.ticks,r=function(e){const t=e.options.offset,s=e._tickSize(),r=e._length/s+(t?0:1),a=e._maxLength/s;return Math.floor(Math.min(r,a))}(e),a=Math.min(s.maxTicksLimit||r,r),n=s.major.enabled?function(e){const t=[];let s,r;for(s=0,r=e.length;s<r;s++)e[s].major&&t.push(s);return t}(t):[],i=n.length,l=n[0],o=n[i-1],c=[];if(i>a)return function(e,t,s,r){let a,n=0,i=s[0];for(r=Math.ceil(r),a=0;a<e.length;a++)a===i&&(t.push(e[a]),n++,i=s[n*r])}(t,c,n,i/a),c;const d=function(e,t,s){const r=function(e){const t=e.length;let s,r;if(t<2)return!1;for(r=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==r)return!1;return r}(e),a=t.length/s;if(!r)return Math.max(a,1);const n=function(e){const t=[],s=Math.sqrt(e);let r;for(r=1;r<s;r++)e%r===0&&(t.push(r),t.push(e/r));return s===(0|s)&&t.push(s),t.sort((e,t)=>e-t).pop(),t}(r);for(let i=0,l=n.length-1;i<l;i++){const e=n[i];if(e>a)return e}return Math.max(a,1)}(n,t,a);if(i>0){let e,s;const r=i>1?Math.round((o-l)/(i-1)):null;for(Eh(t,c,d,fo(r)?0:l-r,l),e=0,s=i-1;e<s;e++)Eh(t,c,d,n[e],n[e+1]);return Eh(t,c,d,o,fo(r)?t.length:o+r),c}return Eh(t,c,d),c}function Eh(e,t,s,r,a){const n=jo(r,0),i=Math.min(jo(a,e.length),e.length);let l,o,c,d=0;for(s=Math.ceil(s),a&&(l=a-r,s=l/Math.floor(l/s)),c=n;c<0;)d++,c=Math.round(n+d*s);for(o=Math.max(n,0);o<i;o++)o===c&&(t.push(e[o]),d++,c=Math.round(n+d*s))}Wt(Sh,"defaults",{}),Wt(Sh,"defaultRoutes",void 0);const _h=(e,t,s)=>"top"===t||"left"===t?e[t]+s:e[t]-s,Th=(e,t)=>Math.min(t||e,e);function Rh(e,t){const s=[],r=e.length/t,a=e.length;let n=0;for(;n<a;n+=r)s.push(e[Math.floor(n)]);return s}function Mh(e,t,s){const r=e.ticks.length,a=Math.min(t,r-1),n=e._startPixel,i=e._endPixel,l=1e-6;let o,c=e.getPixelForTick(a);if(!(s&&(o=1===r?Math.max(c-n,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(a-1))/2,c+=a<t?o:-o,c<n-l||c>i+l)))return c}function Ah(e){return e.drawTicks?e.tickLength:0}function Ph(e,t){if(!e.display)return 0;const s=od(e.font,t),r=ld(e.padding);return(go(e.text)?e.text.length:1)*s.lineHeight+r.height}function Oh(e,t,s){let r=fc(e);return(s&&"right"!==t||!s&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class Dh extends Sh{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:r}=this;return e=vo(e,Number.POSITIVE_INFINITY),t=vo(t,Number.NEGATIVE_INFINITY),s=vo(s,Number.POSITIVE_INFINITY),r=vo(r,Number.NEGATIVE_INFINITY),{min:vo(e,s),max:vo(t,r),minDefined:yo(e),maxDefined:yo(t)}}getMinMax(e){let t,{min:s,max:r,minDefined:a,maxDefined:n}=this.getUserBounds();if(a&&n)return{min:s,max:r};const i=this.getMatchingVisibleMetas();for(let l=0,o=i.length;l<o;++l)t=i[l].controller.getMinMax(this,e),a||(s=Math.min(s,t.min)),n||(r=Math.max(r,t.max));return s=n&&s>r?r:s,r=a&&s>r?s:r,{min:vo(s,vo(r,s)),max:vo(r,vo(s,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){wo(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:r,grace:a,ticks:n}=this.options,i=n.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,s){const{min:r,max:a}=e,n=No(t,(a-r)/2),i=(e,t)=>s&&0===e?0:e+t;return{min:i(r,-Math.abs(n)),max:i(a,n)}}(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=i<this.ticks.length;this._convertTicksToLabels(l?Rh(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),n.display&&(n.autoSkip||"auto"===n.source)&&(this.ticks=Ch(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,s=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,s=!s),this._startPixel=e,this._endPixel=t,this._reversePixels=s,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){wo(this.options.afterUpdate,[this])}beforeSetDimensions(){wo(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){wo(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),wo(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){wo(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,r,a;for(s=0,r=e.length;s<r;s++)a=e[s],a.label=wo(t.callback,[a.value,s,e],this)}afterTickToLabelConversion(){wo(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){wo(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=Th(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,a=t.maxRotation;let n,i,l,o=r;if(!this._isVisible()||!t.display||r>=a||s<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=ic(this.chart.width-d,0,this.maxWidth);n=e.offset?this.maxWidth/s:h/(s-1),d+6>n&&(n=h/(s-(e.offset?.5:1)),i=this.maxHeight-Ah(e.grid)-t.padding-Ph(e.title,this.chart.options.font),l=Math.sqrt(d*d+u*u),o=Zo(Math.min(Math.asin(ic((c.highest.height+6)/n,-1,1)),Math.asin(ic(i/l,-1,1))-Math.asin(ic(u/l,-1,1)))),o=Math.max(r,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){wo(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){wo(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:r,grid:a}}=this,n=this._isVisible(),i=this.isHorizontal();if(n){const n=Ph(r,t.options.font);if(i?(e.width=this.maxWidth,e.height=Ah(a)+n):(e.height=this.maxHeight,e.width=Ah(a)+n),s.display&&this.ticks.length){const{first:t,last:r,widest:a,highest:n}=this._getLabelSizes(),l=2*s.padding,o=Jo(this.labelRotation),c=Math.cos(o),d=Math.sin(o);if(i){const t=s.mirror?0:d*a.width+c*n.height;e.height=Math.min(this.maxHeight,e.height+t+l)}else{const t=s.mirror?0:c*a.width+d*n.height;e.width=Math.min(this.maxWidth,e.width+t+l)}this._calculatePadding(t,r,d,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,r){const{ticks:{align:a,padding:n},position:i}=this.options,l=0!==this.labelRotation,o="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;l?o?(d=r*e.width,u=s*t.height):(d=s*e.height,u=r*t.width):"start"===a?u=t.width:"end"===a?d=e.width:"inner"!==a&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-i+n)*this.width/(this.width-i),0),this.paddingRight=Math.max((u-c+n)*this.width/(this.width-c),0)}else{let s=t.height/2,r=e.height/2;"start"===a?(s=0,r=e.height):"end"===a&&(s=t.height,r=0),this.paddingTop=s+n,this.paddingBottom=r+n}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){wo(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,s;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,s=e.length;t<s;t++)fo(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=Rh(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:r,_longestTextCache:a}=this,n=[],i=[],l=Math.floor(t/Th(t,s));let o,c,d,u,h,m,p,x,f,g,b,y=0,v=0;for(o=0;o<t;o+=l){if(u=e[o].label,h=this._resolveTickFontOptions(o),r.font=m=h.string,p=a[m]=a[m]||{data:{},gc:[]},x=h.lineHeight,f=g=0,fo(u)||go(u)){if(go(u))for(c=0,d=u.length;c<d;++c)b=u[c],fo(b)||go(b)||(f=zc(r,p.data,p.gc,f,b),g+=x)}else f=zc(r,p.data,p.gc,f,u),g=x;n.push(f),i.push(g),y=Math.max(f,y),v=Math.max(g,v)}!function(e,t){ko(e,e=>{const s=e.gc,r=s.length/2;let a;if(r>t){for(a=0;a<r;++a)delete e.data[s[a]];s.splice(0,r)}})}(a,t);const j=n.indexOf(y),N=i.indexOf(v),w=e=>({width:n[e]||0,height:i[e]||0});return{first:w(0),last:w(t-1),widest:w(j),highest:w(N),widths:n,heights:i}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return ic(this._alignToPixels?Uc(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=function(e,t,s){return dd(e,{tick:s,index:t,type:"tick"})}(this.getContext(),e,s))}return this.$context||(this.$context=dd(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Jo(this.labelRotation),s=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),n=e.autoSkipPadding||0,i=a?a.widest.width+n:0,l=a?a.highest.height+n:0;return this.isHorizontal()?l*s>i*r?i/s:l/r:l*r<i*s?l/s:i/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,r=this.options,{grid:a,position:n,border:i}=r,l=a.offset,o=this.isHorizontal(),c=this.ticks.length+(l?1:0),d=Ah(a),u=[],h=i.setContext(this.getContext()),m=h.display?h.width:0,p=m/2,x=function(e){return Uc(s,e,m)};let f,g,b,y,v,j,N,w,k,S,C,E;if("top"===n)f=x(this.bottom),j=this.bottom-d,w=f-p,S=x(e.top)+p,E=e.bottom;else if("bottom"===n)f=x(this.top),S=e.top,E=x(e.bottom)-p,j=f+p,w=this.top+d;else if("left"===n)f=x(this.right),v=this.right-d,N=f-p,k=x(e.left)+p,C=e.right;else if("right"===n)f=x(this.left),k=e.left,C=x(e.right)-p,v=f+p,N=this.left+d;else if("x"===t){if("center"===n)f=x((e.top+e.bottom)/2+.5);else if(bo(n)){const e=Object.keys(n)[0],t=n[e];f=x(this.chart.scales[e].getPixelForValue(t))}S=e.top,E=e.bottom,j=f+p,w=j+d}else if("y"===t){if("center"===n)f=x((e.left+e.right)/2);else if(bo(n)){const e=Object.keys(n)[0],t=n[e];f=x(this.chart.scales[e].getPixelForValue(t))}v=f-p,N=v-d,k=e.left,C=e.right}const _=jo(r.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/_));for(g=0;g<c;g+=T){const e=this.getContext(g),t=a.setContext(e),r=i.setContext(e),n=t.lineWidth,c=t.color,d=r.dash||[],h=r.dashOffset,m=t.tickWidth,p=t.tickColor,x=t.tickBorderDash||[],f=t.tickBorderDashOffset;b=Mh(this,g,l),void 0!==b&&(y=Uc(s,b,n),o?v=N=k=C=y:j=w=S=E=y,u.push({tx1:v,ty1:j,tx2:N,ty2:w,x1:k,y1:S,x2:C,y2:E,width:n,color:c,borderDash:d,borderDashOffset:h,tickWidth:m,tickColor:p,tickBorderDash:x,tickBorderDashOffset:f}))}return this._ticksLength=c,this._borderValue=f,u}_computeLabelItems(e){const t=this.axis,s=this.options,{position:r,ticks:a}=s,n=this.isHorizontal(),i=this.ticks,{align:l,crossAlign:o,padding:c,mirror:d}=a,u=Ah(s.grid),h=u+c,m=d?-c:h,p=-Jo(this.labelRotation),x=[];let f,g,b,y,v,j,N,w,k,S,C,E,_="middle";if("top"===r)j=this.bottom-m,N=this._getXAxisLabelAlignment();else if("bottom"===r)j=this.top+m,N=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);N=e.textAlign,v=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);N=e.textAlign,v=e.x}else if("x"===t){if("center"===r)j=(e.top+e.bottom)/2+h;else if(bo(r)){const e=Object.keys(r)[0],t=r[e];j=this.chart.scales[e].getPixelForValue(t)+h}N=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)v=(e.left+e.right)/2-h;else if(bo(r)){const e=Object.keys(r)[0],t=r[e];v=this.chart.scales[e].getPixelForValue(t)}N=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===l?_="top":"end"===l&&(_="bottom"));const T=this._getLabelSizes();for(f=0,g=i.length;f<g;++f){b=i[f],y=b.label;const e=a.setContext(this.getContext(f));w=this.getPixelForTick(f)+a.labelOffset,k=this._resolveTickFontOptions(f),S=k.lineHeight,C=go(y)?y.length:1;const t=C/2,s=e.color,l=e.textStrokeColor,c=e.textStrokeWidth;let u,h=N;if(n?(v=w,"inner"===N&&(h=f===g-1?this.options.reverse?"left":"right":0===f?this.options.reverse?"right":"left":"center"),E="top"===r?"near"===o||0!==p?-C*S+S/2:"center"===o?-T.highest.height/2-t*S+S:-T.highest.height+S/2:"near"===o||0!==p?S/2:"center"===o?T.highest.height/2-t*S:T.highest.height-C*S,d&&(E*=-1),0===p||e.showLabelBackdrop||(v+=S/2*Math.sin(p))):(j=w,E=(1-C)*S/2),e.showLabelBackdrop){const t=ld(e.backdropPadding),s=T.heights[f],r=T.widths[f];let a=E-t.top,n=0-t.left;switch(_){case"middle":a-=s/2;break;case"bottom":a-=s}switch(N){case"center":n-=r/2;break;case"right":n-=r;break;case"inner":f===g-1?n-=r:f>0&&(n-=r/2)}u={left:n,top:a,width:r+t.width,height:s+t.height,color:e.backdropColor}}x.push({label:y,font:k,textOffset:E,options:{rotation:p,color:s,strokeColor:l,strokeWidth:c,textAlign:h,textBaseline:_,translation:[v,j],backdrop:u}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Jo(this.labelRotation))return"top"===e?"left":"right";let s="center";return"start"===t.align?s="left":"end"===t.align?s="right":"inner"===t.align&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:r,padding:a}}=this.options,n=e+a,i=this._getLabelSizes().widest.width;let l,o;return"left"===t?r?(o=this.right+a,"near"===s?l="left":"center"===s?(l="center",o+=i/2):(l="right",o+=i)):(o=this.right-n,"near"===s?l="right":"center"===s?(l="center",o-=i/2):(l="left",o=this.left)):"right"===t?r?(o=this.left+a,"near"===s?l="right":"center"===s?(l="center",o-=i/2):(l="left",o-=i)):(o=this.left+n,"near"===s?l="left":"center"===s?(l="center",o+=i/2):(l="right",o=this.right)):l="right",{textAlign:l,x:o}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:r,width:a,height:n}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,r,a,n),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(t=>t.value===e);if(s>=0){return t.setContext(this.getContext(s)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,n;const i=(e,t,r)=>{r.width&&r.color&&(s.save(),s.lineWidth=r.width,s.strokeStyle=r.color,s.setLineDash(r.borderDash||[]),s.lineDashOffset=r.borderDashOffset,s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(t.x,t.y),s.stroke(),s.restore())};if(t.display)for(a=0,n=r.length;a<n;++a){const e=r[a];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:r}}=this,a=s.setContext(this.getContext()),n=s.display?a.width:0;if(!n)return;const i=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let o,c,d,u;this.isHorizontal()?(o=Uc(e,this.left,n)-n/2,c=Uc(e,this.right,i)+i/2,d=u=l):(d=Uc(e,this.top,n)-n/2,u=Uc(e,this.bottom,i)+i/2,o=c=l),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(o,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,s=this._computeLabelArea();s&&Gc(t,s);const r=this.getLabelItems(e);for(const a of r){const e=a.options,s=a.font;Jc(t,a.label,0,a.textOffset,s,e)}s&&Yc(t)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:r}}=this;if(!s.display)return;const a=od(s.font),n=ld(s.padding),i=s.align;let l=a.lineHeight/2;"bottom"===t||"center"===t||bo(t)?(l+=n.bottom,go(s.text)&&(l+=a.lineHeight*(s.text.length-1))):l+=n.top;const{titleX:o,titleY:c,maxWidth:d,rotation:u}=function(e,t,s,r){const{top:a,left:n,bottom:i,right:l,chart:o}=e,{chartArea:c,scales:d}=o;let u,h,m,p=0;const x=i-a,f=l-n;if(e.isHorizontal()){if(h=gc(r,n,l),bo(s)){const e=Object.keys(s)[0],r=s[e];m=d[e].getPixelForValue(r)+x-t}else m="center"===s?(c.bottom+c.top)/2+x-t:_h(e,s,t);u=l-n}else{if(bo(s)){const e=Object.keys(s)[0],r=s[e];h=d[e].getPixelForValue(r)-f+t}else h="center"===s?(c.left+c.right)/2-f+t:_h(e,s,t);m=gc(r,i,a),p="left"===s?-Bo:Bo}return{titleX:h,titleY:m,maxWidth:u,rotation:p}}(this,l,t,i);Jc(e,s.text,0,0,a,{color:s.color,maxWidth:d,rotation:u,textAlign:Oh(i,t,r),textBaseline:"middle",translation:[o,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=jo(e.grid&&e.grid.z,-1),r=jo(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Dh.prototype.draw?[{z:s,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let a,n;for(a=0,n=t.length;a<n;++a){const n=t[a];n[s]!==this.id||e&&n.type!==e||r.push(n)}return r}_resolveTickFontOptions(e){return od(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ih{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;(function(e){return"id"in e&&"defaults"in e})(t)&&(s=this.register(t));const r=this.items,a=e.id,n=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,function(e,t,s){const r=To(Object.create(null),[s?Fc.get(s):{},Fc.get(t),e.defaults]);Fc.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(s=>{const r=s.split("."),a=r.pop(),n=[e].concat(r).join("."),i=t[s].split("."),l=i.pop(),o=i.join(".");Fc.route(n,a,o,l)})}(t,e.defaultRoutes);e.descriptors&&Fc.describe(t,e.descriptors)}(e,n,s),this.override&&Fc.override(e.id,e.overrides)),n}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,r=this.scope;s in t&&delete t[s],r&&s in Fc[r]&&(delete Fc[r][s],this.override&&delete Pc[s])}}class Lh{constructor(){this.controllers=new Ih(Nu,"datasets",!0),this.elements=new Ih(Sh,"elements"),this.plugins=new Ih(Object,"plugins"),this.scales=new Ih(Dh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.scales)}_each(e,t,s){[...t].forEach(t=>{const r=s||this._getRegistryForType(t);s||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):ko(t,t=>{const r=s||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,s){const r=Oo(e);wo(s["before"+r],[],s),t[e](s),wo(s["after"+r],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var Fh=new Lh;class zh{constructor(){this._init=void 0}notify(e,t,s,r){if("beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),void 0===this._init)return;const a=r?this._descriptors(e).filter(r):this._descriptors(e),n=this._notify(a,e,t,s);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),n}_notify(e,t,s,r){r=r||{};for(const a of e){const e=a.plugin;if(!1===wo(e[s],[t,r,a.options],e)&&r.cancelable)return!1}return!0}invalidate(){fo(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,r=jo(s.options&&s.options.plugins,{}),a=function(e){const t={},s=[],r=Object.keys(Fh.plugins.items);for(let n=0;n<r.length;n++)s.push(Fh.getPlugin(r[n]));const a=e.plugins||[];for(let n=0;n<a.length;n++){const e=a[n];-1===s.indexOf(e)&&(s.push(e),t[e.id]=!0)}return{plugins:s,localIds:t}}(s);return!1!==r||t?function(e,t,s,r){let{plugins:a,localIds:n}=t;const i=[],l=e.getContext();for(const o of a){const t=o.id,a=Vh(s[t],r);null!==a&&i.push({plugin:o,options:Uh(e.config,{plugin:o,local:n[t]},a,l)})}return i}(e,a,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,s),e,"stop"),this._notify(r(s,t),e,"start")}}function Vh(e,t){return t||!1!==e?!0===e?{}:e:null}function Uh(e,t,s,r){let{plugin:a,local:n}=t;const i=e.pluginScopeKeys(a),l=e.getOptionScopes(s,i);return n&&a.defaults&&l.push(a.defaults),e.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Hh(e,t){const s=Fc.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function Bh(e){if("x"===e||"y"===e||"r"===e)return e}function qh(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Wh(e){if(Bh(e))return e;for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];for(const a of s){const t=a.axis||qh(a.position)||e.length>1&&Bh(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Gh(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function Yh(e,t){const s=Pc[e.type]||{scales:{}},r=t.scales||{},a=Hh(e.type,t),n=Object.create(null);return Object.keys(r).forEach(t=>{const i=r[t];if(!bo(i))return console.error("Invalid scale configuration for scale: ".concat(t));if(i._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const l=Wh(t,i,function(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(s.length)return Gh(e,"x",s[0])||Gh(e,"y",s[0])}return{}}(t,e),Fc.scales[i.type]),o=function(e,t){return e===t?"_index_":"_value_"}(l,a),c=s.scales||{};n[t]=Ro(Object.create(null),[{axis:l},i,c[l],c[o]])}),e.data.datasets.forEach(s=>{const a=s.type||e.type,i=s.indexAxis||Hh(a,t),l=(Pc[a]||{}).scales||{};Object.keys(l).forEach(e=>{const t=function(e,t){let s=e;return"_index_"===e?s=t:"_value_"===e&&(s="x"===t?"y":"x"),s}(e,i),a=s[t+"AxisID"]||t;n[a]=n[a]||Object.create(null),Ro(n[a],[{axis:t},r[a],l[e]])})}),Object.keys(n).forEach(e=>{const t=n[e];Ro(t,[Fc.scales[t.type],Fc.scale])}),n}function Qh(e){const t=e.options||(e.options={});t.plugins=jo(t.plugins,{}),t.scales=Yh(e,t)}function $h(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Kh=new Map,Xh=new Set;function Jh(e,t){let s=Kh.get(e);return s||(s=t(),Kh.set(e,s),Xh.add(s)),s}const Zh=(e,t,s)=>{const r=Po(t,s);void 0!==r&&e.add(r)};class em{constructor(e){this._config=function(e){return(e=e||{}).data=$h(e.data),Qh(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=$h(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Qh(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Jh(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return Jh("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return Jh("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return Jh("".concat(s,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let r=s.get(e);return r&&!t||(r=new Map,s.set(e,r)),r}getOptionScopes(e,t,s){const{options:r,type:a}=this,n=this._cachedScopes(e,s),i=n.get(t);if(i)return i;const l=new Set;t.forEach(t=>{e&&(l.add(e),t.forEach(t=>Zh(l,e,t))),t.forEach(e=>Zh(l,r,e)),t.forEach(e=>Zh(l,Pc[a]||{},e)),t.forEach(e=>Zh(l,Fc,e)),t.forEach(e=>Zh(l,Oc,e))});const o=Array.from(l);return 0===o.length&&o.push(Object.create(null)),Xh.has(t)&&n.set(t,o),o}chartOptionScopes(){const{options:e,type:t}=this;return[e,Pc[t]||{},Fc.datasets[t]||{},{type:t},Fc,Oc]}resolveNamedOptions(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const a={$shared:!0},{resolver:n,subPrefixes:i}=tm(this._resolverCache,e,r);let l=n;if(function(e,t){const{isScriptable:s,isIndexable:r}=md(e);for(const a of t){const t=s(a),n=r(a),i=(n||t)&&e[a];if(t&&(Io(i)||sm(i))||n&&go(i))return!0}return!1}(n,t)){a.$shared=!1;l=hd(n,s=Io(s)?s():s,this.createResolver(e,s,i))}for(const o of t)a[o]=l[o];return a}createResolver(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:a}=tm(this._resolverCache,e,s);return bo(t)?hd(a,t,void 0,r):a}}function tm(e,t,s){let r=e.get(t);r||(r=new Map,e.set(t,r));const a=s.join();let n=r.get(a);if(!n){n={resolver:ud(t,s),subPrefixes:s.filter(e=>!e.toLowerCase().includes("hover"))},r.set(a,n)}return n}const sm=e=>bo(e)&&Object.getOwnPropertyNames(e).some(t=>Io(e[t]));const rm=["top","bottom","left","right","chartArea"];function am(e,t){return"top"===e||"bottom"===e||-1===rm.indexOf(e)&&"x"===t}function nm(e,t){return function(s,r){return s[e]===r[e]?s[t]-r[t]:s[e]-r[e]}}function im(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),wo(s&&s.onComplete,[e],t)}function lm(e){const t=e.chart,s=t.options.animation;wo(s&&s.onProgress,[e],t)}function om(e){return Ad()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const cm={},dm=e=>{const t=om(e);return Object.values(cm).filter(e=>e.canvas===t).pop()};function um(e,t,s){const r=Object.keys(e);for(const a of r){const r=+a;if(r>=t){const n=e[a];delete e[a],(s>0||r>t)&&(e[r+s]=n)}}}class hm{static register(){Fh.add(...arguments),mm()}static unregister(){Fh.remove(...arguments),mm()}constructor(e,t){const s=this.config=new em(t),r=om(e),a=dm(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const n=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||function(e){return!Ad()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?ch:kh}(r)),this.platform.updateConfig(s);const i=this.platform.acquireContext(r,n.aspectRatio),l=i&&i.canvas,o=l&&l.height,c=l&&l.width;this.id=xo(),this.ctx=i,this.canvas=l,this.width=c,this.height=o,this._options=n,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zh,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let s;return function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return t?(clearTimeout(s),s=setTimeout(e,t,a)):e.apply(this,a),t}}(e=>this.update(e),n.resizeDelay||0),this._dataChanges=[],cm[this.id]=this,i&&l?(iu.listen(this,"complete",im),iu.listen(this,"progress",lm),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:r,_aspectRatio:a}=this;return fo(e)?t&&a?a:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fh}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ud(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Hc(this.canvas,this.ctx),this}stop(){return iu.stop(this),this}resize(e,t){iu.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,r=this.canvas,a=s.maintainAspectRatio&&this.aspectRatio,n=this.platform.getMaximumSize(r,e,t,a),i=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=n.width,this.height=n.height,this._aspectRatio=this.aspectRatio,Ud(this,i,!0)&&(this.notifyPlugins("resize",{size:n}),wo(s.onResize,[this,n],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){ko(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,r=Object.keys(s).reduce((e,t)=>(e[t]=!1,e),{});let a=[];t&&(a=a.concat(Object.keys(t).map(e=>{const s=t[e],r=Wh(e,s),a="r"===r,n="x"===r;return{options:s,dposition:a?"chartArea":n?"bottom":"left",dtype:a?"radialLinear":n?"category":"linear"}}))),ko(a,t=>{const a=t.options,n=a.id,i=Wh(n,a),l=jo(a.type,t.dtype);void 0!==a.position&&am(a.position,i)===am(t.dposition)||(a.position=t.dposition),r[n]=!0;let o=null;if(n in s&&s[n].type===l)o=s[n];else{o=new(Fh.getScale(l))({id:n,type:l,ctx:this.ctx,chart:this}),s[o.id]=o}o.init(a,e)}),ko(r,(e,t)=>{e||delete s[t]}),ko(s,e=>{lh.configure(this,e,e.options),lh.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((e,t)=>e.index-t.index),s>t){for(let e=t;e<s;++e)this._destroyDatasetMeta(e);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(nm("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,s)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=t.length;s<r;s++){const r=t[s];let a=this.getDatasetMeta(s);const n=r.type||this.config.type;if(a.type&&a.type!==n&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=n,a.indexAxis=r.indexAxis||Hh(n,this.options),a.order=r.order||0,a.index=s,a.label=""+r.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const t=Fh.getController(n),{datasetElementType:r,dataElementType:i}=Fc.datasets[n];Object.assign(t,{dataElementType:Fh.getElement(i),datasetElementType:r&&Fh.getElement(r)}),a.controller=new t(this,s),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){ko(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let n=0;for(let o=0,c=this.data.datasets.length;o<c;o++){const{controller:e}=this.getDatasetMeta(o),t=!r&&-1===a.indexOf(e);e.buildOrUpdateElements(t),n=Math.max(+e.getMaxOverflow(),n)}n=this._minPadding=s.layout.autoPadding?n:0,this._updateLayout(n),r||ko(a,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(nm("z","_idx"));const{_active:i,_lastEvent:l}=this;l?this._eventHandler(l,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){ko(this.scales,e=>{lh.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);Lo(t,s)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:a}of t){um(e,r,"_removeElements"===s?-a:a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=s(0);for(let a=1;a<t;a++)if(!Lo(r,s(a)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;lh.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],ko(this.boxes,e=>{s&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,Io(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(s.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(iu.has(this)?this.attached&&!iu.running(this)&&iu.start(this):(this.draw(),im({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let r,a;for(r=0,a=t.length;r<a;++r){const a=t[r];e&&!a.visible||s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=au(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(r&&Gc(t,r),e.controller.draw(),r&&Yc(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Wc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,r){const a=Qu.modes[t];return"function"===typeof a?a(this,e,s,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let r=s.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=dd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return"boolean"===typeof s.hidden?!s.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const r=s?"show":"hide",a=this.getDatasetMeta(e),n=a.controller._resolveAnimations(void 0,r);Do(t)?(a.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),n.update(a,{visible:s}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),iu.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Hc(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete cm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(s,r)=>{t.addEventListener(this,s,r),e[s]=r},r=(e,t,s)=>{e.offsetX=t,e.offsetY=s,this._eventHandler(e)};ko(this.options.events,e=>s(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(s,r)=>{t.addEventListener(this,s,r),e[s]=r},r=(s,r)=>{e[s]&&(t.removeEventListener(this,s,r),delete e[s])},a=(e,t)=>{this.canvas&&this.resize(e,t)};let n;const i=()=>{r("attach",i),this.attached=!0,this.resize(),s("resize",a),s("detach",n)};n=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),s("attach",i)},t.isAttached(this.canvas)?i():n()}unbindEvents(){ko(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ko(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const r=s?"set":"remove";let a,n,i,l;for("dataset"===t&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),i=0,l=e.length;i<l;++i){n=e[i];const t=n&&this.getDatasetMeta(n.datasetIndex).controller;t&&t[r+"HoverStyle"](n.element,n.datasetIndex,n.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(e=>{let{datasetIndex:t,index:s}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[s],index:s}});!So(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,s){const r=this.options.hover,a=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),n=a(t,e),i=s?e:a(e,t);n.length&&this.updateHoverStyle(n,r.mode,!1),i.length&&r.mode&&this.updateHoverStyle(i,r.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",s,r))return;const a=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(a||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:r=[],options:a}=this,n=t,i=this._getActiveElements(e,r,s,n),l=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),o=function(e,t,s,r){return s&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,s,l);s&&(this._lastEvent=null,wo(a.onHover,[e,i,this],this),l&&wo(a.onClick,[e,i,this],this));const c=!So(i,r);return(c||t)&&(this._active=i,this._updateHoverStyles(i,r,t)),this._lastEvent=o,c}_getActiveElements(e,t,s,r){if("mouseout"===e.type)return[];if(!s)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}}function mm(){return ko(hm.instances,e=>e._plugins.invalidate())}function pm(e,t,s,r){const a=ad(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const n=(s-t)/2,i=Math.min(n,r*t/2),l=e=>{const t=(s-Math.min(n,e))*r/2;return ic(e,0,Math.min(n,t))};return{outerStart:l(a.outerStart),outerEnd:l(a.outerEnd),innerStart:ic(a.innerStart,0,i),innerEnd:ic(a.innerEnd,0,i)}}function xm(e,t,s,r){return{x:s+e*Math.cos(t),y:r+e*Math.sin(t)}}function fm(e,t,s,r,a,n){const{x:i,y:l,startAngle:o,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+r+s-c,0),h=d>0?d+r+s+c:0;let m=0;const p=a-o;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;m=(p-(0!==e?p*e/(e+r):p))/2}const x=(p-Math.max(.001,p*u-s/Fo)/u)/2,f=o+x+m,g=a-x-m,{outerStart:b,outerEnd:y,innerStart:v,innerEnd:j}=pm(t,h,u,g-f),N=u-b,w=u-y,k=f+b/N,S=g-y/w,C=h+v,E=h+j,_=f+v/C,T=g-j/E;if(e.beginPath(),n){const t=(k+S)/2;if(e.arc(i,l,u,k,t),e.arc(i,l,u,t,S),y>0){const t=xm(w,S,i,l);e.arc(t.x,t.y,y,S,g+Bo)}const s=xm(E,g,i,l);if(e.lineTo(s.x,s.y),j>0){const t=xm(E,T,i,l);e.arc(t.x,t.y,j,g+Bo,T+Math.PI)}const r=(g-j/h+(f+v/h))/2;if(e.arc(i,l,h,g-j/h,r,!0),e.arc(i,l,h,r,f+v/h,!0),v>0){const t=xm(C,_,i,l);e.arc(t.x,t.y,v,_+Math.PI,f-Bo)}const a=xm(N,f,i,l);if(e.lineTo(a.x,a.y),b>0){const t=xm(N,k,i,l);e.arc(t.x,t.y,b,f-Bo,k)}}else{e.moveTo(i,l);const t=Math.cos(k)*u+i,s=Math.sin(k)*u+l;e.lineTo(t,s);const r=Math.cos(S)*u+i,a=Math.sin(S)*u+l;e.lineTo(r,a)}e.closePath()}function gm(e,t,s,r,a){const{fullCircles:n,startAngle:i,circumference:l,options:o}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:m}=o,p="inner"===o.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let x=t.endAngle;if(n){fm(e,t,s,r,x,a);for(let t=0;t<n;++t)e.stroke();isNaN(l)||(x=i+(l%zo||zo))}p&&function(e,t,s){const{startAngle:r,pixelMargin:a,x:n,y:i,outerRadius:l,innerRadius:o}=t;let c=a/l;e.beginPath(),e.arc(n,i,l,r-c,s+c),o>a?(c=a/o,e.arc(n,i,o,s+c,r-c,!0)):e.arc(n,i,a,s+Bo,r-Bo),e.closePath(),e.clip()}(e,t,x),o.selfJoin&&x-i>=Fo&&0===m&&"miter"!==d&&function(e,t,s){const{startAngle:r,x:a,y:n,outerRadius:i,innerRadius:l,options:o}=t,{borderWidth:c,borderJoinStyle:d}=o,u=Math.min(c/i,ac(r-s));if(e.beginPath(),e.arc(a,n,i-c/2,r+u/2,s-u/2),l>0){const t=Math.min(c/l,ac(r-s));e.arc(a,n,l+c/2,s-t/2,r+t/2,!0)}else{const t=Math.min(c/2,i*ac(r-s));if("round"===d)e.arc(a,n,t,s-Fo/2,r+Fo/2,!0);else if("bevel"===d){const i=2*t*t,l=-i*Math.cos(s+Fo/2)+a,o=-i*Math.sin(s+Fo/2)+n,c=i*Math.cos(r+Fo/2)+a,d=i*Math.sin(r+Fo/2)+n;e.lineTo(l,o),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,x),n||(fm(e,t,s,r,x,a),e.stroke())}Wt(hm,"defaults",Fc),Wt(hm,"instances",cm),Wt(hm,"overrides",Pc),Wt(hm,"registry",Fh),Wt(hm,"version","4.5.1"),Wt(hm,"getChart",dm);class bm extends Sh{constructor(e){super(),Wt(this,"circumference",void 0),Wt(this,"endAngle",void 0),Wt(this,"fullCircles",void 0),Wt(this,"innerRadius",void 0),Wt(this,"outerRadius",void 0),Wt(this,"pixelMargin",void 0),Wt(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const r=this.getProps(["x","y"],s),{angle:a,distance:n}=tc(r,{x:e,y:t}),{startAngle:i,endAngle:l,innerRadius:o,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),u=(this.options.spacing+this.options.borderWidth)/2,h=jo(d,l-i),m=nc(a,i,l)&&i!==l,p=h>=zo||m,x=lc(n,o+u,c+u);return p&&x}getCenterPoint(e){const{x:t,y:s,startAngle:r,endAngle:a,innerRadius:n,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:o}=this.options,c=(r+a)/2,d=(n+i+o+l)/2;return{x:t+Math.cos(c)*d,y:s+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,r=(t.offset||0)/4,a=(t.spacing||0)/2,n=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=s>zo?Math.floor(s/zo):0,0===s||this.innerRadius<0||this.outerRadius<0)return;e.save();const i=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(i)*r,Math.sin(i)*r);const l=r*(1-Math.sin(Math.min(Fo,s||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,s,r,a){const{fullCircles:n,startAngle:i,circumference:l}=t;let o=t.endAngle;if(n){fm(e,t,s,r,o,a);for(let t=0;t<n;++t)e.fill();isNaN(l)||(o=i+(l%zo||zo))}fm(e,t,s,r,o,a),e.fill()}(e,this,l,a,n),gm(e,this,l,a,n),e.restore()}}function ym(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=jo(s.borderCapStyle,t.borderCapStyle),e.setLineDash(jo(s.borderDash,t.borderDash)),e.lineDashOffset=jo(s.borderDashOffset,t.borderDashOffset),e.lineJoin=jo(s.borderJoinStyle,t.borderJoinStyle),e.lineWidth=jo(s.borderWidth,t.borderWidth),e.strokeStyle=jo(s.borderColor,t.borderColor)}function vm(e,t,s){e.lineTo(s.x,s.y)}function jm(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:a=0,end:n=r-1}=s,{start:i,end:l}=t,o=Math.max(a,i),c=Math.min(n,l),d=a<i&&n<i||a>l&&n>l;return{count:r,start:o,loop:t.loop,ilen:c<o&&!d?r+c-o:c-o}}function Nm(e,t,s,r){const{points:a,options:n}=t,{count:i,start:l,loop:o,ilen:c}=jm(a,s,r),d=function(e){return e.stepped?Qc:e.tension||"monotone"===e.cubicInterpolationMode?$c:vm}(n);let u,h,m,{move:p=!0,reverse:x}=r||{};for(u=0;u<=c;++u)h=a[(l+(x?c-u:u))%i],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):d(e,m,h,x,n.stepped),m=h);return o&&(h=a[(l+(x?c:0))%i],d(e,m,h,x,n.stepped)),!!o}function wm(e,t,s,r){const a=t.points,{count:n,start:i,ilen:l}=jm(a,s,r),{move:o=!0,reverse:c}=r||{};let d,u,h,m,p,x,f=0,g=0;const b=e=>(i+(c?l-e:e))%n,y=()=>{m!==p&&(e.lineTo(f,p),e.lineTo(f,m),e.lineTo(f,x))};for(o&&(u=a[b(0)],e.moveTo(u.x,u.y)),d=0;d<=l;++d){if(u=a[b(d)],u.skip)continue;const t=u.x,s=u.y,r=0|t;r===h?(s<m?m=s:s>p&&(p=s),f=(g*f+t)/++g):(y(),e.lineTo(t,s),h=r,g=0,m=p=s),x=s}y()}function km(e){const t=e.options,s=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!s?wm:Nm}Wt(bm,"id","arc"),Wt(bm,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Wt(bm,"defaultRoutes",{backgroundColor:"backgroundColor"}),Wt(bm,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Sm="function"===typeof Path2D;function Cm(e,t,s,r){Sm&&!t.options.segment?function(e,t,s,r){let a=t._path;a||(a=t._path=new Path2D,t.path(a,s,r)&&a.closePath()),ym(e,t.options),e.stroke(a)}(e,t,s,r):function(e,t,s,r){const{segments:a,options:n}=t,i=km(t);for(const l of a)ym(e,n,l.style),e.beginPath(),i(e,t,l,{start:s,end:s+r-1})&&e.closePath(),e.stroke()}(e,t,s,r)}class Em extends Sh{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||"monotone"===s.cubicInterpolationMode)&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;Md(this._points,s,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const s=e.points,r=e.options.spanGaps,a=s.length;if(!a)return[];const n=!!e._loop,{start:i,end:l}=function(e,t,s,r){let a=0,n=t-1;if(s&&!r)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,s&&(n+=a);n>a&&e[n%t].skip;)n--;return n%=t,{start:a,end:n}}(s,a,n,r);return eu(e,!0===r?[{start:i,end:l,loop:n}]:function(e,t,s,r){const a=e.length,n=[];let i,l=t,o=e[t];for(i=t+1;i<=s;++i){const s=e[i%a];s.skip||s.stop?o.skip||(r=!1,n.push({start:t%a,end:(i-1)%a,loop:r}),t=l=s.stop?i:null):(l=i,o.skip&&(t=i)),o=s}return null!==l&&n.push({start:t%a,end:l%a,loop:r}),n}(s,i,l<i?l+a:l,!!e._fullLoop&&0===i&&l===a-1),s,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,r=e[t],a=this.points,n=Zd(this,{property:t,start:r,end:r});if(!n.length)return;const i=[],l=function(e){return e.stepped?Wd:e.tension||"monotone"===e.cubicInterpolationMode?Gd:qd}(s);let o,c;for(o=0,c=n.length;o<c;++o){const{start:c,end:d}=n[o],u=a[c],h=a[d];if(u===h){i.push(u);continue}const m=l(u,h,Math.abs((r-u[t])/(h[t]-u[t])),s.stepped);m[t]=e[t],i.push(m)}return 1===i.length?i[0]:i}pathSegment(e,t,s){return km(this)(e,this,t,s)}path(e,t,s){const r=this.segments,a=km(this);let n=this._loop;t=t||0,s=s||this.points.length-t;for(const i of r)n&=a(e,this,i,{start:t,end:t+s-1});return!!n}draw(e,t,s,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),Cm(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function _m(e,t,s,r){const a=e.options,{[s]:n}=e.getProps([s],r);return Math.abs(t-n)<a.radius+a.hitRadius}Wt(Em,"id","line"),Wt(Em,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Wt(Em,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Wt(Em,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Tm extends Sh{constructor(e){super(),Wt(this,"parsed",void 0),Wt(this,"skip",void 0),Wt(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const r=this.options,{x:a,y:n}=this.getProps(["x","y"],s);return Math.pow(e-a,2)+Math.pow(t-n,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return _m(this,e,"x",t)}inYRange(e,t){return _m(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const s=this.options;this.skip||s.radius<.1||!Wc(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Bc(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Rm(e,t){const{x:s,y:r,base:a,width:n,height:i}=e.getProps(["x","y","base","width","height"],t);let l,o,c,d,u;return e.horizontal?(u=i/2,l=Math.min(s,a),o=Math.max(s,a),c=r-u,d=r+u):(u=n/2,l=s-u,o=s+u,c=Math.min(r,a),d=Math.max(r,a)),{left:l,top:c,right:o,bottom:d}}function Mm(e,t,s,r){return e?0:ic(t,s,r)}function Am(e){const t=Rm(e),s=t.right-t.left,r=t.bottom-t.top,a=function(e,t,s){const r=e.options.borderWidth,a=e.borderSkipped,n=nd(r);return{t:Mm(a.top,n.top,0,s),r:Mm(a.right,n.right,0,t),b:Mm(a.bottom,n.bottom,0,s),l:Mm(a.left,n.left,0,t)}}(e,s/2,r/2),n=function(e,t,s){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,n=id(a),i=Math.min(t,s),l=e.borderSkipped,o=r||bo(a);return{topLeft:Mm(!o||l.top||l.left,n.topLeft,0,i),topRight:Mm(!o||l.top||l.right,n.topRight,0,i),bottomLeft:Mm(!o||l.bottom||l.left,n.bottomLeft,0,i),bottomRight:Mm(!o||l.bottom||l.right,n.bottomRight,0,i)}}(e,s/2,r/2);return{outer:{x:t.left,y:t.top,w:s,h:r,radius:n},inner:{x:t.left+a.l,y:t.top+a.t,w:s-a.l-a.r,h:r-a.t-a.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,n.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(a.b,a.r))}}}}function Pm(e,t,s,r){const a=null===t,n=null===s,i=e&&!(a&&n)&&Rm(e,r);return i&&(a||lc(t,i.left,i.right))&&(n||lc(s,i.top,i.bottom))}function Om(e,t){e.rect(t.x,t.y,t.w,t.h)}function Dm(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==s.x?-t:0,a=e.y!==s.y?-t:0,n=(e.x+e.w!==s.x+s.w?t:0)-r,i=(e.y+e.h!==s.y+s.h?t:0)-a;return{x:e.x+r,y:e.y+a,w:e.w+n,h:e.h+i,radius:e.radius}}Wt(Tm,"id","point"),Wt(Tm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Wt(Tm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Im extends Sh{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:r}}=this,{inner:a,outer:n}=Am(this),i=(l=n.radius).topLeft||l.topRight||l.bottomLeft||l.bottomRight?Zc:Om;var l;e.save(),n.w===a.w&&n.h===a.h||(e.beginPath(),i(e,Dm(n,t,a)),e.clip(),i(e,Dm(a,-t,n)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),i(e,Dm(a,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,s){return Pm(this,e,t,s)}inXRange(e,t){return Pm(this,e,null,t)}inYRange(e,t){return Pm(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+r)/2:t,y:a?s:(s+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Wt(Im,"id","bar"),Wt(Im,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Wt(Im,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Lm(e,t,s,r){if(r)return;let a=t[e],n=s[e];return"angle"===e&&(a=ac(a),n=ac(n)),{property:e,start:a,end:n}}function Fm(e,t,s){for(;t>e;t--){const e=s[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function zm(e,t,s,r){return e&&t?r(e[s],t[s]):e?e[s]:t?t[s]:0}function Vm(e,t){let s=[],r=!1;return go(e)?(r=!0,s=e):s=function(e,t){const{x:s=null,y:r=null}=e||{},a=t.points,n=[];return t.segments.forEach(e=>{let{start:t,end:i}=e;i=Fm(t,i,a);const l=a[t],o=a[i];null!==r?(n.push({x:l.x,y:r}),n.push({x:o.x,y:r})):null!==s&&(n.push({x:s,y:l.y}),n.push({x:s,y:o.y}))}),n}(e,t),s.length?new Em({points:s,options:{tension:0},_loop:r,_fullLoop:r}):null}function Um(e){return e&&!1!==e.fill}function Hm(e,t,s){let r=e[t].fill;const a=[t];let n;if(!s)return r;for(;!1!==r&&-1===a.indexOf(r);){if(!yo(r))return r;if(n=e[r],!n)return!1;if(n.visible)return r;a.push(r),r=n.fill}return!1}function Bm(e,t,s){const r=function(e){const t=e.options,s=t.fill;let r=jo(s&&s.target,s);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(bo(r))return!isNaN(r.value)&&r;let a=parseFloat(r);return yo(a)&&Math.floor(a)===a?function(e,t,s,r){"-"!==e&&"+"!==e||(s=t+s);if(s===t||s<0||s>=r)return!1;return s}(r[0],t,a,s):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function qm(e,t,s){const r=[];for(let a=0;a<s.length;a++){const n=s[a],{first:i,last:l,point:o}=Wm(n,t,"x");if(!(!o||i&&l))if(i)r.unshift(o);else if(e.push(o),!l)break}e.push(...r)}function Wm(e,t,s){const r=e.interpolate(t,s);if(!r)return{};const a=r[s],n=e.segments,i=e.points;let l=!1,o=!1;for(let c=0;c<n.length;c++){const e=n[c],t=i[e.start][s],r=i[e.end][s];if(lc(a,t,r)){l=a===t,o=a===r;break}}return{first:l,last:o,point:r}}class Gm{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,s){const{x:r,y:a,radius:n}=this;return t=t||{start:0,end:zo},e.arc(r,a,n,t.end,t.start,!0),!s.bounds}interpolate(e){const{x:t,y:s,radius:r}=this,a=e.angle;return{x:t+Math.cos(a)*r,y:s+Math.sin(a)*r,angle:a}}}function Ym(e){const{chart:t,fill:s,line:r}=e;if(yo(s))return function(e,t){const s=e.getDatasetMeta(t),r=s&&e.isDatasetVisible(t);return r?s.dataset:null}(t,s);if("stack"===s)return function(e){const{scale:t,index:s,line:r}=e,a=[],n=r.segments,i=r.points,l=function(e,t){const s=[],r=e.getMatchingVisibleMetas("line");for(let a=0;a<r.length;a++){const e=r[a];if(e.index===t)break;e.hidden||s.unshift(e.dataset)}return s}(t,s);l.push(Vm({x:null,y:t.bottom},r));for(let o=0;o<n.length;o++){const e=n[o];for(let t=e.start;t<=e.end;t++)qm(a,i[t],l)}return new Em({points:a,options:{}})}(e);if("shape"===s)return!0;const a=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:s}=e,r=t.options,a=t.getLabels().length,n=r.reverse?t.max:t.min,i=function(e,t,s){let r;return r="start"===e?s:"end"===e?t.options.reverse?t.min:t.max:bo(e)?e.value:t.getBaseValue(),r}(s,t,n),l=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,n);return new Gm({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(i)})}for(let o=0;o<a;++o)l.push(t.getPointPositionForValue(o,i));return l}(e);return function(e){const{scale:t={},fill:s}=e,r=function(e,t){let s=null;return"start"===e?s=t.bottom:"end"===e?s=t.top:bo(e)?s=t.getPixelForValue(e.value):t.getBasePixel&&(s=t.getBasePixel()),s}(s,t);if(yo(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return a instanceof Gm?a:Vm(a,r)}function Qm(e,t,s){const r=Ym(t),{chart:a,index:n,line:i,scale:l,axis:o}=t,c=i.options,d=c.fill,u=c.backgroundColor,{above:h=u,below:m=u}=d||{},p=a.getDatasetMeta(n),x=au(a,p);r&&i.points.length&&(Gc(e,s),function(e,t){const{line:s,target:r,above:a,below:n,area:i,scale:l,clip:o}=t,c=s._loop?"angle":t.axis;e.save();let d=n;n!==a&&("x"===c?($m(e,r,i.top),Xm(e,{line:s,target:r,color:a,scale:l,property:c,clip:o}),e.restore(),e.save(),$m(e,r,i.bottom)):"y"===c&&(Km(e,r,i.left),Xm(e,{line:s,target:r,color:n,scale:l,property:c,clip:o}),e.restore(),e.save(),Km(e,r,i.right),d=a));Xm(e,{line:s,target:r,color:d,scale:l,property:c,clip:o}),e.restore()}(e,{line:i,target:r,above:h,below:m,area:s,scale:l,axis:o,clip:x}),Yc(e))}function $m(e,t,s){const{segments:r,points:a}=t;let n=!0,i=!1;e.beginPath();for(const l of r){const{start:r,end:o}=l,c=a[r],d=a[Fm(r,o,a)];n?(e.moveTo(c.x,c.y),n=!1):(e.lineTo(c.x,s),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,l,{move:i}),i?e.closePath():e.lineTo(d.x,s)}e.lineTo(t.first().x,s),e.closePath(),e.clip()}function Km(e,t,s){const{segments:r,points:a}=t;let n=!0,i=!1;e.beginPath();for(const l of r){const{start:r,end:o}=l,c=a[r],d=a[Fm(r,o,a)];n?(e.moveTo(c.x,c.y),n=!1):(e.lineTo(s,c.y),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,l,{move:i}),i?e.closePath():e.lineTo(s,d.y)}e.lineTo(s,t.first().y),e.closePath(),e.clip()}function Xm(e,t){const{line:s,target:r,property:a,color:n,scale:i,clip:l}=t,o=function(e,t,s){const r=e.segments,a=e.points,n=t.points,i=[];for(const l of r){let{start:e,end:r}=l;r=Fm(e,r,a);const o=Lm(s,a[e],a[r],l.loop);if(!t.segments){i.push({source:l,target:o,start:a[e],end:a[r]});continue}const c=Zd(t,o);for(const t of c){const e=Lm(s,n[t.start],n[t.end],t.loop),r=Jd(l,a,e);for(const a of r)i.push({source:a,target:t,start:{[s]:zm(o,e,"start",Math.max)},end:{[s]:zm(o,e,"end",Math.min)}})}}return i}(s,r,a);for(const{source:c,target:d,start:u,end:h}of o){const{style:{backgroundColor:t=n}={}}=c,o=!0!==r;e.save(),e.fillStyle=t,Jm(e,i,l,o&&Lm(a,u,h)),e.beginPath();const m=!!s.pathSegment(e,c);let p;if(o){m?e.closePath():Zm(e,r,h,a);const t=!!r.pathSegment(e,d,{move:m,reverse:!0});p=m&&t,p||Zm(e,r,u,a)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function Jm(e,t,s,r){const a=t.chart.chartArea,{property:n,start:i,end:l}=r||{};if("x"===n||"y"===n){let t,r,o,c;"x"===n?(t=i,r=a.top,o=l,c=a.bottom):(t=a.left,r=i,o=a.right,c=l),e.beginPath(),s&&(t=Math.max(t,s.left),o=Math.min(o,s.right),r=Math.max(r,s.top),c=Math.min(c,s.bottom)),e.rect(t,r,o-t,c-r),e.clip()}}function Zm(e,t,s,r){const a=t.interpolate(s,r);a&&e.lineTo(a.x,a.y)}var ep={id:"filler",afterDatasetsUpdate(e,t,s){const r=(e.data.datasets||[]).length,a=[];let n,i,l,o;for(i=0;i<r;++i)n=e.getDatasetMeta(i),l=n.dataset,o=null,l&&l.options&&l instanceof Em&&(o={visible:e.isDatasetVisible(i),index:i,fill:Bm(l,i,r),chart:e,axis:n.controller.options.indexAxis,scale:n.vScale,line:l}),n.$filler=o,a.push(o);for(i=0;i<r;++i)o=a[i],o&&!1!==o.fill&&(o.fill=Hm(a,i,s.propagate))},beforeDraw(e,t,s){const r="beforeDraw"===s.drawTime,a=e.getSortedVisibleDatasetMetas(),n=e.chartArea;for(let i=a.length-1;i>=0;--i){const t=a[i].$filler;t&&(t.line.updateControlPoints(n,t.axis),r&&t.fill&&Qm(e.ctx,t,n))}},beforeDatasetsDraw(e,t,s){if("beforeDatasetsDraw"!==s.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let a=r.length-1;a>=0;--a){const t=r[a].$filler;Um(t)&&Qm(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,s){const r=t.meta.$filler;Um(r)&&"beforeDatasetDraw"===s.drawTime&&Qm(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const tp=(e,t)=>{let{boxHeight:s=t,boxWidth:r=t}=e;return e.usePointStyle&&(s=Math.min(s,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:s,itemHeight:Math.max(t,s)}};class sp extends Sh{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=wo(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,s)=>e.sort(t,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const s=e.labels,r=od(s.font),a=r.size,n=this._computeTitleHeight(),{boxWidth:i,itemHeight:l}=tp(s,a);let o,c;t.font=r.string,this.isHorizontal()?(o=this.maxWidth,c=this._fitRows(n,a,i,l)+10):(c=this.maxHeight,o=this._fitCols(n,r,i,l)+10),this.width=Math.min(o,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,r){const{ctx:a,maxWidth:n,options:{labels:{padding:i}}}=this,l=this.legendHitBoxes=[],o=this.lineWidths=[0],c=r+i;let d=e;a.textAlign="left",a.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,m)=>{const p=s+t/2+a.measureText(e.text).width;(0===m||o[o.length-1]+p+2*i>n)&&(d+=c,o[o.length-(m>0?0:1)]=0,h+=c,u++),l[m]={left:0,top:h,row:u,width:p,height:r},o[o.length-1]+=p+i}),d}_fitCols(e,t,s,r){const{ctx:a,maxHeight:n,options:{labels:{padding:i}}}=this,l=this.legendHitBoxes=[],o=this.columnSizes=[],c=n-e;let d=i,u=0,h=0,m=0,p=0;return this.legendItems.forEach((e,n)=>{const{itemWidth:x,itemHeight:f}=function(e,t,s,r,a){const n=function(e,t,s,r){let a=e.text;a&&"string"!==typeof a&&(a=a.reduce((e,t)=>e.length>t.length?e:t));return t+s.size/2+r.measureText(a).width}(r,e,t,s),i=function(e,t,s){let r=e;"string"!==typeof t.text&&(r=rp(t,s));return r}(a,r,t.lineHeight);return{itemWidth:n,itemHeight:i}}(s,t,a,e,r);n>0&&h+f+2*i>c&&(d+=u+i,o.push({width:u,height:h}),m+=u+i,p++,u=h=0),l[n]={left:m,top:h,col:p,width:x,height:f},u=Math.max(u,x),h+=f+i}),d+=u,o.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:r},rtl:a}}=this,n=Yd(a,this.left,this.width);if(this.isHorizontal()){let a=0,i=gc(s,this.left+r,this.right-this.lineWidths[a]);for(const l of t)a!==l.row&&(a=l.row,i=gc(s,this.left+r,this.right-this.lineWidths[a])),l.top+=this.top+e+r,l.left=n.leftForLtr(n.x(i),l.width),i+=l.width+r}else{let a=0,i=gc(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const l of t)l.col!==a&&(a=l.col,i=gc(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),l.top=i,l.left+=this.left+r,l.left=n.leftForLtr(n.x(l.left),l.width),i+=l.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Gc(e,this),this._draw(),Yc(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:r}=this,{align:a,labels:n}=e,i=Fc.color,l=Yd(e.rtl,this.left,this.width),o=od(n.font),{padding:c}=n,d=o.size,u=d/2;let h;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=o.string;const{boxWidth:m,boxHeight:p,itemHeight:x}=tp(n,d),f=this.isHorizontal(),g=this._computeTitleHeight();h=f?{x:gc(a,this.left+c,this.right-s[0]),y:this.top+c+g,line:0}:{x:this.left+c,y:gc(a,this.top+g+c,this.bottom-t[0].height),line:0},Qd(this.ctx,e.textDirection);const b=x+c;this.legendItems.forEach((y,v)=>{r.strokeStyle=y.fontColor,r.fillStyle=y.fontColor;const j=r.measureText(y.text).width,N=l.textAlign(y.textAlign||(y.textAlign=n.textAlign)),w=m+u+j;let k=h.x,S=h.y;l.setWidth(this.width),f?v>0&&k+w+c>this.right&&(S=h.y+=b,h.line++,k=h.x=gc(a,this.left+c,this.right-s[h.line])):v>0&&S+b>this.bottom&&(k=h.x=k+t[h.line].width+c,h.line++,S=h.y=gc(a,this.top+g+c,this.bottom-t[h.line].height));if(function(e,t,s){if(isNaN(m)||m<=0||isNaN(p)||p<0)return;r.save();const a=jo(s.lineWidth,1);if(r.fillStyle=jo(s.fillStyle,i),r.lineCap=jo(s.lineCap,"butt"),r.lineDashOffset=jo(s.lineDashOffset,0),r.lineJoin=jo(s.lineJoin,"miter"),r.lineWidth=a,r.strokeStyle=jo(s.strokeStyle,i),r.setLineDash(jo(s.lineDash,[])),n.usePointStyle){const i={radius:p*Math.SQRT2/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:a},o=l.xPlus(e,m/2);qc(r,i,o,t+u,n.pointStyleWidth&&m)}else{const n=t+Math.max((d-p)/2,0),i=l.leftForLtr(e,m),o=id(s.borderRadius);r.beginPath(),Object.values(o).some(e=>0!==e)?Zc(r,{x:i,y:n,w:m,h:p,radius:o}):r.rect(i,n,m,p),r.fill(),0!==a&&r.stroke()}r.restore()}(l.x(k),S,y),k=((e,t,s,r)=>e===(r?"left":"right")?s:"center"===e?(t+s)/2:t)(N,k+m+u,f?k+w:this.right,e.rtl),function(e,t,s){Jc(r,s.text,e,t+x/2,o,{strikethrough:s.hidden,textAlign:l.textAlign(s.textAlign)})}(l.x(k),S,y),f)h.x+=w+c;else if("string"!==typeof y.text){const e=o.lineHeight;h.y+=rp(y,e)+c}else h.y+=b}),$d(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=od(t.font),r=ld(t.padding);if(!t.display)return;const a=Yd(e.rtl,this.left,this.width),n=this.ctx,i=t.position,l=s.size/2,o=r.top+l;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+o,d=gc(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=o+gc(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=gc(i,d,d+u);n.textAlign=a.textAlign(fc(i)),n.textBaseline="middle",n.strokeStyle=t.color,n.fillStyle=t.color,n.font=s.string,Jc(n,t.text,h,c,s)}_computeTitleHeight(){const e=this.options.title,t=od(e.font),s=ld(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,r,a;if(lc(e,this.left,this.right)&&lc(t,this.top,this.bottom))for(a=this.legendHitBoxes,s=0;s<a.length;++s)if(r=a[s],lc(e,r.left,r.left+r.width)&&lc(t,r.top,r.top+r.height))return this.legendItems[s];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const n=this._hoveredItem,i=(a=s,null!==(r=n)&&null!==a&&r.datasetIndex===a.datasetIndex&&r.index===a.index);n&&!i&&wo(t.onLeave,[e,n,this],this),this._hoveredItem=s,s&&!i&&wo(t.onHover,[e,s,this],this)}else s&&wo(t.onClick,[e,s,this],this);var r,a}}function rp(e,t){return t*(e.text?e.text.length:0)}var ap={id:"legend",_element:sp,start(e,t,s){const r=e.legend=new sp({ctx:e.ctx,options:s,chart:e});lh.configure(e,r,s),lh.addBox(e,r)},stop(e){lh.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const r=e.legend;lh.configure(e,r,s),r.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const r=t.datasetIndex,a=s.chart;a.isDatasetVisible(r)?(a.hide(r),t.hidden=!0):(a.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:r,textAlign:a,color:n,useBorderRadius:i,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const o=e.controller.getStyle(s?0:void 0),c=ld(o.borderWidth);return{text:t[e.index].label,fillStyle:o.backgroundColor,fontColor:n,hidden:!e.visible,lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:o.borderColor,pointStyle:r||o.pointStyle,rotation:o.rotation,textAlign:a||o.textAlign,borderRadius:i&&(l||o.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class np extends Sh{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=go(s.text)?s.text.length:1;this._padding=ld(s.padding);const a=r*od(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:s,bottom:r,right:a,options:n}=this,i=n.align;let l,o,c,d=0;return this.isHorizontal()?(o=gc(i,s,a),c=t+e,l=a-s):("left"===n.position?(o=s+e,c=gc(i,r,t),d=-.5*Fo):(o=a-e,c=gc(i,t,r),d=.5*Fo),l=r-t),{titleX:o,titleY:c,maxWidth:l,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=od(t.font),r=s.lineHeight/2+this._padding.top,{titleX:a,titleY:n,maxWidth:i,rotation:l}=this._drawArgs(r);Jc(e,t.text,0,0,s,{color:t.color,maxWidth:i,rotation:l,textAlign:fc(t.align),textBaseline:"middle",translation:[a,n]})}}var ip={id:"title",_element:np,start(e,t,s){!function(e,t){const s=new np({ctx:e.ctx,options:t,chart:e});lh.configure(e,s,t),lh.addBox(e,s),e.titleBlock=s}(e,s)},stop(e){const t=e.titleBlock;lh.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,s){const r=e.titleBlock;lh.configure(e,r,s),r.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const lp={average(e){if(!e.length)return!1;let t,s,r=new Set,a=0,n=0;for(t=0,s=e.length;t<s;++t){const s=e[t].element;if(s&&s.hasValue()){const e=s.tooltipPosition();r.add(e.x),a+=e.y,++n}}if(0===n||0===r.size)return!1;return{x:[...r].reduce((e,t)=>e+t)/r.size,y:a/n}},nearest(e,t){if(!e.length)return!1;let s,r,a,n=t.x,i=t.y,l=Number.POSITIVE_INFINITY;for(s=0,r=e.length;s<r;++s){const r=e[s].element;if(r&&r.hasValue()){const e=sc(t,r.getCenterPoint());e<l&&(l=e,a=r)}}if(a){const e=a.tooltipPosition();n=e.x,i=e.y}return{x:n,y:i}}};function op(e,t){return t&&(go(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function cp(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function dp(e,t){const{element:s,datasetIndex:r,index:a}=t,n=e.getDatasetMeta(r).controller,{label:i,value:l}=n.getLabelAndValue(a);return{chart:e,label:i,parsed:n.getParsed(a),raw:e.data.datasets[r].data[a],formattedValue:l,dataset:n.getDataset(),dataIndex:a,datasetIndex:r,element:s}}function up(e,t){const s=e.chart.ctx,{body:r,footer:a,title:n}=e,{boxWidth:i,boxHeight:l}=t,o=od(t.bodyFont),c=od(t.titleFont),d=od(t.footerFont),u=n.length,h=a.length,m=r.length,p=ld(t.padding);let x=p.height,f=0,g=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(g+=e.beforeBody.length+e.afterBody.length,u&&(x+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),g){x+=m*(t.displayColors?Math.max(l,o.lineHeight):o.lineHeight)+(g-m)*o.lineHeight+(g-1)*t.bodySpacing}h&&(x+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let b=0;const y=function(e){f=Math.max(f,s.measureText(e).width+b)};return s.save(),s.font=c.string,ko(e.title,y),s.font=o.string,ko(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?i+2+t.boxPadding:0,ko(r,e=>{ko(e.before,y),ko(e.lines,y),ko(e.after,y)}),b=0,s.font=d.string,ko(e.footer,y),s.restore(),f+=p.width,{width:f,height:x}}function hp(e,t,s,r){const{x:a,width:n}=s,{width:i,chartArea:{left:l,right:o}}=e;let c="center";return"center"===r?c=a<=(l+o)/2?"left":"right":a<=n/2?c="left":a>=i-n/2&&(c="right"),function(e,t,s,r){const{x:a,width:n}=r,i=s.caretSize+s.caretPadding;return"left"===e&&a+n+i>t.width||"right"===e&&a-n-i<0||void 0}(c,e,t,s)&&(c="center"),c}function mp(e,t,s){const r=s.yAlign||t.yAlign||function(e,t){const{y:s,height:r}=t;return s<r/2?"top":s>e.height-r/2?"bottom":"center"}(e,s);return{xAlign:s.xAlign||t.xAlign||hp(e,t,s,r),yAlign:r}}function pp(e,t,s,r){const{caretSize:a,caretPadding:n,cornerRadius:i}=e,{xAlign:l,yAlign:o}=s,c=a+n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=id(i);let p=function(e,t){let{x:s,width:r}=e;return"right"===t?s-=r:"center"===t&&(s-=r/2),s}(t,l);const x=function(e,t,s){let{y:r,height:a}=e;return"top"===t?r+=s:r-="bottom"===t?a+s:a/2,r}(t,o,c);return"center"===o?"left"===l?p+=c:"right"===l&&(p-=c):"left"===l?p-=Math.max(d,h)+a:"right"===l&&(p+=Math.max(u,m)+a),{x:ic(p,0,r.width-t.width),y:ic(x,0,r.height-t.height)}}function xp(e,t,s){const r=ld(s.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function fp(e){return op([],cp(e))}function gp(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const bp={beforeTitle:po,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,r=s?s.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return s[t.dataIndex]}return""},afterTitle:po,beforeBody:po,beforeLabel:po,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return fo(s)||(t+=s),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:po,afterBody:po,beforeFooter:po,footer:po,afterFooter:po};function yp(e,t,s,r){const a=e[t].call(s,r);return"undefined"===typeof a?bp[t].call(s,r):a}class vp extends Sh{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&t.options.animation&&s.animations,a=new du(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,s=this._tooltipItems,dd(e,{tooltip:t,tooltipItems:s,type:"tooltip"})));var e,t,s}getTitle(e,t){const{callbacks:s}=t,r=yp(s,"beforeTitle",this,e),a=yp(s,"title",this,e),n=yp(s,"afterTitle",this,e);let i=[];return i=op(i,cp(r)),i=op(i,cp(a)),i=op(i,cp(n)),i}getBeforeBody(e,t){return fp(yp(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,r=[];return ko(e,e=>{const t={before:[],lines:[],after:[]},a=gp(s,e);op(t.before,cp(yp(a,"beforeLabel",this,e))),op(t.lines,yp(a,"label",this,e)),op(t.after,cp(yp(a,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return fp(yp(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,r=yp(s,"beforeFooter",this,e),a=yp(s,"footer",this,e),n=yp(s,"afterFooter",this,e);let i=[];return i=op(i,cp(r)),i=op(i,cp(a)),i=op(i,cp(n)),i}_createItems(e){const t=this._active,s=this.chart.data,r=[],a=[],n=[];let i,l,o=[];for(i=0,l=t.length;i<l;++i)o.push(dp(this.chart,t[i]));return e.filter&&(o=o.filter((t,r,a)=>e.filter(t,r,a,s))),e.itemSort&&(o=o.sort((t,r)=>e.itemSort(t,r,s))),ko(o,t=>{const s=gp(e.callbacks,t);r.push(yp(s,"labelColor",this,t)),a.push(yp(s,"labelPointStyle",this,t)),n.push(yp(s,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=n,this.dataPoints=o,o}update(e,t){const s=this.options.setContext(this.getContext()),r=this._active;let a,n=[];if(r.length){const e=lp[s.position].call(this,r,this._eventPosition);n=this._createItems(s),this.title=this.getTitle(n,s),this.beforeBody=this.getBeforeBody(n,s),this.body=this.getBody(n,s),this.afterBody=this.getAfterBody(n,s),this.footer=this.getFooter(n,s);const t=this._size=up(this,s),i=Object.assign({},e,t),l=mp(this.chart,s,i),o=pp(s,i,l,this.chart);this.xAlign=l.xAlign,this.yAlign=l.yAlign,a={opacity:1,x:o.x,y:o.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=n,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,r){const a=this.getCaretPosition(e,s,r);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,s){const{xAlign:r,yAlign:a}=this,{caretSize:n,cornerRadius:i}=s,{topLeft:l,topRight:o,bottomLeft:c,bottomRight:d}=id(i),{x:u,y:h}=e,{width:m,height:p}=t;let x,f,g,b,y,v;return"center"===a?(y=h+p/2,"left"===r?(x=u,f=x-n,b=y+n,v=y-n):(x=u+m,f=x+n,b=y-n,v=y+n),g=x):(f="left"===r?u+Math.max(l,c)+n:"right"===r?u+m-Math.max(o,d)-n:this.caretX,"top"===a?(b=h,y=b-n,x=f-n,g=f+n):(b=h+p,y=b+n,x=f+n,g=f-n),v=b),{x1:x,x2:f,x3:g,y1:b,y2:y,y3:v}}drawTitle(e,t,s){const r=this.title,a=r.length;let n,i,l;if(a){const o=Yd(s.rtl,this.x,this.width);for(e.x=xp(this,s.titleAlign,s),t.textAlign=o.textAlign(s.titleAlign),t.textBaseline="middle",n=od(s.titleFont),i=s.titleSpacing,t.fillStyle=s.titleColor,t.font=n.string,l=0;l<a;++l)t.fillText(r[l],o.x(e.x),e.y+n.lineHeight/2),e.y+=n.lineHeight+i,l+1===a&&(e.y+=s.titleMarginBottom-i)}}_drawColorBox(e,t,s,r,a){const n=this.labelColors[s],i=this.labelPointStyles[s],{boxHeight:l,boxWidth:o}=a,c=od(a.bodyFont),d=xp(this,"left",a),u=r.x(d),h=l<c.lineHeight?(c.lineHeight-l)/2:0,m=t.y+h;if(a.usePointStyle){const t={radius:Math.min(o,l)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},s=r.leftForLtr(u,o)+o/2,c=m+l/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Bc(e,t,s,c),e.strokeStyle=n.borderColor,e.fillStyle=n.backgroundColor,Bc(e,t,s,c)}else{e.lineWidth=bo(n.borderWidth)?Math.max(...Object.values(n.borderWidth)):n.borderWidth||1,e.strokeStyle=n.borderColor,e.setLineDash(n.borderDash||[]),e.lineDashOffset=n.borderDashOffset||0;const t=r.leftForLtr(u,o),s=r.leftForLtr(r.xPlus(u,1),o-2),i=id(n.borderRadius);Object.values(i).some(e=>0!==e)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Zc(e,{x:t,y:m,w:o,h:l,radius:i}),e.fill(),e.stroke(),e.fillStyle=n.backgroundColor,e.beginPath(),Zc(e,{x:s,y:m+1,w:o-2,h:l-2,radius:i}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,m,o,l),e.strokeRect(t,m,o,l),e.fillStyle=n.backgroundColor,e.fillRect(s,m+1,o-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:r}=this,{bodySpacing:a,bodyAlign:n,displayColors:i,boxHeight:l,boxWidth:o,boxPadding:c}=s,d=od(s.bodyFont);let u=d.lineHeight,h=0;const m=Yd(s.rtl,this.x,this.width),p=function(s){t.fillText(s,m.x(e.x+h),e.y+u/2),e.y+=u+a},x=m.textAlign(n);let f,g,b,y,v,j,N;for(t.textAlign=n,t.textBaseline="middle",t.font=d.string,e.x=xp(this,x,s),t.fillStyle=s.bodyColor,ko(this.beforeBody,p),h=i&&"right"!==x?"center"===n?o/2+c:o+2+c:0,y=0,j=r.length;y<j;++y){for(f=r[y],g=this.labelTextColors[y],t.fillStyle=g,ko(f.before,p),b=f.lines,i&&b.length&&(this._drawColorBox(t,e,y,m,s),u=Math.max(d.lineHeight,l)),v=0,N=b.length;v<N;++v)p(b[v]),u=d.lineHeight;ko(f.after,p)}h=0,u=d.lineHeight,ko(this.afterBody,p),e.y-=a}drawFooter(e,t,s){const r=this.footer,a=r.length;let n,i;if(a){const l=Yd(s.rtl,this.x,this.width);for(e.x=xp(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=l.textAlign(s.footerAlign),t.textBaseline="middle",n=od(s.footerFont),t.fillStyle=s.footerColor,t.font=n.string,i=0;i<a;++i)t.fillText(r[i],l.x(e.x),e.y+n.lineHeight/2),e.y+=n.lineHeight+s.footerSpacing}}drawBackground(e,t,s,r){const{xAlign:a,yAlign:n}=this,{x:i,y:l}=e,{width:o,height:c}=s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=id(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(i+d,l),"top"===n&&this.drawCaret(e,t,s,r),t.lineTo(i+o-u,l),t.quadraticCurveTo(i+o,l,i+o,l+u),"center"===n&&"right"===a&&this.drawCaret(e,t,s,r),t.lineTo(i+o,l+c-m),t.quadraticCurveTo(i+o,l+c,i+o-m,l+c),"bottom"===n&&this.drawCaret(e,t,s,r),t.lineTo(i+h,l+c),t.quadraticCurveTo(i,l+c,i,l+c-h),"center"===n&&"left"===a&&this.drawCaret(e,t,s,r),t.lineTo(i,l+d),t.quadraticCurveTo(i,l,i+d,l),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,r=s&&s.x,a=s&&s.y;if(r||a){const s=lp[e.position].call(this,this._active,this._eventPosition);if(!s)return;const n=this._size=up(this,e),i=Object.assign({},s,this._size),l=mp(t,e,i),o=pp(e,i,l,t);r._to===o.x&&a._to===o.y||(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=n.width,this.height=n.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,o))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const n=ld(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=s,this.drawBackground(a,e,r,t),Qd(e,t.textDirection),a.y+=n.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),$d(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,r=e.map(e=>{let{datasetIndex:t,index:s}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[s],index:s}}),a=!So(s,r),n=this._positionChanged(r,t);(a||n)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],n=this._getActiveElements(e,a,t,s),i=this._positionChanged(n,e),l=t||!So(n,a)||i;return l&&(this._active=n,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,s,r){const a=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const n=this.chart.getElementsAtEventForMode(e,a.mode,a,s);return a.reverse&&n.reverse(),n}_positionChanged(e,t){const{caretX:s,caretY:r,options:a}=this,n=lp[a.position].call(this,e,t);return!1!==n&&(s!==n.x||r!==n.y)}}Wt(vp,"positioners",lp);var jp={id:"tooltip",_element:vp,positioners:lp,afterInit(e,t,s){s&&(e.tooltip=new vp({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",Yt(Yt({},s),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bp},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Np(e,t,s,r){const a=e.indexOf(t);if(-1===a)return((e,t,s,r)=>("string"===typeof t?(s=e.push(t)-1,r.unshift({index:s,label:t})):isNaN(t)&&(s=null),s))(e,t,s,r);return a!==e.lastIndexOf(t)?s:a}function wp(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class kp extends Dh{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:s,label:r}of t)e[s]===r&&e.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(fo(e))return null;const s=this.getLabels();return((e,t)=>null===e?null:ic(Math.round(e),0,t))(t=isFinite(t)&&s[t]===e?t:Np(s,e,jo(t,e),this._addedLabels),s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(s=0),t||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,r=[];let a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let n=e;n<=t;n++)r.push({value:n});return r}getLabelForValue(e){return wp.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Sp(e,t){const s=[],{bounds:r,step:a,min:n,max:i,precision:l,count:o,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=a||1,m=c-1,{min:p,max:x}=t,f=!fo(n),g=!fo(i),b=!fo(o),y=(x-p)/(d+1);let v,j,N,w,k=$o((x-p)/m/h)*h;if(k<1e-14&&!f&&!g)return[{value:p},{value:x}];w=Math.ceil(x/k)-Math.floor(p/k),w>m&&(k=$o(w*k/m/h)*h),fo(l)||(v=Math.pow(10,l),k=Math.ceil(k*v)/v),"ticks"===r?(j=Math.floor(p/k)*k,N=Math.ceil(x/k)*k):(j=p,N=x),f&&g&&a&&function(e,t){const s=Math.round(e);return s-t<=e&&s+t>=e}((i-n)/a,k/1e3)?(w=Math.round(Math.min((i-n)/k,c)),k=(i-n)/w,j=n,N=i):b?(j=f?n:j,N=g?i:N,w=o-1,k=(N-j)/w):(w=(N-j)/k,w=Qo(w,Math.round(w),k/1e3)?Math.round(w):Math.ceil(w));const S=Math.max(ec(k),ec(j));v=Math.pow(10,fo(l)?S:l),j=Math.round(j*v)/v,N=Math.round(N*v)/v;let C=0;for(f&&(u&&j!==n?(s.push({value:n}),j<n&&C++,Qo(Math.round((j+C*k)*v)/v,n,Cp(n,y,e))&&C++):j<n&&C++);C<w;++C){const e=Math.round((j+C*k)*v)/v;if(g&&e>i)break;s.push({value:e})}return g&&u&&N!==i?s.length&&Qo(s[s.length-1].value,i,Cp(i,y,e))?s[s.length-1].value=i:s.push({value:i}):g&&N!==i||s.push({value:N}),s}function Cp(e,t,s){let{horizontal:r,minRotation:a}=s;const n=Jo(a),i=(r?Math.sin(n):Math.cos(n))||.001,l=.75*t*(""+e).length;return Math.min(t/i,l)}Wt(kp,"id","category"),Wt(kp,"defaults",{ticks:{callback:wp}});class Ep extends Dh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return fo(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:r,max:a}=this;const n=e=>r=t?r:e,i=e=>a=s?a:e;if(e){const e=Yo(r),t=Yo(a);e<0&&t<0?i(0):e>0&&t>0&&n(0)}if(r===a){let t=0===a?1:Math.abs(.05*a);i(a+t),e||n(r-t)}this.min=r,this.max=a}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:s,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),s=s||11),s&&(t=Math.min(s,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r=Sp({maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Xo(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-t)/Math.max(e.length-1,1)/2;t-=r,s+=r}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return Rc(e,this.chart.options.locale,this.options.ticks.format)}}class _p extends Ep{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=yo(e)?e:0,this.max=yo(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=Jo(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Wt(_p,"id","linear"),Wt(_p,"defaults",{ticks:{callback:Ac.formatters.numeric}});const Tp=e=>Math.floor(Go(e)),Rp=(e,t)=>Math.pow(10,Tp(e)+t);function Mp(e){return 1===e/Math.pow(10,Tp(e))}function Ap(e,t,s){const r=Math.pow(10,s),a=Math.floor(e/r);return Math.ceil(t/r)-a}function Pp(e,t){let{min:s,max:r}=t;s=vo(e.min,s);const a=[],n=Tp(s);let i=function(e,t){let s=Tp(t-e);for(;Ap(e,t,s)>10;)s++;for(;Ap(e,t,s)<10;)s--;return Math.min(s,Tp(e))}(s,r),l=i<0?Math.pow(10,Math.abs(i)):1;const o=Math.pow(10,i),c=n>i?Math.pow(10,n):0,d=Math.round((s-c)*l)/l,u=Math.floor((s-c)/o/10)*o*10;let h=Math.floor((d-u)/Math.pow(10,i)),m=vo(e.min,Math.round((c+u+h*Math.pow(10,i))*l)/l);for(;m<r;)a.push({value:m,major:Mp(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,l=i>=0?1:l),m=Math.round((c+u+h*Math.pow(10,i))*l)/l;const p=vo(e.max,m);return a.push({value:p,major:Mp(p),significand:h}),a}class Op extends Dh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const s=Ep.prototype.parse.apply(this,[e,t]);if(0!==s)return yo(s)&&s>0?s:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=yo(e)?Math.max(0,e):null,this.max=yo(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!yo(this._userMin)&&(this.min=e===Rp(this.min,0)?Rp(this.min,-1):Rp(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let s=this.min,r=this.max;const a=t=>s=e?s:t,n=e=>r=t?r:e;s===r&&(s<=0?(a(1),n(10)):(a(Rp(s,-1)),n(Rp(r,1)))),s<=0&&a(Rp(r,-1)),r<=0&&n(Rp(s,1)),this.min=s,this.max=r}buildTicks(){const e=this.options,t=Pp({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Xo(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Rc(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Go(e),this._valueRange=Go(this.max)-Go(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Go(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Dp(e){const t=e.ticks;if(t.display&&e.display){const e=ld(t.backdropPadding);return jo(t.font&&t.font.size,Fc.font.size)+e.height}return 0}function Ip(e,t,s){return s=go(s)?s:[s],{w:Vc(e,t.string,s),h:s.length*t.lineHeight}}function Lp(e,t,s,r,a){return e===r||e===a?{start:t-s/2,end:t+s/2}:e<r||e>a?{start:t-s,end:t}:{start:t,end:t+s}}function Fp(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},s=Object.assign({},t),r=[],a=[],n=e._pointLabels.length,i=e.options.pointLabels,l=i.centerPointLabels?Fo/n:0;for(let o=0;o<n;o++){const n=i.setContext(e.getPointLabelContext(o));a[o]=n.padding;const c=e.getPointPosition(o,e.drawingArea+a[o],l),d=od(n.font),u=Ip(e.ctx,d,e._pointLabels[o]);r[o]=u;const h=ac(e.getIndexAngle(o)+l),m=Math.round(Zo(h));zp(s,t,h,Lp(m,c.x,u.w,0,180),Lp(m,c.y,u.h,90,270))}e.setCenterPoint(t.l-s.l,s.r-t.r,t.t-s.t,s.b-t.b),e._pointLabelItems=function(e,t,s){const r=[],a=e._pointLabels.length,n=e.options,{centerPointLabels:i,display:l}=n.pointLabels,o={extra:Dp(n)/2,additionalAngle:i?Fo/a:0};let c;for(let d=0;d<a;d++){o.padding=s[d],o.size=t[d];const a=Vp(e,d,o);r.push(a),"auto"===l&&(a.visible=Up(a,c),a.visible&&(c=a))}return r}(e,r,a)}function zp(e,t,s,r,a){const n=Math.abs(Math.sin(s)),i=Math.abs(Math.cos(s));let l=0,o=0;r.start<t.l?(l=(t.l-r.start)/n,e.l=Math.min(e.l,t.l-l)):r.end>t.r&&(l=(r.end-t.r)/n,e.r=Math.max(e.r,t.r+l)),a.start<t.t?(o=(t.t-a.start)/i,e.t=Math.min(e.t,t.t-o)):a.end>t.b&&(o=(a.end-t.b)/i,e.b=Math.max(e.b,t.b+o))}function Vp(e,t,s){const r=e.drawingArea,{extra:a,additionalAngle:n,padding:i,size:l}=s,o=e.getPointPosition(t,r+a+i,n),c=Math.round(Zo(ac(o.angle+Bo))),d=function(e,t,s){90===s||270===s?e-=t/2:(s>270||s<90)&&(e-=t);return e}(o.y,l.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,s){"right"===s?e-=t:"center"===s&&(e-=t/2);return e}(o.x,l.w,u);return{visible:!0,x:o.x,y:d,textAlign:u,left:h,top:d,right:h+l.w,bottom:d+l.h}}function Up(e,t){if(!t)return!0;const{left:s,top:r,right:a,bottom:n}=e;return!(Wc({x:s,y:r},t)||Wc({x:s,y:n},t)||Wc({x:a,y:r},t)||Wc({x:a,y:n},t))}function Hp(e,t,s){const{left:r,top:a,right:n,bottom:i}=s,{backdropColor:l}=t;if(!fo(l)){const s=id(t.borderRadius),o=ld(t.backdropPadding);e.fillStyle=l;const c=r-o.left,d=a-o.top,u=n-r+o.width,h=i-a+o.height;Object.values(s).some(e=>0!==e)?(e.beginPath(),Zc(e,{x:c,y:d,w:u,h:h,radius:s}),e.fill()):e.fillRect(c,d,u,h)}}function Bp(e,t,s,r){const{ctx:a}=e;if(s)a.arc(e.xCenter,e.yCenter,t,0,zo);else{let s=e.getPointPosition(0,t);a.moveTo(s.x,s.y);for(let n=1;n<r;n++)s=e.getPointPosition(n,t),a.lineTo(s.x,s.y)}}Wt(Op,"id","logarithmic"),Wt(Op,"defaults",{ticks:{callback:Ac.formatters.logarithmic,major:{enabled:!0}}});class qp extends Ep{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ld(Dp(this.options)/2),t=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(t,s)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=yo(e)&&!isNaN(e)?e:0,this.max=yo(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Dp(this.options))}generateTickLabels(e){Ep.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const s=wo(this.options.pointLabels.callback,[e,t],this);return s||0===s?s:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?Fp(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,s,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((s-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,s,r))}getIndexAngle(e){return ac(e*(zo/(this._pointLabels.length||1))+Jo(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(fo(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(fo(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const s=t[e];return function(e,t,s){return dd(e,{label:s,index:t,type:"pointLabel"})}(this.getContext(),e,s)}}getPointPosition(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-Bo+s;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:s,right:r,bottom:a}=this._pointLabelItems[e];return{left:t,top:s,right:r,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),Bp(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:s,grid:r,border:a}=t,n=this._pointLabels.length;let i,l,o;if(t.pointLabels.display&&function(e,t){const{ctx:s,options:{pointLabels:r}}=e;for(let a=t-1;a>=0;a--){const t=e._pointLabelItems[a];if(!t.visible)continue;const n=r.setContext(e.getPointLabelContext(a));Hp(s,n,t);const i=od(n.font),{x:l,y:o,textAlign:c}=t;Jc(s,e._pointLabels[a],l,o+i.lineHeight/2,i,{color:n.color,textAlign:c,textBaseline:"middle"})}}(this,n),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){l=this.getDistanceFromCenterForValue(e.value);const s=this.getContext(t),i=r.setContext(s),o=a.setContext(s);!function(e,t,s,r,a){const n=e.ctx,i=t.circular,{color:l,lineWidth:o}=t;!i&&!r||!l||!o||s<0||(n.save(),n.strokeStyle=l,n.lineWidth=o,n.setLineDash(a.dash||[]),n.lineDashOffset=a.dashOffset,n.beginPath(),Bp(e,s,i,r),n.closePath(),n.stroke(),n.restore())}(this,i,l,n,o)}}),s.display){for(e.save(),i=n-1;i>=0;i--){const r=s.setContext(this.getPointLabelContext(i)),{color:a,lineWidth:n}=r;n&&a&&(e.lineWidth=n,e.strokeStyle=a,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),o=this.getPointPosition(i,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(o.x,o.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,s=t.ticks;if(!s.display)return;const r=this.getIndexAngle(0);let a,n;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,i)=>{if(0===i&&this.min>=0&&!t.reverse)return;const l=s.setContext(this.getContext(i)),o=od(l.font);if(a=this.getDistanceFromCenterForValue(this.ticks[i].value),l.showLabelBackdrop){e.font=o.string,n=e.measureText(r.label).width,e.fillStyle=l.backdropColor;const t=ld(l.backdropPadding);e.fillRect(-n/2-t.left,-a-o.size/2-t.top,n+t.width,o.size+t.height)}Jc(e,r.label,0,-a,o,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}}Wt(qp,"id","radialLinear"),Wt(qp,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ac.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),Wt(qp,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Wt(qp,"descriptors",{angleLines:{_fallback:"grid"}});const Wp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Gp=Object.keys(Wp);function Yp(e,t){return e-t}function Qp(e,t){if(fo(t))return null;const s=e._adapter,{parser:r,round:a,isoWeekday:n}=e._parseOpts;let i=t;return"function"===typeof r&&(i=r(i)),yo(i)||(i="string"===typeof r?s.parse(i,r):s.parse(i)),null===i?null:(a&&(i="week"!==a||!Ko(n)&&!0!==n?s.startOf(i,a):s.startOf(i,"isoWeek",n)),+i)}function $p(e,t,s,r){const a=Gp.length;for(let n=Gp.indexOf(e);n<a-1;++n){const e=Wp[Gp[n]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((s-t)/(a*e.size))<=r)return Gp[n]}return Gp[a-1]}function Kp(e,t,s){if(s){if(s.length){const{lo:r,hi:a}=oc(s,t);e[s[r]>=t?s[r]:s[a]]=!0}}else e[t]=!0}function Xp(e,t,s){const r=[],a={},n=t.length;let i,l;for(i=0;i<n;++i)l=t[i],a[l]=i,r.push({value:l,major:!1});return 0!==n&&s?function(e,t,s,r){const a=e._adapter,n=+a.startOf(t[0].value,r),i=t[t.length-1].value;let l,o;for(l=n;l<=i;l=+a.add(l,1,r))o=s[l],o>=0&&(t[o].major=!0);return t}(e,r,a,s):r}class Jp extends Dh{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e.time||(e.time={}),r=this._adapter=new Uu(e.adapters.date);r.init(t),Ro(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Qp(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:r,max:a,minDefined:n,maxDefined:i}=this.getUserBounds();function l(e){n||isNaN(e.min)||(r=Math.min(r,e.min)),i||isNaN(e.max)||(a=Math.max(a,e.max))}n&&i||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),r=yo(r)&&!isNaN(r)?r:+t.startOf(Date.now(),s),a=yo(a)&&!isNaN(a)?a:+t.endOf(Date.now(),s)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,r="labels"===s.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,n=function(e,t,s){let r=0,a=e.length;for(;r<a&&e[r]<t;)r++;for(;a>r&&e[a-1]>s;)a--;return r>0||a<e.length?e.slice(r,a):e}(r,a,this.max);return this._unit=t.unit||(s.autoSkip?$p(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,s,r,a){for(let n=Gp.length-1;n>=Gp.indexOf(s);n--){const s=Gp[n];if(Wp[s].common&&e._adapter.diff(a,r,s)>=t-1)return s}return Gp[s?Gp.indexOf(s):0]}(this,n.length,t.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&"year"!==this._unit?function(e){for(let t=Gp.indexOf(e)+1,s=Gp.length;t<s;++t)if(Wp[Gp[t]].common)return Gp[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&n.reverse(),Xp(this,n,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,a=0;this.options.offset&&s.length&&(e=this.getDecimalForValue(s[0]),r=1===s.length?1-e:(this.getDecimalForValue(s[1])-e)/2,t=this.getDecimalForValue(s[s.length-1]),a=1===s.length?t:(t-this.getDecimalForValue(s[s.length-2]))/2);const n=s.length<3?.5:.25;r=ic(r,0,n),a=ic(a,0,n),this._offsets={start:r,end:a,factor:1/(r+1+a)}}_generate(){const e=this._adapter,t=this.min,s=this.max,r=this.options,a=r.time,n=a.unit||$p(a.minUnit,t,s,this._getLabelCapacity(t)),i=jo(r.ticks.stepSize,1),l="week"===n&&a.isoWeekday,o=Ko(l)||!0===l,c={};let d,u,h=t;if(o&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,o?"day":n),e.diff(s,t,n)>1e5*i)throw new Error(t+" and "+s+" are too far apart with stepSize of "+i+" "+n);const m="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<s;d=+e.add(d,i,n),u++)Kp(c,d,m);return d!==s&&"ticks"!==r.bounds&&1!==u||Kp(c,d,m),Object.keys(c).sort(Yp).map(e=>+e)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,a=t||s[r];return this._adapter.format(e,a)}_tickFormatFunction(e,t,s,r){const a=this.options,n=a.ticks.callback;if(n)return wo(n,[e,t,s],this);const i=a.time.displayFormats,l=this._unit,o=this._majorUnit,c=l&&i[l],d=o&&i[o],u=s[t],h=o&&d&&u&&u.major;return this._adapter.format(e,r||(h?d:c))}generateTickLabels(e){let t,s,r;for(t=0,s=e.length;t<s;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,r=Jo(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(r),n=Math.sin(r),i=this._resolveTickFontOptions(0).size;return{w:s*a+i*n,h:s*n+i*a}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,r=s[t.unit]||s.millisecond,a=this._tickFormatFunction(e,0,Xp(this,[e],this._majorUnit),r),n=this._getLabelSize(a),i=Math.floor(this.isHorizontal()?this.width/n.w:this.height/n.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,s=this._cache.data||[];if(s.length)return s;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)s=s.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const r=this.getLabels();for(t=0,s=r.length;t<s;++t)e.push(Qp(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return mc(e.sort(Yp))}}function Zp(e,t,s){let r,a,n,i,l=0,o=e.length-1;s?(t>=e[l].pos&&t<=e[o].pos&&({lo:l,hi:o}=cc(e,"pos",t)),({pos:r,time:n}=e[l]),({pos:a,time:i}=e[o])):(t>=e[l].time&&t<=e[o].time&&({lo:l,hi:o}=cc(e,"time",t)),({time:r,pos:n}=e[l]),({time:a,pos:i}=e[o]));const c=a-r;return c?n+(i-n)*(t-r)/c:n}Wt(Jp,"id","time"),Wt(Jp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class ex extends Jp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Zp(t,this.min),this._tableRange=Zp(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,r=[],a=[];let n,i,l,o,c;for(n=0,i=e.length;n<i;++n)o=e[n],o>=t&&o<=s&&r.push(o);if(r.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(n=0,i=r.length;n<i;++n)c=r[n+1],l=r[n-1],o=r[n],Math.round((c+l)/2)!==o&&a.push({time:o,pos:n/(i-1)});return a}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return s.includes(e)&&s.length||s.splice(0,0,e),s.includes(t)&&1!==s.length||s.push(t),s.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return e=t.length&&s.length?this.normalize(t.concat(s)):t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Zp(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return Zp(this._table,s*this._tableRange+this._minPos,!0)}}Wt(ex,"id","timeseries"),Wt(ex,"defaults",Jp.defaults);const tx=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],sx="label";function rx(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function ax(e,t){e.labels=t}function nx(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sx;const r=[];e.datasets=t.map(t=>{const a=e.datasets.find(e=>e[s]===t[s]);return a&&t.data&&!r.includes(a)?(r.push(a),Object.assign(a,t),a):Yt({},t)})}function ix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sx;const s={labels:[],datasets:[]};return ax(s,e.labels),nx(s,e.datasets,t),s}function lx(e,t){const{height:s=150,width:r=300,redraw:a=!1,datasetIdKey:i,type:l,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:h}=e,m=Ir(e,tx),p=(0,n.useRef)(null),x=(0,n.useRef)(null),f=()=>{p.current&&(x.current=new hm(p.current,{type:l,data:ix(o,i),options:c&&Yt({},c),plugins:d}),rx(t,x.current))},g=()=>{rx(t,null),x.current&&(x.current.destroy(),x.current=null)};return(0,n.useEffect)(()=>{!a&&x.current&&c&&function(e,t){const s=e.options;s&&t&&Object.assign(s,t)}(x.current,c)},[a,c]),(0,n.useEffect)(()=>{!a&&x.current&&ax(x.current.config.data,o.labels)},[a,o.labels]),(0,n.useEffect)(()=>{!a&&x.current&&o.datasets&&nx(x.current.config.data,o.datasets,i)},[a,o.datasets]),(0,n.useEffect)(()=>{x.current&&(a?(g(),setTimeout(f)):x.current.update(h))},[a,c,o.labels,o.datasets,h]),(0,n.useEffect)(()=>{x.current&&(g(),setTimeout(f))},[l]),(0,n.useEffect)(()=>(f(),()=>g()),[]),(0,yr.jsx)("canvas",Yt(Yt({ref:p,role:"img",height:s,width:r},m),{},{children:u}))}const ox=(0,n.forwardRef)(lx);function cx(e,t){return hm.register(t),(0,n.forwardRef)((t,s)=>(0,yr.jsx)(ox,Yt(Yt({},t),{},{ref:s,type:e})))}const dx=cx("line",Ou),ux=cx("bar",Mu),hx=cx("doughnut",Pu);hm.register(kp,_p,Tm,Em,Im,bm,ip,jp,ap,ep);const mx=function(){var e,t,s,r,a;const{toast:i,showToast:l,showSuccess:o,showError:c,hideToast:d}=mn(),[u,h]=(0,n.useState)(!0),[m,p]=(0,n.useState)("30"),[x,f]=(0,n.useState)(""),[g,b]=(0,n.useState)(""),[y,v]=(0,n.useState)(null),[j,N]=(0,n.useState)(null),[w,k]=(0,n.useState)([]),[S,C]=(0,n.useState)([]),[E,_]=(0,n.useState)([]);(0,n.useEffect)(()=>{T()},[m,x,g]);const T=async()=>{try{h(!0);const e={};if("custom"===m&&x&&g)e.startDate=x,e.endDate=g;else{const t=new Date,s=new Date;s.setDate(s.getDate()-parseInt(m)),e.startDate=s.toISOString().split("T")[0],e.endDate=t.toISOString().split("T")[0]}const[t,s,r,a,n]=await Promise.all([Sl(e),Cl(e),Nl(Yt(Yt({},e),{},{limit:10})),wl(e),kl(Yt(Yt({},e),{},{limit:10}))]);v(t),N(s),k(r.products||[]),C(a.categories||[]),_(n.clients||[])}catch(e){c("Erreur lors du chargement des donn\xe9es"),console.error(e)}finally{h(!1)}},R={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return e.toLocaleString("fr-FR")+" \u20ac"}}}}},M=y?{labels:(null===(e=y.daily)||void 0===e?void 0:e.map(e=>new Date(e.date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"})))||[],datasets:[{label:"Revenus (\u20ac)",data:(null===(t=y.daily)||void 0===t?void 0:t.map(e=>e.revenue||0))||[],borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!0,tension:.4},{label:"Commandes",data:(null===(s=y.daily)||void 0===s?void 0:s.map(e=>e.orders||0))||[],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4,yAxisID:"y1"}]}:null,A=Yt(Yt({},R),{},{scales:{y:Yt(Yt({},R.scales.y),{},{position:"left"}),y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{callback:function(e){return e}}}}}),P=S.length>0?{labels:S.map(e=>e.name||e.categoryName),datasets:[{data:S.map(e=>e.revenue||e.totalRevenue||0),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(251, 146, 60, 0.8)","rgba(168, 85, 247, 0.8)","rgba(236, 72, 153, 0.8)","rgba(14, 165, 233, 0.8)"],borderWidth:2,borderColor:"#fff"}]}:null,O=w.length>0?{labels:w.map(e=>e.name||e.productName).slice(0,10),datasets:[{label:"Quantit\xe9 vendue",data:w.map(e=>e.quantity||e.totalQuantity||0).slice(0,10),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1},{label:"Revenus (\u20ac)",data:w.map(e=>e.revenue||e.totalRevenue||0).slice(0,10),backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgb(34, 197, 94)",borderWidth:1,yAxisID:"y1"}]}:null,D=Yt(Yt({},R),{},{scales:{y:Yt(Yt({},R.scales.y),{},{position:"left",ticks:{callback:function(e){return e}}}),y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{callback:function(e){return e.toLocaleString("fr-FR")+" \u20ac"}}}}});return u&&!y?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)(hn,{toast:i,hideToast:d}),(0,yr.jsx)("div",{className:"flex justify-between items-center",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Analytics Avanc\xe9"}),(0,yr.jsx)("p",{className:"text-gray-600 mt-2",children:"Graphiques, tendances et analyses d\xe9taill\xe9es"})]})}),(0,yr.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsxs)("div",{className:"flex gap-2",children:[(0,yr.jsx)("button",{onClick:()=>{p("7"),f(""),b("")},className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("7"===m?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"7 jours"}),(0,yr.jsx)("button",{onClick:()=>{p("30"),f(""),b("")},className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("30"===m?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"30 jours"}),(0,yr.jsx)("button",{onClick:()=>{p("90"),f(""),b("")},className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("90"===m?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"90 jours"})]}),(0,yr.jsx)("input",{type:"date",value:x,onChange:e=>{f(e.target.value),p("custom")},placeholder:"Date d\xe9but",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,yr.jsx)("input",{type:"date",value:g,onChange:e=>{b(e.target.value),p("custom")},placeholder:"Date fin",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,yr.jsxs)("button",{onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold flex items-center justify-center gap-2",children:[(0,yr.jsx)(Ki,{className:"h-5 w-5"}),"Appliquer"]})]})}),j&&(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-6",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,yr.jsx)(Xr,{className:"h-8 w-8 text-green-600"}),j.revenueGrowth>=0?(0,yr.jsx)(sa,{className:"h-5 w-5 text-green-600"}):(0,yr.jsx)(Ml,{className:"h-5 w-5 text-red-600"})]}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Revenus totaux"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[(j.totalRevenue||0).toLocaleString("fr-FR")," \u20ac"]}),(0,yr.jsxs)("p",{className:"text-sm mt-2 ".concat(j.revenueGrowth>=0?"text-green-600":"text-red-600"),children:[j.revenueGrowth>=0?"+":"",(null===(r=j.revenueGrowth)||void 0===r?void 0:r.toFixed(1))||0,"%"]})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-xl p-6",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,yr.jsx)(Yr,{className:"h-8 w-8 text-blue-600"}),j.ordersGrowth>=0?(0,yr.jsx)(sa,{className:"h-5 w-5 text-green-600"}):(0,yr.jsx)(Ml,{className:"h-5 w-5 text-red-600"})]}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Commandes"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:j.totalOrders||0}),(0,yr.jsxs)("p",{className:"text-sm mt-2 ".concat(j.ordersGrowth>=0?"text-green-600":"text-red-600"),children:[j.ordersGrowth>=0?"+":"",(null===(a=j.ordersGrowth)||void 0===a?void 0:a.toFixed(1))||0,"%"]})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200 rounded-xl p-6",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,yr.jsx)(Qr,{className:"h-8 w-8 text-orange-600"})}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Panier moyen"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[(j.averageBasket||0).toFixed(2)," \u20ac"]}),(0,yr.jsxs)("p",{className:"text-sm mt-2 text-gray-600",children:[j.totalOrders||0," commandes"]})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-xl p-6",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,yr.jsx)(Wr,{className:"h-8 w-8 text-purple-600"})}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Clients actifs"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:j.activeClients||0}),(0,yr.jsxs)("p",{className:"text-sm mt-2 text-gray-600",children:[j.newClients||0," nouveaux"]})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yr.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,yr.jsx)(Al,{className:"h-6 w-6 text-blue-600"}),"\xc9volution Revenus & Commandes"]})}),(0,yr.jsx)("div",{className:"h-80",children:M&&(0,yr.jsx)(dx,{data:M,options:A})})]}),(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yr.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,yr.jsx)(Pl,{className:"h-6 w-6 text-green-600"}),"R\xe9partition par Cat\xe9gories"]})}),(0,yr.jsx)("div",{className:"h-80",children:P&&(0,yr.jsx)(hx,{data:P,options:R})})]})]}),(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yr.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,yr.jsx)(ta,{className:"h-6 w-6 text-orange-600"}),"Top 10 Produits"]})}),(0,yr.jsx)("div",{className:"h-80",children:O&&(0,yr.jsx)(ux,{data:O,options:D})})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,yr.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Top Cat\xe9gories"}),(0,yr.jsx)("div",{className:"space-y-3",children:S.slice(0,5).map((e,t)=>(0,yr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yr.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold",children:t+1}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.name||e.categoryName}),(0,yr.jsxs)("p",{className:"text-sm text-gray-500",children:[e.quantity||e.totalQuantity||0," unit\xe9s"]})]})]}),(0,yr.jsxs)("p",{className:"font-bold text-green-600",children:[(e.revenue||e.totalRevenue||0).toLocaleString("fr-FR")," \u20ac"]})]},t))})]}),(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,yr.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Top Clients"}),(0,yr.jsx)("div",{className:"space-y-3",children:E.slice(0,5).map((e,t)=>(0,yr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yr.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-white font-bold",children:t+1}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.name||e.shopName}),(0,yr.jsxs)("p",{className:"text-sm text-gray-500",children:[e.orders||e.totalOrders||0," commandes"]})]})]}),(0,yr.jsxs)("p",{className:"font-bold text-blue-600",children:[(e.revenue||e.totalRevenue||0).toLocaleString("fr-FR")," \u20ac"]})]},t))})]})]})]})},px=Br("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const xx=function(){const{toast:e,showToast:t,hideToast:s,showSuccess:r,showError:a}=mn(),[i,l]=(0,n.useState)({orders:!1,products:!1,sales:!1,suppliers:!1});return(0,yr.jsxs)("div",{className:"space-y-6",children:[e.visible&&(0,yr.jsx)(hn,{message:e.message,type:e.type,onClose:s}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:"Exports de donn\xe9es"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"T\xe9l\xe9chargez vos donn\xe9es au format Excel ou CSV"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,yr.jsx)(dl,{className:"w-6 h-6 text-blue-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-semibold text-gray-900",children:"Commandes"}),(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Format CSV/Excel"})]})]})}),(0,yr.jsxs)("button",{onClick:async()=>{try{l(e=>Yt(Yt({},e),{},{orders:!0})),await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await fr.get("/exports/orders",{params:Yt(Yt({},e),{},{format:"csv"}),responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");return r.href=s,r.setAttribute("download","commandes-".concat(Date.now(),".csv")),document.body.appendChild(r),r.click(),r.remove(),t.data}(),r("Export des commandes t\xe9l\xe9charg\xe9 avec succ\xe8s")}catch(e){a("Erreur lors de l'export des commandes"),console.error(e)}finally{l(e=>Yt(Yt({},e),{},{orders:!1}))}},disabled:i,className:"w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[(0,yr.jsx)(ra,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:"Exporter"})]})]}),(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,yr.jsx)(px,{className:"w-6 h-6 text-green-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-semibold text-gray-900",children:"Produits"}),(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Format CSV/Excel"})]})]})}),(0,yr.jsx)("button",{onClick:async()=>{try{l(e=>Yt(Yt({},e),{},{products:!0})),await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await fr.get("/exports/products",{params:Yt(Yt({},e),{},{format:"csv"}),responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");return r.href=s,r.setAttribute("download","produits-".concat(Date.now(),".csv")),document.body.appendChild(r),r.click(),r.remove(),t.data}(),r("Export des produits t\xe9l\xe9charg\xe9 avec succ\xe8s")}catch(e){a("Erreur lors de l'export des produits"),console.error(e)}finally{l(e=>Yt(Yt({},e),{},{products:!1}))}},disabled:i.products,className:"w-full mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:i.products?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{children:"Export..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ra,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:"Exporter"})]})})]}),(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,yr.jsx)(px,{className:"w-6 h-6 text-purple-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-semibold text-gray-900",children:"Ventes"}),(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Format Excel"})]})]})}),(0,yr.jsxs)("button",{onClick:async()=>{try{l(!0),await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await fr.get("/reports/sales",{params:Yt(Yt({},e),{},{format:"excel"}),responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");return r.href=s,r.setAttribute("download","rapport-ventes-".concat(Date.now(),".xlsx")),document.body.appendChild(r),r.click(),r.remove(),t.data}({period:"month"}),t("Export des ventes t\xe9l\xe9charg\xe9 avec succ\xe8s","success")}catch(e){a("Erreur lors de l'export des ventes")}finally{l(!1)}},disabled:i,className:"w-full mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[(0,yr.jsx)(ra,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:"Exporter"})]})]}),(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,yr.jsx)(dl,{className:"w-6 h-6 text-orange-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-semibold text-gray-900",children:"Fournisseurs"}),(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Format CSV"})]})]})}),(0,yr.jsx)("button",{onClick:async()=>{try{l(!0),await gl(),t("Export des fournisseurs t\xe9l\xe9charg\xe9 avec succ\xe8s","success")}catch(e){a("Erreur lors de l'export des fournisseurs")}finally{l(!1)}},disabled:i.suppliers,className:"w-full mt-4 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:i.suppliers?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{children:"Export..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ra,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:"Exporter"})]})})]})]})]})};const fx=function(){const{toast:e,showToast:t,hideToast:s,showSuccess:r,showError:a}=mn(),[i,l]=(0,n.useState)(!0),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{h()},[]);const h=async()=>{try{l(!0);const e=await async function(){return(await fr.get("/emails/templates")).data}();if(e.templates&&Array.isArray(e.templates)){const t=e.templates.map((e,t)=>({id:t+1,name:m(e),type:e}));c(t)}else e.data?c(e.data):c([{id:1,name:"Confirmation de commande",type:"order-confirmation"},{id:2,name:"Facture",type:"invoice"},{id:3,name:"Notification de livraison",type:"delivery-notification"},{id:4,name:"R\xe9initialisation de mot de passe",type:"password-reset"}])}catch(e){console.error("Erreur chargement templates",e),c([{id:1,name:"Confirmation de commande",type:"order-confirmation"},{id:2,name:"Facture",type:"invoice"},{id:3,name:"Notification de livraison",type:"delivery-notification"},{id:4,name:"R\xe9initialisation de mot de passe",type:"password-reset"}])}finally{l(!1)}},m=e=>({"order-confirmation":"Confirmation de commande",invoice:"Facture","delivery-notification":"Notification de livraison","password-reset":"R\xe9initialisation de mot de passe"}[e]||e);return(0,yr.jsxs)("div",{className:"space-y-6",children:[e.visible&&(0,yr.jsx)(hn,{message:e.message,type:e.type,onClose:s}),(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:"Templates d'emails"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"G\xe9rez les mod\xe8les d'emails envoy\xe9s aux clients"})]}),(0,yr.jsxs)("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center space-x-2",children:[(0,yr.jsx)(Nn,{className:"w-4 h-4"}),(0,yr.jsx)("span",{children:"Nouveau template"})]})]}),(0,yr.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(e=>(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("div",{className:"flex items-center",children:[(0,yr.jsx)(aa,{className:"w-5 h-5 text-gray-400 mr-3"}),(0,yr.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name})]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:e.type})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,yr.jsx)("button",{className:"text-blue-600 hover:text-blue-900",children:(0,yr.jsx)(hl,{className:"w-4 h-4"})}),(0,yr.jsx)("button",{className:"text-red-600 hover:text-red-900",children:(0,yr.jsx)(kn,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),i&&(0,yr.jsx)("div",{className:"flex justify-center py-12",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-200 border-t-primary-600"})}),!i&&0===o.length&&(0,yr.jsxs)("div",{className:"text-center py-12",children:[(0,yr.jsx)(aa,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-500",children:"Aucun template d'email trouv\xe9"})]}),d&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,yr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,yr.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Nouveau template"}),(0,yr.jsx)("p",{className:"text-gray-600 mb-4",children:"La cr\xe9ation de templates personnalis\xe9s sera disponible prochainement."}),(0,yr.jsx)("button",{onClick:()=>u(!1),className:"btn-secondary w-full",children:"Fermer"})]})})]})};const gx=function(){const{toast:e,showToast:t,showSuccess:s,showError:r,hideToast:a}=mn(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)({}),[d,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[N,w]=(0,n.useState)(null),[k,S]=(0,n.useState)([]),[C,E]=(0,n.useState)([]),[_,T]=(0,n.useState)([]),[R,M]=(0,n.useState)({basePrice:""}),[A,P]=(0,n.useState)({minQty:"",price:""}),[O,D]=(0,n.useState)({clientId:"",price:""});(0,n.useEffect)(()=>{I(),L()},[]);const I=async()=>{try{u(!0);const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/prices",{params:e})).data}();l(e.prices||[])}catch(e){r("Erreur lors du chargement des prix"),console.error(e)}finally{u(!1)}},L=async()=>{try{const e=await async function(){return(await fr.get("/prices/stats")).data}();c(e.stats||{})}catch(e){console.error("Erreur stats:",e)}},F=async e=>{try{const t=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await fr.get("/prices/history/".concat(e),{params:t})).data}(e);S(t.history||[])}catch(t){console.error(t)}},z=async e=>{try{const t=await async function(e){return(await fr.get("/prices/volume/".concat(e))).data}(e);E(t.volumePricing||[])}catch(t){console.error(t)}},V=async e=>{try{const t=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/prices/client-pricing",{params:e})).data}({productId:e});T(t.clientPricing||[])}catch(t){console.error(t)}},U=(i||[]).filter(e=>{var t,s;return(null===(t=e.productName)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(s=e.category)||void 0===s?void 0:s.toLowerCase().includes(h.toLowerCase()))});return d&&0===i.length?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)(hn,{toast:e,hideToast:a}),(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-900 to-green-600 bg-clip-text text-transparent",children:"Gestion des Prix"}),(0,yr.jsxs)("div",{className:"flex gap-2",children:[(0,yr.jsxs)("label",{className:"btn-secondary cursor-pointer",children:[(0,yr.jsx)(cl,{className:"h-5 w-5 mr-2"}),"Importer CSV",(0,yr.jsx)("input",{type:"file",accept:".csv",onChange:async e=>{const t=e.target.files[0];if(t)try{await async function(e){const t=new FormData;return t.append("file",e),(await fr.post("/prices/import-csv",t,{headers:{"Content-Type":"multipart/form-data"}})).data}(t),s("Import r\xe9ussi"),I()}catch(a){r("Erreur lors de l'import")}},className:"hidden"})]}),(0,yr.jsxs)("button",{onClick:async()=>{try{await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await fr.get("/prices/export-csv",{params:e,responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");return r.href=s,r.setAttribute("download","prix-".concat(Date.now(),".csv")),document.body.appendChild(r),r.click(),r.remove(),t.data}(),s("Export t\xe9l\xe9charg\xe9")}catch(e){r("Erreur lors de l'export")}},className:"btn-secondary",children:[(0,yr.jsx)(ra,{className:"h-5 w-5 mr-2"}),"Exporter CSV"]})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-xl p-6",children:[(0,yr.jsx)(Qr,{className:"h-10 w-10 text-blue-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Produits tarif\xe9s"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:o.totalProducts||0})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-6",children:[(0,yr.jsx)(Xr,{className:"h-10 w-10 text-green-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Prix moyen"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[(o.avgPrice||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200 rounded-xl p-6",children:[(0,yr.jsx)(sa,{className:"h-10 w-10 text-purple-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Tarifs volume"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:o.volumePricingCount||0})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200 rounded-xl p-6",children:[(0,yr.jsx)(Wr,{className:"h-10 w-10 text-orange-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Tarifs clients"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:o.clientPricingCount||0})]})]}),(0,yr.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher un produit ou cat\xe9gorie...",value:h,onChange:e=>m(e.target.value),className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produit"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cat\xe9gorie"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix de base"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Derni\xe8re MAJ"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:U.map(e=>(0,yr.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"font-medium text-gray-900",children:e.productName})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:e.category})}),(0,yr.jsxs)("td",{className:"px-6 py-4",children:[(0,yr.jsxs)("span",{className:"text-2xl font-bold text-green-600",children:[(e.basePrice||0).toFixed(2)," \u20ac"]}),(0,yr.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"/kg"})]}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm text-gray-500",children:e.updatedAt?new Date(e.updatedAt).toLocaleDateString("fr-FR"):"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)("button",{onClick:()=>{w(e),M({basePrice:e.basePrice}),x(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Modifier prix",children:(0,yr.jsx)(wn,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{onClick:()=>{w(e),z(e.productId),g(!0)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Tarifs volume",children:(0,yr.jsx)(sa,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{onClick:()=>{w(e),V(e.productId),y(!0)},className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Tarifs clients",children:(0,yr.jsx)(Wr,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{onClick:()=>{w(e),F(e.productId),j(!0)},className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Historique",children:(0,yr.jsx)(Fn,{className:"h-5 w-5"})})]})})]},e.id))})]})}),0===U.length&&(0,yr.jsxs)("div",{className:"text-center py-12",children:[(0,yr.jsx)(Xr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucun prix trouv\xe9"})]})]}),p&&N&&(0,yr.jsx)(Vn,{isOpen:p,onClose:()=>x(!1),title:"Modifier le prix - ".concat(N.productName),children:(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await async function(e,t){return(await fr.put("/prices/".concat(e),t)).data}(N.id,{basePrice:parseFloat(R.basePrice)}),s("Prix mis \xe0 jour avec succ\xe8s"),x(!1),I(),L()}catch(n){var t,a;r((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Erreur lors de la mise \xe0 jour")}},className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prix de base (\u20ac/kg)"}),(0,yr.jsx)("input",{type:"number",step:"0.01",value:R.basePrice,onChange:e=>M(Yt(Yt({},R),{},{basePrice:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,yr.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,yr.jsx)("button",{type:"button",onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,yr.jsxs)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,yr.jsx)(ll,{className:"h-5 w-5 inline mr-2"}),"Enregistrer"]})]})]})}),f&&N&&(0,yr.jsx)(Vn,{isOpen:f,onClose:()=>g(!1),title:"Tarifs volume - ".concat(N.productName),children:(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsx)("div",{className:"space-y-2",children:C.map(e=>(0,yr.jsx)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("span",{className:"font-semibold",children:["\u2265 ",e.minQty," kg"]}),(0,yr.jsx)("span",{className:"mx-2",children:"\u2192"}),(0,yr.jsxs)("span",{className:"text-green-600 font-bold",children:[e.price.toFixed(2)," \u20ac/kg"]})]})},e.id))}),(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await async function(e){return(await fr.post("/prices/volume",e)).data}({productId:N.productId,minQty:parseInt(A.minQty),price:parseFloat(A.price)}),s("Tarif volume ajout\xe9"),P({minQty:"",price:""}),z(N.productId)}catch(t){r("Erreur lors de l'ajout du tarif volume")}},className:"border-t pt-4 space-y-3",children:[(0,yr.jsx)("h3",{className:"font-semibold",children:"Ajouter un tarif volume"}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantit\xe9 min (kg)"}),(0,yr.jsx)("input",{type:"number",value:A.minQty,onChange:e=>P(Yt(Yt({},A),{},{minQty:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (\u20ac/kg)"}),(0,yr.jsx)("input",{type:"number",step:"0.01",value:A.price,onChange:e=>P(Yt(Yt({},A),{},{price:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]})]}),(0,yr.jsxs)("button",{type:"submit",className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[(0,yr.jsx)(Nn,{className:"h-5 w-5 inline mr-2"}),"Ajouter"]})]})]})}),b&&N&&(0,yr.jsx)(Vn,{isOpen:b,onClose:()=>y(!1),title:"Tarifs clients - ".concat(N.productName),children:(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsx)("div",{className:"space-y-2",children:_.map(e=>(0,yr.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,yr.jsx)("span",{className:"font-medium",children:e.clientName}),(0,yr.jsxs)("span",{className:"text-green-600 font-bold",children:[e.price.toFixed(2)," \u20ac/kg"]})]},e.id))}),(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await async function(e){return(await fr.post("/prices/client-pricing",e)).data}({productId:N.productId,clientId:O.clientId,price:parseFloat(O.price)}),s("Tarif client ajout\xe9"),D({clientId:"",price:""}),V(N.productId)}catch(t){r("Erreur lors de l'ajout du tarif client")}},className:"border-t pt-4 space-y-3",children:[(0,yr.jsx)("h3",{className:"font-semibold",children:"Ajouter un tarif client"}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),(0,yr.jsx)("input",{type:"text",placeholder:"ID client",value:O.clientId,onChange:e=>D(Yt(Yt({},O),{},{clientId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (\u20ac/kg)"}),(0,yr.jsx)("input",{type:"number",step:"0.01",value:O.price,onChange:e=>D(Yt(Yt({},O),{},{price:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),(0,yr.jsxs)("button",{type:"submit",className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[(0,yr.jsx)(Nn,{className:"h-5 w-5 inline mr-2"}),"Ajouter"]})]})]})}),v&&N&&(0,yr.jsx)(Vn,{isOpen:v,onClose:()=>j(!1),title:"Historique des prix - ".concat(N.productName),children:(0,yr.jsx)("div",{className:"space-y-3",children:0===k.length?(0,yr.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Aucun historique disponible"}):k.map(e=>(0,yr.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,yr.jsx)(Ra,{className:"h-5 w-5 text-gray-400"}),(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("p",{className:"font-semibold",children:[e.price.toFixed(2)," \u20ac/kg"]}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleString("fr-FR")})]})]}),e.changedBy&&(0,yr.jsxs)("span",{className:"text-xs text-gray-500",children:["Par: ",e.changedBy]})]},e.id))})})]})},bx=Br("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const yx=function(){var e;const{toast:t,showToast:s,hideToast:r,showSuccess:a,showError:i}=mn(),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(""),[x,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{g()},[]);const g=async()=>{try{d(!0);const e=await qi({status:"NEW"});o((null===e||void 0===e?void 0:e.orders)||[])}catch(e){i("Erreur lors du chargement des commandes")}finally{d(!1)}},b=async()=>{if(m)try{h(!0);const e=await async function(e){return(await fr.post("/orders/aggregate",{deliveryDate:e})).data}(m);f(e.data),a("".concat(e.data.ordersCount," commande(s) agr\xe9g\xe9e(s) avec succ\xe8s")),await g()}catch(e){i("Erreur lors de l'agr\xe9gation"),console.error(e)}finally{h(!1)}else i("Veuillez s\xe9lectionner une date de livraison")},y=l.reduce((e,t)=>{const s=t.deliveryDate?new Date(t.deliveryDate).toISOString().split("T")[0]:"Sans date";return e[s]||(e[s]=[]),e[s].push(t),e},{}),v=(new Date).toISOString().split("T")[0],j=new Date;j.setDate(j.getDate()+30);const N=j.toISOString().split("T")[0];return c?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[t.visible&&(0,yr.jsx)(hn,{message:t.message,type:t.type,onClose:r}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:"Agr\xe9gation des Commandes"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Agr\xe9gez les commandes NEW par date de livraison pour cr\xe9er des commandes fournisseur"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Commandes NEW"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:l.length})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Dates de livraison"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:Object.keys(y).length})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Total produits"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-green-600",children:l.reduce((e,t)=>{var s;return e+((null===(s=t.items)||void 0===s?void 0:s.length)||0)},0)})]})]}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,yr.jsx)(Qr,{className:"h-5 w-5 text-primary-600"}),(0,yr.jsx)("span",{children:"Agr\xe9ger les commandes"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date de livraison"}),(0,yr.jsx)("input",{type:"date",value:m,onChange:e=>p(e.target.value),min:v,max:N,className:"w-full"})]}),(0,yr.jsx)("div",{className:"flex items-end",children:(0,yr.jsx)("button",{onClick:b,disabled:!m||u,className:"btn-primary w-full flex items-center justify-center space-x-2",children:u?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{children:"Agr\xe9gation..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(Qr,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Agr\xe9ger"})]})})})]})]}),x&&(0,yr.jsxs)("div",{className:"card bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,yr.jsx)(Ma,{className:"h-6 w-6 text-green-600"}),(0,yr.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Agr\xe9gation r\xe9ussie"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Commandes agr\xe9g\xe9es"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.ordersCount})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Produits uniques"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(e=x.aggregatedItems)||void 0===e?void 0:e.length)||0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Date de livraison"}),(0,yr.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date(x.deliveryDate).toLocaleDateString("fr-FR")})]}),(0,yr.jsx)("div",{children:(0,yr.jsx)("button",{onClick:()=>window.location.href="/admin/orders",className:"btn-primary w-full",children:"Voir les commandes"})})]})]}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,yr.jsx)(bx,{className:"h-5 w-5 text-primary-600"}),(0,yr.jsx)("span",{children:"Commandes NEW par date de livraison"})]}),0===Object.keys(y).length?(0,yr.jsxs)("div",{className:"text-center py-12",children:[(0,yr.jsx)(Yr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-500",children:"Aucune commande NEW trouv\xe9e"})]}):(0,yr.jsx)("div",{className:"space-y-4",children:Object.entries(y).map(e=>{let[t,s]=e;return(0,yr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)(bx,{className:"h-5 w-5 text-primary-600"}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-bold text-gray-900",children:"Sans date"===t?"Sans date":new Date(t).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,yr.jsxs)("p",{className:"text-sm text-gray-600",children:[s.length," commande(s)"]})]})]}),(0,yr.jsxs)("button",{onClick:()=>{p("Sans date"===t?"":t),b()},className:"btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Qr,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Agr\xe9ger"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("span",{className:"text-gray-600",children:"Total produits: "}),(0,yr.jsx)("span",{className:"font-semibold",children:s.reduce((e,t)=>{var s;return e+((null===(s=t.items)||void 0===s?void 0:s.length)||0)},0)})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("span",{className:"text-gray-600",children:"Total HT: "}),(0,yr.jsxs)("span",{className:"font-semibold",children:[s.reduce((e,t)=>e+(t.totalHT||0),0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("span",{className:"text-gray-600",children:"Magasins: "}),(0,yr.jsx)("span",{className:"font-semibold",children:new Set(s.map(e=>e.shopId)).size})]})]})]},t)})})]})]})};const vx=function(){var e,t,s,r;const{toast:a,showToast:i,hideToast:l,showSuccess:o,showError:c}=mn(),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)([]),[p,x]=(0,n.useState)([]),[f,g]=(0,n.useState)(!0),[b,y]=(0,n.useState)(""),[v,j]=(0,n.useState)(""),[N,w]=(0,n.useState)(!1),[k,S]=(0,n.useState)(null),[C,E]=(0,n.useState)(!1);(0,n.useEffect)(()=>{_()},[]);const _=async()=>{try{g(!0),await Promise.all([T(),R(),M()])}catch(e){c("Erreur lors du chargement des donn\xe9es")}finally{g(!1)}},T=async()=>{try{var e;const t=await xl();u(null!==(e=null===t||void 0===t?void 0:t.orders)&&void 0!==e?e:[])}catch(t){console.error(t)}},R=async()=>{try{var e;const t=await qi({status:"AGGREGATED"});m(null!==(e=null===t||void 0===t?void 0:t.orders)&&void 0!==e?e:[])}catch(t){console.error(t)}},M=async()=>{try{var e;const t=await ml();x(null!==(e=null===t||void 0===t?void 0:t.suppliers)&&void 0!==e?e:[])}catch(t){console.error(t)}},A=async e=>{try{var t;const s=await async function(e){return(await fr.get("/suppliers/orders/".concat(e))).data}(e);S(null!==(t=null===s||void 0===s?void 0:s.order)&&void 0!==t?t:null),E(!0)}catch(s){c("Erreur lors du chargement des d\xe9tails")}},P=e=>({DRAFT:"Brouillon",SENT:"Envoy\xe9e",CONFIRMED:"Confirm\xe9e",DELIVERED:"Livr\xe9e",CANCELLED:"Annul\xe9e"}[e]||e),O=h.reduce((e,t)=>{const s=t.deliveryDate?new Date(t.deliveryDate).toISOString().split("T")[0]:"Sans date";return e[s]||(e[s]=[]),e[s].push(t),e},{});if(f)return(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})});const D=(new Date).toISOString().split("T")[0],I=new Date;I.setDate(I.getDate()+30);const L=I.toISOString().split("T")[0];return(0,yr.jsxs)("div",{className:"space-y-6",children:[a.visible&&(0,yr.jsx)(hn,{message:a.message,type:a.type,onClose:l}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:"Commandes Fournisseurs"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"G\xe9rez les commandes pass\xe9es aux fournisseurs depuis les agr\xe9gations"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Total commandes"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:d.length})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Commandes agr\xe9g\xe9es"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:h.length})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Livr\xe9es"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-green-600",children:d.filter(e=>"DELIVERED"===e.status).length})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"En attente"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:d.filter(e=>["DRAFT","SENT","CONFIRMED"].includes(e.status)).length})]})]}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,yr.jsx)(Nn,{className:"h-5 w-5 text-primary-600"}),(0,yr.jsx)("span",{children:"Cr\xe9er une commande fournisseur"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Fournisseur"}),(0,yr.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"w-full",children:[(0,yr.jsx)("option",{value:"",children:"S\xe9lectionner un fournisseur"}),p.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date de livraison"}),(0,yr.jsx)("input",{type:"date",value:v,onChange:e=>j(e.target.value),min:D,max:L,className:"w-full"})]}),(0,yr.jsx)("div",{className:"flex items-end",children:(0,yr.jsx)("button",{onClick:async()=>{if(b&&v)try{w(!0);await async function(e,t){return(await fr.post("/orders/aggregated/create-supplier-order",{supplierId:e,deliveryDate:t})).data}(b,v);o("Commande fournisseur cr\xe9\xe9e avec succ\xe8s"),await _(),y(""),j("")}catch(e){c("Erreur lors de la cr\xe9ation de la commande fournisseur"),console.error(e)}finally{w(!1)}else c("Veuillez s\xe9lectionner un fournisseur et une date de livraison")},disabled:!b||!v||N,className:"btn-primary w-full flex items-center justify-center space-x-2",children:N?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{children:"Cr\xe9ation..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(Nn,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Cr\xe9er"})]})})})]})]}),Object.keys(O).length>0&&(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,yr.jsx)(Qr,{className:"h-5 w-5 text-primary-600"}),(0,yr.jsx)("span",{children:"Commandes agr\xe9g\xe9es disponibles"})]}),(0,yr.jsx)("div",{className:"space-y-3",children:Object.entries(O).map(e=>{let[t,s]=e;return(0,yr.jsx)("div",{className:"border border-gray-200 rounded-lg p-3",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:"Sans date"===t?"Sans date":new Date(t).toLocaleDateString("fr-FR")}),(0,yr.jsxs)("p",{className:"text-sm text-gray-600",children:[s.length," commande(s) agr\xe9g\xe9e(s)"]})]}),(0,yr.jsx)("button",{onClick:()=>{j("Sans date"===t?"":t)},className:"btn-secondary text-sm",children:"Utiliser cette date"})]})},t)})})]}),(0,yr.jsxs)("div",{className:"card overflow-x-auto",children:[(0,yr.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Commandes fournisseurs"}),(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"N\xb0 Commande"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Fournisseur"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Total HT"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Statut"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:d.map(e=>{var t,s,r;return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.orderNumber}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:(null===(t=e.supplier)||void 0===t?void 0:t.name)||"N/A"}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(e.orderDate).toLocaleDateString("fr-FR")}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900",children:[(null===(s=e.totalHT)||void 0===s?void 0:s.toFixed(2))||"0.00"," \u20ac"]}),(0,yr.jsx)("td",{className:"px-4 py-3 text-center",children:(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold ".concat((r=e.status,{DRAFT:"bg-gray-100 text-gray-700",SENT:"bg-blue-100 text-blue-700",CONFIRMED:"bg-green-100 text-green-700",DELIVERED:"bg-green-100 text-green-700",CANCELLED:"bg-red-100 text-red-700"}[r]||"bg-gray-100 text-gray-700")),children:P(e.status)})}),(0,yr.jsx)("td",{className:"px-4 py-3 text-center",children:(0,yr.jsx)("button",{onClick:()=>A(e.id),className:"p-2 bg-primary-50 hover:bg-primary-100 text-primary-600 rounded-lg transition-colors",children:(0,yr.jsx)(zn,{className:"h-4 w-4"})})})]},e.id)})})]}),0===d.length&&(0,yr.jsxs)("div",{className:"text-center py-12",children:[(0,yr.jsx)(ca,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-500",children:"Aucune commande fournisseur trouv\xe9e"})]})]}),C&&k&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,yr.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,yr.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Commande ",k.orderNumber]}),(0,yr.jsxs)("p",{className:"text-sm text-gray-500",children:["Fournisseur: ",null===(e=k.supplier)||void 0===e?void 0:e.name]})]}),(0,yr.jsx)("button",{onClick:()=>E(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,yr.jsx)(fn,{className:"h-6 w-6"})})]})}),(0,yr.jsx)("div",{className:"p-6 space-y-6",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Produits command\xe9s"}),(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold",children:"Produit"}),(0,yr.jsx)("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Quantit\xe9"}),(0,yr.jsx)("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Prix unit."}),(0,yr.jsx)("th",{className:"px-4 py-2 text-right text-sm font-semibold",children:"Total"})]})}),(0,yr.jsx)("tbody",{className:"divide-y",children:null===(t=k.items)||void 0===t?void 0:t.map((e,t)=>{var s,r;return(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("td",{className:"px-4 py-2 text-sm font-medium",children:e.productName}),(0,yr.jsxs)("td",{className:"px-4 py-2 text-sm text-right",children:[e.quantity," ",e.unit]}),(0,yr.jsxs)("td",{className:"px-4 py-2 text-sm text-right",children:[(null===(s=e.unitPrice)||void 0===s?void 0:s.toFixed(2))||"0.00"," \u20ac"]}),(0,yr.jsxs)("td",{className:"px-4 py-2 text-sm text-right font-semibold",children:[(null===(r=e.totalHT)||void 0===r?void 0:r.toFixed(2))||"0.00"," \u20ac"]})]},t)})}),(0,yr.jsxs)("tfoot",{className:"bg-gray-50 font-bold",children:[(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("td",{colSpan:"3",className:"px-4 py-3 text-right",children:"Total HT :"}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-right",children:[(null===(s=k.totalHT)||void 0===s?void 0:s.toFixed(2))||"0.00"," \u20ac"]})]}),(0,yr.jsxs)("tr",{className:"text-lg",children:[(0,yr.jsx)("td",{colSpan:"3",className:"px-4 py-3 text-right",children:"Total TTC :"}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-right text-primary-600",children:[(null===(r=k.totalTTC)||void 0===r?void 0:r.toFixed(2))||"0.00"," \u20ac"]})]})]})]})})]})})]})})]})},jx=Br("file-down",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Nx=Br("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),wx=Br("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);async function kx(e){const t=await fr.get("/invoices/".concat(e,"/download"),{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=s,r.setAttribute("download","facture-".concat(e,".pdf")),document.body.appendChild(r),r.click(),r.remove()}async function Sx(e,t){return(await fr.post("/invoices/".concat(e,"/payments"),t)).data}const Cx=function(){var e,t,s,r,a;const{toast:i,showToast:l,showSuccess:o,showError:c,hideToast:d}=mn(),[u,h]=(0,n.useState)([]),[m,p]=(0,n.useState)({}),[x,f]=(0,n.useState)(!0),[g,b]=(0,n.useState)(""),[y,v]=(0,n.useState)("all"),[j,N]=(0,n.useState)(""),[w,k]=(0,n.useState)(""),[S,C]=(0,n.useState)(!1),[E,_]=(0,n.useState)(!1),[T,R]=(0,n.useState)(!1),[M,A]=(0,n.useState)(null),[P,O]=(0,n.useState)([]),[D,I]=(0,n.useState)("info"),[L,F]=(0,n.useState)({amount:"",method:"TRANSFER",reference:"",paymentDate:(new Date).toISOString().split("T")[0],notes:""}),[z,V]=(0,n.useState)({amount:"",reason:"",notes:""});(0,n.useEffect)(()=>{U(),H()},[y,j,w]),(0,n.useEffect)(()=>{const e=setTimeout(()=>{g&&U()},300);return()=>clearTimeout(e)},[g]);const U=async()=>{try{f(!0);const e={};"all"!==y&&(e.status=y),j&&(e.startDate=j),w&&(e.endDate=w),g&&(e.search=g);const t=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/invoices",{params:e})).data}(e);h(t.invoices||[])}catch(e){c("Erreur lors du chargement des factures"),console.error(e)}finally{f(!1)}},H=async()=>{try{const e={};j&&(e.startDate=j),w&&(e.endDate=w);const t=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/invoices/stats/advanced",{params:e})).data}(e);p(t.stats||{})}catch(e){console.error("Erreur stats:",e)}},B=async e=>{try{const t=await async function(e){return(await fr.get("/invoices/".concat(e))).data}(e.id);A(t.invoice||e);const s=await async function(e){return(await fr.get("/invoices/".concat(e,"/payments"))).data}(e.id);O(s.payments||[]),C(!0),I("info")}catch(t){c("Erreur lors du chargement des d\xe9tails")}},q=async e=>{try{await async function(e){return(await fr.post("/invoices/".concat(e,"/send-reminder"))).data}(e.id),o("Relance envoy\xe9e avec succ\xe8s"),U()}catch(t){c("Erreur lors de l'envoi de la relance")}},W=async e=>{try{await async function(e){return(await fr.post("/invoices/".concat(e,"/send"))).data}(e.id),o("Facture envoy\xe9e par email"),U()}catch(t){c("Erreur lors de l'envoi de l'email")}},G=e=>{const t={DRAFT:{bg:"bg-gray-100",text:"text-gray-700",label:"Brouillon"},SENT:{bg:"bg-blue-100",text:"text-blue-700",label:"Envoy\xe9e"},PAID:{bg:"bg-green-100",text:"text-green-700",label:"Pay\xe9e"},PARTIAL:{bg:"bg-yellow-100",text:"text-yellow-700",label:"Partielle"},OVERDUE:{bg:"bg-red-100",text:"text-red-700",label:"En retard"},CANCELLED:{bg:"bg-gray-100",text:"text-gray-700",label:"Annul\xe9e"}},s=t[e]||t.DRAFT;return(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(s.bg," ").concat(s.text),children:s.label})};return x&&0===u.length?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)(hn,{toast:i,hideToast:d}),(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-900 to-blue-600 bg-clip-text text-transparent",children:"Facturation"}),(0,yr.jsxs)("button",{onClick:async()=>{try{const e={};j&&(e.startDate=j),w&&(e.endDate=w),await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await fr.get("/invoices/export/accounting",{params:Yt(Yt({},e),{},{format:"csv"}),responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=s,r.setAttribute("download","export-comptable-".concat(Date.now(),".csv")),document.body.appendChild(r),r.click(),r.remove()}(e),o("Export t\xe9l\xe9charg\xe9")}catch(e){c("Erreur lors de l'export")}},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,yr.jsx)(jx,{className:"h-5 w-5"}),"Export Comptable"]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-xl p-6",children:[(0,yr.jsx)(dl,{className:"h-10 w-10 text-blue-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total Factures"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:m.total||0}),(0,yr.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:[((null===(e=m.revenue)||void 0===e?void 0:e.total)||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-6",children:[(0,yr.jsx)(Ma,{className:"h-10 w-10 text-green-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Pay\xe9es"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:m.paid||0}),(0,yr.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[((null===(t=m.revenue)||void 0===t?void 0:t.paid)||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 border-2 border-yellow-200 rounded-xl p-6",children:[(0,yr.jsx)(Ra,{className:"h-10 w-10 text-yellow-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En attente"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:m.sent||0}),(0,yr.jsxs)("p",{className:"text-sm text-yellow-600 mt-1",children:[((null===(s=m.revenue)||void 0===s?void 0:s.remaining)||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 border-2 border-red-200 rounded-xl p-6",children:[(0,yr.jsx)(dn,{className:"h-10 w-10 text-red-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En retard"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:m.overdue||0}),(0,yr.jsxs)("p",{className:"text-sm text-red-600 mt-1",children:["\xc0 \xe9ch\xe9ance : ",m.upcomingDue||0]})]})]}),(0,yr.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher...",value:g,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,yr.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,yr.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,yr.jsx)("option",{value:"DRAFT",children:"Brouillon"}),(0,yr.jsx)("option",{value:"SENT",children:"Envoy\xe9e"}),(0,yr.jsx)("option",{value:"PAID",children:"Pay\xe9e"}),(0,yr.jsx)("option",{value:"PARTIAL",children:"Partielle"}),(0,yr.jsx)("option",{value:"OVERDUE",children:"En retard"})]}),(0,yr.jsx)("input",{type:"date",value:j,onChange:e=>N(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,yr.jsx)("input",{type:"date",value:w,onChange:e=>k(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N\xb0 Facture"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant TTC"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pay\xe9"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reste"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xc9ch\xe9ance"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:u.map(e=>{var t,s;return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsx)("span",{className:"font-mono text-sm font-semibold text-gray-900",children:e.invoiceNumber})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsx)("span",{className:"text-sm text-gray-900",children:(null===(t=e.order)||void 0===t||null===(s=t.shop)||void 0===s?void 0:s.name)||"N/A"})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[(e.totalTTC||0).toFixed(2)," \u20ac"]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("span",{className:"text-sm text-green-600 font-semibold",children:[(e.paidAmount||0).toFixed(2)," \u20ac"]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("span",{className:"text-sm text-orange-600 font-semibold",children:[(e.remainingAmount||0).toFixed(2)," \u20ac"]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:e.dueDate?new Date(e.dueDate).toLocaleDateString("fr-FR"):"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:G(e.status)}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)("button",{onClick:()=>B(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Voir d\xe9tails",children:(0,yr.jsx)(zn,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{onClick:()=>(async e=>{try{await kx(e.id),o("T\xe9l\xe9chargement en cours...")}catch(t){c("Erreur lors du t\xe9l\xe9chargement")}})(e),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"T\xe9l\xe9charger PDF",children:(0,yr.jsx)(ra,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{onClick:()=>W(e),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Envoyer par email",children:(0,yr.jsx)(aa,{className:"h-5 w-5"})}),("SENT"===e.status||"PARTIAL"===e.status||"OVERDUE"===e.status)&&(0,yr.jsx)("button",{onClick:()=>q(e),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Envoyer relance",children:(0,yr.jsx)(Nx,{className:"h-5 w-5"})})]})})]},e.id)})})]})}),0===u.length&&(0,yr.jsxs)("div",{className:"text-center py-12",children:[(0,yr.jsx)(dl,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucune facture trouv\xe9e"})]})]}),S&&M&&(0,yr.jsx)(Vn,{isOpen:S,onClose:()=>C(!1),title:"Facture ".concat(M.invoiceNumber),children:(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("div",{className:"border-b border-gray-200",children:(0,yr.jsxs)("nav",{className:"flex space-x-8",children:[(0,yr.jsx)("button",{onClick:()=>I("info"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("info"===D?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Informations"}),(0,yr.jsxs)("button",{onClick:()=>I("payments"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("payments"===D?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Paiements (",P.length,")"]})]})}),"info"===D&&(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Client"}),(0,yr.jsx)("p",{className:"font-semibold",children:null===(r=M.order)||void 0===r||null===(a=r.shop)||void 0===a?void 0:a.name})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Statut"}),G(M.status)]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Total HT"}),(0,yr.jsxs)("p",{className:"font-semibold",children:[(M.totalHT||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"TVA"}),(0,yr.jsxs)("p",{className:"font-semibold",children:[(M.totalTVA||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Total TTC"}),(0,yr.jsxs)("p",{className:"font-semibold text-lg",children:[(M.totalTTC||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Montant pay\xe9"}),(0,yr.jsxs)("p",{className:"font-semibold text-green-600",children:[(M.paidAmount||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Restant d\xfb"}),(0,yr.jsxs)("p",{className:"font-semibold text-orange-600",children:[(M.remainingAmount||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Date \xe9ch\xe9ance"}),(0,yr.jsx)("p",{className:"font-semibold",children:M.dueDate?new Date(M.dueDate).toLocaleDateString("fr-FR"):"-"})]})]}),(0,yr.jsx)("div",{className:"flex gap-2 pt-4",children:M.remainingAmount>0&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsxs)("button",{onClick:()=>{_(!0),F(Yt(Yt({},L),{},{amount:M.remainingAmount.toFixed(2)}))},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2",children:[(0,yr.jsx)(Zr,{className:"h-5 w-5"}),"Enregistrer paiement"]}),(0,yr.jsxs)("button",{onClick:()=>R(!0),className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center justify-center gap-2",children:[(0,yr.jsx)(wx,{className:"h-5 w-5"}),"Cr\xe9er avoir"]})]})})]}),"payments"===D&&(0,yr.jsx)("div",{className:"space-y-4",children:0===P.length?(0,yr.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Aucun paiement enregistr\xe9"}):(0,yr.jsx)("div",{className:"space-y-3",children:P.map(e=>{return(0,yr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,yr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("p",{className:"font-semibold text-lg",children:[e.amount.toFixed(2)," \u20ac"]}),(0,yr.jsxs)("p",{className:"text-sm text-gray-600",children:[(t=e.paymentMethod,{CASH:"Esp\xe8ces",CHECK:"Ch\xe8que",CARD:"Carte",TRANSFER:"Virement",DIRECT_DEBIT:"Pr\xe9l\xe8vement",OTHER:"Autre"}[t]||t),e.reference&&" \u2022 ".concat(e.reference)]}),(0,yr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.paymentDate).toLocaleDateString("fr-FR")})]}),(0,yr.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:"Re\xe7u"})]}),e.notes&&(0,yr.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:e.notes})]},e.id);var t})})})]})}),E&&(0,yr.jsx)(Vn,{isOpen:E,onClose:()=>_(!1),title:"Enregistrer un paiement",children:(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await Sx(M.id,Yt(Yt({},L),{},{amount:parseFloat(L.amount)})),o("Paiement enregistr\xe9 avec succ\xe8s"),_(!1),F({amount:"",method:"TRANSFER",reference:"",paymentDate:(new Date).toISOString().split("T")[0],notes:""}),U(),H()}catch(r){var t,s;c((null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Erreur lors de l'enregistrement du paiement")}},className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant"}),(0,yr.jsx)("input",{type:"number",step:"0.01",value:L.amount,onChange:e=>F(Yt(Yt({},L),{},{amount:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xe9thode de paiement"}),(0,yr.jsxs)("select",{value:L.method,onChange:e=>F(Yt(Yt({},L),{},{method:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,yr.jsx)("option",{value:"TRANSFER",children:"Virement"}),(0,yr.jsx)("option",{value:"CHECK",children:"Ch\xe8que"}),(0,yr.jsx)("option",{value:"CARD",children:"Carte bancaire"}),(0,yr.jsx)("option",{value:"CASH",children:"Esp\xe8ces"}),(0,yr.jsx)("option",{value:"DIRECT_DEBIT",children:"Pr\xe9l\xe8vement"}),(0,yr.jsx)("option",{value:"OTHER",children:"Autre"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"R\xe9f\xe9rence"}),(0,yr.jsx)("input",{type:"text",value:L.reference,onChange:e=>F(Yt(Yt({},L),{},{reference:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"N\xb0 ch\xe8que, transaction..."})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de paiement"}),(0,yr.jsx)("input",{type:"date",value:L.paymentDate,onChange:e=>F(Yt(Yt({},L),{},{paymentDate:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,yr.jsx)("textarea",{value:L.notes,onChange:e=>F(Yt(Yt({},L),{},{notes:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:"3"})]}),(0,yr.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,yr.jsx)("button",{type:"button",onClick:()=>_(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,yr.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Enregistrer"})]})]})}),T&&(0,yr.jsx)(Vn,{isOpen:T,onClose:()=>R(!1),title:"Cr\xe9er un avoir",children:(0,yr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await async function(e,t){return(await fr.post("/invoices/".concat(e,"/credit-note"),t)).data}(M.id,Yt(Yt({},z),{},{amount:parseFloat(z.amount)})),o("Avoir cr\xe9\xe9 avec succ\xe8s"),R(!1),V({amount:"",reason:"",notes:""}),U()}catch(r){var t,s;c((null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Erreur lors de la cr\xe9ation de l'avoir")}},className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant"}),(0,yr.jsx)("input",{type:"number",step:"0.01",value:z.amount,onChange:e=>V(Yt(Yt({},z),{},{amount:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raison"}),(0,yr.jsx)("input",{type:"text",value:z.reason,onChange:e=>V(Yt(Yt({},z),{},{reason:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Produit d\xe9fectueux, erreur de facturation...",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,yr.jsx)("textarea",{value:z.notes,onChange:e=>V(Yt(Yt({},z),{},{notes:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:"3"})]}),(0,yr.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,yr.jsx)("button",{type:"button",onClick:()=>R(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,yr.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:"Cr\xe9er l'avoir"})]})]})})]})};const Ex=function(){const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[a,i]=(0,n.useState)({pending:0,approved:0,rejected:0});(0,n.useEffect)(()=>{l()},[]);const l=async()=>{try{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/returns",{params:e})).data}(),s=e.data||[];t(s),i({pending:s.filter(e=>"pending"===e.status).length,approved:s.filter(e=>"approved"===e.status).length,rejected:s.filter(e=>"rejected"===e.status).length})}catch(e){console.error(e),t([])}finally{r(!1)}};return s?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Gestion des Retours"}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-yellow-50 to-yellow-100 border-2 border-yellow-200",children:[(0,yr.jsx)(ea,{className:"h-10 w-10 text-yellow-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En attente"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:a.pending})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200",children:[(0,yr.jsx)(Ma,{className:"h-10 w-10 text-green-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Approuv\xe9s"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:a.approved})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-red-50 to-red-100 border-2 border-red-200",children:[(0,yr.jsx)(fn,{className:"h-10 w-10 text-red-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Rejet\xe9s"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:a.rejected})]})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"N\xb0 Commande"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Magasin"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produit"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantit\xe9"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Raison"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>{return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-6 py-4 font-mono text-sm font-semibold",children:e.orderNumber}),(0,yr.jsx)("td",{className:"px-6 py-4 text-gray-900",children:e.storeName}),(0,yr.jsx)("td",{className:"px-6 py-4 font-medium",children:e.productName}),(0,yr.jsx)("td",{className:"px-6 py-4 text-center font-bold",children:e.quantity}),(0,yr.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.reason}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(t=e.status,(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat({pending:"bg-yellow-100 text-yellow-700",approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700"}[t]),children:{pending:"En attente",approved:"Approuv\xe9",rejected:"Rejet\xe9"}[t]}))}),(0,yr.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.createdAt}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:(0,yr.jsx)(zn,{className:"h-5 w-5"})}),"pending"===e.status&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("button",{onClick:()=>async function(e,t){return(await fr.put("/returns/".concat(e,"/approve"),t)).data}(e.id,"refund"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",children:(0,yr.jsx)(Ma,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{onClick:()=>async function(e,t){return(await fr.put("/returns/".concat(e,"/reject"),{reason:t})).data}(e.id,"Non justifi\xe9"),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,yr.jsx)(fn,{className:"h-5 w-5"})})]})]})})]},e.id);var t})})]})})})]})};async function _x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/payments",{params:e})).data}async function Tx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/payments/stats",{params:e})).data}const Rx=function(){var e;const{toast:t,showToast:s,showSuccess:r,showError:a,hideToast:i}=mn(),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)({}),[u,h]=(0,n.useState)([]),[m,p]=(0,n.useState)([]),[x,f]=(0,n.useState)(!0),[g,b]=(0,n.useState)("all"),[y,v]=(0,n.useState)(""),[j,N]=(0,n.useState)("all"),[w,k]=(0,n.useState)(""),[S,C]=(0,n.useState)(""),[E,_]=(0,n.useState)(!1),[T,R]=(0,n.useState)(!1),[M,A]=(0,n.useState)(!1),[P,O]=(0,n.useState)(!1),[D,I]=(0,n.useState)(null),[L,F]=(0,n.useState)({orderId:"",amount:"",paymentMethod:"CASH",paymentDate:(new Date).toISOString().split("T")[0],status:"EN_ATTENTE",notes:""});(0,n.useEffect)(()=>{z()},[g,j,w,S]);const z=async()=>{try{f(!0);const e={};if("all"!==j&&(e.status=j),w&&(e.startDate=w),S&&(e.endDate=S),"all"===g){const[t,s]=await Promise.all([_x(e),Tx(e)]);o(t.payments||[]),d(s.stats||{})}else if("schedule"===g){const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return(await fr.get("/payments/schedule",{params:{days:e}})).data}(30);h(e.schedule||[])}else if("overdue"===g){const e=await async function(){return(await fr.get("/payments/overdue")).data}();p(e.overdue||[])}}catch(e){a("Erreur lors du chargement"),console.error(e)}finally{f(!1)}},V=async e=>{try{const t=await async function(e){return(await fr.get("/payments/".concat(e))).data}(e.id);I(t.payment||e),_(!0)}catch(t){a("Erreur lors du chargement des d\xe9tails")}},U=async e=>{try{await async function(e){const t=await fr.get("/payments/".concat(e,"/download-receipt"),{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=s,r.setAttribute("download","recu-paiement-".concat(e,".pdf")),document.body.appendChild(r),r.click(),r.remove()}(e.id),r("Re\xe7u t\xe9l\xe9charg\xe9")}catch(t){a("Erreur lors du t\xe9l\xe9chargement")}},H=async e=>{try{await async function(e){return(await fr.post("/payments/".concat(e,"/mark-paid"))).data}(e.id),r("Paiement marqu\xe9 comme pay\xe9"),z()}catch(t){a("Erreur")}},B=e=>{const t={PAYE:{bg:"bg-green-100",text:"text-green-700",label:"Pay\xe9",icon:Ma},EN_ATTENTE:{bg:"bg-yellow-100",text:"text-yellow-700",label:"En attente",icon:Ra},IMPAYE:{bg:"bg-red-100",text:"text-red-700",label:"Impay\xe9",icon:fn},REMBOURSE:{bg:"bg-blue-100",text:"text-blue-700",label:"Rembours\xe9",icon:Ma}},s=t[e]||t.EN_ATTENTE,r=s.icon;return(0,yr.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ".concat(s.bg," ").concat(s.text),children:[(0,yr.jsx)(r,{className:"h-3 w-3"}),s.label]})},q=e=>({CASH:"Esp\xe8ces",CARD:"Carte",TRANSFER:"Virement",CHECK:"Ch\xe8que",OTHER:"Autre"}[e]||e),W=(l||[]).filter(e=>{var t,s,r;const a=(null===(t=e.order)||void 0===t?void 0:t.orderNumber)||"",n=(null===(s=e.order)||void 0===s||null===(r=s.shop)||void 0===r?void 0:r.name)||"",i=e.receiptNumber||"";return a.toLowerCase().includes(y.toLowerCase())||n.toLowerCase().includes(y.toLowerCase())||i.toLowerCase().includes(y.toLowerCase())});return x&&0===l.length&&0===u.length&&0===m.length?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)(hn,{toast:t,hideToast:i}),(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-900 to-green-600 bg-clip-text text-transparent",children:"Gestion des Paiements"}),(0,yr.jsx)("p",{className:"text-gray-600 mt-2",children:"Paiements, \xe9ch\xe9anciers et recouvrement"})]}),(0,yr.jsxs)("button",{onClick:()=>{F({orderId:"",amount:"",paymentMethod:"CASH",paymentDate:(new Date).toISOString().split("T")[0],status:"EN_ATTENTE",notes:""}),R(!0)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center gap-2",children:[(0,yr.jsx)(Zr,{className:"h-5 w-5"}),"Nouveau paiement"]})]}),(0,yr.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-1",children:(0,yr.jsxs)("div",{className:"flex gap-2",children:[(0,yr.jsx)("button",{onClick:()=>b("all"),className:"flex-1 px-4 py-3 rounded-lg font-semibold transition-colors ".concat("all"===g?"bg-green-600 text-white":"text-gray-600 hover:bg-gray-50"),children:"Tous les paiements"}),(0,yr.jsx)("button",{onClick:()=>b("schedule"),className:"flex-1 px-4 py-3 rounded-lg font-semibold transition-colors ".concat("schedule"===g?"bg-green-600 text-white":"text-gray-600 hover:bg-gray-50"),children:"\xc9ch\xe9ancier"}),(0,yr.jsxs)("button",{onClick:()=>b("overdue"),className:"flex-1 px-4 py-3 rounded-lg font-semibold transition-colors ".concat("overdue"===g?"bg-green-600 text-white":"text-gray-600 hover:bg-gray-50"),children:["Recouvrement",m.length>0&&(0,yr.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:m.length})]})]})}),"all"===g&&(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-4",children:[(0,yr.jsx)(Xr,{className:"h-8 w-8 text-green-500 mb-2"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total"}),(0,yr.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(c.totalAmount||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200 rounded-xl p-4",children:[(0,yr.jsx)(Ma,{className:"h-8 w-8 text-green-500 mb-2"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Pay\xe9s"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.paid||0})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 border-2 border-yellow-200 rounded-xl p-4",children:[(0,yr.jsx)(Ra,{className:"h-8 w-8 text-yellow-500 mb-2"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"En attente"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.pending||0})]}),(0,yr.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 border-2 border-red-200 rounded-xl p-4",children:[(0,yr.jsx)(Aa,{className:"h-8 w-8 text-red-500 mb-2"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Impay\xe9s"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c.unpaid||0})]})]}),"all"===g&&(0,yr.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher...",value:y,onChange:e=>v(e.target.value),className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,yr.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[(0,yr.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,yr.jsx)("option",{value:"PAYE",children:"Pay\xe9s"}),(0,yr.jsx)("option",{value:"EN_ATTENTE",children:"En attente"}),(0,yr.jsx)("option",{value:"IMPAYE",children:"Impay\xe9s"})]}),(0,yr.jsx)("input",{type:"date",value:w,onChange:e=>k(e.target.value),placeholder:"Date d\xe9but",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"}),(0,yr.jsx)("input",{type:"date",value:S,onChange:e=>C(e.target.value),placeholder:"Date fin",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})}),"all"===g&&(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"N\xb0 Re\xe7u"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Commande"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"M\xe9thode"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:W.map(e=>{var t,s,r;return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"font-mono text-sm",children:e.receiptNumber||"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm",children:(null===(t=e.order)||void 0===t?void 0:t.orderNumber)||"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm",children:(null===(s=e.order)||void 0===s||null===(r=s.shop)||void 0===r?void 0:r.name)||"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("span",{className:"font-semibold text-green-600",children:[(e.amount||0).toFixed(2)," \u20ac"]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm",children:q(e.paymentMethod)})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm text-gray-500",children:e.paymentDate?new Date(e.paymentDate).toLocaleDateString("fr-FR"):"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:B(e.status)}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)("button",{onClick:()=>V(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Voir d\xe9tails",children:(0,yr.jsx)(zn,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{onClick:()=>U(e),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg",title:"T\xe9l\xe9charger re\xe7u",children:(0,yr.jsx)(ra,{className:"h-5 w-5"})}),"EN_ATTENTE"===e.status&&(0,yr.jsx)("button",{onClick:()=>H(e),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Marquer pay\xe9",children:(0,yr.jsx)(Ma,{className:"h-5 w-5"})})]})})]},e.id)})})]})}),0===W.length&&(0,yr.jsxs)("div",{className:"text-center py-12",children:[(0,yr.jsx)(Zr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucun paiement trouv\xe9"})]})]}),"schedule"===g&&(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"R\xe9f\xe9rence"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\xc9ch\xe9ance"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Jours"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:u.map((e,t)=>(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:e.type})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"font-mono text-sm",children:e.reference})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm",children:e.client})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("span",{className:"font-semibold",children:[(e.amount||0).toFixed(2)," \u20ac"]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm",children:e.dueDate?new Date(e.dueDate).toLocaleDateString("fr-FR"):"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm font-semibold ".concat(e.daysOverdue>0?"text-red-600":"text-gray-600"),children:e.daysOverdue>0?"+".concat(e.daysOverdue,"j"):"".concat(e.daysOverdue,"j")})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("button",{onClick:()=>H({id:e.id}),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700",children:"Marquer pay\xe9"})})]},t))})]})}),0===u.length&&(0,yr.jsxs)("div",{className:"text-center py-12",children:[(0,yr.jsx)(bx,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucun paiement \xe0 l'\xe9ch\xe9ance"})]})]}),"overdue"===g&&(0,yr.jsxs)("div",{className:"space-y-4",children:[m.length>0&&(0,yr.jsx)("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-red-900 font-medium",children:"Total en retard"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-red-600",children:[m.reduce((e,t)=>e+t.remaining,0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"text-right",children:[(0,yr.jsx)("p",{className:"text-sm text-red-900 font-medium",children:"Nombre de dossiers"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-red-600",children:m.length})]})]})}),(0,yr.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"R\xe9f\xe9rence"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Montant"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pay\xe9"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reste"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\xc9ch\xe9ance"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Retard"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:m.map(e=>(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("span",{className:"font-mono text-sm font-semibold",children:e.reference}),e.invoiceNumber&&(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:["Facture: ",e.invoiceNumber]})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold",children:e.client.name}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:e.client.city}),e.client.phone&&(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:e.client.phone})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("span",{className:"font-semibold",children:[(e.amount||0).toFixed(2)," \u20ac"]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("span",{className:"text-sm text-green-600",children:[(e.paid||0).toFixed(2)," \u20ac"]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("span",{className:"font-semibold text-red-600",children:[(e.remaining||0).toFixed(2)," \u20ac"]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("span",{className:"text-sm",children:e.dueDate?new Date(e.dueDate).toLocaleDateString("fr-FR"):"-"})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs font-semibold rounded",children:[e.daysOverdue," jours"]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("button",{onClick:()=>{I({id:e.id,orderId:e.id}),F({orderId:e.id,amount:e.remaining,paymentMethod:"CASH",paymentDate:(new Date).toISOString().split("T")[0],status:"PAYE",notes:"Recouvrement - ".concat(e.daysOverdue," jours de retard")}),R(!0)},className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700",children:"Enregistrer paiement"})})]},e.id))})]})}),0===m.length&&(0,yr.jsxs)("div",{className:"text-center py-12",children:[(0,yr.jsx)(Ma,{className:"h-16 w-16 text-green-300 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucun paiement en retard"})]})]})]}),E&&D&&(0,yr.jsx)(Vn,{isOpen:E,onClose:()=>_(!1),title:"D\xe9tails du paiement",children:(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"N\xb0 Re\xe7u"}),(0,yr.jsx)("p",{className:"font-semibold",children:D.receiptNumber||"-"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Montant"}),(0,yr.jsxs)("p",{className:"font-semibold text-green-600",children:[(D.amount||0).toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"M\xe9thode"}),(0,yr.jsx)("p",{className:"font-semibold",children:q(D.paymentMethod)})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Statut"}),B(D.status)]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Date"}),(0,yr.jsx)("p",{className:"font-semibold",children:D.paymentDate?new Date(D.paymentDate).toLocaleString("fr-FR"):"-"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Commande"}),(0,yr.jsx)("p",{className:"font-semibold",children:(null===(e=D.order)||void 0===e?void 0:e.orderNumber)||"-"})]})]}),D.notes&&(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:"Notes"}),(0,yr.jsx)("p",{className:"text-gray-700 bg-gray-50 rounded p-3 mt-1",children:D.notes})]}),(0,yr.jsx)("div",{className:"flex gap-3 pt-4",children:(0,yr.jsx)("button",{onClick:()=>U(D),className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"T\xe9l\xe9charger re\xe7u PDF"})})]})}),(T||M)&&(0,yr.jsx)(Vn,{isOpen:T||M,onClose:()=>{R(!1),A(!1),I(null)},title:T?"Nouveau paiement":"Modifier paiement",children:(0,yr.jsxs)("form",{onSubmit:T?async e=>{e.preventDefault();try{await async function(e){return(await fr.post("/payments",e)).data}(L),r("Paiement cr\xe9\xe9 avec succ\xe8s"),R(!1),F({orderId:"",amount:"",paymentMethod:"CASH",paymentDate:(new Date).toISOString().split("T")[0],status:"EN_ATTENTE",notes:""}),z()}catch(t){a("Erreur lors de la cr\xe9ation")}}:async e=>{e.preventDefault();try{await async function(e,t){return(await fr.put("/payments/".concat(e),t)).data}(D.id,L),r("Paiement modifi\xe9 avec succ\xe8s"),A(!1),I(null),z()}catch(t){a("Erreur lors de la modification")}},className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID Commande *"}),(0,yr.jsx)("input",{type:"text",value:L.orderId,onChange:e=>F(Yt(Yt({},L),{},{orderId:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant *"}),(0,yr.jsx)("input",{type:"number",step:"0.01",value:L.amount,onChange:e=>F(Yt(Yt({},L),{},{amount:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xe9thode"}),(0,yr.jsxs)("select",{value:L.paymentMethod,onChange:e=>F(Yt(Yt({},L),{},{paymentMethod:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[(0,yr.jsx)("option",{value:"CASH",children:"Esp\xe8ces"}),(0,yr.jsx)("option",{value:"CARD",children:"Carte"}),(0,yr.jsx)("option",{value:"TRANSFER",children:"Virement"}),(0,yr.jsx)("option",{value:"CHECK",children:"Ch\xe8que"})]})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,yr.jsx)("input",{type:"date",value:L.paymentDate,onChange:e=>F(Yt(Yt({},L),{},{paymentDate:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),(0,yr.jsxs)("select",{value:L.status,onChange:e=>F(Yt(Yt({},L),{},{status:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[(0,yr.jsx)("option",{value:"EN_ATTENTE",children:"En attente"}),(0,yr.jsx)("option",{value:"PAYE",children:"Pay\xe9"}),(0,yr.jsx)("option",{value:"IMPAYE",children:"Impay\xe9"})]})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,yr.jsx)("textarea",{value:L.notes,onChange:e=>F(Yt(Yt({},L),{},{notes:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",rows:"3"})]}),(0,yr.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,yr.jsx)("button",{type:"button",onClick:()=>{R(!1),A(!1),I(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Annuler"}),(0,yr.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:T?"Cr\xe9er":"Modifier"})]})]})})]})};const Mx=function(){const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[a,i]=(0,n.useState)("all");(0,n.useEffect)(()=>{l()},[]);const l=async()=>{try{await Pa();t([{id:1,type:"order",title:"Nouvelle commande",message:"Commande #CMD-2026-050 re\xe7ue de Magasin Centre-Ville",isRead:!1,createdAt:"2026-01-20T10:30:00Z",priority:"high"},{id:2,type:"payment",title:"Paiement re\xe7u",message:"Paiement de 789.50 \u20ac re\xe7u pour INV-2026-002",isRead:!1,createdAt:"2026-01-20T09:15:00Z",priority:"medium"},{id:3,type:"system",title:"Mise \xe0 jour syst\xe8me",message:"Le syst\xe8me sera en maintenance demain 02h-04h",isRead:!0,createdAt:"2026-01-19T16:45:00Z",priority:"low"}])}catch(e){console.error(e)}finally{r(!1)}},o="all"===a?e:"unread"===a?e.filter(e=>!e.isRead):e.filter(e=>e.isRead);return s?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Notifications ADMIN"}),(0,yr.jsxs)("button",{onClick:()=>Da(),className:"btn-secondary flex items-center space-x-2",children:[(0,yr.jsx)(Ma,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Tout marquer comme lu"})]})]}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,yr.jsxs)("button",{onClick:()=>i("all"),className:"px-4 py-2 rounded-lg font-medium ".concat("all"===a?"bg-primary-600 text-white":"bg-gray-100 text-gray-700"),children:["Toutes (",e.length,")"]}),(0,yr.jsxs)("button",{onClick:()=>i("unread"),className:"px-4 py-2 rounded-lg font-medium ".concat("unread"===a?"bg-primary-600 text-white":"bg-gray-100 text-gray-700"),children:["Non lues (",e.filter(e=>!e.isRead).length,")"]})]}),(0,yr.jsx)("div",{className:"space-y-4",children:o.map(s=>(0,yr.jsx)("div",{className:"border-2 rounded-xl p-4 ".concat(s.isRead?"bg-white border-gray-200":"bg-blue-50 border-blue-200"),children:(0,yr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,yr.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[(0,yr.jsx)("div",{className:"p-3 rounded-full bg-white text-primary-600",children:(0,yr.jsx)(na,{className:"h-6 w-6"})}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:s.title}),(0,yr.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:s.message}),(0,yr.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,yr.jsx)(Ra,{className:"h-4 w-4 mr-1"}),new Date(s.createdAt).toLocaleString("fr-FR")]})]})]}),!s.isRead&&(0,yr.jsx)("button",{onClick:()=>(async s=>{await Oa(s),t(e.map(e=>e.id===s?Yt(Yt({},e),{},{isRead:!0}):e))})(s.id),className:"btn-secondary text-sm",children:"Marquer lu"})]})},s.id))})]})]})},Ax=Br("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),Px=Br("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Ox=Br("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Dx=Br("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);async function Ix(e){return(await fr.put("/settings",{settings:e})).data}const Lx=function(){var e,t,s,r,a,i;const{user:l}=Nr(),{toast:o,showToast:c,hideToast:d,showSuccess:u,showError:h}=mn(),[m,p]=(0,n.useState)("profile"),[x,f]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1),j=n.useRef(null),N=(null===l||void 0===l||null===(e=l.name)||void 0===e?void 0:e.split(" "))||[],[w,k]=(0,n.useState)({firstName:N[0]||"",lastName:N.slice(1).join(" ")||"",email:(null===l||void 0===l?void 0:l.email)||"",phone:(null===l||void 0===l?void 0:l.phone)||""});(0,n.useEffect)(()=>{if(l){var e;const t=(null===(e=l.name)||void 0===e?void 0:e.split(" "))||[];k({firstName:t[0]||"",lastName:t.slice(1).join(" ")||"",email:l.email||"",phone:l.phone||""})}},[l]);const[S,C]=(0,n.useState)({email:!0,sms:!1,orders:!0,stocks:!0,users:!0,stores:!0}),[E,_]=(0,n.useState)({current:"",new:"",confirm:""}),[T,R]=(0,n.useState)({companyName:"",companyEmail:"",companyPhone:"",companyAddress:"",companyCity:"",companyPostalCode:"",companyCountry:"FR",companySIRET:"",companyVAT:"",defaultCurrency:"EUR",taxRate:20,lowStockThreshold:10,autoAssignOrders:!1,orderDeadlineHour:18,orderDeadlineMinute:0,deliveryDays:2,invoicePrefix:"FAC",invoiceStartNumber:1}),[M,A]=(0,n.useState)({tvaRate:20,tvaRateReduced:5.5,tvaRateSuperReduced:2.1,invoiceFooter:"",invoiceTerms:"",paymentTerms:"30"});(0,n.useEffect)(()=>{gr().catch(()=>{})},[]),(0,n.useEffect)(()=>{P()},[]);const P=async()=>{try{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=e?{category:e}:{};return(await fr.get("/settings",{params:t})).data}(),t=e.settings||{};if(!t||0===Object.keys(t).length)return;t.general&&R(e=>{var s,r,a,n,i,l,o,c,d,u,h,m,p,x,f;return Yt(Yt({},e),{},{companyName:(null===(s=t.general.find(e=>"company.name"===e.key))||void 0===s?void 0:s.value)||e.companyName,companyEmail:(null===(r=t.general.find(e=>"company.email"===e.key))||void 0===r?void 0:r.value)||e.companyEmail,companyPhone:(null===(a=t.general.find(e=>"company.phone"===e.key))||void 0===a?void 0:a.value)||e.companyPhone,companyAddress:(null===(n=t.general.find(e=>"company.address"===e.key))||void 0===n?void 0:n.value)||"",companyCity:(null===(i=t.general.find(e=>"company.city"===e.key))||void 0===i?void 0:i.value)||"",companyPostalCode:(null===(l=t.general.find(e=>"company.postalCode"===e.key))||void 0===l?void 0:l.value)||"",companyCountry:(null===(o=t.general.find(e=>"company.country"===e.key))||void 0===o?void 0:o.value)||"FR",companySIRET:(null===(c=t.general.find(e=>"company.siret"===e.key))||void 0===c?void 0:c.value)||"",companyVAT:(null===(d=t.general.find(e=>"company.vat"===e.key))||void 0===d?void 0:d.value)||"",defaultCurrency:(null===(u=t.general.find(e=>"currency.default"===e.key))||void 0===u?void 0:u.value)||"EUR",lowStockThreshold:parseInt((null===(h=t.general.find(e=>"stock.lowThreshold"===e.key))||void 0===h?void 0:h.value)||"10"),autoAssignOrders:"true"===(null===(m=t.general.find(e=>"orders.autoAssign"===e.key))||void 0===m?void 0:m.value),orderDeadlineHour:parseInt((null===(p=t.general.find(e=>"orders.deadlineHour"===e.key))||void 0===p?void 0:p.value)||"18"),orderDeadlineMinute:parseInt((null===(x=t.general.find(e=>"orders.deadlineMinute"===e.key))||void 0===x?void 0:x.value)||"0"),deliveryDays:parseInt((null===(f=t.general.find(e=>"delivery.days"===e.key))||void 0===f?void 0:f.value)||"2")})}),t.fiscal&&A(e=>{var s,r,a,n,i,l;return Yt(Yt({},e),{},{tvaRate:parseFloat((null===(s=t.fiscal.find(e=>"tva.rate"===e.key))||void 0===s?void 0:s.value)||"20"),tvaRateReduced:parseFloat((null===(r=t.fiscal.find(e=>"tva.rateReduced"===e.key))||void 0===r?void 0:r.value)||"5.5"),tvaRateSuperReduced:parseFloat((null===(a=t.fiscal.find(e=>"tva.rateSuperReduced"===e.key))||void 0===a?void 0:a.value)||"2.1"),invoiceFooter:(null===(n=t.fiscal.find(e=>"invoice.footer"===e.key))||void 0===n?void 0:n.value)||"",invoiceTerms:(null===(i=t.fiscal.find(e=>"invoice.terms"===e.key))||void 0===i?void 0:i.value)||"",paymentTerms:(null===(l=t.fiscal.find(e=>"payment.terms"===e.key))||void 0===l?void 0:l.value)||"30"})})}catch(e){console.error("Erreur chargement settings:",e),h("Impossible de charger les param\xe8tres. Les valeurs par d\xe9faut seront utilis\xe9es.")}},O=(e=>{if(!e)return{strength:0,label:"",color:""};let t=0;e.length>=8&&t++,e.length>=12&&t++,/[a-z]/.test(e)&&/[A-Z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^a-zA-Z\d]/.test(e)&&t++;return[{strength:0,label:"",color:""},{strength:1,label:"Tr\xe8s faible",color:"bg-red-500"},{strength:2,label:"Faible",color:"bg-orange-500"},{strength:3,label:"Moyen",color:"bg-yellow-500"},{strength:4,label:"Fort",color:"bg-primary-500"},{strength:5,label:"Tr\xe8s fort",color:"bg-green-500"}][t]})(E.new),D=[{id:"profile",label:"Profil",icon:za},{id:"security",label:"S\xe9curit\xe9",icon:an},{id:"system",label:"Syst\xe8me",icon:Ax},{id:"fiscal",label:"Fiscalit\xe9",icon:dl},{id:"notifications",label:"Notifications",icon:na}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 animate-slide-up",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Param\xe8tres"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Gestion des param\xe8tres syst\xe8me et de votre compte"})]}),(0,yr.jsx)("div",{className:"flex flex-wrap gap-2",children:D.map((e,t)=>{const s=e.icon,r=m===e.id;return(0,yr.jsxs)("button",{onClick:()=>p(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 ".concat(r?"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[(0,yr.jsx)(s,{className:"h-4 w-4"}),(0,yr.jsx)("span",{className:"text-sm",children:e.label})]},e.id)})})]}),(0,yr.jsxs)("div",{children:["profile"===m&&(0,yr.jsxs)("div",{className:"animate-scale-in",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-3 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl",children:(0,yr.jsx)(za,{className:"h-6 w-6 text-white"})}),(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Mon Profil"})]})}),(0,yr.jsxs)("div",{className:"flex items-center space-x-6 mb-8 p-6 bg-gradient-to-br from-primary-50 to-white rounded-xl border-2 border-primary-200 card-hover shadow-md",children:[(0,yr.jsx)("input",{ref:j,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:async e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){v(!0);try{await Pn(s),u("Photo de profil mise \xe0 jour.")}catch(r){h((null===r||void 0===r?void 0:r.message)||"Erreur lors du t\xe9l\xe9versement.")}finally{v(!1),e.target.value=""}}}}),(0,yr.jsxs)("div",{className:"relative group",children:[(0,yr.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg overflow-hidden group-hover:scale-110 transition-transform",children:null!==l&&void 0!==l&&l.avatarUrl?(0,yr.jsx)("img",{src:l.avatarUrl,alt:"",className:"w-full h-full object-cover"}):(0,yr.jsxs)("span",{children:[(null===(t=w.firstName)||void 0===t?void 0:t.charAt(0))||(null===l||void 0===l||null===(s=l.name)||void 0===s?void 0:s.charAt(0))||"U",(null===(r=w.lastName)||void 0===r?void 0:r.charAt(0))||(null===l||void 0===l||null===(a=l.name)||void 0===a||null===(i=a.split(" ")[1])||void 0===i?void 0:i.charAt(0))||""]})}),(0,yr.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},disabled:y,className:"absolute bottom-0 right-0 p-2 bg-white rounded-full shadow-lg border-2 border-primary-500 hover:bg-gray-50 opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50",title:"Changer la photo",children:y?(0,yr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary-500 border-t-transparent"}):(0,yr.jsx)(Px,{className:"h-4 w-4 text-primary-600"})})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:(null===l||void 0===l?void 0:l.name)||"".concat(w.firstName," ").concat(w.lastName).trim()}),(0,yr.jsx)("p",{className:"text-gray-600",children:null===l||void 0===l?void 0:l.email}),l&&!l.emailVerified&&(0,yr.jsxs)("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,yr.jsx)("p",{className:"text-sm text-yellow-800 mb-2",children:"\u26a0\ufe0f Votre adresse email n'a pas \xe9t\xe9 v\xe9rifi\xe9e"}),(0,yr.jsx)("button",{type:"button",onClick:async()=>{b(!0);try{await br(l.email),u("Un nouvel email de v\xe9rification a \xe9t\xe9 envoy\xe9. V\xe9rifiez votre bo\xeete mail.")}catch(e){const s=(null===e||void 0===e?void 0:e.message)||"";if(s.toLowerCase().includes("d\xe9j\xe0 v\xe9rifi\xe9")){try{await gr()}catch(t){}u("Votre email est d\xe9j\xe0 v\xe9rifi\xe9.")}else h(s||"Erreur lors de l'envoi de l'email. Veuillez r\xe9essayer.")}finally{b(!1)}},disabled:g,className:"w-full btn btn-secondary text-sm flex items-center justify-center space-x-2",children:g?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),(0,yr.jsx)("span",{children:"Envoi..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(aa,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Renvoyer l'email de v\xe9rification"})]})})]}),(0,yr.jsxs)("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full bg-primary-100 text-primary-700 text-sm font-semibold",children:[(0,yr.jsx)(In,{className:"h-4 w-4 mr-1"}),"Administrateur"]})]})]}),(0,yr.jsxs)("div",{className:"space-y-4 p-6 bg-white rounded-xl shadow-md card-hover",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pr\xe9nom *"}),(0,yr.jsx)("input",{type:"text",value:w.firstName,onChange:e=>k(Yt(Yt({},w),{},{firstName:e.target.value})),className:"input",placeholder:"Votre pr\xe9nom"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom *"}),(0,yr.jsx)("input",{type:"text",value:w.lastName,onChange:e=>k(Yt(Yt({},w),{},{lastName:e.target.value})),className:"input",placeholder:"Votre nom"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,yr.jsx)("input",{type:"email",value:w.email,className:"input bg-gray-50 cursor-not-allowed",disabled:!0}),(0,yr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"L'email ne peut pas \xeatre modifi\xe9"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("input",{type:"tel",value:w.phone,onChange:e=>k(Yt(Yt({},w),{},{phone:e.target.value})),className:"input",placeholder:"+33 X XX XX XX XX"})]})]}),(0,yr.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,yr.jsx)("button",{onClick:async()=>{f(!0);try{if(null===l||void 0===l||!l.id)return void h("Utilisateur non identifi\xe9");await new Promise(e=>setTimeout(e,500));const e={name:"".concat(w.firstName||""," ").concat(w.lastName||"").trim()||l.name,phone:w.phone||null};await Mn(e),u("Profil mis \xe0 jour avec succ\xe8s")}catch(e){h("Erreur lors de la mise \xe0 jour du profil"),console.error(e)}finally{f(!1)}},disabled:x,className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white px-8 py-3 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center space-x-2 disabled:opacity-50",children:x?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Sauvegarde..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ll,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Enregistrer"})]})})})]})]}),"security"===m&&(0,yr.jsxs)("div",{className:"animate-scale-in",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,yr.jsx)("div",{className:"p-3 bg-gradient-to-br from-red-500 to-red-600 rounded-xl",children:(0,yr.jsx)(an,{className:"h-6 w-6 text-white"})}),(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"S\xe9curit\xe9"})]}),(0,yr.jsxs)("div",{className:"space-y-4 p-6 bg-white rounded-xl shadow-md card-hover",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe actuel *"}),(0,yr.jsx)("input",{type:"password",value:E.current,onChange:e=>_(Yt(Yt({},E),{},{current:e.target.value})),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nouveau mot de passe *"}),(0,yr.jsx)("input",{type:"password",value:E.new,onChange:e=>_(Yt(Yt({},E),{},{new:e.target.value})),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),E.new&&(0,yr.jsxs)("div",{className:"mt-2",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,yr.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Force du mot de passe:"}),(0,yr.jsx)("span",{className:"text-xs font-semibold ".concat("Tr\xe8s fort"===O.label?"text-green-600":"Fort"===O.label?"text-primary-600":"text-orange-600"),children:O.label})]}),(0,yr.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,yr.jsx)("div",{className:"h-full ".concat(O.color," transition-all duration-500"),style:{width:"".concat(O.strength/5*100,"%")}})})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe *"}),(0,yr.jsx)("input",{type:"password",value:E.confirm,onChange:e=>_(Yt(Yt({},E),{},{confirm:e.target.value})),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),E.confirm&&(0,yr.jsx)("div",{className:"mt-2 flex items-center space-x-2",children:E.new===E.confirm?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(Ox,{className:"h-4 w-4 text-green-600"}),(0,yr.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"Les mots de passe correspondent"})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ua,{className:"h-4 w-4 text-red-600"}),(0,yr.jsx)("span",{className:"text-xs text-red-600 font-medium",children:"Les mots de passe ne correspondent pas"})]})})]})]}),(0,yr.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[(0,yr.jsx)("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Exigences du mot de passe :"}),(0,yr.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,yr.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("div",{className:"w-4 h-4 rounded-full flex items-center justify-center ".concat(E.new.length>=8?"bg-green-500":"bg-gray-300"),children:E.new.length>=8&&(0,yr.jsx)(Ox,{className:"h-3 w-3 text-white"})}),(0,yr.jsx)("span",{children:"Au moins 8 caract\xe8res"})]}),(0,yr.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("div",{className:"w-4 h-4 rounded-full flex items-center justify-center ".concat(/[A-Z]/.test(E.new)&&/[a-z]/.test(E.new)?"bg-green-500":"bg-gray-300"),children:/[A-Z]/.test(E.new)&&/[a-z]/.test(E.new)&&(0,yr.jsx)(Ox,{className:"h-3 w-3 text-white"})}),(0,yr.jsx)("span",{children:"Majuscules et minuscules"})]}),(0,yr.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("div",{className:"w-4 h-4 rounded-full flex items-center justify-center ".concat(/\d/.test(E.new)?"bg-green-500":"bg-gray-300"),children:/\d/.test(E.new)&&(0,yr.jsx)(Ox,{className:"h-3 w-3 text-white"})}),(0,yr.jsx)("span",{children:"Au moins un chiffre"})]})]})]}),(0,yr.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,yr.jsx)("button",{onClick:async()=>{if(E.new===E.confirm)if(E.new.length<8)h("Le mot de passe doit contenir au moins 8 caract\xe8res");else{f(!0);try{if(null===l||void 0===l||!l.id)return void h("Utilisateur non identifi\xe9");await new Promise(e=>setTimeout(e,500)),await An(E.current,E.new),u("Mot de passe modifi\xe9 avec succ\xe8s"),_({current:"",new:"",confirm:""})}catch(e){h("Erreur lors de la modification du mot de passe"),console.error(e)}finally{f(!1)}}else h("Les mots de passe ne correspondent pas")},disabled:x||!E.current||!E.new||E.new!==E.confirm,className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-8 py-3 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Modification..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(an,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Modifier le mot de passe"})]})})})]})]}),"system"===m&&(0,yr.jsxs)("div",{className:"animate-scale-in",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,yr.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-md",children:(0,yr.jsx)(Ax,{className:"h-6 w-6 text-white"})}),(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Param\xe8tres Syst\xe8me"})]}),(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-white rounded-xl border-2 border-blue-200 card-hover shadow-md",children:[(0,yr.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(Dx,{className:"h-5 w-5 mr-2 text-blue-600"}),"Informations de l'entreprise"]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom de l'entreprise"}),(0,yr.jsx)("input",{type:"text",value:T.companyName,onChange:e=>R(Yt(Yt({},T),{},{companyName:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email de contact"}),(0,yr.jsx)("input",{type:"email",value:T.companyEmail,onChange:e=>R(Yt(Yt({},T),{},{companyEmail:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("input",{type:"tel",value:T.companyPhone,onChange:e=>R(Yt(Yt({},T),{},{companyPhone:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse"}),(0,yr.jsx)("input",{type:"text",value:T.companyAddress,onChange:e=>R(Yt(Yt({},T),{},{companyAddress:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ville"}),(0,yr.jsx)("input",{type:"text",value:T.companyCity,onChange:e=>R(Yt(Yt({},T),{},{companyCity:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Code postal"}),(0,yr.jsx)("input",{type:"text",value:T.companyPostalCode,onChange:e=>R(Yt(Yt({},T),{},{companyPostalCode:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pays"}),(0,yr.jsxs)("select",{value:T.companyCountry,onChange:e=>R(Yt(Yt({},T),{},{companyCountry:e.target.value})),className:"input",children:[(0,yr.jsx)("option",{value:"FR",children:"France"}),(0,yr.jsx)("option",{value:"BE",children:"Belgique"}),(0,yr.jsx)("option",{value:"CH",children:"Suisse"})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"SIRET"}),(0,yr.jsx)("input",{type:"text",value:T.companySIRET,onChange:e=>R(Yt(Yt({},T),{},{companySIRET:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"N\xb0 TVA"}),(0,yr.jsx)("input",{type:"text",value:T.companyVAT,onChange:e=>R(Yt(Yt({},T),{},{companyVAT:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Devise par d\xe9faut"}),(0,yr.jsxs)("select",{value:T.defaultCurrency,onChange:e=>R(Yt(Yt({},T),{},{defaultCurrency:e.target.value})),className:"input",children:[(0,yr.jsx)("option",{value:"EUR",children:"EUR (\u20ac)"}),(0,yr.jsx)("option",{value:"USD",children:"USD ($)"}),(0,yr.jsx)("option",{value:"GBP",children:"GBP (\xa3)"})]})]})]})]}),(0,yr.jsxs)("div",{className:"p-6 bg-gradient-to-br from-orange-50 to-white rounded-xl border-2 border-orange-200",children:[(0,yr.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(ia,{className:"h-5 w-5 mr-2 text-orange-600"}),"Param\xe8tres op\xe9rationnels"]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Seuil d'alerte stock"}),(0,yr.jsx)("input",{type:"number",value:T.lowStockThreshold,onChange:e=>R(Yt(Yt({},T),{},{lowStockThreshold:parseInt(e.target.value)})),className:"input",min:"0"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"D\xe9lai de livraison (jours)"}),(0,yr.jsx)("input",{type:"number",value:T.deliveryDays,onChange:e=>R(Yt(Yt({},T),{},{deliveryDays:parseInt(e.target.value)})),className:"input",min:"1"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Heure limite commande"}),(0,yr.jsxs)("div",{className:"flex gap-2",children:[(0,yr.jsx)("input",{type:"number",value:T.orderDeadlineHour,onChange:e=>R(Yt(Yt({},T),{},{orderDeadlineHour:parseInt(e.target.value)})),className:"input flex-1",min:"0",max:"23",placeholder:"Heure"}),(0,yr.jsx)("span",{className:"self-center",children:":"}),(0,yr.jsx)("input",{type:"number",value:T.orderDeadlineMinute,onChange:e=>R(Yt(Yt({},T),{},{orderDeadlineMinute:parseInt(e.target.value)})),className:"input flex-1",min:"0",max:"59",placeholder:"Minute"})]})]})]}),(0,yr.jsx)("div",{className:"mt-4 p-4 bg-white rounded-lg",children:(0,yr.jsxs)("label",{className:"flex items-center justify-between cursor-pointer group",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-primary-100 rounded-lg group-hover:bg-primary-200 transition-colors",children:(0,yr.jsx)(Ax,{className:"h-5 w-5 text-primary-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:"Assignation automatique des commandes"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Les commandes seront automatiquement assign\xe9es aux magasins"})]})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("input",{type:"checkbox",checked:T.autoAssignOrders,onChange:e=>R(Yt(Yt({},T),{},{autoAssignOrders:e.target.checked})),className:"sr-only peer"}),(0,yr.jsx)("div",{className:"w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-primary-600"})]})]})})]}),(0,yr.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,yr.jsx)("button",{onClick:async()=>{f(!0);try{const e=[{key:"company.name",value:T.companyName},{key:"company.email",value:T.companyEmail},{key:"company.phone",value:T.companyPhone},{key:"company.address",value:T.companyAddress},{key:"company.city",value:T.companyCity},{key:"company.postalCode",value:T.companyPostalCode},{key:"company.country",value:T.companyCountry},{key:"company.siret",value:T.companySIRET},{key:"company.vat",value:T.companyVAT},{key:"currency.default",value:T.defaultCurrency},{key:"stock.lowThreshold",value:T.lowStockThreshold.toString()},{key:"orders.autoAssign",value:T.autoAssignOrders.toString()},{key:"orders.deadlineHour",value:T.orderDeadlineHour.toString()},{key:"orders.deadlineMinute",value:T.orderDeadlineMinute.toString()},{key:"delivery.days",value:T.deliveryDays.toString()}];await Ix(e),u("Param\xe8tres syst\xe8me sauvegard\xe9s avec succ\xe8s")}catch(e){h("Erreur lors de la sauvegarde des param\xe8tres"),console.error(e)}finally{f(!1)}},disabled:x,className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-8 py-3 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center space-x-2 disabled:opacity-50",children:x?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Sauvegarde..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ll,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Enregistrer"})]})})})]})]}),"fiscal"===m&&(0,yr.jsxs)("div",{className:"animate-scale-in",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,yr.jsx)("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl",children:(0,yr.jsx)(dl,{className:"h-6 w-6 text-white"})}),(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Param\xe8tres Fiscaux"})]}),(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"p-6 bg-gradient-to-br from-indigo-50 to-white rounded-xl border-2 border-indigo-200 card-hover shadow-md",children:[(0,yr.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(dl,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Taux de TVA"]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Taux normal (%)"}),(0,yr.jsx)("input",{type:"number",value:M.tvaRate,onChange:e=>A(Yt(Yt({},M),{},{tvaRate:parseFloat(e.target.value)})),className:"input",min:"0",max:"100",step:"0.1"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Taux r\xe9duit (%)"}),(0,yr.jsx)("input",{type:"number",value:M.tvaRateReduced,onChange:e=>A(Yt(Yt({},M),{},{tvaRateReduced:parseFloat(e.target.value)})),className:"input",min:"0",max:"100",step:"0.1"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Taux super r\xe9duit (%)"}),(0,yr.jsx)("input",{type:"number",value:M.tvaRateSuperReduced,onChange:e=>A(Yt(Yt({},M),{},{tvaRateSuperReduced:parseFloat(e.target.value)})),className:"input",min:"0",max:"100",step:"0.1"})]})]})]}),(0,yr.jsxs)("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-white rounded-xl border-2 border-blue-200 card-hover shadow-md",children:[(0,yr.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(dl,{className:"h-5 w-5 mr-2 text-blue-600"}),"Param\xe8tres de facturation"]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pr\xe9fixe facture"}),(0,yr.jsx)("input",{type:"text",value:T.invoicePrefix,onChange:e=>R(Yt(Yt({},T),{},{invoicePrefix:e.target.value})),className:"input",placeholder:"FAC"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Num\xe9ro de d\xe9part"}),(0,yr.jsx)("input",{type:"number",value:T.invoiceStartNumber,onChange:e=>R(Yt(Yt({},T),{},{invoiceStartNumber:parseInt(e.target.value)})),className:"input",min:"1"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"D\xe9lai de paiement (jours)"}),(0,yr.jsx)("input",{type:"number",value:M.paymentTerms,onChange:e=>A(Yt(Yt({},M),{},{paymentTerms:e.target.value})),className:"input",min:"0"})]})]})]}),(0,yr.jsxs)("div",{className:"p-6 bg-gradient-to-br from-green-50 to-white rounded-xl border-2 border-green-200 card-hover shadow-md",children:[(0,yr.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,yr.jsx)(dl,{className:"h-5 w-5 mr-2 text-green-600"}),"Textes personnalis\xe9s"]}),(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pied de page facture"}),(0,yr.jsx)("textarea",{value:M.invoiceFooter,onChange:e=>A(Yt(Yt({},M),{},{invoiceFooter:e.target.value})),className:"input",rows:"3",placeholder:"Merci de votre confiance..."})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Conditions g\xe9n\xe9rales"}),(0,yr.jsx)("textarea",{value:M.invoiceTerms,onChange:e=>A(Yt(Yt({},M),{},{invoiceTerms:e.target.value})),className:"input",rows:"4",placeholder:"Conditions de vente, modalit\xe9s de paiement..."})]})]})]}),(0,yr.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,yr.jsx)("button",{onClick:async()=>{f(!0);try{const e=[{key:"tva.rate",value:M.tvaRate.toString()},{key:"tva.rateReduced",value:M.tvaRateReduced.toString()},{key:"tva.rateSuperReduced",value:M.tvaRateSuperReduced.toString()},{key:"invoice.footer",value:M.invoiceFooter},{key:"invoice.terms",value:M.invoiceTerms},{key:"payment.terms",value:M.paymentTerms}];await Ix(e),u("Param\xe8tres fiscaux sauvegard\xe9s avec succ\xe8s")}catch(e){h("Erreur lors de la sauvegarde"),console.error(e)}finally{f(!1)}},disabled:x,className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-indigo-500 to-indigo-600 hover:from-indigo-600 hover:to-indigo-700 text-white px-8 py-3 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center space-x-2 disabled:opacity-50",children:x?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Sauvegarde..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ll,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Enregistrer"})]})})})]})]}),"notifications"===m&&(0,yr.jsxs)("div",{className:"animate-scale-in",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,yr.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl",children:(0,yr.jsx)(na,{className:"h-6 w-6 text-white"})}),(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Pr\xe9f\xe9rences de Notification"})]}),(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-white rounded-xl border-2 border-purple-200 card-hover shadow-md",children:[(0,yr.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Canaux de notification"}),(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("label",{className:"flex items-center justify-between cursor-pointer group p-4 bg-white rounded-lg hover:shadow-md transition-all",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,yr.jsx)(na,{className:"h-5 w-5 text-blue-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:"Notifications par email"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Recevoir des notifications par email"})]})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("input",{type:"checkbox",checked:S.email,onChange:e=>C(Yt(Yt({},S),{},{email:e.target.checked})),className:"sr-only peer"}),(0,yr.jsx)("div",{className:"w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,yr.jsxs)("label",{className:"flex items-center justify-between cursor-pointer group p-4 bg-white rounded-lg hover:shadow-md transition-all",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,yr.jsx)(na,{className:"h-5 w-5 text-green-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:"Notifications par SMS"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Recevoir des notifications par SMS"})]})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("input",{type:"checkbox",checked:S.sms,onChange:e=>C(Yt(Yt({},S),{},{sms:e.target.checked})),className:"sr-only peer"}),(0,yr.jsx)("div",{className:"w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-primary-600"})]})]})]})]}),(0,yr.jsxs)("div",{className:"p-6 bg-gradient-to-br from-orange-50 to-white rounded-xl border-2 border-orange-200 card-hover shadow-md",children:[(0,yr.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Types de notifications"}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"orders",label:"Nouvelles commandes",color:"blue"},{key:"stocks",label:"Alertes de stock",color:"orange"},{key:"users",label:"Gestion des utilisateurs",color:"purple"},{key:"stores",label:"Gestion des magasins",color:"green"}].map(e=>(0,yr.jsxs)("label",{className:"flex items-center justify-between cursor-pointer group p-4 bg-white rounded-lg hover:shadow-md transition-all",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-".concat(e.color,"-100 rounded-lg"),children:(0,yr.jsx)(Ox,{className:"h-4 w-4 text-".concat(e.color,"-600")})}),(0,yr.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("input",{type:"checkbox",checked:S[e.key],onChange:t=>C(Yt(Yt({},S),{},{[e.key]:t.target.checked})),className:"sr-only peer"}),(0,yr.jsx)("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]},e.key))})]}),(0,yr.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,yr.jsx)("button",{onClick:async()=>{f(!0);try{await new Promise(e=>setTimeout(e,500)),u("Pr\xe9f\xe9rences de notification sauvegard\xe9es")}catch(e){h("Erreur lors de la sauvegarde")}finally{f(!1)}},disabled:x,className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-8 py-3 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center space-x-2 disabled:opacity-50",children:x?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Sauvegarde..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ll,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Enregistrer"})]})})})]})]})]}),(0,yr.jsx)(hn,Yt(Yt({},o),{},{onClose:d}))]})};const Fx=function(){const{stores:e,selectedStoreId:t,selectStore:s}=_r();if(!e||0===e.length)return null;const r=e.filter(e=>e&&e.id&&e.name);return r.length<=1?null:(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)(Gr,{className:"h-5 w-5 text-gray-400"}),(0,yr.jsxs)("select",{value:t||"",onChange:e=>s(e.target.value||null),className:"input",children:[(0,yr.jsx)("option",{value:"",children:"Tous les magasins"}),r.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]})};const zx=function(){const e=ae(),{user:t}=Nr(),{stores:s,selectedStoreId:r}=_r(),[a,i]=(0,n.useState)({totalOrders:0,pendingOrders:0,readyOrders:0,totalRevenue:0,storesCount:0}),[l,o]=(0,n.useState)(!0);(0,n.useEffect)(()=>{c()},[r]);const c=async()=>{try{o(!0);const e={scope:"org",limit:500},[t,s]=await Promise.all([qi(e),kr({page:1,limit:200})]);let a=(null===t||void 0===t?void 0:t.orders)||[];const n=(null===s||void 0===s?void 0:s.shops)||[];r&&(a=a.filter(e=>e.shopId===r));const l=a.filter(e=>"LIVREE"===e.status).reduce((e,t)=>e+(t.totalTTC||t.total||0),0),c=["NEW","AGGREGATED","SUPPLIER_ORDERED","PREPARATION","LIVRAISON"],d=["PREPARATION"];i({totalOrders:a.length,pendingOrders:a.filter(e=>c.includes(e.status)).length,readyOrders:a.filter(e=>d.includes(e.status)).length,totalRevenue:l,storesCount:n.length})}catch(e){console.error("Erreur lors du chargement des statistiques:",e)}finally{o(!1)}};if(l)return(0,yr.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Chargement..."})]})});const d=[{title:"Total commandes",value:a.totalOrders,icon:Yr,color:"primary",route:ga.ORDERS},{title:"Commandes en attente",value:a.pendingOrders,icon:bx,color:"orange",route:ga.ORDERS},{title:"Commandes pr\xeates",value:a.readyOrders,icon:Qr,color:"green",route:ga.ORDERS},{title:"Chiffre d'affaires",value:"".concat(a.totalRevenue.toFixed(2)," \u20ac"),icon:Xr,color:"purple",route:ga.FINANCES},{title:"Mes magasins",value:a.storesCount,icon:Gr,color:"blue",route:ga.STORES}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tableau de bord"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Vue consolid\xe9e de tous vos magasins"})]}),s.length>1&&(0,yr.jsx)("div",{className:"flex items-center space-x-4",children:(0,yr.jsx)(Fx,{})})]}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map((t,s)=>{const r=t.icon;return(0,yr.jsx)("div",{onClick:()=>e(t.route),className:"card bg-gradient-to-r ".concat({primary:"from-primary-50 to-primary-100 border-primary-200 text-primary-600",blue:"from-blue-50 to-blue-100 border-blue-200 text-blue-600",green:"from-green-50 to-green-100 border-green-200 text-green-600",purple:"from-purple-50 to-purple-100 border-purple-200 text-purple-600",orange:"from-orange-50 to-orange-100 border-orange-200 text-orange-600"}[t.color]," cursor-pointer hover:shadow-lg transition-all"),children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t.title}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:t.value})]}),(0,yr.jsx)(r,{className:"h-12 w-12 opacity-80"})]})},s)})}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Actions rapides"}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,yr.jsxs)("button",{onClick:()=>e(ga.ORDER_CREATE),className:"btn btn-primary text-left flex items-center space-x-2",children:[(0,yr.jsx)(Yr,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Nouvelle commande"})]}),(0,yr.jsxs)("button",{onClick:()=>e(ga.ORDERS),className:"btn btn-primary text-left flex items-center space-x-2",children:[(0,yr.jsx)(Yr,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Mes commandes"})]}),(0,yr.jsxs)("button",{onClick:()=>e(ga.STORES),className:"btn btn-primary text-left flex items-center space-x-2",children:[(0,yr.jsx)(Gr,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Mes magasins"})]}),(0,yr.jsxs)("button",{onClick:()=>e(ga.FINANCES),className:"btn btn-primary text-left flex items-center space-x-2",children:[(0,yr.jsx)(Xr,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Finances"})]})]})]})]})};const Vx=function(e){let{status:t}=e;const s={NEW:{label:"Nouvelle",className:"bg-blue-100 text-blue-700"},AGGREGATED:{label:"Agr\xe9g\xe9e",className:"bg-purple-100 text-purple-700"},SUPPLIER_ORDERED:{label:"Commande fournisseur",className:"bg-indigo-100 text-indigo-700"},PREPARATION:{label:"En pr\xe9paration",className:"bg-orange-100 text-orange-700"},LIVRAISON:{label:"En livraison",className:"bg-amber-100 text-amber-700"},LIVREE:{label:"Livr\xe9e",className:"bg-teal-100 text-teal-700"},ANNULEE:{label:"Annul\xe9e",className:"bg-red-100 text-red-700"},brouillon:{label:"Brouillon",className:"bg-gray-100 text-gray-700"},"envoy\xe9e":{label:"Envoy\xe9e",className:"bg-blue-100 text-blue-700"},"confirm\xe9e":{label:"Confirm\xe9e",className:"bg-yellow-100 text-yellow-700"},"en_pr\xe9paration":{label:"En pr\xe9paration",className:"bg-orange-100 text-orange-700"},"pr\xeate":{label:"Pr\xeate",className:"bg-green-100 text-green-700"},"livr\xe9e":{label:"Livr\xe9e",className:"bg-teal-100 text-teal-700"},"annul\xe9e":{label:"Annul\xe9e",className:"bg-red-100 text-red-700"}}[t]||{label:t||"Inconnu",className:"bg-gray-100 text-gray-700"};return(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(s.className),children:s.label})};const Ux=function(){const e=ae(),[t]=Fe(),{toast:s,showToast:r,hideToast:a,showSuccess:i,showError:l}=mn(),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(null),[p,x]=(0,n.useState)(!0),[f,g]=(0,n.useState)(1),[b,y]=(0,n.useState)(1),[v,j]=(0,n.useState)(0),[N,w]=(0,n.useState)(""),[k,S]=(0,n.useState)("");(0,n.useEffect)(()=>{const e=t.get("store");e&&(m(e),localStorage.setItem("selectedStoreId",e))},[t]),(0,n.useEffect)(()=>{C()},[f,h]);const C=async()=>{try{x(!0),await Promise.all([_(),E()])}catch(e){l("Erreur lors du chargement des donn\xe9es"),console.error(e)}finally{x(!1)}},E=async()=>{try{var e;const t=await kr({page:1,limit:200});u(null!==(e=null===t||void 0===t?void 0:t.shops)&&void 0!==e?e:[])}catch(t){console.error(t)}},_=async()=>{try{var e;const t=await qi({page:1,limit:500,status:k||void 0,scope:"org"});let s=null!==(e=null===t||void 0===t?void 0:t.orders)&&void 0!==e?e:[];h&&(s=s.filter(e=>e.shopId===h));const r=s.length,a=20,n=Math.max(1,Math.ceil(r/a)),i=(f-1)*a;c(s.slice(i,i+a)),y(n),j(r)}catch(t){l("Erreur lors du chargement des commandes"),console.error(t)}};(0,n.useEffect)(()=>{void 0!==k&&(g(1),_())},[k]);const T=e=>{m(e),g(1)},R=o.filter(e=>{var t,s;if(!N)return!0;const r=N.toLowerCase();return(null===(t=e.orderNumber)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(s=e.storeId)||void 0===s?void 0:s.toLowerCase().includes(r))}),M={total:o.length,byStatus:o.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{}),totalAmount:o.reduce((e,t)=>e+(t.totalTTC||t.total||0),0),byStore:d.reduce((e,t)=>{const s=o.filter(e=>e.storeId===t.id);return e[t.id]={count:s.length,amount:s.reduce((e,t)=>e+(t.totalTTC||t.total||0),0)},e},{})},A=[{key:"orderNumber",label:"N\xb0 Commande",render:(e,t)=>(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:Ui(new Date(t.createdAt),"dd MMM yyyy HH:mm")})]})},{key:"storeId",label:"Magasin",render:e=>{const t=d.find(t=>t.id===e);return(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[t&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(on,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:t.name})]}),!t&&(0,yr.jsx)("span",{children:e||"Non assign\xe9"})]})}},{key:"status",label:"Statut",render:e=>(0,yr.jsx)(Vx,{status:e})},{key:"deliveryDate",label:"Livraison",render:e=>(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,yr.jsx)(bx,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:e?Ui(new Date(e),"dd MMM yyyy"):"Non d\xe9finie"})]})},{key:"items",label:"Articles",render:e=>(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,yr.jsx)(Qr,{className:"h-4 w-4"}),(0,yr.jsxs)("span",{children:[(null===e||void 0===e?void 0:e.length)||0," articles"]})]})},{key:"totalTTC",label:"Montant",render:(e,t)=>{var s,r;return(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("p",{className:"font-bold text-gray-900",children:[(null===(s=t.totalTTC)||void 0===s?void 0:s.toFixed(2))||(null===(r=t.total)||void 0===r?void 0:r.toFixed(2))||"0.00"," \u20ac"]}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:"TTC"})]})}},{key:"actions",label:"Actions",render:(t,s)=>(0,yr.jsx)("div",{className:"flex items-center space-x-2",children:(0,yr.jsx)("button",{onClick:()=>(t=>{e("/client/orders/".concat(t.id))})(s),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Voir les d\xe9tails",children:(0,yr.jsx)(zn,{className:"h-4 w-4"})})})}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mes Commandes"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Toutes vos commandes de tous vos magasins"})]}),(0,yr.jsxs)("button",{onClick:()=>{e("/client/orders/create")},className:"btn btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Yr,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Nouvelle commande"})]})]}),d.length>1&&(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-primary-50 to-primary-100 border-primary-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Filtrer par magasin"}),(0,yr.jsxs)("select",{value:h||"",onChange:e=>T(e.target.value||null),className:"input",children:[(0,yr.jsx)("option",{value:"",children:"Tous les magasins"}),d.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),h&&(0,yr.jsx)("button",{onClick:()=>T(null),className:"ml-4 text-sm text-primary-600 hover:text-primary-700 font-semibold",children:"Voir tous"})]})}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-primary-50 to-primary-100 border-primary-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total commandes"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.total})]}),(0,yr.jsx)(Yr,{className:"h-8 w-8 text-primary-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"En pr\xe9paration"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.byStatus["en_pr\xe9paration"]||0})]}),(0,yr.jsx)(Qr,{className:"h-8 w-8 text-blue-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-green-50 to-green-100 border-green-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Pr\xeates"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.byStatus["pr\xeate"]||0})]}),(0,yr.jsx)(Qr,{className:"h-8 w-8 text-green-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Montant total"}),(0,yr.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[M.totalAmount.toFixed(2)," \u20ac"]})]}),(0,yr.jsx)(Yr,{className:"h-8 w-8 text-purple-600"})]})})]}),!h&&d.length>1&&(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Performance par magasin"}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>{const t=M.byStore[e.id]||{count:0,amount:0};return(0,yr.jsxs)("div",{className:"p-4 bg-gradient-to-r from-white to-gray-50 rounded-xl border border-gray-100 hover:shadow-lg transition-all",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,yr.jsx)("h4",{className:"font-bold text-gray-900",children:e.name}),(0,yr.jsx)("button",{onClick:()=>T(e.id),className:"text-xs text-primary-600 hover:text-primary-700 font-semibold",children:"Filtrer"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Commandes"}),(0,yr.jsx)("p",{className:"text-xl font-bold text-gray-900",children:t.count})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Montant"}),(0,yr.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[t.amount.toFixed(2)," \u20ac"]})]})]})]},e.id)})})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher une commande...",value:N,onChange:e=>w(e.target.value),className:"input pl-10"})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsxs)("select",{value:k,onChange:e=>{S(e.target.value),g(1)},className:"input pl-10",children:[(0,yr.jsx)("option",{value:"",children:"Tous les statuts"}),(0,yr.jsx)("option",{value:"brouillon",children:"Brouillon"}),(0,yr.jsx)("option",{value:"envoy\xe9e",children:"Envoy\xe9e"}),(0,yr.jsx)("option",{value:"confirm\xe9e",children:"Confirm\xe9e"}),(0,yr.jsx)("option",{value:"en_pr\xe9paration",children:"En pr\xe9paration"}),(0,yr.jsx)("option",{value:"pr\xeate",children:"Pr\xeate"}),(0,yr.jsx)("option",{value:"livr\xe9e",children:"Livr\xe9e"}),(0,yr.jsx)("option",{value:"annul\xe9e",children:"Annul\xe9e"})]})]})]})}),(0,yr.jsx)(Xi,{data:R,columns:A,currentPage:f,totalPages:b,total:v,onPageChange:g,loading:p,emptyMessage:"Aucune commande trouv\xe9e"}),(0,yr.jsx)(hn,Yt(Yt({},s),{},{onClose:a}))]})},Hx=Br("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);async function Bx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/stock",{params:e})).data}const qx=function(){const{user:e}=Nr(),{activeStore:t}=_r(),{canPrepare:s,canMarkReady:r}=tn(Ya),{toast:a,showToast:i,hideToast:l,showSuccess:o,showError:c}=mn(),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(!0),[p,x]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),[b,y]=(0,n.useState)([]),[v,j]=(0,n.useState)({isOpen:!1,orderId:null});(0,n.useEffect)(()=>{null!==t&&void 0!==t&&t.id&&N()},[t]);const N=async()=>{try{var e,s;m(!0);const[r,a]=await Promise.all([Yi(t.id),Qi(t.id)]);let n=[...null!==(e=null===r||void 0===r?void 0:r.orders)&&void 0!==e?e:[],...null!==(s=null===a||void 0===a?void 0:a.orders)&&void 0!==s?s:[]];null!==t&&void 0!==t&&t.id&&(n=n.filter(e=>e.shopId===t.id)),n.sort((e,t)=>"SUPPLIER_ORDERED"===e.status&&"PREPARATION"===t.status?-1:"PREPARATION"===e.status&&"SUPPLIER_ORDERED"===t.status?1:new Date(t.createdAt)-new Date(e.createdAt)),u(n)}catch(r){c("Erreur lors du chargement des commandes"),console.error(r)}finally{m(!1)}},w=e=>{const s=e.items.map(e=>Yt(Yt({},e),{},{preparedQuantity:e.orderedQuantity||e.quantity,gap:0,gapReason:"",availableStock:0}));Promise.all(s.map(async e=>{try{var s,r;const a=await async function(e,t){return(await fr.get("/stock",{params:{shopId:e,productId:t}})).data}(t.id,e.productId);return Yt(Yt({},e),{},{availableStock:null!==(s=null!==(r=null===a||void 0===a?void 0:a.availableQuantity)&&void 0!==r?r:null===a||void 0===a?void 0:a.stock)&&void 0!==s?s:0})}catch(a){return Yt(Yt({},e),{},{availableStock:0})}})).then(t=>{y(t),x(e),g(!0)})},k=(e,t)=>{y(s=>{const r=[...s],a=r[e];if(!a)return s;const n=a.orderedQuantity||a.quantity,i=Math.max(0,t),l=n-i;return r[e]=Yt(Yt({},a),{},{preparedQuantity:i,gap:l}),r})},S=async e=>{try{await async function(e){return(await fr.put("/orders/".concat(e,"/ready"))).data}(e),o("Commande marqu\xe9e comme pr\xeate"),N()}catch(t){c("Erreur lors de la mise \xe0 jour de la commande"),console.error(t)}j({isOpen:!1,orderId:null})},C=d.filter(e=>"confirm\xe9e"===e.status),E=d.filter(e=>"en_pr\xe9paration"===e.status);return(0,yr.jsx)(sn,{requiredResource:Ya,requiredAction:Za.PREPARE,children:(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Pr\xe9paration des Commandes"}),t&&(0,yr.jsxs)("p",{className:"text-gray-600",children:[t.name," - Commandes \xe0 pr\xe9parer et en cours de pr\xe9paration"]})]}),C.length>0&&(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-orange-50 to-red-50 border-l-4 border-orange-500",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yr.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl",children:(0,yr.jsx)(dn,{className:"h-6 w-6 text-orange-600"})}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:[C.length," commande(s) \xe0 pr\xe9parer"]}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Commencez la pr\xe9paration de ces commandes"})]})]})}),C.length>0&&(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,yr.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center space-x-2",children:[(0,yr.jsx)(Qr,{className:"h-5 w-5 text-primary-600"}),(0,yr.jsxs)("span",{children:["Commandes \xe0 pr\xe9parer (",C.length,")"]})]})}),(0,yr.jsx)("div",{className:"space-y-4",children:C.map(e=>{var t,r,a,n,i;return(0,yr.jsxs)("div",{className:"p-5 bg-gradient-to-r from-white to-gray-50 rounded-xl border border-gray-200 hover:shadow-lg transition-all",children:[(0,yr.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,yr.jsx)("span",{className:"font-bold text-gray-900 text-lg",children:e.orderNumber}),(0,yr.jsx)(Vx,{status:e.status}),(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:Ui(new Date(e.createdAt),"dd MMM yyyy \xe0 HH:mm")})]}),(0,yr.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,yr.jsx)("span",{className:"font-medium",children:"Livraison pr\xe9vue :"})," ",Ui(new Date(e.deliveryDate),"dd MMMM yyyy")]}),(0,yr.jsxs)("p",{className:"text-lg font-bold text-primary-600",children:[(null===(t=e.totalTTC)||void 0===t?void 0:t.toFixed(2))||(null===(r=e.total)||void 0===r?void 0:r.toFixed(2))," \u20ac TTC"]})]}),s&&(0,yr.jsxs)("button",{onClick:()=>w(e),className:"btn btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Qr,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Pr\xe9parer"})]})]}),(0,yr.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,yr.jsxs)("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Articles (",(null===(a=e.items)||void 0===a?void 0:a.length)||0,")"]}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[null===(n=e.items)||void 0===n?void 0:n.slice(0,4).map((e,t)=>{var s;return(0,yr.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg text-sm",children:[(0,yr.jsx)("p",{className:"font-medium text-gray-900",children:(null===(s=e.product)||void 0===s?void 0:s.name)||"Produit"}),(0,yr.jsxs)("p",{className:"text-gray-600",children:[e.orderedQuantity||e.quantity," ",e.unit]})]},t)}),(null===(i=e.items)||void 0===i?void 0:i.length)>4&&(0,yr.jsx)("div",{className:"p-2 bg-gray-50 rounded-lg text-sm flex items-center justify-center",children:(0,yr.jsxs)("span",{className:"text-gray-600",children:["+",e.items.length-4," autre(s)"]})})]})]})]},e.id)})})]}),E.length>0&&(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,yr.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center space-x-2",children:[(0,yr.jsx)(Qr,{className:"h-5 w-5 text-primary-600"}),(0,yr.jsxs)("span",{children:["En cours de pr\xe9paration (",E.length,")"]})]})}),(0,yr.jsx)("div",{className:"space-y-4",children:E.map(e=>{var t;return(0,yr.jsxs)("div",{className:"p-5 bg-gradient-to-r from-blue-50 to-primary-50 rounded-xl border border-primary-200",children:[(0,yr.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,yr.jsx)("span",{className:"font-bold text-gray-900 text-lg",children:e.orderNumber}),(0,yr.jsx)(Vx,{status:e.status})]}),(null===(t=e.items)||void 0===t?void 0:t.some(e=>e.gap&&0!==e.gap))&&(0,yr.jsx)("div",{className:"mt-2 p-2 bg-yellow-100 border border-yellow-300 rounded-lg",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-2 text-yellow-800 text-sm",children:[(0,yr.jsx)(Aa,{className:"h-4 w-4"}),(0,yr.jsx)("span",{className:"font-medium",children:"\xc9carts d\xe9tect\xe9s entre command\xe9 et pr\xe9par\xe9"})]})})]}),r&&(0,yr.jsxs)("button",{onClick:()=>j({isOpen:!0,orderId:e.id}),className:"btn btn-success flex items-center space-x-2",children:[(0,yr.jsx)(cn,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Marquer pr\xeate"})]})]}),e.items&&e.items.length>0&&(0,yr.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,yr.jsx)("div",{className:"space-y-2",children:e.items.map((e,t)=>{var s;const r=e.orderedQuantity||e.quantity,a=e.preparedQuantity,n=e.gap||0;return(0,yr.jsx)("div",{className:"p-3 rounded-lg ".concat(0!==n?"bg-yellow-50 border border-yellow-200":"bg-gray-50"),children:(0,yr.jsx)("div",{className:"flex items-center justify-between",children:(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"font-medium text-gray-900",children:(null===(s=e.product)||void 0===s?void 0:s.name)||"Produit"}),(0,yr.jsxs)("div",{className:"flex items-center space-x-4 mt-1 text-sm",children:[(0,yr.jsxs)("span",{className:"text-gray-600",children:["Command\xe9 : ",(0,yr.jsx)("span",{className:"font-medium",children:r})," ",e.unit]}),(0,yr.jsxs)("span",{className:"text-gray-600",children:["Pr\xe9par\xe9 : ",(0,yr.jsx)("span",{className:"font-medium",children:a||r})," ",e.unit]}),0!==n&&(0,yr.jsxs)("span",{className:"text-yellow-700 font-medium",children:["\xc9cart : ",n>0?"-":"+",Math.abs(n)," ",e.unit]})]}),e.gapReason&&(0,yr.jsxs)("p",{className:"text-xs text-gray-600 mt-1 italic",children:["Raison : ",e.gapReason]})]})})},t)})})})]},e.id)})})]}),0===d.length&&!h&&(0,yr.jsxs)("div",{className:"card text-center py-12",children:[(0,yr.jsx)(Qr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,yr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucune commande \xe0 pr\xe9parer"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Toutes les commandes sont pr\xe9par\xe9es ou aucune commande confirm\xe9e"})]}),(0,yr.jsx)(Vn,{isOpen:f,onClose:()=>{g(!1),x(null),y([])},title:"Pr\xe9parer la commande ".concat(null===p||void 0===p?void 0:p.orderNumber),size:"xl",children:p&&(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,yr.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,yr.jsx)("span",{className:"font-medium",children:"Client :"})," ",p.clientId]}),(0,yr.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,yr.jsx)("span",{className:"font-medium",children:"Livraison pr\xe9vue :"})," ",Ui(new Date(p.deliveryDate),"dd MMMM yyyy")]})]}),(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsx)("h3",{className:"font-semibold text-gray-900",children:"Ajuster les quantit\xe9s pr\xe9par\xe9es"}),b.map((e,t)=>{var s;const r=e.orderedQuantity||e.quantity,a=e.preparedQuantity||0,n=r-a,i=0!==n;return(0,yr.jsxs)("div",{className:"p-4 rounded-xl border ".concat(i?"bg-yellow-50 border-yellow-200":"bg-white border-gray-200"),children:[(0,yr.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900 text-lg",children:(null===(s=e.product)||void 0===s?void 0:s.name)||"Produit"}),(0,yr.jsxs)("p",{className:"text-sm text-gray-600",children:["Stock disponible : ",(0,yr.jsx)("span",{className:"font-medium",children:e.availableStock||0})," ",e.unit]})]})}),(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantit\xe9 command\xe9e"}),(0,yr.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg text-center",children:(0,yr.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[r," ",e.unit]})})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantit\xe9 pr\xe9par\xe9e"}),(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("button",{onClick:()=>k(t,a-1),className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-100",disabled:a<=0,children:(0,yr.jsx)(Hx,{className:"h-4 w-4"})}),(0,yr.jsx)("input",{type:"number",min:"0",value:a,onChange:e=>k(t,parseInt(e.target.value)||0),className:"flex-1 p-3 border border-gray-300 rounded-lg text-center font-bold text-lg"}),(0,yr.jsx)("button",{onClick:()=>k(t,a+1),className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-100",children:(0,yr.jsx)(Nn,{className:"h-4 w-4"})})]})]})]}),i&&(0,yr.jsxs)("div",{className:"mt-3 p-3 bg-yellow-100 border border-yellow-300 rounded-lg",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yr.jsx)(Aa,{className:"h-4 w-4 text-yellow-600"}),(0,yr.jsxs)("span",{className:"text-sm font-medium text-yellow-800",children:["\xc9cart : ",n>0?"-":"+",Math.abs(n)," ",e.unit]})]}),(0,yr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Raison de l'\xe9cart (optionnel)"}),(0,yr.jsx)("textarea",{value:e.gapReason||"",onChange:e=>{return s=t,r=e.target.value,void y(e=>{const t=[...e];return t[s]&&(t[s].gapReason=r),t});var s,r},className:"w-full p-2 border border-gray-300 rounded-lg text-sm",rows:"2",placeholder:"Ex: Stock insuffisant, produit endommag\xe9..."})]})]},t)})]}),(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,yr.jsx)("button",{onClick:()=>{g(!1),x(null),y([])},className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsxs)("button",{onClick:async()=>{if(p)try{b.map(e=>({productId:e.productId,unit:e.unit,preparedQuantity:e.preparedQuantity||0,gapReason:e.gapReason||null}));await async function(e){return(await fr.put("/orders/".concat(e,"/prepare"))).data}(p.id,e.id),o("Commande pr\xe9par\xe9e avec succ\xe8s"),g(!1),x(null),y([]),N()}catch(t){c("Erreur lors de la pr\xe9paration de la commande"),console.error(t)}},className:"btn btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(cn,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Confirmer la pr\xe9paration"})]})]})]})}),(0,yr.jsx)(Ji,{isOpen:v.isOpen,onClose:()=>j({isOpen:!1,orderId:null}),onConfirm:()=>S(v.orderId),title:"Marquer la commande comme pr\xeate",message:"\xcates-vous s\xfbr de vouloir marquer cette commande comme pr\xeate ? Elle sera alors disponible pour la livraison.",confirmText:"Marquer pr\xeate",type:"info"}),(0,yr.jsx)(hn,Yt(Yt({},a),{},{onClose:l}))]})})};const Wx=function(){const e=ae(),{toast:t,showToast:s,hideToast:r,showSuccess:a,showError:i}=mn(),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)({}),[u,h]=(0,n.useState)(!0),[m,p]=(0,n.useState)(null);(0,n.useEffect)(()=>{x()},[]);const x=async()=>{try{h(!0),await f(),await g()}catch(e){i("Erreur lors du chargement des donn\xe9es"),console.error(e)}finally{h(!1)}},f=async()=>{try{var e;const t=await kr({page:1,limit:200});o(null!==(e=null===t||void 0===t?void 0:t.shops)&&void 0!==e?e:[])}catch(t){i("Erreur lors du chargement des magasins"),console.error(t)}},g=async()=>{try{var e;const t=await qi({scope:"org",limit:500}),s=null!==(e=null===t||void 0===t?void 0:t.orders)&&void 0!==e?e:[],r=["NEW","AGGREGATED","SUPPLIER_ORDERED","PREPARATION","LIVRAISON"],a=["PREPARATION"],n=new Date,i={};for(const e of l){if(null===e||void 0===e||!e.id)continue;const t=s.filter(t=>t.shopId===e.id);i[e.id]={totalOrders:t.length,ordersThisMonth:t.filter(e=>{const t=new Date(e.createdAt);return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}).length,totalAmount:t.reduce((e,t)=>e+(t.totalTTC||t.total||0),0),pendingOrders:t.filter(e=>r.includes(e.status)).length,readyOrders:t.filter(e=>a.includes(e.status)).length}}d(i)}catch(t){console.error(t)}};(0,n.useEffect)(()=>{l.length>0&&g()},[l]);const b=t=>{e("/client/stores/".concat(t.id))},y=t=>{e("/client/orders?store=".concat(t))},v=[{key:"name",label:"Magasin",render:e=>(0,yr.jsx)("div",{children:(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e})})},{key:"address",label:"Adresse",render:(e,t)=>(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,yr.jsx)(on,{className:"h-4 w-4 flex-shrink-0"}),(0,yr.jsx)("span",{children:[e,null===t||void 0===t?void 0:t.postalCode,null===t||void 0===t?void 0:t.city].filter(Boolean).join(", ")||"\u2014"})]})},{key:"phone",label:"Contact",render:(e,t)=>(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:[(e||(null===t||void 0===t?void 0:t.contactPhone))&&(0,yr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yr.jsx)(nn,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:e||(null===t||void 0===t?void 0:t.contactPhone)})]}),((null===t||void 0===t?void 0:t.contactEmail)||(null===t||void 0===t?void 0:t.contactPerson))&&(0,yr.jsxs)("div",{className:"flex items-center space-x-1 mt-1",children:[(0,yr.jsx)(aa,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:t.contactEmail||t.contactPerson})]}),!e&&!(null!==t&&void 0!==t&&t.contactPhone)&&!(null!==t&&void 0!==t&&t.contactEmail)&&!(null!==t&&void 0!==t&&t.contactPerson)&&"\u2014"]})},{key:"stats",label:"Statistiques",render:(e,t)=>{var s;const r=c[t.id]||{};return(0,yr.jsxs)("div",{className:"text-sm",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-gray-600",children:[(0,yr.jsx)(Qr,{className:"h-3 w-3"}),(0,yr.jsxs)("span",{children:[r.totalOrders||0," commandes"]})]}),(0,yr.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(null===(s=r.totalAmount)||void 0===s?void 0:s.toFixed(2))||"0.00"," \u20ac total"]})]})}},{key:"actions",label:"Actions",render:(e,t)=>(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("button",{onClick:()=>y(t.id),className:"px-3 py-1 bg-primary-100 text-primary-700 text-xs font-semibold rounded-lg hover:bg-primary-200 transition-colors",title:"Voir les commandes",children:"Commandes"}),(0,yr.jsx)("button",{onClick:()=>b(t),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Voir les d\xe9tails",children:(0,yr.jsx)(zn,{className:"h-4 w-4"})})]})}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mes Magasins"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Gestion et suivi de tous vos magasins"})]})}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-primary-50 to-primary-100 border-primary-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total magasins"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:l.length})]}),(0,yr.jsx)(Gr,{className:"h-8 w-8 text-primary-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total commandes"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Object.values(c).reduce((e,t)=>e+(t.totalOrders||0),0)})]}),(0,yr.jsx)(Qr,{className:"h-8 w-8 text-blue-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-green-50 to-green-100 border-green-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Commandes en attente"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Object.values(c).reduce((e,t)=>e+(t.pendingOrders||0),0)})]}),(0,yr.jsx)(sa,{className:"h-8 w-8 text-green-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Chiffre d'affaires"}),(0,yr.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[Object.values(c).reduce((e,t)=>e+(t.totalAmount||0),0).toFixed(2)," \u20ac"]})]}),(0,yr.jsx)(sa,{className:"h-8 w-8 text-purple-600"})]})})]}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(e=>{const t=c[e.id]||{};return(0,yr.jsxs)("div",{className:"card bg-gradient-to-r from-white to-gray-50 hover:shadow-lg transition-all cursor-pointer",onClick:()=>b(e),children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)(Gr,{className:"h-5 w-5 text-primary-600"}),(0,yr.jsx)("h3",{className:"font-bold text-gray-900 text-lg",children:e.name})]}),(0,yr.jsx)("button",{onClick:t=>{t.stopPropagation(),b(e)},className:"p-1 text-gray-400 hover:text-primary-600 transition-colors",children:(0,yr.jsx)(zn,{className:"h-4 w-4"})})]}),(0,yr.jsxs)("div",{className:"space-y-3 mb-4",children:[e.address&&(0,yr.jsxs)("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[(0,yr.jsx)(on,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{children:e.address.street}),e.address.city&&(0,yr.jsxs)("p",{children:[e.address.zipCode," ",e.address.city]})]})]}),e.phone&&(0,yr.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,yr.jsx)(nn,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:e.phone})]}),e.email&&(0,yr.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,yr.jsx)(aa,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:e.email})]})]}),(0,yr.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Commandes"}),(0,yr.jsx)("p",{className:"text-lg font-bold text-gray-900",children:t.totalOrders||0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"En attente"}),(0,yr.jsx)("p",{className:"text-lg font-bold text-orange-600",children:t.pendingOrders||0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Pr\xeates"}),(0,yr.jsx)("p",{className:"text-lg font-bold text-green-600",children:t.readyOrders||0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"CA Total"}),(0,yr.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[(t.totalAmount||0).toFixed(2)," \u20ac"]})]})]})}),(0,yr.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,yr.jsx)("button",{onClick:t=>{t.stopPropagation(),y(e.id)},className:"w-full btn btn-primary text-sm",children:"Voir les commandes"})})]},e.id)})}),l.length>0&&(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue tableau"}),(0,yr.jsx)(Xi,{data:l,columns:v,currentPage:1,totalPages:1,total:l.length,onPageChange:()=>{},loading:u,emptyMessage:"Aucun magasin trouv\xe9"})]}),(0,yr.jsx)(hn,Yt(Yt({},t),{},{onClose:r}))]})};const Gx=function(){const{toast:e,showToast:t,hideToast:s,showSuccess:r,showError:a}=mn(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(!0),[p,x]=(0,n.useState)(null),[f,g]=(0,n.useState)(""),[b,y]=(0,n.useState)(""),[v,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{N()},[]),(0,n.useEffect)(()=>{p&&S()},[p]);const N=async()=>{try{m(!0),await Promise.all([w(),k()]),await S()}catch(e){a("Erreur lors du chargement des donn\xe9es"),console.error(e)}finally{m(!1)}},w=async()=>{try{var e;const t=await kr({page:1,limit:200});l(null!==(e=null===t||void 0===t?void 0:t.shops)&&void 0!==e?e:[])}catch(t){console.error(t)}},k=async()=>{try{var e;const t=await Zi();c(null!==(e=null===t||void 0===t?void 0:t.products)&&void 0!==e?e:[])}catch(t){console.error(t)}},S=async()=>{try{var e;const t=await Bx({storeId:p||void 0});u(null!==(e=null===t||void 0===t?void 0:t.products)&&void 0!==e?e:[])}catch(t){a("Erreur lors du chargement des stocks"),console.error(t)}},C=(0,n.useMemo)(()=>{const e=new Map;return d.forEach(t=>{const s=t.productId,r=o.find(e=>e.id===s);if(!r)return;e.has(s)||e.set(s,{productId:s,product:r,totalQuantity:0,stores:[],averageQuantity:0,minQuantity:1/0,maxQuantity:0,lowStockStores:0});const a=e.get(s);a.totalQuantity+=t.quantity||0,a.stores.push({storeId:t.storeId,quantity:t.quantity||0,minStock:t.minStock||0,maxStock:t.maxStock||0,isLowStock:(t.quantity||0)<=(t.minStock||0)}),a.minQuantity=Math.min(a.minQuantity,t.quantity||0),a.maxQuantity=Math.max(a.maxQuantity,t.quantity||0),(t.quantity||0)<=(t.minStock||0)&&(a.lowStockStores+=1)}),e.forEach(e=>{e.averageQuantity=e.totalQuantity/e.stores.length}),Array.from(e.values())},[d,o]),E=(0,n.useMemo)(()=>C.filter(e=>{var t,s;const r=!f||(null===(t=e.product.name)||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase()))||(null===(s=e.product.sku)||void 0===s?void 0:s.toLowerCase().includes(f.toLowerCase())),a=!b||e.product.category===b,n=!v||e.lowStockStores>0;return r&&a&&n}),[C,f,b,v]),_=(0,n.useMemo)(()=>{const e=new Set(o.map(e=>e.category).filter(Boolean));return Array.from(e).sort()},[o]),T=(0,n.useMemo)(()=>({totalProducts:C.length,totalQuantity:C.reduce((e,t)=>e+t.totalQuantity,0),lowStockProducts:C.filter(e=>e.lowStockStores>0).length,outOfStockProducts:C.filter(e=>0===e.totalQuantity).length}),[C]),R=[{key:"product",label:"Produit",render:(e,t)=>(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:t.product.name}),t.product.sku&&(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",t.product.sku]}),(0,yr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:t.product.category})]})},{key:"totalQuantity",label:"Stock total",render:(e,t)=>(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)(Qr,{className:"h-4 w-4 text-gray-400"}),(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("p",{className:"font-bold text-gray-900",children:[e.toFixed(2)," ",t.product.unit]}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:[t.stores.length," magasin(s)"]})]})]})},{key:"averageQuantity",label:"Moyenne",render:(e,t)=>(0,yr.jsxs)("p",{className:"text-sm text-gray-600",children:[e.toFixed(2)," ",t.product.unit]})},{key:"range",label:"Min / Max",render:(e,t)=>(0,yr.jsxs)("div",{className:"text-sm",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-red-600",children:[(0,yr.jsx)(Ml,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:t.minQuantity.toFixed(2)})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-green-600 mt-1",children:[(0,yr.jsx)(sa,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:t.maxQuantity.toFixed(2)})]})]})},{key:"lowStockStores",label:"Stock faible",render:(e,t)=>(0,yr.jsx)("div",{children:e>0?(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-orange-600",children:[(0,yr.jsx)(Aa,{className:"h-4 w-4"}),(0,yr.jsxs)("span",{className:"text-sm font-semibold",children:[e," magasin(s)"]})]}):(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-green-600",children:[(0,yr.jsx)(Hx,{className:"h-4 w-4"}),(0,yr.jsx)("span",{className:"text-sm",children:"OK"})]})})},{key:"stores",label:"D\xe9tails magasins",render:(e,t)=>(0,yr.jsxs)("div",{className:"text-xs text-gray-600",children:[t.stores.slice(0,3).map((e,s)=>{var r;const a=(null===(r=i.find(t=>t.id===e.storeId))||void 0===r?void 0:r.name)||e.storeId;return(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,yr.jsx)("span",{className:"truncate max-w-[120px]",children:a}),(0,yr.jsxs)("span",{className:"ml-2 font-semibold ".concat(e.isLowStock?"text-orange-600":"text-gray-900"),children:[e.quantity," ",t.product.unit]})]},s)}),t.stores.length>3&&(0,yr.jsxs)("p",{className:"text-gray-400 mt-1",children:["+",t.stores.length-3," autre(s)"]})]})}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Stocks Consolid\xe9s"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Vue consolid\xe9e des stocks de tous vos magasins"})]})}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-primary-50 to-primary-100 border-primary-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Produits en stock"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:T.totalProducts})]}),(0,yr.jsx)(Qr,{className:"h-8 w-8 text-primary-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Quantit\xe9 totale"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:T.totalQuantity.toFixed(2)})]}),(0,yr.jsx)(sa,{className:"h-8 w-8 text-blue-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Stocks faibles"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:T.lowStockProducts})]}),(0,yr.jsx)(Aa,{className:"h-8 w-8 text-orange-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-red-50 to-red-100 border-red-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Ruptures"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:T.outOfStockProducts})]}),(0,yr.jsx)(Aa,{className:"h-8 w-8 text-red-600"})]})})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher un produit...",value:f,onChange:e=>g(e.target.value),className:"input pl-10"})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"input pl-10",children:[(0,yr.jsx)("option",{value:"",children:"Toutes les cat\xe9gories"}),_.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,yr.jsx)("div",{children:(0,yr.jsxs)("select",{value:p||"",onChange:e=>x(e.target.value||null),className:"input",children:[(0,yr.jsx)("option",{value:"",children:"Tous les magasins"}),i.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("input",{type:"checkbox",id:"lowStockFilter",checked:v,onChange:e=>j(e.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,yr.jsx)("label",{htmlFor:"lowStockFilter",className:"text-sm text-gray-700",children:"Afficher uniquement les stocks faibles"})]})]})}),(0,yr.jsx)(Xi,{data:E,columns:R,currentPage:1,totalPages:1,total:E.length,onPageChange:()=>{},loading:h,emptyMessage:"Aucun stock trouv\xe9"}),(0,yr.jsx)(hn,Yt(Yt({},e),{},{onClose:s}))]})};const Yx=function(){const e=ae(),{toast:t,showToast:s,hideToast:r,showSuccess:a,showError:i}=mn(),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[m,p]=(0,n.useState)(!0),[x,f]=(0,n.useState)(""),[g,b]=(0,n.useState)(""),[y,v]=(0,n.useState)(null);(0,n.useEffect)(()=>{j()},[]),(0,n.useEffect)(()=>{y&&k()},[y]);const j=async()=>{try{p(!0),await Promise.all([N(),w(),k()])}catch(e){i("Erreur lors du chargement des donn\xe9es"),console.error(e)}finally{p(!1)}},N=async()=>{try{var e;const t=await Zi();o(null!==(e=null===t||void 0===t?void 0:t.products)&&void 0!==e?e:[])}catch(t){i("Erreur lors du chargement des produits"),console.error(t)}},w=async()=>{try{var e;const t=await kr({page:1,limit:200});h(null!==(e=null===t||void 0===t?void 0:t.shops)&&void 0!==e?e:[])}catch(t){console.error(t)}},k=async()=>{try{var e;const t=await Bx({storeId:y||void 0});d(null!==(e=null===t||void 0===t?void 0:t.products)&&void 0!==e?e:[])}catch(t){console.error(t)}},S=(0,n.useMemo)(()=>l.map(e=>{const t=c.filter(t=>t.productId===e.id),s=t.reduce((e,t)=>e+(t.quantity||0),0),r=Math.min(...t.map(e=>e.quantity||0),1/0),a=Math.max(...t.map(e=>e.quantity||0),0),n=t.some(e=>(e.quantity||0)<=(e.minStock||0)),i=t.some(e=>0===(e.quantity||0));return Yt(Yt({},e),{},{totalStock:s,minStock:r,maxStock:a,hasLowStock:n,hasOutOfStock:i,storesCount:t.length,stores:t.map(e=>{var t;return{storeId:e.storeId,quantity:e.quantity||0,storeName:(null===(t=u.find(t=>t.id===e.storeId))||void 0===t?void 0:t.name)||"Magasin inconnu"}})})}),[l,c,u]),C=(0,n.useMemo)(()=>S.filter(e=>{var t,s;const r=!x||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase()))||(null===(s=e.sku)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase())),a=!g||e.category===g;return r&&a}),[S,x,g]),E=(0,n.useMemo)(()=>[...new Set(l.map(e=>e.category).filter(Boolean))].sort(),[l]),_=(0,n.useMemo)(()=>({total:S.length,inStock:S.filter(e=>e.totalStock>0).length,lowStock:S.filter(e=>e.hasLowStock).length,outOfStock:S.filter(e=>e.hasOutOfStock).length}),[S]),T=()=>{e("/client/orders/create")},R=[{key:"name",label:"Produit",render:(e,t)=>(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e}),t.sku&&(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",t.sku]})]})},{key:"category",label:"Cat\xe9gorie",render:(e,t)=>(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,yr.jsx)(Kr,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:e}),t.subCategory&&(0,yr.jsxs)("span",{className:"text-xs text-gray-500",children:["/ ",t.subCategory]})]})},{key:"unit",label:"Unit\xe9",render:e=>(0,yr.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-semibold rounded-lg",children:e})},{key:"priceHT",label:"Prix",render:(e,t)=>{const s=e*(1+(t.tva||5.5)/100);return(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("p",{className:"font-bold text-gray-900",children:[s.toFixed(2)," \u20ac"]}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:["HT: ",e.toFixed(2)," \u20ac"]})]})}},{key:"totalStock",label:"Stock consolid\xe9",render:(e,t)=>(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)(Qr,{className:"h-4 w-4 ".concat(t.hasOutOfStock?"text-red-600":t.hasLowStock?"text-orange-600":"text-green-600")}),(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("p",{className:"font-bold ".concat(t.hasOutOfStock?"text-red-600":t.hasLowStock?"text-orange-600":"text-gray-900"),children:[e.toFixed(2)," ",t.unit]}),(0,yr.jsxs)("p",{className:"text-xs text-gray-500",children:[t.storesCount," magasin(s)"]})]})]}),t.minStock!==1/0&&t.maxStock>0&&(0,yr.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",t.minStock.toFixed(2)," / Max: ",t.maxStock.toFixed(2)]})]})},{key:"stores",label:"R\xe9partition magasins",render:(e,t)=>(0,yr.jsxs)("div",{className:"text-xs text-gray-600",children:[t.stores.slice(0,3).map((e,s)=>(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,yr.jsx)("span",{className:"truncate max-w-[120px]",children:e.storeName}),(0,yr.jsxs)("span",{className:"ml-2 font-semibold text-gray-900",children:[e.quantity.toFixed(2)," ",t.unit]})]},s)),t.stores.length>3&&(0,yr.jsxs)("p",{className:"text-gray-400 mt-1",children:["+",t.stores.length-3," autre(s)"]})]})},{key:"actions",label:"Actions",render:(e,t)=>(0,yr.jsx)("div",{className:"flex items-center space-x-2",children:(0,yr.jsx)("button",{onClick:T,className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Cr\xe9er une commande",children:(0,yr.jsx)(Yr,{className:"h-4 w-4"})})})}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Produits"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Catalogue des produits avec stocks consolid\xe9s"})]}),(0,yr.jsxs)("button",{onClick:T,className:"btn btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Yr,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Nouvelle commande"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-primary-50 to-primary-100 border-primary-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total produits"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_.total})]}),(0,yr.jsx)(Qr,{className:"h-8 w-8 text-primary-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-green-50 to-green-100 border-green-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"En stock"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_.inStock})]}),(0,yr.jsx)(Qr,{className:"h-8 w-8 text-green-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Stocks faibles"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_.lowStock})]}),(0,yr.jsx)(Qr,{className:"h-8 w-8 text-orange-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-red-50 to-red-100 border-red-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Ruptures"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_.outOfStock})]}),(0,yr.jsx)(Qr,{className:"h-8 w-8 text-red-600"})]})})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher un produit...",value:x,onChange:e=>f(e.target.value),className:"input pl-10"})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"input pl-10",children:[(0,yr.jsx)("option",{value:"",children:"Toutes les cat\xe9gories"}),E.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,yr.jsx)("div",{children:(0,yr.jsxs)("select",{value:y||"",onChange:e=>v(e.target.value||null),className:"input",children:[(0,yr.jsx)("option",{value:"",children:"Tous les magasins"}),u.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})})]})}),(0,yr.jsx)(Xi,{data:C,columns:R,currentPage:1,totalPages:1,total:C.length,onPageChange:()=>{},loading:m,emptyMessage:"Aucun produit trouv\xe9"}),(0,yr.jsx)(hn,Yt(Yt({},t),{},{onClose:r}))]})};const Qx=function(){const{user:e}=Nr(),{selectedStoreId:t}=_r(),[s,r]=(0,n.useState)([]),[a,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)("");(0,n.useEffect)(()=>{t&&m()},[t,c,u]);const m=async()=>{try{var e,s,a;o(!0);const n={storeId:t};c&&(n.dateStart=c),u&&(n.dateEnd=u);const[l,d]=await Promise.all([yl(n),vl(n)]);r(null!==(e=null===l||void 0===l?void 0:l.orders)&&void 0!==e?e:[]),i(null!==(s=null!==(a=null===d||void 0===d?void 0:d.data)&&void 0!==a?a:d)&&void 0!==s?s:null)}catch(n){console.error(n)}finally{o(!1)}};return l?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Mes Ventes"}),a&&(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"CA Total"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold",children:[a.totalRevenue.toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Marge"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold",children:[a.totalMargin.toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Ventes"}),(0,yr.jsx)("p",{className:"text-3xl font-bold",children:a.totalSales})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Marge %"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold",children:[a.averageMarginPercent,"%"]})]})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date d\xe9but"}),(0,yr.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date fin"}),(0,yr.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"w-full"})]})]})}),(0,yr.jsx)("div",{className:"card overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"N\xb0"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Date"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Client"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Achat"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Vente"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Marge"})]})}),(0,yr.jsx)("tbody",{className:"divide-y",children:s.map(e=>(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:e.saleNumber}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-sm",children:[e.date," ",e.time]}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm",children:e.customerName}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-sm text-right",children:[e.totalPurchase.toFixed(2)," \u20ac"]}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-semibold",children:[e.totalSelling.toFixed(2)," \u20ac"]}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-right",children:(0,yr.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:["+",e.totalMargin.toFixed(2)," \u20ac"]})})]},e.id))})]})})]})},$x=Br("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);const Kx=function(){const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[a,i]=(0,n.useState)(""),[l,o]=(0,n.useState)({total:0,totalSpent:0,avgOrders:0});(0,n.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=(await async function(){return{data:[]}}()).data||[];t(e),o({total:e.length,totalSpent:e.reduce((e,t)=>e+(t.totalSpent||0),0),avgOrders:e.length>0?Math.round(e.reduce((e,t)=>e+(t.totalOrders||0),0)/e.length):0})}catch(e){console.error(e),t([])}finally{r(!1)}},d=(e||[]).filter(e=>{var t,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(a.toLowerCase()))});return s?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Clients Finaux"}),(0,yr.jsxs)("button",{className:"btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Nn,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Nouveau Client"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200",children:[(0,yr.jsx)(Wr,{className:"h-10 w-10 text-blue-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total Clients"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:l.total})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200",children:[(0,yr.jsx)($x,{className:"h-10 w-10 text-green-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"CA Total"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[l.totalSpent.toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200",children:[(0,yr.jsx)(Wr,{className:"h-10 w-10 text-purple-500 mb-3"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Moy. Commandes"}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:l.avgOrders})]})]}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("div",{className:"mb-6",children:(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher un client...",value:a,onChange:e=>i(e.target.value),className:"input pl-10 w-full"})]})}),(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Commandes"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"CA Total"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Points Fid\xe9lit\xe9"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Derni\xe8re Visite"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"divide-y divide-gray-200",children:d.map(e=>(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.name}),(0,yr.jsxs)("td",{className:"px-6 py-4",children:[(0,yr.jsx)("div",{className:"text-sm text-gray-600",children:e.email}),(0,yr.jsx)("div",{className:"text-sm text-gray-500",children:e.phone})]}),(0,yr.jsx)("td",{className:"px-6 py-4 text-center font-bold text-primary-600",children:e.totalOrders}),(0,yr.jsxs)("td",{className:"px-6 py-4 text-lg font-bold text-gray-900",children:[e.totalSpent.toFixed(2)," \u20ac"]}),(0,yr.jsx)("td",{className:"px-6 py-4 text-center",children:(0,yr.jsxs)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-semibold",children:[e.loyaltyPoints," pts"]})}),(0,yr.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.lastVisit}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:(0,yr.jsx)(zn,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",children:(0,yr.jsx)(wn,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg",children:(0,yr.jsx)($x,{className:"h-5 w-5"})})]})})]},e.id))})]})})]})]})},Xx=Br("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),Jx=Br("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]);const Zx=function(){const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0);(0,n.useEffect)(()=>{a()},[]);const a=async()=>{try{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await fr.get("/promotions",{params:e})).data}();t(e.data||[])}catch(e){console.error(e),t([])}finally{r(!1)}};return s?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Promotions"}),(0,yr.jsxs)("button",{className:"btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Nn,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Nouvelle Promotion"})]})]}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{return(0,yr.jsxs)("div",{className:"card ".concat(e.active?"border-2 border-green-200":"opacity-60"),children:[(0,yr.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)(Kr,{className:"h-8 w-8 ".concat(e.active?"text-green-500":"text-gray-400")}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:e.name}),(t=e.type,s=e.value,"percentage"===t?(0,yr.jsxs)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold",children:["-",s,"%"]}):(0,yr.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-semibold",children:["-",s,"\u20ac"]}))]})]}),e.active?(0,yr.jsx)(Xx,{className:"h-6 w-6 text-green-500"}):(0,yr.jsx)(Jx,{className:"h-6 w-6 text-gray-400"})]}),(0,yr.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,yr.jsxs)("div",{className:"flex justify-between",children:[(0,yr.jsx)("span",{className:"text-gray-600",children:"D\xe9but :"}),(0,yr.jsx)("span",{className:"font-medium",children:e.startDate})]}),(0,yr.jsxs)("div",{className:"flex justify-between",children:[(0,yr.jsx)("span",{className:"text-gray-600",children:"Fin :"}),(0,yr.jsx)("span",{className:"font-medium",children:e.endDate})]}),(0,yr.jsxs)("div",{className:"flex justify-between",children:[(0,yr.jsx)("span",{className:"text-gray-600",children:"Utilisations :"}),(0,yr.jsx)("span",{className:"font-bold text-primary-600",children:e.usageCount})]})]}),e.products.length>0&&(0,yr.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,yr.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Produits :"}),(0,yr.jsx)("div",{className:"flex flex-wrap gap-2",children:e.products.map((e,t)=>(0,yr.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:e},t))})]}),(0,yr.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 flex items-center justify-between",children:[(0,yr.jsx)("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:(0,yr.jsx)(wn,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{onClick:()=>async function(e){return(await fr.put("/promotions/".concat(e),{isActive:!1})).data}(e.id),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg",children:e.active?(0,yr.jsx)(Xx,{className:"h-5 w-5"}):(0,yr.jsx)(Jx,{className:"h-5 w-5"})}),(0,yr.jsx)("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,yr.jsx)(kn,{className:"h-5 w-5"})})]})]},e.id);var t,s})})]})};const ef=function(){const{toast:e,showToast:t,hideToast:s,showSuccess:r,showError:a}=mn(),{activeStore:i}=_r(),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(""),[m,p]=(0,n.useState)("PREPARATION"),[x,f]=(0,n.useState)(null),[g,b]=(0,n.useState)(!1),y=null===i||void 0===i?void 0:i.id;(0,n.useEffect)(()=>{y&&v()},[m,y]);const v=async()=>{try{var e;d(!0);const t=await qi({scope:"org",limit:500});let s=(null!==(e=null===t||void 0===t?void 0:t.orders)&&void 0!==e?e:[]).filter(e=>"PREPARATION"===e.status||"LIVRAISON"===e.status);y&&(s=s.filter(e=>e.shopId===y)),o(s)}catch(t){a("Erreur lors du chargement des commandes"),console.error(t)}finally{d(!1)}},j=l.filter(e=>{var t,s;if(m&&e.status!==m)return!1;if(!u)return!0;const r=u.toLowerCase();return(null===(t=e.orderNumber)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(s=e.shopId)||void 0===s?void 0:s.toLowerCase().includes(r))}),N={ready:l.filter(e=>"PREPARATION"===e.status).length,inDelivery:l.filter(e=>"LIVRAISON"===e.status).length,total:l.length},w=[{key:"orderNumber",label:"N\xb0 Commande",render:(e,t)=>(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:Ui(new Date(t.createdAt),"dd MMM yyyy HH:mm")})]})},{key:"deliveryDate",label:"Date de livraison",render:e=>(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,yr.jsx)(bx,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:e?Ui(new Date(e),"dd MMM yyyy"):"Non d\xe9finie"})]})},{key:"deliveryAddress",label:"Adresse de livraison",render:(e,t)=>(0,yr.jsxs)("div",{className:"flex items-start space-x-1 text-sm text-gray-600",children:[(0,yr.jsx)(on,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,yr.jsx)("div",{children:e?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("p",{children:e.street}),(0,yr.jsxs)("p",{children:[e.zipCode," ",e.city]})]}):(0,yr.jsx)("p",{children:"Adresse non disponible"})})]})},{key:"items",label:"Articles",render:e=>(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,yr.jsx)(Qr,{className:"h-4 w-4"}),(0,yr.jsxs)("span",{children:[(null===e||void 0===e?void 0:e.length)||0," articles"]})]})},{key:"totalTTC",label:"Montant",render:(e,t)=>(0,yr.jsxs)("p",{className:"font-bold text-gray-900",children:[(t.totalTTC||t.total||0).toFixed(2)," \u20ac"]})},{key:"status",label:"Statut",render:e=>(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("PREPARATION"===e?"bg-green-100 text-green-700":"en_livraison"===e?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:"PREPARATION"===e?"Pr\xeate":"LIVRAISON"===e?"En livraison":e})},{key:"actions",label:"Actions",render:(e,t)=>(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:["PREPARATION"===t.status&&(0,yr.jsx)("button",{onClick:()=>(async e=>{try{await Gi(e.id,{status:"LIVRAISON"}),r("Livraison d\xe9marr\xe9e"),v()}catch(t){a("Erreur lors du d\xe9marrage de la livraison"),console.error(t)}})(t),className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-lg hover:bg-blue-200 transition-colors",title:"D\xe9marrer la livraison",children:"D\xe9marrer"}),"LIVRAISON"===t.status&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("button",{onClick:()=>(async e=>{f(e),b(!0)})(t),className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-lg hover:bg-green-200 transition-colors",title:"Confirmer la livraison",children:(0,yr.jsx)(Ma,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>(async e=>{try{await Gi(e.id,{status:"PREPARATION"}),r("Livraison annul\xe9e"),v()}catch(t){a("Erreur lors de l'annulation de la livraison"),console.error(t)}})(t),className:"px-3 py-1 bg-red-100 text-red-700 text-xs font-semibold rounded-lg hover:bg-red-200 transition-colors",title:"Annuler la livraison",children:(0,yr.jsx)(fn,{className:"h-4 w-4"})})]})]})}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Livraisons"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Gestion des livraisons de commandes"})]})}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-green-50 to-green-100 border-green-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Pr\xeates \xe0 livrer"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.ready})]}),(0,yr.jsx)(Qr,{className:"h-8 w-8 text-green-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"En cours"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.inDelivery})]}),(0,yr.jsx)(ca,{className:"h-8 w-8 text-blue-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-primary-50 to-primary-100 border-primary-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.total})]}),(0,yr.jsx)(ca,{className:"h-8 w-8 text-primary-600"})]})})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher une commande...",value:u,onChange:e=>h(e.target.value),className:"input pl-10"})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsxs)("select",{value:m,onChange:e=>{p(e.target.value)},className:"input pl-10",children:[(0,yr.jsx)("option",{value:"",children:"Tous les statuts"}),(0,yr.jsx)("option",{value:"PREPARATION",children:"Pr\xeates \xe0 livrer"}),(0,yr.jsx)("option",{value:"LIVRAISON",children:"En cours de livraison"})]})]})]})}),(0,yr.jsx)(Xi,{data:j,columns:w,currentPage:1,totalPages:1,total:j.length,onPageChange:()=>{},loading:c,emptyMessage:"Aucune livraison trouv\xe9e"}),(0,yr.jsx)(Vn,{isOpen:g,onClose:()=>{b(!1),f(null)},title:"Confirmer la livraison",size:"md",children:x&&(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Commande"}),(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:x.orderNumber})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Adresse de livraison"}),x.deliveryAddress?(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-gray-900",children:x.deliveryAddress.street}),(0,yr.jsxs)("p",{className:"text-gray-900",children:[x.deliveryAddress.zipCode," ",x.deliveryAddress.city]})]}):(0,yr.jsx)("p",{className:"text-gray-500",children:"Adresse non disponible"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes de livraison (optionnel)"}),(0,yr.jsx)("textarea",{placeholder:"Notes sur la livraison...",className:"input",rows:"3",id:"deliveryNotes"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Signature (optionnel)"}),(0,yr.jsx)("input",{type:"text",placeholder:"Nom du destinataire...",className:"input",id:"deliverySignature"})]}),(0,yr.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,yr.jsx)("button",{type:"button",onClick:()=>{b(!1),f(null)},className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsx)("button",{type:"button",onClick:()=>{var e,t;const s=(null===(e=document.getElementById("deliveryNotes"))||void 0===e?void 0:e.value)||"";(async(e,t)=>{try{await Gi(x.id,{status:"LIVREE",deliveredAt:(new Date).toISOString(),deliveryNotes:t,signature:e}),r("Livraison confirm\xe9e"),b(!1),f(null),v()}catch(s){a("Erreur lors de la confirmation de livraison"),console.error(s)}})((null===(t=document.getElementById("deliverySignature"))||void 0===t?void 0:t.value)||"",s)},className:"btn btn-primary",children:"Confirmer la livraison"})]})]})}),(0,yr.jsx)(hn,Yt(Yt({},e),{},{onClose:s}))]})};function tf(e,t){const s=si(e,null===t||void 0===t?void 0:t.in);return s.setDate(1),s.setHours(0,0,0,0),s}function sf(e,t){const s=si(e,null===t||void 0===t?void 0:t.in),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function rf(e,t,s){const r=si(e,null===s||void 0===s?void 0:s.in);if(isNaN(t))return ti((null===s||void 0===s?void 0:s.in)||e,NaN);if(!t)return r;const a=r.getDate(),n=ti((null===s||void 0===s?void 0:s.in)||e,r.getTime());n.setMonth(r.getMonth()+t+1,0);return a>=n.getDate()?n:(r.setFullYear(n.getFullYear(),n.getMonth(),a),r)}function af(e,t,s){return rf(e,-t,s)}const nf=function(){const{toast:e,showToast:t,hideToast:s,showSuccess:r,showError:a}=mn(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)("month"),[p,x]=(0,n.useState)(null),[f,g]=(0,n.useState)(Ui(tf(new Date),"yyyy-MM-dd")),[b,y]=(0,n.useState)(Ui(sf(new Date),"yyyy-MM-dd"));(0,n.useEffect)(()=>{v()},[]),(0,n.useEffect)(()=>{N()},[h,p,f,b]);const v=async()=>{try{u(!0),await Promise.all([j(),N()])}catch(e){a("Erreur lors du chargement des donn\xe9es"),console.error(e)}finally{u(!1)}},j=async()=>{try{var e;const t=await kr({page:1,limit:200});c(null!==(e=null===t||void 0===t?void 0:t.shops)&&void 0!==e?e:[])}catch(t){console.error(t)}},N=async()=>{try{var e;const t=await qi({scope:"org",limit:500,status:"LIVREE"});let s=null!==(e=null===t||void 0===t?void 0:t.orders)&&void 0!==e?e:[];p&&(s=s.filter(e=>e.shopId===p));const r=new Date;let a,n;switch(h){case"month":default:a=tf(r),n=sf(r);break;case"quarter":const e=Math.floor(r.getMonth()/3);a=new Date(r.getFullYear(),3*e,1),n=new Date(r.getFullYear(),3*(e+1),0);break;case"year":a=new Date(r.getFullYear(),0,1),n=new Date(r.getFullYear(),11,31);break;case"custom":a=new Date(f),n=new Date(b)}s=s.filter(e=>{const t=new Date(e.createdAt);return t>=a&&t<=n}),l(s)}catch(t){a("Erreur lors du chargement des commandes"),console.error(t)}},w=(0,n.useMemo)(()=>{const e=i.length,t=i.reduce((e,t)=>e+(t.totalTTC||t.total||0),0),s=e>0?t/e:0,r=o.reduce((e,t)=>{const s=i.filter(e=>e.storeId===t.id),r=s.reduce((e,t)=>e+(t.totalTTC||t.total||0),0);return e[t.id]={name:t.name,orders:s.length,revenue:r,averageOrder:s.length>0?r/s.length:0},e},{}),a=i.filter(e=>{const t=new Date(e.createdAt),s=af(new Date,1);return t>=tf(s)&&t<=sf(s)}).reduce((e,t)=>e+(t.totalTTC||t.total||0),0);return{totalOrders:e,totalRevenue:t,averageOrder:s,byStore:r,revenueChange:a>0?(t-a)/a*100:0,previousRevenue:a}},[i,o]),k=[{key:"orderNumber",label:"N\xb0 Commande",render:(e,t)=>(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:Ui(new Date(t.createdAt),"dd MMM yyyy")})]})},{key:"storeId",label:"Magasin",render:e=>{const t=o.find(t=>t.id===e);return(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:(null===t||void 0===t?void 0:t.name)||e})}},{key:"totalTTC",label:"Montant TTC",render:(e,t)=>(0,yr.jsxs)("p",{className:"font-bold text-gray-900",children:[(t.totalTTC||t.total||0).toFixed(2)," \u20ac"]})},{key:"createdAt",label:"Date",render:e=>(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:Ui(new Date(e),"dd MMM yyyy")})}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Finances"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Vue consolid\xe9e des finances de tous vos magasins"})]}),(0,yr.jsxs)("button",{className:"btn btn-secondary flex items-center space-x-2",children:[(0,yr.jsx)(ra,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Exporter"})]})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"input pl-10",children:[(0,yr.jsx)("option",{value:"month",children:"Ce mois"}),(0,yr.jsx)("option",{value:"quarter",children:"Ce trimestre"}),(0,yr.jsx)("option",{value:"year",children:"Cette ann\xe9e"}),(0,yr.jsx)("option",{value:"custom",children:"P\xe9riode personnalis\xe9e"})]})]}),"custom"===h&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{children:(0,yr.jsx)("input",{type:"date",value:f,onChange:e=>g(e.target.value),className:"input"})}),(0,yr.jsx)("div",{children:(0,yr.jsx)("input",{type:"date",value:b,onChange:e=>y(e.target.value),className:"input"})})]}),(0,yr.jsx)("div",{children:(0,yr.jsxs)("select",{value:p||"",onChange:e=>x(e.target.value||null),className:"input",children:[(0,yr.jsx)("option",{value:"",children:"Tous les magasins"}),o.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})})]})}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-primary-50 to-primary-100 border-primary-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Chiffre d'affaires"}),(0,yr.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[w.totalRevenue.toFixed(2)," \u20ac"]}),0!==w.revenueChange&&(0,yr.jsxs)("div",{className:"flex items-center mt-2 text-sm font-semibold ".concat(w.revenueChange>0?"text-green-600":"text-red-600"),children:[w.revenueChange>0?(0,yr.jsx)(sa,{className:"h-4 w-4 mr-1"}):(0,yr.jsx)(Ml,{className:"h-4 w-4 mr-1"}),(0,yr.jsxs)("span",{children:[Math.abs(w.revenueChange).toFixed(1),"%"]}),(0,yr.jsx)("span",{className:"ml-2 text-gray-500 font-normal",children:"vs p\xe9riode pr\xe9c\xe9dente"})]})]}),(0,yr.jsx)(Xr,{className:"h-8 w-8 text-primary-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total commandes"}),(0,yr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.totalOrders})]}),(0,yr.jsx)(bx,{className:"h-8 w-8 text-blue-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-green-50 to-green-100 border-green-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Panier moyen"}),(0,yr.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[w.averageOrder.toFixed(2)," \u20ac"]})]}),(0,yr.jsx)(sa,{className:"h-8 w-8 text-green-600"})]})}),(0,yr.jsx)("div",{className:"card bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200",children:(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"P\xe9riode pr\xe9c\xe9dente"}),(0,yr.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[w.previousRevenue.toFixed(2)," \u20ac"]})]}),(0,yr.jsx)(Xr,{className:"h-8 w-8 text-purple-600"})]})})]}),o.length>1&&(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Performance par magasin"}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>{const t=w.byStore[e.id]||{name:e.name,orders:0,revenue:0,averageOrder:0};return(0,yr.jsxs)("div",{className:"p-4 bg-gradient-to-r from-white to-gray-50 rounded-xl border border-gray-100 hover:shadow-lg transition-all",children:[(0,yr.jsx)("h4",{className:"font-bold text-gray-900 mb-3",children:t.name}),(0,yr.jsxs)("div",{className:"space-y-2",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:"Commandes"}),(0,yr.jsx)("span",{className:"font-bold text-gray-900",children:t.orders})]}),(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:"Chiffre d'affaires"}),(0,yr.jsxs)("span",{className:"font-bold text-gray-900",children:[t.revenue.toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsx)("span",{className:"text-sm text-gray-600",children:"Panier moyen"}),(0,yr.jsxs)("span",{className:"font-bold text-gray-900",children:[t.averageOrder.toFixed(2)," \u20ac"]})]})]})]},e.id)})})]}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"D\xe9tail des commandes"}),(0,yr.jsx)(Xi,{data:i,columns:k,currentPage:1,totalPages:1,total:i.length,onPageChange:()=>{},loading:d,emptyMessage:"Aucune commande trouv\xe9e"})]}),(0,yr.jsx)(hn,Yt(Yt({},e),{},{onClose:s}))]})};const lf=function(){const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[a,i]=(0,n.useState)("all");(0,n.useEffect)(()=>{l()},[]);const l=async()=>{try{const e=await Pa();t(e.data||[])}catch(e){console.error(e),t([])}finally{r(!1)}},o="all"===a?e:"unread"===a?e.filter(e=>!e.isRead):e.filter(e=>e.isRead),c=e=>{const t={order:Ma,stock:dn,delivery:ca,payment:Qr}[e]||na;return(0,yr.jsx)(t,{className:"h-6 w-6"})};return s?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Notifications"}),(0,yr.jsxs)("button",{onClick:async()=>{await Da(),t(e.map(e=>Yt(Yt({},e),{},{isRead:!0})))},className:"btn-secondary flex items-center space-x-2",children:[(0,yr.jsx)(Ma,{className:"h-5 w-5"}),(0,yr.jsx)("span",{children:"Tout marquer comme lu"})]})]}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,yr.jsxs)("button",{onClick:()=>i("all"),className:"px-4 py-2 rounded-lg font-medium ".concat("all"===a?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Toutes (",e.length,")"]}),(0,yr.jsxs)("button",{onClick:()=>i("unread"),className:"px-4 py-2 rounded-lg font-medium ".concat("unread"===a?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Non lues (",e.filter(e=>!e.isRead).length,")"]}),(0,yr.jsxs)("button",{onClick:()=>i("read"),className:"px-4 py-2 rounded-lg font-medium ".concat("read"===a?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Lues (",e.filter(e=>e.isRead).length,")"]})]}),(0,yr.jsx)("div",{className:"space-y-4",children:o.map(s=>{return(0,yr.jsx)("div",{className:"border-2 rounded-xl p-4 transition-all ".concat(s.isRead?"bg-white border-gray-200":(r=s.priority,{high:"bg-red-50 border-red-200",medium:"bg-yellow-50 border-yellow-200",low:"bg-blue-50 border-blue-200"}[r]||"bg-gray-50 border-gray-200")," hover:shadow-md"),children:(0,yr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,yr.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[(0,yr.jsx)("div",{className:"p-3 rounded-full ".concat(s.isRead?"bg-gray-100 text-gray-600":"bg-white text-primary-600"),children:c(s.type)}),(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:s.title}),(0,yr.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:s.message}),(0,yr.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,yr.jsx)(Ra,{className:"h-4 w-4 mr-1"}),new Date(s.createdAt).toLocaleString("fr-FR")]})]})]}),!s.isRead&&(0,yr.jsx)("button",{onClick:()=>(async s=>{await Oa(s),t(e.map(e=>e.id===s?Yt(Yt({},e),{},{isRead:!0}):e))})(s.id),className:"btn-secondary text-sm",children:"Marquer lu"})]})},s.id);var r})})]})]})};const of=function(){const{user:e}=Nr(),{stores:t}=_r(),{toast:s,showToast:r,hideToast:a,showSuccess:i,showError:l}=mn(),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),[h,m]=(0,n.useState)(""),[p,x]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),[b,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)({isOpen:!1,userId:null}),[N,w]=(0,n.useState)(null),[k,S]=(0,n.useState)({email:"",firstName:"",lastName:"",phone:"",role:"MANAGER",storeId:"",isActive:!0}),C=["MANAGER","PREPARATEUR","LIVREUR","COMMERCIAL","STOCK_MANAGER","CLIENT"];(0,n.useEffect)(()=>{E()},[]);const E=async()=>{try{u(!0),await Promise.all([_()])}catch(e){l("Erreur lors du chargement des donn\xe9es"),console.error(e)}finally{u(!1)}},_=async()=>{try{var e;const s=await En({});let r=null!==(e=null===s||void 0===s?void 0:s.users)&&void 0!==e?e:[];const a=t.map(e=>e.id);a.length&&(r=r.filter(e=>e.storeId&&a.includes(e.storeId))),c(r)}catch(s){l("Erreur lors du chargement des utilisateurs"),console.error(s)}};(0,n.useEffect)(()=>{void 0===p&&void 0===f||_()},[p,f]);const T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){w(e);const{firstName:t,lastName:s}=(e=>{if(!e||"string"!==typeof e)return{firstName:"",lastName:""};const t=e.trim().split(/\s+/);return 0===t.length?{firstName:"",lastName:""}:1===t.length?{firstName:t[0],lastName:""}:{firstName:t[0],lastName:t.slice(1).join(" ")}})(e.name);S({email:e.email||"",firstName:t,lastName:s,phone:e.phone||"",role:e.role||"MANAGER",storeId:e.storeId||"",isActive:void 0===e.isActive||e.isActive})}else{var s;w(null),S({email:"",firstName:"",lastName:"",phone:"",role:"MANAGER",storeId:(null===(s=t[0])||void 0===s?void 0:s.id)||"",isActive:!0})}y(!0)},R=()=>{y(!1),w(null),S({email:"",firstName:"",lastName:"",phone:"",role:"MANAGER",storeId:"",isActive:!0})},M=o.filter(e=>{var t,s;const r=!h||e.email.toLowerCase().includes(h.toLowerCase())||(null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(s=e.lastName)||void 0===s?void 0:s.toLowerCase().includes(h.toLowerCase())),a=!p||e.role===p,n=!f||e.storeId===f;return r&&a&&n});return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Utilisateurs"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Gestion des utilisateurs de vos magasins"})]}),(0,yr.jsxs)("button",{onClick:()=>T(),className:"btn btn-primary flex items-center space-x-2",children:[(0,yr.jsx)(Nn,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:"Nouveau utilisateur"})]})]}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),className:"input pl-10",placeholder:"Rechercher un utilisateur..."})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"input pl-10",children:[(0,yr.jsx)("option",{value:"",children:"Tous les r\xf4les"}),C.map(e=>(0,yr.jsx)("option",{value:e,children:e},e))]})]}),(0,yr.jsx)("div",{className:"relative",children:(0,yr.jsxs)("select",{value:f,onChange:e=>g(e.target.value),className:"input",children:[(0,yr.jsx)("option",{value:"",children:"Tous les magasins"}),t.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})})]})}),d?(0,yr.jsx)("div",{className:"card text-center py-8",children:(0,yr.jsx)("p",{className:"text-gray-600",children:"Chargement..."})}):0===M.length?(0,yr.jsx)("div",{className:"card text-center py-8",children:(0,yr.jsx)("p",{className:"text-gray-600",children:"Aucun utilisateur trouv\xe9"})}):(0,yr.jsx)("div",{className:"card overflow-hidden",children:(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xf4le"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Magasin"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,yr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(e=>{const s=t.find(t=>t.id===e.storeId);return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e.email}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:e.name||"-"})]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)(In,{className:"h-4 w-4 text-gray-400"}),(0,yr.jsx)("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 text-xs font-semibold rounded-lg",children:e.role})]})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:(0,yr.jsx)("div",{className:"text-sm text-gray-600",children:s?s.name:(0,yr.jsx)("span",{className:"text-gray-400",children:"-"})})}),(0,yr.jsx)("td",{className:"px-6 py-4",children:e.phone&&(0,yr.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,yr.jsx)(nn,{className:"h-3 w-3"}),(0,yr.jsx)("span",{children:e.phone})]})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yr.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(!1!==e.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:!1!==e.isActive?"Actif":"Inactif"})}),(0,yr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("button",{onClick:()=>T(e),className:"p-2 text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Modifier",children:(0,yr.jsx)(wn,{className:"h-4 w-4"})}),(0,yr.jsx)("button",{onClick:()=>j({isOpen:!0,userId:e.id}),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:(0,yr.jsx)(kn,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),b&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,yr.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:N?"Modifier l'utilisateur":"Nouvel utilisateur"})}),(0,yr.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=Yt(Yt({},k),{},{name:"".concat(k.firstName||""," ").concat(k.lastName||"").trim()||void 0,clientId:null===e||void 0===e?void 0:e.clientId});delete t.firstName,delete t.lastName,N?(await Tn(N.id,t),i("Utilisateur mis \xe0 jour avec succ\xe8s")):(await _n(t),i("Utilisateur cr\xe9\xe9 avec succ\xe8s")),R(),_()}catch(s){l("Erreur lors de la sauvegarde de l'utilisateur"),console.error(s)}},className:"p-6 space-y-4",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pr\xe9nom *"}),(0,yr.jsx)("input",{type:"text",value:k.firstName,onChange:e=>S(Yt(Yt({},k),{},{firstName:e.target.value})),className:"input",required:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom *"}),(0,yr.jsx)("input",{type:"text",value:k.lastName,onChange:e=>S(Yt(Yt({},k),{},{lastName:e.target.value})),className:"input",required:!0})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),(0,yr.jsx)("input",{type:"email",value:k.email,onChange:e=>S(Yt(Yt({},k),{},{email:e.target.value})),className:"input",required:!0,disabled:!!N})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("input",{type:"tel",value:k.phone,onChange:e=>S(Yt(Yt({},k),{},{phone:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"R\xf4le *"}),(0,yr.jsx)("select",{value:k.role,onChange:e=>S(Yt(Yt({},k),{},{role:e.target.value})),className:"input",required:!0,children:C.map(e=>(0,yr.jsx)("option",{value:e,children:e},e))})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Magasin"}),(0,yr.jsxs)("select",{value:k.storeId,onChange:e=>S(Yt(Yt({},k),{},{storeId:e.target.value})),className:"input",children:[(0,yr.jsx)("option",{value:"",children:"Aucun magasin"}),t.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,yr.jsxs)("div",{className:"flex items-center space-x-3 pt-4 border-t border-gray-200",children:[(0,yr.jsx)("input",{type:"checkbox",id:"isActive",checked:k.isActive,onChange:e=>S(Yt(Yt({},k),{},{isActive:e.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,yr.jsx)("label",{htmlFor:"isActive",className:"text-sm font-semibold text-gray-700",children:"Utilisateur actif"})]}),(0,yr.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,yr.jsx)("button",{type:"button",onClick:R,className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsx)("button",{type:"submit",className:"btn btn-primary",children:N?"Enregistrer":"Cr\xe9er"})]})]})]})}),v.isOpen&&(0,yr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,yr.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,yr.jsx)(dn,{className:"h-6 w-6 text-red-600"}),(0,yr.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Confirmer la suppression"})]}),(0,yr.jsx)("p",{className:"text-gray-600 mb-6",children:"\xcates-vous s\xfbr de vouloir supprimer cet utilisateur ? Cette action est irr\xe9versible."}),(0,yr.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,yr.jsx)("button",{onClick:()=>j({isOpen:!1,userId:null}),className:"btn btn-secondary",children:"Annuler"}),(0,yr.jsx)("button",{onClick:async()=>{try{await Rn(v.userId),i("Utilisateur supprim\xe9 avec succ\xe8s"),j({isOpen:!1,userId:null}),_()}catch(e){l("Erreur lors de la suppression de l'utilisateur"),console.error(e)}},className:"btn btn-danger",children:"Supprimer"})]})]})}),(0,yr.jsx)(hn,Yt(Yt({},s),{},{onClose:a}))]})};const cf=function(){var e,t,s,r,a,i;const{user:l}=Nr(),{toast:o,showToast:c,hideToast:d,showSuccess:u,showError:h}=mn(),[m,p]=(0,n.useState)("profile"),[x,f]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1),j=useRef(null),N=(null===l||void 0===l||null===(e=l.name)||void 0===e?void 0:e.split(" "))||[],[w,k]=(0,n.useState)({firstName:N[0]||"",lastName:N.slice(1).join(" ")||"",email:(null===l||void 0===l?void 0:l.email)||"",phone:(null===l||void 0===l?void 0:l.phone)||""});(0,n.useEffect)(()=>{gr().catch(()=>{})},[]),(0,n.useEffect)(()=>{if(l){var e;const t=(null===(e=l.name)||void 0===e?void 0:e.split(" "))||[];k({firstName:t[0]||"",lastName:t.slice(1).join(" ")||"",email:l.email||"",phone:l.phone||""})}},[l]);const[S,C]=(0,n.useState)({email:!0,sms:!1,orders:!0,stocks:!0,finances:!0}),[E,_]=(0,n.useState)({current:"",new:"",confirm:""}),T=(e=>{if(!e)return{strength:0,label:"",color:""};let t=0;e.length>=8&&t++,e.length>=12&&t++,/[a-z]/.test(e)&&/[A-Z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^a-zA-Z\d]/.test(e)&&t++;return[{strength:0,label:"",color:""},{strength:1,label:"Tr\xe8s faible",color:"bg-red-500"},{strength:2,label:"Faible",color:"bg-orange-500"},{strength:3,label:"Moyen",color:"bg-yellow-500"},{strength:4,label:"Fort",color:"bg-primary-500"},{strength:5,label:"Tr\xe8s fort",color:"bg-green-500"}][t]})(E.new),R=[{id:"profile",label:"Profil",icon:za},{id:"security",label:"S\xe9curit\xe9",icon:an},{id:"notifications",label:"Notifications",icon:na}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 animate-slide-up",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Param\xe8tres"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Gestion de votre compte"})]}),(0,yr.jsx)("div",{className:"flex flex-wrap gap-2",children:R.map(e=>{const t=e.icon,s=m===e.id;return(0,yr.jsxs)("button",{onClick:()=>p(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 ".concat(s?"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[(0,yr.jsx)(t,{className:"h-4 w-4"}),(0,yr.jsx)("span",{className:"text-sm",children:e.label})]},e.id)})})]}),(0,yr.jsxs)("div",{children:["profile"===m&&(0,yr.jsxs)("div",{className:"animate-scale-in",children:[(0,yr.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-3 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl shadow-md",children:(0,yr.jsx)(za,{className:"h-6 w-6 text-white"})}),(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Mon Profil"})]})}),(0,yr.jsxs)("div",{className:"flex items-center space-x-6 mb-8 p-6 bg-gradient-to-br from-primary-50 to-white rounded-xl border-2 border-primary-200 card-hover shadow-md",children:[(0,yr.jsx)("input",{ref:j,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:async e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){v(!0);try{await Pn(s),u("Photo de profil mise \xe0 jour.")}catch(r){h((null===r||void 0===r?void 0:r.message)||"Erreur lors du t\xe9l\xe9versement.")}finally{v(!1),e.target.value=""}}}}),(0,yr.jsxs)("div",{className:"relative group",children:[(0,yr.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg overflow-hidden group-hover:scale-110 transition-transform",children:null!==l&&void 0!==l&&l.avatarUrl?(0,yr.jsx)("img",{src:l.avatarUrl,alt:"",className:"w-full h-full object-cover"}):(0,yr.jsxs)("span",{children:[(null===(t=w.firstName)||void 0===t?void 0:t.charAt(0))||(null===l||void 0===l||null===(s=l.name)||void 0===s?void 0:s.charAt(0))||"U",(null===(r=w.lastName)||void 0===r?void 0:r.charAt(0))||(null===l||void 0===l||null===(a=l.name)||void 0===a||null===(i=a.split(" ")[1])||void 0===i?void 0:i.charAt(0))||""]})}),(0,yr.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},disabled:y,className:"absolute bottom-0 right-0 p-2 bg-white rounded-full shadow-lg border-2 border-primary-500 hover:bg-gray-50 opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50",title:"Changer la photo",children:y?(0,yr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary-500 border-t-transparent"}):(0,yr.jsx)(Px,{className:"h-4 w-4 text-primary-600"})})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:(null===l||void 0===l?void 0:l.name)||"".concat(w.firstName," ").concat(w.lastName).trim()}),(0,yr.jsx)("p",{className:"text-gray-600",children:null===l||void 0===l?void 0:l.email}),(0,yr.jsxs)("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-sm font-semibold",children:[(0,yr.jsx)(In,{className:"h-4 w-4 mr-1"}),"Client"]})]})]}),(0,yr.jsxs)("div",{className:"space-y-4 p-6 bg-white rounded-xl shadow-md card-hover",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pr\xe9nom *"}),(0,yr.jsx)("input",{type:"text",value:w.firstName,onChange:e=>k(Yt(Yt({},w),{},{firstName:e.target.value})),className:"input",placeholder:"Votre pr\xe9nom"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom *"}),(0,yr.jsx)("input",{type:"text",value:w.lastName,onChange:e=>k(Yt(Yt({},w),{},{lastName:e.target.value})),className:"input",placeholder:"Votre nom"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,yr.jsx)("input",{type:"email",value:w.email,className:"input bg-gray-50 cursor-not-allowed",disabled:!0}),(0,yr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"L'email ne peut pas \xeatre modifi\xe9"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("input",{type:"tel",value:w.phone,onChange:e=>k(Yt(Yt({},w),{},{phone:e.target.value})),className:"input",placeholder:"+33 X XX XX XX XX"})]})]}),(0,yr.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,yr.jsx)("button",{onClick:async()=>{f(!0);try{if(null===l||void 0===l||!l.id)return void h("Utilisateur non identifi\xe9");await new Promise(e=>setTimeout(e,500));const e={name:"".concat(w.firstName||""," ").concat(w.lastName||"").trim()||l.name,phone:w.phone||null};if(!e.name&&!e.phone)return void h("Aucune donn\xe9e \xe0 mettre \xe0 jour");await Mn(e),u("Profil mis \xe0 jour avec succ\xe8s")}catch(e){h("Erreur lors de la mise \xe0 jour du profil"),console.error(e)}finally{f(!1)}},disabled:x,className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white px-8 py-3 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center space-x-2 disabled:opacity-50",children:x?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Sauvegarde..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ll,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Enregistrer"})]})})})]})]}),"security"===m&&(0,yr.jsxs)("div",{className:"animate-scale-in",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,yr.jsx)("div",{className:"p-3 bg-gradient-to-br from-red-500 to-red-600 rounded-xl shadow-md",children:(0,yr.jsx)(an,{className:"h-6 w-6 text-white"})}),(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"S\xe9curit\xe9"})]}),(0,yr.jsxs)("div",{className:"space-y-4 p-6 bg-white rounded-xl shadow-md card-hover",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe actuel *"}),(0,yr.jsx)("input",{type:"password",value:E.current,onChange:e=>_(Yt(Yt({},E),{},{current:e.target.value})),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nouveau mot de passe *"}),(0,yr.jsx)("input",{type:"password",value:E.new,onChange:e=>_(Yt(Yt({},E),{},{new:e.target.value})),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),E.new&&(0,yr.jsxs)("div",{className:"mt-2",children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,yr.jsx)("span",{className:"text-xs font-medium text-gray-600",children:"Force du mot de passe:"}),(0,yr.jsx)("span",{className:"text-xs font-semibold ".concat("Tr\xe8s fort"===T.label?"text-green-600":"Fort"===T.label?"text-primary-600":"text-orange-600"),children:T.label})]}),(0,yr.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,yr.jsx)("div",{className:"h-full ".concat(T.color," transition-all duration-500"),style:{width:"".concat(T.strength/5*100,"%")}})})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe *"}),(0,yr.jsx)("input",{type:"password",value:E.confirm,onChange:e=>_(Yt(Yt({},E),{},{confirm:e.target.value})),className:"input",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),E.confirm&&(0,yr.jsx)("div",{className:"mt-2 flex items-center space-x-2",children:E.new===E.confirm?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(Ox,{className:"h-4 w-4 text-green-600"}),(0,yr.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"Les mots de passe correspondent"})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ua,{className:"h-4 w-4 text-red-600"}),(0,yr.jsx)("span",{className:"text-xs text-red-600 font-medium",children:"Les mots de passe ne correspondent pas"})]})})]})]}),(0,yr.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[(0,yr.jsx)("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Exigences du mot de passe :"}),(0,yr.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,yr.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("div",{className:"w-4 h-4 rounded-full flex items-center justify-center ".concat(E.new.length>=8?"bg-green-500":"bg-gray-300"),children:E.new.length>=8&&(0,yr.jsx)(Ox,{className:"h-3 w-3 text-white"})}),(0,yr.jsx)("span",{children:"Au moins 8 caract\xe8res"})]}),(0,yr.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("div",{className:"w-4 h-4 rounded-full flex items-center justify-center ".concat(/[A-Z]/.test(E.new)&&/[a-z]/.test(E.new)?"bg-green-500":"bg-gray-300"),children:/[A-Z]/.test(E.new)&&/[a-z]/.test(E.new)&&(0,yr.jsx)(Ox,{className:"h-3 w-3 text-white"})}),(0,yr.jsx)("span",{children:"Majuscules et minuscules"})]}),(0,yr.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,yr.jsx)("div",{className:"w-4 h-4 rounded-full flex items-center justify-center ".concat(/\d/.test(E.new)?"bg-green-500":"bg-gray-300"),children:/\d/.test(E.new)&&(0,yr.jsx)(Ox,{className:"h-3 w-3 text-white"})}),(0,yr.jsx)("span",{children:"Au moins un chiffre"})]})]})]}),(0,yr.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,yr.jsx)("button",{onClick:async()=>{if(E.new===E.confirm)if(E.new.length<8)h("Le mot de passe doit contenir au moins 8 caract\xe8res");else{f(!0);try{if(null===l||void 0===l||!l.id)return void h("Utilisateur non identifi\xe9");await new Promise(e=>setTimeout(e,500)),await An(E.current,E.new),u("Mot de passe modifi\xe9 avec succ\xe8s"),_({current:"",new:"",confirm:""})}catch(e){h("Erreur lors de la modification du mot de passe"),console.error(e)}finally{f(!1)}}else h("Les mots de passe ne correspondent pas")},disabled:x||!E.current||!E.new||E.new!==E.confirm,className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-8 py-3 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Modification..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(an,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Modifier le mot de passe"})]})})})]})]}),"notifications"===m&&(0,yr.jsxs)("div",{className:"animate-scale-in",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,yr.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-md",children:(0,yr.jsx)(na,{className:"h-6 w-6 text-white"})}),(0,yr.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Pr\xe9f\xe9rences de Notification"})]}),(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsxs)("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-white rounded-xl border-2 border-purple-200 card-hover shadow-md",children:[(0,yr.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Canaux de notification"}),(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("label",{className:"flex items-center justify-between cursor-pointer group p-4 bg-white rounded-lg hover:shadow-md transition-all",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,yr.jsx)(na,{className:"h-5 w-5 text-blue-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:"Notifications par email"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Recevoir des notifications par email"})]})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("input",{type:"checkbox",checked:S.email,onChange:e=>C(Yt(Yt({},S),{},{email:e.target.checked})),className:"sr-only peer"}),(0,yr.jsx)("div",{className:"w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-primary-600"})]})]}),(0,yr.jsxs)("label",{className:"flex items-center justify-between cursor-pointer group p-4 bg-white rounded-lg hover:shadow-md transition-all",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,yr.jsx)(na,{className:"h-5 w-5 text-green-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:"Notifications par SMS"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Recevoir des notifications par SMS"})]})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("input",{type:"checkbox",checked:S.sms,onChange:e=>C(Yt(Yt({},S),{},{sms:e.target.checked})),className:"sr-only peer"}),(0,yr.jsx)("div",{className:"w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-primary-600"})]})]})]})]}),(0,yr.jsxs)("div",{className:"p-6 bg-gradient-to-br from-orange-50 to-white rounded-xl border-2 border-orange-200 card-hover shadow-md",children:[(0,yr.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Types de notifications"}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"orders",label:"Nouvelles commandes",color:"blue"},{key:"stocks",label:"Alertes de stock",color:"orange"},{key:"finances",label:"Rapports financiers",color:"green"}].map(e=>(0,yr.jsxs)("label",{className:"flex items-center justify-between cursor-pointer group p-4 bg-white rounded-lg hover:shadow-md transition-all",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-".concat(e.color,"-100 rounded-lg"),children:(0,yr.jsx)(Ox,{className:"h-4 w-4 text-".concat(e.color,"-600")})}),(0,yr.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("input",{type:"checkbox",checked:S[e.key],onChange:t=>C(Yt(Yt({},S),{},{[e.key]:t.target.checked})),className:"sr-only peer"}),(0,yr.jsx)("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]},e.key))})]}),(0,yr.jsx)("div",{className:"flex justify-end pt-4",children:(0,yr.jsx)("button",{onClick:async()=>{f(!0);try{await new Promise(e=>setTimeout(e,500)),u("Pr\xe9f\xe9rences de notification sauvegard\xe9es")}catch(e){h("Erreur lors de la sauvegarde")}finally{f(!1)}},disabled:x,className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-8 py-3 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center space-x-2 disabled:opacity-50",children:x?(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Sauvegarde..."})]}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(ll,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Enregistrer"})]})})})]})]})]}),(0,yr.jsx)(hn,Yt(Yt({},o),{},{onClose:d}))]})};const df=function(e){let{products:t=[],isLoading:s=!1}=e;return s?(0,yr.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,yr.jsxs)("div",{className:"animate-pulse",children:[(0,yr.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,yr.jsx)("div",{className:"space-y-3",children:[...Array(5)].map((e,t)=>(0,yr.jsx)("div",{className:"h-20 bg-gray-200 rounded"},t))})]})}):0===t.length?(0,yr.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,yr.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Aucun produit disponible"})}):(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,yr.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Catalogue des produits"}),(0,yr.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,yr.jsx)("div",{className:"border rounded-lg p-4 hover:border-green-500 transition-colors",children:(0,yr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("h3",{className:"font-medium",children:e.name}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:e.category})]}),(0,yr.jsxs)("div",{className:"text-right",children:[(0,yr.jsxs)("p",{className:"font-semibold text-green-600",children:[e.price," \u20ac"]}),(0,yr.jsxs)("p",{className:"text-sm text-gray-500",children:["Stock: ",e.stock]})]})]})},e.id))})]})};const uf=function(e){let{onSaveDraft:t,onSendOrder:s}=e;const{items:r,total:a}=Mr();return(0,yr.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-4",children:[(0,yr.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"R\xe9sum\xe9 de la commande"}),0===r.length?(0,yr.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Votre panier est vide"}):(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)("div",{className:"space-y-3 mb-4",children:r.map(e=>(0,yr.jsxs)("div",{className:"flex justify-between items-center border-b pb-2",children:[(0,yr.jsxs)("div",{className:"flex-1",children:[(0,yr.jsx)("p",{className:"font-medium",children:e.name}),(0,yr.jsxs)("p",{className:"text-sm text-gray-600",children:["Qt\xe9: ",e.quantity]})]}),(0,yr.jsxs)("p",{className:"font-semibold",children:[(e.price*e.quantity).toFixed(2)," \u20ac"]})]},e.id))}),(0,yr.jsx)("div",{className:"border-t pt-4 mb-6",children:(0,yr.jsxs)("div",{className:"flex justify-between items-center text-lg font-bold",children:[(0,yr.jsx)("span",{children:"Total"}),(0,yr.jsxs)("span",{className:"text-green-600",children:[a.toFixed(2)," \u20ac"]})]})}),(0,yr.jsxs)("div",{className:"space-y-2",children:[(0,yr.jsx)("button",{onClick:s,className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Envoyer la commande"}),(0,yr.jsx)("button",{onClick:t,className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Sauvegarder comme brouillon"})]})]})]})};const hf=function(){var e,t;const s=ae(),{user:r}=Nr(),{stores:a,selectStore:i,selectedStoreId:l}=_r(),{cartItems:o,clearCart:c}=Mr(),{toast:d,showToast:u,hideToast:h,showSuccess:m,showError:p}=mn(),{canCreate:x}=tn(Ya),[f,g]=(0,n.useState)([]),[b,y]=(0,n.useState)(!0),[v,j]=(0,n.useState)(""),[N,w]=(0,n.useState)(null);(0,n.useEffect)(()=>{a.length&&!l&&i(a[0].id)},[a,l]),(0,n.useEffect)(()=>{if(l){const e=a.find(e=>e&&e.id===l);w(e||null),e&&k(e.id)}},[l,a]);const k=async e=>{try{var t;y(!0);const s=await Zi({storeId:e});g(null!==(t=null===s||void 0===s?void 0:s.products)&&void 0!==t?t:[])}catch(s){p("Erreur lors du chargement des produits"),console.error(s)}finally{y(!1)}},S=(new Date).toISOString().split("T")[0],C=new Date;C.setDate(C.getDate()+30);const E=C.toISOString().split("T")[0];return x?(0,yr.jsx)(sn,{requiredRole:"CLIENT",requiredResource:Ya,requiredAction:Za.CREATE,children:(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Nouvelle commande"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"S\xe9lectionnez un magasin et cr\xe9ez votre commande. Le stock ne sera pas bloqu\xe9 lors de la cr\xe9ation."})]}),(0,yr.jsx)(vn,{role:"CLIENT"}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,yr.jsx)(Gr,{className:"inline h-4 w-4 mr-1"}),"Magasin / D\xe9p\xf4t"]}),(0,yr.jsxs)("select",{value:l||"",onChange:e=>(e=>{i(e);const t=a.find(t=>t&&t.id===e);w(t||null),t&&k(t.id)})(e.target.value||null),className:"input",required:!0,children:[(0,yr.jsx)("option",{value:"",children:"S\xe9lectionner un magasin"}),a.filter(e=>e&&e.id&&e.name).map(e=>{var t;return(0,yr.jsxs)("option",{value:e.id,children:[e.name," - ",(null===(t=e.address)||void 0===t?void 0:t.street)||e.address]},e.id)})]})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,yr.jsx)(bx,{className:"inline h-4 w-4 mr-1"}),"Date de livraison souhait\xe9e"]}),(0,yr.jsx)("input",{type:"date",value:v,onChange:e=>j(e.target.value),min:S,max:E,className:"input",required:!0})]})]}),N&&(0,yr.jsxs)("div",{className:"mt-4 p-4 bg-primary-50 border border-primary-200 rounded-xl flex items-start space-x-3",children:[(0,yr.jsx)(cn,{className:"h-5 w-5 text-primary-600 mt-0.5 flex-shrink-0"}),(0,yr.jsxs)("div",{className:"text-sm text-primary-800",children:[(0,yr.jsxs)("p",{className:"font-semibold mb-1",children:["Magasin s\xe9lectionn\xe9: ",N.name]}),(0,yr.jsxs)("p",{className:"text-primary-700",children:[(null===(e=N.address)||void 0===e?void 0:e.street)||N.address," - ",(null===(t=N.address)||void 0===t?void 0:t.city)||""]})]})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,yr.jsx)("div",{className:"lg:col-span-2",children:(0,yr.jsx)(df,{products:f,isLoading:b})}),(0,yr.jsx)("div",{className:"lg:col-span-1",children:(0,yr.jsx)(uf,{onSaveDraft:async()=>{if(N)if(0!==o.length)if(v)try{const e={storeId:N.id,clientId:r.clientId,deliveryDate:v,status:"brouillon",items:o.map(e=>({productId:e.productId,product:e.product,quantity:e.quantity,orderedQuantity:e.quantity,unit:e.unit,unitPrice:e.price,totalPrice:e.price*e.quantity})),totalHT:o.reduce((e,t)=>e+t.price*t.quantity,0),taxRate:.2,createdBy:r.id},{data:t}=await Wi(e);c(),m("Commande enregistr\xe9e en brouillon"),setTimeout(()=>{s(ga.ORDERS)},1500)}catch(e){p("Erreur lors de l'enregistrement de la commande"),console.error(e)}else p("Veuillez s\xe9lectionner une date de livraison");else p("Votre panier est vide");else p("Veuillez s\xe9lectionner un magasin")},onSendOrder:async()=>{const e=bn();if(e.allowed)if(N)if(0!==o.length)if(v)try{const e={storeId:N.id,clientId:r.clientId,deliveryDate:v,status:"envoy\xe9e",items:o.map(e=>({productId:e.productId,product:e.product,quantity:e.quantity,orderedQuantity:e.quantity,unit:e.unit,unitPrice:e.price,totalPrice:e.price*e.quantity})),totalHT:o.reduce((e,t)=>e+t.price*t.quantity,0),taxRate:.2,createdBy:r.id},{data:t}=await Wi(e);c(),m("Commande envoy\xe9e avec succ\xe8s !"),setTimeout(()=>{s(ga.ORDERS)},1500)}catch(t){p("Erreur lors de l'envoi de la commande"),console.error(t)}else p("Veuillez s\xe9lectionner une date de livraison");else p("Votre panier est vide");else p("Veuillez s\xe9lectionner un magasin");else p(e.message)}})})]}),(0,yr.jsx)(hn,Yt(Yt({},d),{},{onClose:h}))]})}):(0,yr.jsx)(sn,{requiredResource:Ya,requiredAction:Za.CREATE,children:(0,yr.jsxs)("div",{className:"card text-center py-12",children:[(0,yr.jsx)(dn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,yr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Acc\xe8s refus\xe9"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Vous n'avez pas la permission de cr\xe9er des commandes"})]})})},mf=Br("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const pf=function(){var e,t,s,r,a;const{id:i}=ne(),l=ae(),{toast:o,showToast:c,hideToast:d,showError:u}=mn(),[h,m]=(0,n.useState)(null),[p,x]=(0,n.useState)(!0);(0,n.useEffect)(()=>{i&&f()},[i]);const f=async()=>{try{var e;x(!0);const t=await async function(e){return(await fr.get("/orders/".concat(e))).data}(i);m(null!==(e=null===t||void 0===t?void 0:t.order)&&void 0!==e?e:null)}catch(Af){u("Commande introuvable"),l(ga.ORDERS)}finally{x(!1)}};if(p)return(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-200 border-t-primary-600"})});if(!h)return null;const g=h.items||[],b=h.shop||{};return(0,yr.jsxs)("div",{className:"space-y-6",children:[o.visible&&(0,yr.jsx)(hn,{message:o.message,type:o.type,onClose:d}),(0,yr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yr.jsxs)("button",{onClick:()=>l(ga.ORDERS),className:"btn btn-secondary inline-flex items-center gap-2",children:[(0,yr.jsx)(mf,{className:"h-4 w-4"}),"Retour aux commandes"]}),(0,yr.jsx)(Vx,{status:h.status})]}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsxs)("h1",{className:"text-xl font-bold text-gray-900 mb-4",children:["Commande ",h.orderNumber||(null===(e=h.id)||void 0===e?void 0:e.slice(0,8))]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600 mb-6",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)(bx,{className:"h-4 w-4"}),(0,yr.jsxs)("span",{children:["Cr\xe9\xe9e le ",Ui(new Date(h.createdAt),"dd MMM yyyy HH:mm")]})]}),h.deliveryDate&&(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)(bx,{className:"h-4 w-4"}),(0,yr.jsxs)("span",{children:["Livraison pr\xe9vue ",Ui(new Date(h.deliveryDate),"dd MMM yyyy")]})]}),b.name&&(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)(on,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:b.name}),b.address&&(0,yr.jsxs)("span",{className:"text-gray-500",children:[" \u2013 ",b.address,", ",b.city]})]}),(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)(Xr,{className:"h-4 w-4"}),(0,yr.jsxs)("span",{className:"font-semibold text-gray-900",children:["Total TTC : ",null!==(t=null!==(s=null===(r=h.totalTTC)||void 0===r?void 0:r.toFixed(2))&&void 0!==s?s:null===(a=h.total)||void 0===a?void 0:a.toFixed(2))&&void 0!==t?t:"0.00"," \u20ac"]})]})]}),(0,yr.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,yr.jsx)(Qr,{className:"h-5 w-5"}),"Articles"]}),(0,yr.jsx)("div",{className:"overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full text-sm",children:[(0,yr.jsx)("thead",{children:(0,yr.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,yr.jsx)("th",{className:"text-left py-2 font-medium text-gray-700",children:"Produit"}),(0,yr.jsx)("th",{className:"text-right py-2 font-medium text-gray-700",children:"Quantit\xe9"}),(0,yr.jsx)("th",{className:"text-right py-2 font-medium text-gray-700",children:"Unit\xe9"}),(0,yr.jsx)("th",{className:"text-right py-2 font-medium text-gray-700",children:"Total"})]})}),(0,yr.jsx)("tbody",{children:g.map((e,t)=>{var s,r,a,n,i,l,o,c,d,u;return(0,yr.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,yr.jsx)("td",{className:"py-2",children:null!==(s=null===(r=e.product)||void 0===r?void 0:r.name)&&void 0!==s?s:"Produit"}),(0,yr.jsx)("td",{className:"text-right py-2",children:null!==(a=null!==(n=e.quantity)&&void 0!==n?n:e.orderedQuantity)&&void 0!==a?a:0}),(0,yr.jsx)("td",{className:"text-right py-2",children:null!==(i=null===(l=e.product)||void 0===l?void 0:l.unit)&&void 0!==i?i:"u"}),(0,yr.jsxs)("td",{className:"text-right py-2",children:[((null!==(o=null!==(c=e.quantity)&&void 0!==c?c:e.orderedQuantity)&&void 0!==o?o:0)*(null!==(d=null!==(u=e.unitPrice)&&void 0!==u?u:e.price)&&void 0!==d?d:0)).toFixed(2)," \u20ac"]})]},t)})})]})})]})]})};const xf=function(){const{id:e}=ne(),t=ae(),{toast:s,showToast:r,hideToast:a,showError:i}=mn(),[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{e&&u()},[e]);const u=async()=>{try{var s,r;d(!0);const t=await getClientShop(e);o(null!==(s=null!==(r=null===t||void 0===t?void 0:t.shop)&&void 0!==r?r:t)&&void 0!==s?s:null)}catch(Af){i("Magasin introuvable"),t(ga.STORES)}finally{d(!1)}};if(c)return(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-200 border-t-primary-600"})});if(!l)return null;const h=[l.address,l.postalCode,l.city].filter(Boolean).join(", ");return(0,yr.jsxs)("div",{className:"space-y-6",children:[s.visible&&(0,yr.jsx)(hn,{message:s.message,type:s.type,onClose:a}),(0,yr.jsx)("div",{className:"flex items-center justify-between",children:(0,yr.jsxs)("button",{onClick:()=>t(ga.STORES),className:"btn btn-secondary inline-flex items-center gap-2",children:[(0,yr.jsx)(mf,{className:"h-4 w-4"}),"Retour aux magasins"]})}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:l.name}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[h&&(0,yr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,yr.jsx)(on,{className:"h-5 w-5 text-gray-400 flex-shrink-0 mt-0.5"}),(0,yr.jsx)("span",{className:"text-gray-600",children:h})]}),(l.phone||l.contactPhone)&&(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)(nn,{className:"h-5 w-5 text-gray-400"}),(0,yr.jsx)("span",{children:l.phone||l.contactPhone})]}),(l.contactEmail||l.contactPerson)&&(0,yr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,yr.jsx)(aa,{className:"h-5 w-5 text-gray-400"}),(0,yr.jsx)("span",{children:l.contactEmail||l.contactPerson})]})]}),(0,yr.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3",children:[(0,yr.jsxs)("button",{onClick:()=>t("".concat(ga.ORDERS,"?store=").concat(l.id)),className:"btn btn-primary inline-flex items-center gap-2",children:[(0,yr.jsx)(Yr,{className:"h-4 w-4"}),"Voir les commandes"]}),(0,yr.jsxs)("button",{onClick:()=>t(ga.ORDER_CREATE),className:"btn btn-secondary inline-flex items-center gap-2",children:[(0,yr.jsx)(Qr,{className:"h-4 w-4"}),"Nouvelle commande"]})]})]})]})};const ff=function(){const e=ae(),{user:t}=Nr(),[s,r]=(0,n.useState)([]),[a,i]=(0,n.useState)({totalStores:0,totalOrders:0,pendingOrders:0,totalRevenue:0}),[l,o]=(0,n.useState)(!0);(0,n.useEffect)(()=>{c()},[t]);const c=async()=>{try{var e;o(!0);const s=await Sr({page:1,limit:200}),a=null!==(e=null===s||void 0===s?void 0:s.shops)&&void 0!==e?e:[];r(a);const n=a.map(e=>e.id);let l=[];for(const e of n){var t;const s=await qi({storeId:e,limit:500});l=[...l,...null!==(t=null===s||void 0===s?void 0:s.orders)&&void 0!==t?t:[]]}const c=l.filter(e=>"LIVREE"===e.status).reduce((e,t)=>e+(t.totalTTC||t.total||0),0);i({totalStores:a.length,totalOrders:l.length,pendingOrders:l.filter(e=>["NEW","AGGREGATED","SUPPLIER_ORDERED","PREPARATION","LIVRAISON"].includes(e.status)).length,totalRevenue:c})}catch(s){console.error("Erreur lors du chargement:",s)}finally{o(!1)}};if(l)return(0,yr.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,yr.jsxs)("div",{className:"text-center animate-bounce-in",children:[(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600 mx-auto mb-4"}),(0,yr.jsx)("div",{className:"absolute inset-0 rounded-full bg-primary-100 blur-xl animate-pulse"})]}),(0,yr.jsx)("p",{className:"text-gray-600 font-medium animate-pulse",children:"Chargement des donn\xe9es..."})]})});const d=[{title:"Mes Magasins",value:a.totalStores,icon:Gr,color:"primary",route:ba.STORES},{title:"Commandes totales",value:a.totalOrders,icon:Yr,color:"blue",route:ba.ORDERS},{title:"En attente",value:a.pendingOrders,icon:Qr,color:"orange",route:ba.ORDERS},{title:"Chiffre d'affaires",value:"".concat(a.totalRevenue.toFixed(2)," \u20ac"),icon:Xr,color:"green",route:ba.REPORTS}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"animate-slide-up",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-2",children:"Dashboard MANAGER"}),(0,yr.jsxs)("p",{className:"text-gray-600 text-lg",children:["Vue consolid\xe9e de vos ",a.totalStores," magasin(s)"]})]}),(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map((t,s)=>{const r=t.icon;return(0,yr.jsxs)("div",{onClick:()=>e(t.route),className:"group relative overflow-hidden card bg-gradient-to-br ".concat({primary:"from-primary-50 to-primary-100 border-primary-200 text-primary-600",blue:"from-blue-50 to-blue-100 border-blue-200 text-blue-600",green:"from-green-50 to-green-100 border-green-200 text-green-600",orange:"from-orange-50 to-orange-100 border-orange-200 text-orange-600"}[t.color]," cursor-pointer card-hover shine animate-scale-in"),style:{animationDelay:"".concat(.1*s,"s")},children:[(0,yr.jsxs)("div",{className:"flex items-center justify-between relative z-10",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 mb-1 font-medium",children:t.title}),(0,yr.jsx)("p",{className:"text-3xl font-bold text-gray-900 group-hover:scale-110 transition-transform",children:t.value})]}),(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(r,{className:"h-12 w-12 opacity-60 group-hover:opacity-100 transition-all group-hover:rotate-12 group-hover:scale-125"}),(0,yr.jsx)("div",{className:"absolute inset-0 bg-white/30 rounded-full blur-xl group-hover:bg-white/50 transition-all"})]})]}),(0,yr.jsx)("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-white/20 rounded-full blur-3xl group-hover:scale-150 transition-transform duration-500"})]},s)})}),(0,yr.jsxs)("div",{className:"card animate-slide-up shadow-lg",style:{animationDelay:"0.4s"},children:[(0,yr.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,yr.jsx)(Gr,{className:"h-6 w-6 mr-2 text-primary-600"}),"Mes Magasins"]}),0===s.length?(0,yr.jsxs)("div",{className:"text-center py-8",children:[(0,yr.jsx)(dn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Aucun magasin assign\xe9"})]}):(0,yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(t=>{var s,r,a;return(0,yr.jsxs)("div",{onClick:()=>e(ba.STORES),className:"card bg-gradient-to-br from-white to-gray-50 cursor-pointer hover:shadow-xl transition-all hover:scale-105",children:[(0,yr.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yr.jsx)("div",{className:"p-2 bg-primary-100 rounded-lg",children:(0,yr.jsx)(Gr,{className:"h-5 w-5 text-primary-600"})}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-bold text-gray-900",children:t.name}),(0,yr.jsx)("p",{className:"text-xs text-gray-500",children:t.code})]})]}),(0,yr.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,yr.jsx)("p",{children:null===(s=t.address)||void 0===s?void 0:s.street}),(0,yr.jsxs)("p",{children:[null===(r=t.address)||void 0===r?void 0:r.zipCode," ",null===(a=t.address)||void 0===a?void 0:a.city]})]})]},t.id)})})]}),(0,yr.jsxs)("div",{className:"card animate-slide-up shadow-lg",style:{animationDelay:"0.6s"},children:[(0,yr.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,yr.jsx)(sa,{className:"h-6 w-6 mr-2 text-primary-600"}),"Actions rapides"]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,yr.jsxs)("button",{onClick:()=>e(ba.STORES),className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white px-6 py-4 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center justify-center space-x-2",children:[(0,yr.jsx)(Gr,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"G\xe9rer mes magasins"})]}),(0,yr.jsxs)("button",{onClick:()=>e(ba.ORDERS),className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-4 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center justify-center space-x-2",children:[(0,yr.jsx)(Yr,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Commandes"})]}),(0,yr.jsxs)("button",{onClick:()=>e(ba.STOCKS),className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white px-6 py-4 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center justify-center space-x-2",children:[(0,yr.jsx)(Qr,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Stocks"})]}),(0,yr.jsxs)("button",{onClick:()=>e(ba.REPORTS),className:"group btn-ripple relative overflow-hidden bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-4 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center justify-center space-x-2",children:[(0,yr.jsx)(sa,{className:"h-5 w-5 group-hover:rotate-12 transition-transform"}),(0,yr.jsx)("span",{className:"font-semibold",children:"Rapports"})]})]})]})]})};const gf=function(){const{user:e}=Nr(),{toast:t,showToast:s,hideToast:r,showSuccess:a,showError:i}=mn(),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)("");(0,n.useEffect)(()=>{m()},[e]);const m=async()=>{try{var e;d(!0);const t=await Sr({page:1,limit:200});o(null!==(e=null===t||void 0===t?void 0:t.shops)&&void 0!==e?e:[])}catch(t){i("Erreur lors du chargement des magasins"),console.error(t)}finally{d(!1)}},p=l.filter(e=>{var t,s;if(!u)return!0;const r=u.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(s=e.city)||void 0===s?void 0:s.toLowerCase().includes(r))||e.address&&String(e.address).toLowerCase().includes(r)}),x=[{key:"name",label:"Magasin",render:e=>(0,yr.jsx)("div",{children:(0,yr.jsx)("p",{className:"font-semibold text-gray-900",children:e})})},{key:"address",label:"Adresse",render:(e,t)=>(0,yr.jsxs)("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[(0,yr.jsx)(on,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,yr.jsx)("span",{children:[e,null===t||void 0===t?void 0:t.postalCode,null===t||void 0===t?void 0:t.city].filter(Boolean).join(", ")||"\u2014"})]})},{key:"phone",label:"Contact",render:(e,t)=>(0,yr.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(e||(null===t||void 0===t?void 0:t.contactPhone))&&(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)(nn,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:e||(null===t||void 0===t?void 0:t.contactPhone)})]}),((null===t||void 0===t?void 0:t.contactEmail)||(null===t||void 0===t?void 0:t.contactPerson))&&(0,yr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yr.jsx)(aa,{className:"h-4 w-4"}),(0,yr.jsx)("span",{children:(null===t||void 0===t?void 0:t.contactEmail)||(null===t||void 0===t?void 0:t.contactPerson)})]}),!e&&!(null!==t&&void 0!==t&&t.contactPhone)&&!(null!==t&&void 0!==t&&t.contactEmail)&&!(null!==t&&void 0!==t&&t.contactPerson)&&"\u2014"]})}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mes Magasins"}),(0,yr.jsxs)("p",{className:"text-gray-600",children:["Liste de vos ",l.length," magasin(s)"]})]})}),(0,yr.jsx)("div",{className:"card",children:(0,yr.jsxs)("div",{className:"relative",children:[(0,yr.jsx)(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,yr.jsx)("input",{type:"text",placeholder:"Rechercher un magasin (nom, ville)...",value:u,onChange:e=>h(e.target.value),className:"input pl-10"})]})}),(0,yr.jsx)(Xi,{data:p,columns:x,currentPage:1,totalPages:1,total:p.length,onPageChange:()=>{},loading:c,emptyMessage:"Aucun magasin trouv\xe9"}),(0,yr.jsx)(hn,Yt(Yt({},t),{},{onClose:r}))]})};const bf=function(){return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Commandes"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Toutes les commandes de vos magasins"})]}),(0,yr.jsxs)("div",{className:"card text-center py-16",children:[(0,yr.jsx)(Yr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,yr.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Page en d\xe9veloppement"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Affichera les commandes de tous vos magasins"})]})]})};const yf=function(){return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Stocks"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Stocks consolid\xe9s de vos magasins"})]}),(0,yr.jsxs)("div",{className:"card text-center py-16",children:[(0,yr.jsx)(Qr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,yr.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Page en d\xe9veloppement"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Affichera les stocks agr\xe9g\xe9s de tous vos magasins"})]})]})};const vf=function(){const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(null),[a,i]=(0,n.useState)([]),[l,o]=(0,n.useState)("all"),[c,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{u()},[l]);const u=async()=>{try{var e,s;d(!0);const a=await Sr({page:1,limit:200});i(null!==(e=null===a||void 0===a?void 0:a.shops)&&void 0!==e?e:[]);const n={limit:2e3};"all"!==l&&(n.storeId=l);const o=await yl(n),c=null!==(s=null===o||void 0===o?void 0:o.orders)&&void 0!==s?s:[];t(c);const u=c.reduce((e,t)=>{var s;return e+(null!==(s=t.totalTTC)&&void 0!==s?s:0)},0),h=c.reduce((e,t)=>{var s,r,a;return e+(null!==(s=t.totalMargin)&&void 0!==s?s:(null!==(r=t.totalTTC)&&void 0!==r?r:0)-(null!==(a=t.totalHT)&&void 0!==a?a:0))},0);r({totalRevenue:u,totalMargin:h,totalSales:c.length,averageMarginPercent:u?Math.round(h/u*100):0})}catch(a){console.error(a)}finally{d(!1)}};return c?(0,yr.jsx)("div",{className:"flex justify-center py-20",children:(0,yr.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-200 border-t-primary-600"})}):(0,yr.jsxs)("div",{className:"space-y-6",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Ventes Magasins"}),s&&(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"CA Total"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold",children:[s.totalRevenue.toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-200",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Marge"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold",children:[s.totalMargin.toFixed(2)," \u20ac"]})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-2 border-purple-200",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Ventes"}),(0,yr.jsx)("p",{className:"text-3xl font-bold",children:s.totalSales})]}),(0,yr.jsxs)("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-2 border-orange-200",children:[(0,yr.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Marge %"}),(0,yr.jsxs)("p",{className:"text-3xl font-bold",children:[s.averageMarginPercent,"%"]})]})]}),(0,yr.jsxs)("div",{className:"card",children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Magasin"}),(0,yr.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"w-full",children:[(0,yr.jsx)("option",{value:"all",children:"Tous mes magasins"}),a.map(e=>(0,yr.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,yr.jsx)("div",{className:"card overflow-x-auto",children:(0,yr.jsxs)("table",{className:"w-full",children:[(0,yr.jsx)("thead",{className:"bg-gray-50",children:(0,yr.jsxs)("tr",{children:[(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"N\xb0 Vente"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Date"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Magasin"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Prix achat"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Prix vente"}),(0,yr.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Marge"})]})}),(0,yr.jsx)("tbody",{className:"divide-y",children:e.map(e=>{var t,s,r,a,n,i;const l=null!==(t=e.totalTTC)&&void 0!==t?t:0,o=null!==(s=e.totalHT)&&void 0!==s?s:0,c=null!==(r=e.totalMargin)&&void 0!==r?r:l-o;return(0,yr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yr.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:e.orderNumber||(null===(a=e.id)||void 0===a?void 0:a.slice(0,8))}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm",children:e.createdAt?"".concat(Ui(new Date(e.createdAt),"dd/MM/yyyy")," ").concat(Ui(new Date(e.createdAt),"HH:mm")):"\u2014"}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm",children:null!==(n=null===(i=e.shop)||void 0===i?void 0:i.name)&&void 0!==n?n:"\u2014"}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-sm text-right",children:[o.toFixed(2)," \u20ac"]}),(0,yr.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-semibold",children:[l.toFixed(2)," \u20ac"]}),(0,yr.jsx)("td",{className:"px-4 py-3 text-sm text-right",children:(0,yr.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:["+",c.toFixed(2)," \u20ac"]})})]},e.id)})})]})})]})};const jf=function(){return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rapports"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Analyses consolid\xe9es de vos magasins"})]}),(0,yr.jsxs)("div",{className:"card text-center py-16",children:[(0,yr.jsx)(sa,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,yr.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Page en d\xe9veloppement"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Cette section contiendra des rapports d\xe9taill\xe9s pour tous vos magasins"})]})]})};const Nf=function(){var e,t,s,r,a,i;const{user:l}=Nr(),{toast:o,showToast:c,hideToast:d,showSuccess:u,showError:h}=mn(),[m,p]=(0,n.useState)("profile"),[x,f]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),y=useRef(null),v=(null===l||void 0===l||null===(e=l.name)||void 0===e?void 0:e.split(" "))||[],[j,N]=(0,n.useState)({firstName:v[0]||"",lastName:v.slice(1).join(" ")||"",email:(null===l||void 0===l?void 0:l.email)||"",phone:(null===l||void 0===l?void 0:l.phone)||""});(0,n.useEffect)(()=>{gr().catch(()=>{})},[]),(0,n.useEffect)(()=>{if(l){var e;const t=(null===(e=l.name)||void 0===e?void 0:e.split(" "))||[];N({firstName:t[0]||"",lastName:t.slice(1).join(" ")||"",email:l.email||"",phone:l.phone||""})}},[l]);const[w,k]=(0,n.useState)({current:"",new:"",confirm:""}),S=[{id:"profile",label:"Profil",icon:za},{id:"security",label:"S\xe9curit\xe9",icon:an}];return(0,yr.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,yr.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 animate-slide-up",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:"Param\xe8tres"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Gestion de votre compte"})]}),(0,yr.jsx)("div",{className:"flex flex-wrap gap-2",children:S.map(e=>{const t=e.icon,s=m===e.id;return(0,yr.jsxs)("button",{onClick:()=>p(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-300 ".concat(s?"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:[(0,yr.jsx)(t,{className:"h-4 w-4"}),(0,yr.jsx)("span",{className:"text-sm",children:e.label})]},e.id)})})]}),(0,yr.jsxs)("div",{children:["profile"===m&&(0,yr.jsxs)("div",{className:"animate-scale-in space-y-4 p-6 bg-white rounded-xl shadow-md card-hover",children:[(0,yr.jsxs)("div",{className:"flex items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[(0,yr.jsx)("input",{ref:y,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:async e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){b(!0);try{await Pn(s),u("Photo de profil mise \xe0 jour.")}catch(r){h((null===r||void 0===r?void 0:r.message)||"Erreur lors du t\xe9l\xe9versement.")}finally{b(!1),e.target.value=""}}}}),(0,yr.jsxs)("div",{className:"relative group",children:[(0,yr.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-xl font-bold overflow-hidden",children:null!==l&&void 0!==l&&l.avatarUrl?(0,yr.jsx)("img",{src:l.avatarUrl,alt:"",className:"w-full h-full object-cover"}):(0,yr.jsxs)("span",{children:[(null===(t=j.firstName)||void 0===t?void 0:t.charAt(0))||(null===l||void 0===l||null===(s=l.name)||void 0===s?void 0:s.charAt(0))||"U",(null===(r=j.lastName)||void 0===r?void 0:r.charAt(0))||(null===l||void 0===l||null===(a=l.name)||void 0===a||null===(i=a.split(" ")[1])||void 0===i?void 0:i.charAt(0))||""]})}),(0,yr.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.click()},disabled:g,className:"absolute -bottom-1 -right-1 p-1.5 bg-white rounded-full shadow border-2 border-primary-500 hover:bg-gray-50 disabled:opacity-50",title:"Changer la photo",children:g?(0,yr.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-2 border-primary-500 border-t-transparent"}):(0,yr.jsx)(Px,{className:"h-3 w-3 text-primary-600"})})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("h3",{className:"font-semibold text-gray-900",children:(null===l||void 0===l?void 0:l.name)||"".concat(j.firstName," ").concat(j.lastName).trim()}),(0,yr.jsx)("p",{className:"text-sm text-gray-500",children:null===l||void 0===l?void 0:l.email})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pr\xe9nom *"}),(0,yr.jsx)("input",{type:"text",value:j.firstName,onChange:e=>N(Yt(Yt({},j),{},{firstName:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom *"}),(0,yr.jsx)("input",{type:"text",value:j.lastName,onChange:e=>N(Yt(Yt({},j),{},{lastName:e.target.value})),className:"input"})]})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,yr.jsx)("input",{type:"email",value:j.email,className:"input bg-gray-50",disabled:!0})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"T\xe9l\xe9phone"}),(0,yr.jsx)("input",{type:"tel",value:j.phone,onChange:e=>N(Yt(Yt({},j),{},{phone:e.target.value})),className:"input"})]})]}),(0,yr.jsx)("div",{className:"flex justify-end pt-4",children:(0,yr.jsx)("button",{onClick:async()=>{f(!0);try{const e={name:"".concat(j.firstName||""," ").concat(j.lastName||"").trim()||l.name,phone:j.phone||null};await Mn(e),u("Profil mis \xe0 jour")}catch(e){h("Erreur")}finally{f(!1)}},disabled:x,className:"btn btn-primary",children:x?"Sauvegarde...":"Enregistrer"})})]}),"security"===m&&(0,yr.jsxs)("div",{className:"animate-scale-in space-y-4 p-6 bg-white rounded-xl shadow-md card-hover",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe actuel *"}),(0,yr.jsx)("input",{type:"password",value:w.current,onChange:e=>k(Yt(Yt({},w),{},{current:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nouveau mot de passe *"}),(0,yr.jsx)("input",{type:"password",value:w.new,onChange:e=>k(Yt(Yt({},w),{},{new:e.target.value})),className:"input"})]}),(0,yr.jsxs)("div",{children:[(0,yr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer *"}),(0,yr.jsx)("input",{type:"password",value:w.confirm,onChange:e=>k(Yt(Yt({},w),{},{confirm:e.target.value})),className:"input"})]})]}),(0,yr.jsx)("div",{className:"flex justify-end pt-4",children:(0,yr.jsx)("button",{onClick:async()=>{if(w.new===w.confirm){f(!0);try{await An(w.current,w.new),u("Mot de passe modifi\xe9"),k({current:"",new:"",confirm:""})}catch(e){h("Erreur")}finally{f(!1)}}else h("Les mots de passe ne correspondent pas")},disabled:x,className:"btn btn-danger",children:x?"Modification...":"Modifier le mot de passe"})})]})]}),(0,yr.jsx)(hn,Yt(Yt({},o),{},{onClose:d}))]})},wf=Br("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),kf=Br("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Sf=Br("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Cf=Br("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ef=Br("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),_f="support@fatah-commander.cloud";const Tf=function(){const e=(0,n.useRef)(null),t=()=>{var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})};return(0,yr.jsxs)("div",{className:"space-y-8",children:[(0,yr.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Centre d'Aide"}),(0,yr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yr.jsxs)("button",{type:"button",onClick:t,className:"card card-hover text-center transition-all hover:shadow-lg hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,yr.jsx)(wf,{className:"h-16 w-16 text-primary-600 mx-auto mb-4"}),(0,yr.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Documentation"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Guides et FAQ"}),(0,yr.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-primary-600 mt-2",children:["Voir la FAQ ",(0,yr.jsx)(tl,{className:"h-4 w-4"})]})]}),(0,yr.jsxs)("button",{type:"button",onClick:t,className:"card card-hover text-center transition-all hover:shadow-lg hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,yr.jsx)(kf,{className:"h-16 w-16 text-blue-600 mx-auto mb-4"}),(0,yr.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Tutoriels"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Comment utiliser la plateforme"}),(0,yr.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-blue-600 mt-2",children:["Voir la FAQ ",(0,yr.jsx)(Sf,{className:"h-4 w-4"})]})]}),(0,yr.jsxs)("button",{type:"button",onClick:t,className:"card card-hover text-center transition-all hover:shadow-lg hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,yr.jsx)(Cf,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),(0,yr.jsx)("h3",{className:"font-bold text-lg mb-2",children:"FAQ"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Questions fr\xe9quentes"})]}),(0,yr.jsxs)("a",{href:"mailto:".concat(_f),className:"card card-hover text-center transition-all hover:shadow-lg hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-primary-500 no-underline text-inherit",children:[(0,yr.jsx)(Ef,{className:"h-16 w-16 text-orange-600 mx-auto mb-4"}),(0,yr.jsx)("h3",{className:"font-bold text-lg mb-2",children:"Support"}),(0,yr.jsx)("p",{className:"text-sm text-gray-600",children:"Contactez-nous"}),(0,yr.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-orange-600 mt-2",children:[(0,yr.jsx)(aa,{className:"h-4 w-4"})," ",_f]})]})]}),(0,yr.jsxs)("div",{className:"card scroll-mt-8",ref:e,children:[(0,yr.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Questions Fr\xe9quentes"}),(0,yr.jsxs)("div",{className:"space-y-4",children:[(0,yr.jsxs)("details",{className:"group p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,yr.jsxs)("summary",{className:"font-semibold cursor-pointer list-none flex items-center justify-between",children:["Comment passer une commande ?",(0,yr.jsx)(tl,{className:"h-5 w-5 text-gray-400 group-open:rotate-180 transition-transform"})]}),(0,yr.jsxs)("p",{className:"mt-3 text-gray-600",children:["En tant que ",(0,yr.jsx)("strong",{children:"client"}),", les commandes peuvent \xeatre pass\xe9es entre 12h et 20h. Rendez-vous dans \xab Commandes \xbb \u2192 \xab Nouvelle commande \xbb, choisissez votre magasin, ajoutez les produits au panier puis validez. Vous recevrez une confirmation par email."]})]}),(0,yr.jsxs)("details",{className:"group p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,yr.jsxs)("summary",{className:"font-semibold cursor-pointer list-none flex items-center justify-between",children:["Quand puis-je voir mes commandes en tant qu'ADMIN ?",(0,yr.jsx)(tl,{className:"h-5 w-5 text-gray-400 group-open:rotate-180 transition-transform"})]}),(0,yr.jsx)("p",{className:"mt-3 text-gray-600",children:"Les commandes des magasins sont visibles \xe0 partir de 00h00 le lendemain. L'ADMIN agr\xe8ge les commandes, cr\xe9e les commandes fournisseur et suit la pr\xe9paration jusqu'\xe0 la livraison."})]}),(0,yr.jsxs)("details",{className:"group p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,yr.jsxs)("summary",{className:"font-semibold cursor-pointer list-none flex items-center justify-between",children:["Quelle est la fen\xeatre de livraison recommand\xe9e ?",(0,yr.jsx)(tl,{className:"h-5 w-5 text-gray-400 group-open:rotate-180 transition-transform"})]}),(0,yr.jsxs)("p",{className:"mt-3 text-gray-600",children:["La fen\xeatre optimale est de ",(0,yr.jsx)("strong",{children:"10h \xe0 12h"}),". Les commandes sont pr\xe9par\xe9es la veille et livr\xe9es le lendemain matin. Vous recevez une notification lors de la fen\xeatre de livraison."]})]}),(0,yr.jsxs)("details",{className:"group p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,yr.jsxs)("summary",{className:"font-semibold cursor-pointer list-none flex items-center justify-between",children:["Comment g\xe9rer mes magasins (client) ?",(0,yr.jsx)(tl,{className:"h-5 w-5 text-gray-400 group-open:rotate-180 transition-transform"})]}),(0,yr.jsx)("p",{className:"mt-3 text-gray-600",children:"Allez dans \xab Magasins \xbb pour voir la liste de vos magasins, leurs adresses et statistiques. Vous pouvez cliquer sur \xab Voir les d\xe9tails \xbb pour un magasin ou \xab Commandes \xbb pour filtrer les commandes par magasin."})]}),(0,yr.jsxs)("details",{className:"group p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,yr.jsxs)("summary",{className:"font-semibold cursor-pointer list-none flex items-center justify-between",children:["Mon email n'est pas v\xe9rifi\xe9, que faire ?",(0,yr.jsx)(tl,{className:"h-5 w-5 text-gray-400 group-open:rotate-180 transition-transform"})]}),(0,yr.jsx)("p",{className:"mt-3 text-gray-600",children:"Dans \xab Param\xe8tres \xbb, utilisez \xab Renvoyer l'email de v\xe9rification \xbb. Consultez votre bo\xeete de r\xe9ception et les spams, puis cliquez sur le lien re\xe7u. Une fois v\xe9rifi\xe9, l'alerte dispara\xeet."})]})]})]})]})};function Rf(){const{user:e,loading:t}=Nr();if(t)return(0,yr.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,yr.jsxs)("div",{className:"text-center",children:[(0,yr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,yr.jsx)("p",{className:"text-gray-600",children:"Chargement..."})]})});if(!e)return(0,yr.jsxs)(we,{children:[(0,yr.jsx)(je,{path:pa,element:(0,yr.jsx)(pn,{})}),(0,yr.jsx)(je,{path:xa,element:(0,yr.jsx)(gn,{})}),(0,yr.jsx)(je,{path:"*",element:(0,yr.jsx)(ve,{to:pa,replace:!0})})]});const s=va(e.role);return(0,yr.jsx)(Ba,{children:(0,yr.jsxs)(we,{children:[(0,yr.jsx)(je,{path:xa,element:(0,yr.jsx)(gn,{})}),(0,yr.jsx)(je,{path:fa.DASHBOARD,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(jn,{})})}),(0,yr.jsx)(je,{path:fa.CLIENTS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(Cn,{})})}),(0,yr.jsx)(je,{path:fa.STORES,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(Dn,{})})}),(0,yr.jsx)(je,{path:fa.ORDERS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)($i,{})})}),(0,yr.jsx)(je,{path:fa.PRODUCTS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(el,{})})}),(0,yr.jsx)(je,{path:fa.CATEGORIES,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(ol,{})})}),(0,yr.jsx)(je,{path:fa.SUPPLIERS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(bl,{})})}),(0,yr.jsx)(je,{path:fa.SALES,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(jl,{})})}),(0,yr.jsx)(je,{path:fa.REPORTS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(Rl,{})})}),(0,yr.jsx)(je,{path:fa.ANALYTICS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(mx,{})})}),(0,yr.jsx)(je,{path:fa.EXPORTS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(xx,{})})}),(0,yr.jsx)(je,{path:fa.EMAILS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(fx,{})})}),(0,yr.jsx)(je,{path:fa.ORDERS_AGGREGATE,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(yx,{})})}),(0,yr.jsx)(je,{path:fa.SUPPLIER_ORDERS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(vx,{})})}),(0,yr.jsx)(je,{path:fa.USERS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(Bi,{})})}),(0,yr.jsx)(je,{path:fa.PRICING,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(gx,{})})}),(0,yr.jsx)(je,{path:fa.INVOICES,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(Cx,{})})}),(0,yr.jsx)(je,{path:fa.RETURNS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(Ex,{})})}),(0,yr.jsx)(je,{path:fa.PAYMENTS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(Rx,{})})}),(0,yr.jsx)(je,{path:fa.NOTIFICATIONS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(Mx,{})})}),(0,yr.jsx)(je,{path:fa.SETTINGS,element:(0,yr.jsx)(sn,{requiredRole:"ADMIN",children:(0,yr.jsx)(Lx,{})})}),(0,yr.jsx)(je,{path:ga.DASHBOARD,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(zx,{})})}),(0,yr.jsx)(je,{path:ga.ORDERS,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",requiredResource:"orders",requiredAction:"read",children:(0,yr.jsx)(Ux,{})})}),(0,yr.jsx)(je,{path:ga.STORES,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(Wx,{})})}),(0,yr.jsx)(je,{path:ga.FINANCES,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(nf,{})})}),(0,yr.jsx)(je,{path:ga.PRODUCTS,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(Yx,{})})}),(0,yr.jsx)(je,{path:ga.STOCKS,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(Gx,{})})}),(0,yr.jsx)(je,{path:ga.USERS,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(of,{})})}),(0,yr.jsx)(je,{path:ga.PREPARATION,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(qx,{})})}),(0,yr.jsx)(je,{path:ga.SALES,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(Qx,{})})}),(0,yr.jsx)(je,{path:ga.DELIVERIES,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(ef,{})})}),(0,yr.jsx)(je,{path:ga.CUSTOMERS,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(Kx,{})})}),(0,yr.jsx)(je,{path:ga.NOTIFICATIONS,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(lf,{})})}),(0,yr.jsx)(je,{path:ga.PROMOTIONS,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(Zx,{})})}),(0,yr.jsx)(je,{path:ga.SETTINGS,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(cf,{})})}),(0,yr.jsx)(je,{path:ba.DASHBOARD,element:(0,yr.jsx)(sn,{requiredRole:"MANAGER",children:(0,yr.jsx)(ff,{})})}),(0,yr.jsx)(je,{path:ba.STORES,element:(0,yr.jsx)(sn,{requiredRole:"MANAGER",children:(0,yr.jsx)(gf,{})})}),(0,yr.jsx)(je,{path:ba.ORDERS,element:(0,yr.jsx)(sn,{requiredRole:"MANAGER",children:(0,yr.jsx)(bf,{})})}),(0,yr.jsx)(je,{path:ba.STOCKS,element:(0,yr.jsx)(sn,{requiredRole:"MANAGER",children:(0,yr.jsx)(yf,{})})}),(0,yr.jsx)(je,{path:ba.SALES,element:(0,yr.jsx)(sn,{requiredRole:"MANAGER",children:(0,yr.jsx)(vf,{})})}),(0,yr.jsx)(je,{path:ba.REPORTS,element:(0,yr.jsx)(sn,{requiredRole:"MANAGER",children:(0,yr.jsx)(jf,{})})}),(0,yr.jsx)(je,{path:ba.SETTINGS,element:(0,yr.jsx)(sn,{requiredRole:"MANAGER",children:(0,yr.jsx)(Nf,{})})}),(0,yr.jsx)(je,{path:ya,element:(0,yr.jsx)(Tf,{})}),"CLIENT"===e.role&&(0,yr.jsxs)(yr.Fragment,{children:[(0,yr.jsx)(je,{path:ga.ORDER_CREATE,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",requiredResource:"orders",requiredAction:"create",children:(0,yr.jsx)(hf,{})})}),(0,yr.jsx)(je,{path:ga.ORDER_DETAIL,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(pf,{})})}),(0,yr.jsx)(je,{path:ga.STORE_DETAIL,element:(0,yr.jsx)(sn,{requiredRole:"CLIENT",children:(0,yr.jsx)(xf,{})})})]}),(0,yr.jsx)(je,{path:"/",element:(0,yr.jsx)(ve,{to:s,replace:!0})}),(0,yr.jsx)(je,{path:"*",element:(0,yr.jsx)(ve,{to:s,replace:!0})})]})})}const Mf=function(){return(0,yr.jsx)(Dr,{children:(0,yr.jsx)(jr,{children:(0,yr.jsx)(Er,{children:(0,yr.jsx)(Rr,{children:(0,yr.jsx)(Pr,{children:(0,yr.jsx)(Ae,{children:(0,yr.jsx)(Rf,{})})})})})})})};l.createRoot(document.getElementById("root")).render((0,yr.jsx)(n.StrictMode,{children:(0,yr.jsx)(Mf,{})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.getRegistrations().then(e=>{e.forEach(e=>{e.unregister().then(()=>{console.log("\ud83e\uddf9 Ancien Service Worker d\xe9sinscrit")})})}).then(()=>new Promise(e=>setTimeout(e,100))).then(()=>navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(e=>(console.log("\u2705 Service Worker enregistr\xe9 avec succ\xe8s:",e.scope),setInterval(()=>{e.update()},6e4),e))).catch(e=>{console.log("\u274c \xc9chec de l'enregistrement du Service Worker:",e.message)})})})();
//# sourceMappingURL=main.40eb33c6.js.map